/*! For license information please see backgroundCollapse~materialCollapse~mineCollapse.d2159f10.chunk.js.LICENSE.txt */
(this["webpackJsonpimage-editor"]=this["webpackJsonpimage-editor"]||[]).push([[0],{1204:function(t,e,r){"use strict";var n=r(0),i="data-track-";e.a=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length?arguments[2]:void 0;Object(n.useLayoutEffect)((function(){window.setTimeout((function(){var n,c;e.length&&(n=document.getElementById(t))&&(n=n.querySelectorAll("[data-type='track']"),c=new IntersectionObserver((function(t){t.forEach((function(t){var e,n=t.target.getAttributeNames().filter((function(t){return-1!==t.indexOf(i)}));t.isIntersecting&&!t.target.getAttribute("data-track")&&(e={},n.forEach((function(r){var n=t.target.getAttribute(r);r=r.replace(i,"");e[r]=n})),t.target.setAttribute("data-track","true"),r&&r(e),c.unobserve(t.target))}))}),{rootMargin:"0px",threshold:.5}),n.forEach((function(t){c.observe(t)})))}),0)}),[e])}},1208:function(t,e,r){"use strict";var n=r(13),i=r(0),c=r.n(i),a=r(151),o=r(7);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){var n,i;n=t,i=r[e],e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(b="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=b.asyncIterator||"@@asyncIterator",c=b.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function o(t,e,r,n){var i,c,a,o;e=e&&e.prototype instanceof f?e:f,e=Object.create(e.prototype),n=new y(n||[]);return e._invoke=(i=t,c=r,a=n,o="suspendedStart",function(t,e){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return l;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}return"throw"===(n=s(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,l):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,l):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}(r,a),r)){if(r===l)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(o="executing","normal"===(r=s(i,c,a)).type){if(o=a.done?"completed":"suspendedYield",r.arg===l)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(o="completed",a.method="throw",a.arg=r.arg)}}),e}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=o;var l={};function f(){}function h(){}function p(){}var b,j,g=((j=(j=(a(b={},n,(function(){return this})),Object.getPrototypeOf))&&j(j(_([]))))&&j!==e&&r.call(j,n)&&(b=j),p.prototype=f.prototype=Object.create(b));function m(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){var n;this._invoke=function(i,c){function a(){return new e((function(n,a){!function n(i,c,a,o){var l;if("throw"!==(i=s(t[i],t,c)).type)return(c=(l=i.arg).value)&&"object"==u(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,o)}),(function(t){n("throw",t,a,o)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,o)}));o(i.arg)}(i,c,n,a)}))}return n=n?n.then(a,a):a()}}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e,i=t[n];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(i=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=i}return{next:x}}function x(){return{value:void 0,done:!0}}return a(g,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(v.prototype),a(v.prototype,i,(function(){return this})),t.AsyncIterator=v,t.async=function(e,r,n,i,c){void 0===c&&(c=Promise);var a=new v(o(e,r,n,i),c);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),a(g,c,"Generator"),a(g,n,(function(){return this})),a(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,y.prototype={constructor:y,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;0<=i;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var o=r.call(c,"catchLoc"),u=r.call(c,"finallyLoc");if(o&&u){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(o){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var c=i;break}}var a=(c=c&&("break"===t||"continue"===t)&&c.tryLoc<=e&&e<=c.finallyLoc?null:c)?c.completion:{};return a.type=t,a.arg=e,c?(this.method="next",this.next=c.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(r=i.completion).type&&(n=r.arg,w(i)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function f(t,e,r,n,i,c,a){try{var o=t[c](a),u=o.value}catch(t){return void r(t)}o.done?e(u):Promise.resolve(u).then(n,i)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var c=t.apply(e,r);function a(t){f(c,n,i,a,o,"next",t)}function o(t){f(c,n,i,a,o,"throw",t)}a(void 0)}))}}var p=["image/jpeg","image/jpg","image/png","image/heic"];e.a=function(t){var e=t.onSuccess,i=t.onChange,u=t.onError,s=t.beforeUpload,f=t.disabled,b=t.children,j=t.tips,g=void 0===(g=t.tipsPlacement)?"bottom":g,m=void 0===(t=t.maxCount)?1:t;t={name:"file",accept:p.join(","),disabled:f,maxCount:m,multiple:1<m,showUploadList:!1,headers:{authorization:"authorization-text"},customRequest:function(t){return h(d().mark((function i(){var c,s,l,f,h;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,c=null==(s=t.file)?void 0:s.uid,"image/heic"===t.file.type)return i.prev=3,i.next=6,r.e(26).then(r.t.bind(null,689,7));i.next=18;break;case 6:return s=i.sent.default,i.next=9,s({blob:t.file,toType:"image/jpg",quality:1});case 9:return l=i.sent,i.next=12,Object(o.h)(l);case 12:t.file=i.sent,i.next=18;break;case 15:i.prev=15,i.t0=i.catch(3),n.i.error("HEIC\u56fe\u7247\u89e3\u6790\u5931\u8d25\uff0c\u5efa\u8bae\u60a8\u8f6c\u6362\u4e3a\u5176\u4ed6\u56fe\u7247\u683c\u5f0f\u4e0a\u4f20");case 18:return i.next=20,Object(a.d)(t.file);case 20:f=i.sent,(h=new Image).src=f.url,h.onload=function(){var t=h.width,r=h.height;e(f.url,{width:t,height:r},c)},i.next=29;break;case 26:i.prev=26,i.t1=i.catch(0),u&&u("network",t);case 29:case"end":return i.stop()}}),i,null,[[0,26],[3,15]])})))()},beforeUpload:function(t,e){return h(d().mark((function r(){var i,c;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(m&&e.length>m)return n.i.error("\u6bcf\u6b21\u6700\u591a\u5141\u8bb8\u4e0a\u4f20"+m+"\u5f20"),r.abrupt("return",!1);r.next=3;break;case 3:return i=p.includes(t.type),(c=t.size/1024/1024<20)||(n.i.error("\u4ec5\u652f\u630120M\u4ee5\u5185\u7684\u56fe\u7247"),u&&u("size")),i||(n.i.error("\u4ec5\u652f\u6301jpg,png,heic\u56fe\u7247"),u&&u("size")),c&&i&&s&&s(),r.abrupt("return",i&&c);case 9:case"end":return r.stop()}}),r)})))()},onChange:function(t){"uploading"===t.file.status&&i&&i(t.file),"done"===t.file.status?n.i.success("".concat(t.file.name," file uploaded successfully")):"error"===t.file.status&&n.i.error("".concat(t.file.name," file upload failed."))},tips:j};return c.a.createElement(n.x,{title:j,placement:g},c.a.createElement(n.y,l({},t),b))}},1226:function(t,e,r){"use strict";var n=r(3),i=r(5),c=r(16),a=r(4),o=r(11),u=r(8),s=r(0),l=r.n(s),d=r(13),f=(r(1254),r(1208)),h=r(18),p=r(177),b=r(10),j=r(29),g=r(515),m=r(43),v=r(9),O=r.n(v),w=r(1204),y=r(349),_=r(23),x=r(123),k=r(172),L=r(124),E=r(178),S=r(151),N=r(64),A=r(89),C=r(19),P=r(496),I=r(45),R=r(1),U=function(t){return t.ALL="0",t.MATERIAL="1",t.BACKGROUND="2",t}({});e.a=l.a.memo((function(t){function e(t,e){var r=l.reduce((function(e,r){return null!=r&&r.blobUrl||(e[+r.id]=t),e}),{});$(r)}var r=void 0===(t=t.source)?"1":t,l=(t=Object(s.useState)([]),(t=Object(u.a)(t,2))[0]),v=t[1],D=Object(s.useRef)([]),T=(t=Object(s.useState)(!1),(t=Object(u.a)(t,2))[0],t[1]),M=(t=Object(s.useState)(!1),(t=Object(u.a)(t,2))[0]),G=t[1],B=(t=Object(s.useState)(!1),(t=Object(u.a)(t,2))[0]),F=t[1],z=(t=Object(s.useState)(""),(t=Object(u.a)(t,2))[0]),H=t[1],K=(t=Object(b.o)().getActivePickLayer,Object(I.d)()),q=Object(g.a)().addImgToLayers,W=(Object(m.a)(),Object(b.f)().delActiveLayer),Y=Object(m.h)().id,J=(Q=Object(m.b)()).width,V=Q.height,X=(t(),Object(j.i)(),Object(y.b)().setDragData),Q=Object(s.useState)({}),Z=(t=Object(u.a)(Q,2))[0],$=t[1],tt=(0,Object(A.b)().showUserInfo)(),et=(Q=Object(h.c)((function(t){return t.editor.collapseModel.currentType})),Object(h.c)((function(t){return t.editor.mineCollapseModel.dragInfo})),Object(h.b)((function(t){return t.editor.mineCollapseModel.setDragInfo}))),rt=Object(s.useRef)({targetId:"",currentUrl:"",isRelease:!1}),nt=Object(k.e)(),it=Object(P.a)().filesUpload,ct=(Object(s.useEffect)((function(){D.current=l}),[l]),function(){var t=Object(o.a)(Object(a.a)().mark((function t(){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window._stat_track("hb_delete_backwindow_show",{"\u6765\u6e90":"\u6211\u7684"}),d.j.confirm({title:"\u5220\u9664\u63d0\u793a",content:"\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u91cd\u65b0\u627e\u56de\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c",okText:"\u786e\u8ba4\u5220\u9664",cancelText:"\u53d6\u6d88",centered:!0,closable:!0,onOk:function(){var t=Object(o.a)(Object(a.a)().mark((function t(){var e;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object.keys(Z).filter((function(t){return Z[+t]})),t.next=3,Object(p.a)({id:e.join(",")});case 3:v(D.current.filter((function(t){return!e.includes("".concat(t.id))}))),$({}),d.i.success("\u5220\u9664\u6210\u529f"),window._stat_track("hb_delete_backwindow_click",{"\u6765\u6e90":"\u6211\u7684","\u5206\u7c7b":"\u786e\u8ba4\u5220\u9664"});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onCancel:function(){window._stat_track("hb_delete_backwindow_click",{"\u6765\u6e90":"\u6211\u7684","\u5206\u7c7b":"\u53d6\u6d88"})}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),at=function(){var t=Object(o.a)(Object(a.a)().mark((function t(){var e,n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,G(!0),t.next=4,Object(p.c)({source:r,cursor:z,count:100,module:"1"});case 4:e=t.sent,(n=e.data.data.materials).length&&(v(D.current.concat(n)),F(""!==e.data.data.cursor),H(e.data.data.cursor||"")),G(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),G(!1);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),ot=(t={maxCount:10,children:Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(d.a,{type:"primary",onClick:function(t){tt||(t.stopPropagation(),Object(N.e)()),window._stat_track("tpbj_subfunction_click",{record:Y,func_id:"14_82"}),window._stat_track("tpbj_subfunction_tick",{record:Y,func_id:"14_82"})},children:[Object(R.jsx)(d.d,{name:"plus",fontSize:20}),r===U.ALL?"\u6dfb\u52a0\u7d20\u6750":"\u6dfb\u52a0\u56fe\u7247"]})}),disabled:!1,onChange:function(t){T(!0);var e=(null==t?void 0:t.originFileObj)&&window.URL.createObjectURL(t.originFileObj)||"";t=[{url:"",name:t.name,id:t.uid,blobUrl:e,width:0,height:0}].concat(Object(c.a)(D.current));v(Object(c.a)(t))},onSuccess:function(t,e,n){return Object(o.a)(Object(a.a)().mark((function i(){var o,u,s;return Object(a.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return T(!1),i.next=3,Object(_.l)(t);case 3:return o=i.sent,i.next=6,Object(p.g)({url:t,width:o.width.toString()||"",height:o.height.toString()||"",module:"1",source:r});case 6:o=i.sent,u=o.data.data.id,s=D.current.findIndex((function(t){return t.id===n})),0===D.current.length?D.current.push({url:t,id:u.toString(),width:e.width,height:e.height,status:"success"}):D.current.splice(s,1,{url:t,id:u.toString(),width:e.width,height:e.height,status:"success"}),s=D.current.concat(),v(Object(c.a)(s)),d.i.success("\u6dfb\u52a0\u6210\u529f");case 13:case"end":return i.stop()}}),i)})))()},onError:function(t,e){var r=e.file;v((function(t){var e=D.current.findIndex((function(t){return t.id===r.uid}));return D.current.splice(e,1,Object(i.a)(Object(i.a)({},D.current[e]),{},{status:"error",file:r})),Object(c.a)(D.current)})),T(!1)}},function(){var t=Object(o.a)(Object(a.a)().mark((function t(e,n,i){var c,o,u,s,l,d;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(K.show(),r===U.BACKGROUND)return t.next=4,Object(_.l)(i.url);t.next=13;break;case 4:o=t.sent,c=o.width,o=o.height,d=i.url,1.5*J<c&&(s=(s=o/V)<(u=c/J)?s:u,d=Object(_.q)(d,Math.round(c/s*1.5),100),c=Math.round(c/s*1.5),o=Math.round(o/s*1.5)),u=Object(x.d)({imgWidth:c,imgHeight:o,stageHeigh:V,stageWidth:J}),s=u.widthRatio,l=u.heightRatio,d={url:d,backgroundColor:"",id:0,naturalHeight:o,naturalWidth:c,imageTransform:{offsetX:0,offsetY:0,rotate:0,scale:1,flipH:!1,flipV:!1,widthRatio:s,heightRatio:l}},nt.update(d),t.next=14;break;case 13:var e=i;e={id:"",width:e.width,height:e.height,thumbnail:e.url},q(e),et({}),rt.current={targetId:"",currentUrl:"",isRelease:!1};case 14:K.hide(),window._stat_track("tpbj_subfunction_click",{record:Y,func_id:r===U.BACKGROUND?"15_67":"14_82"}),window._stat_track("tpbj_subfunction_tick",{record:Y,func_id:r===U.BACKGROUND?"15_67":"14_82"}),window._stat_track("tpbj_material_click",{record:Y,func:r===U.MATERIAL?"sc":r===U.BACKGROUND?"bj":"wd",type_id:"x",material_id:i.id,label_id:"",material_vip:0,local_ind:1,manage_type:2,belong:1,is_search:1}),window._stat_track("tpbj_material_tick",{record:Y,func:r===U.MATERIAL?"sc":r===U.BACKGROUND?"bj":"wd",type_id:"x",material_id:i.id,label_id:"",material_vip:0,local_ind:1,manage_type:2,belong:1,is_search:1});case 19:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),ut=Object.values(Z).filter((function(t){return t})).length,st=(Object(w.a)("mimeMaterialList_"+r,l,(function(t){t=t.id,window._stat_track("tpbj_material_show",{record:Y,func:r===U.ALL?"wd":r===U.BACKGROUND?"bj":"sc",type_id:"x",material_id:t,label_id:"",material_vip:0,local_ind:1,manage_type:2,belong:1,is_search:1})})),function(){var t=Object(o.a)(Object(a.a)().mark((function t(e){var r,n,o,u,s,l,d,f,h,p,b,j;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"pending"===(r=e.type)?(n=e.blobUrl,o=e.id,u=e.name,s=[{url:s=e.url,name:u,id:o,blobUrl:n,width:0,height:0}].concat(Object(c.a)(D.current)),v(Object(c.a)(s))):"success"===r?(l=e.url,d=e.id,f=e._id,h=e.width,p=e.height,v((function(t){var e=D.current.findIndex((function(t){return t.id===d}));return D.current.splice(e,1,{url:l,id:f.toString(),width:h,height:p,status:"success"}),Object(c.a)(D.current)}))):"fail"===r&&(b=e.file,j=e.id,v((function(t){var e=D.current.findIndex((function(t){return t.id===j}));return D.current.splice(e,1,Object(i.a)(Object(i.a)({},D.current[e]),{},{status:"error",file:b})),Object(c.a)(D.current)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),lt=Object(s.useRef)((new Date).getTime()),dt=Object(s.useRef)(!1);return Object(s.useEffect)((function(){var t;l.length&&!dt.current&&(t=(new Date).getTime()-lt.current,window._stat_track("render_durations",{duration:t,type:"list",func:"16_70"}),dt.current=!0)}),[l]),Object(s.useEffect)((function(){function t(t){t.preventDefault()}v([]),at();var e,n=function(){var t=Object(o.a)(Object(a.a)().mark((function t(e){var n,i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),tt){t.next=5;break}return Object(N.e)(),L.a.error("\u8bf7\u5148\u767b\u5f55\u8d26\u53f7\u540e\u4e0a\u4f20\u56fe\u7247"),t.abrupt("return");case 5:null!=(n=e.dataTransfer)&&null!=(n=n.files)&&n.length?10<e.dataTransfer.files.length?(d.i.info("\u4ec5\u652f\u6301\u6279\u91cf\u4e0a\u4f2010\u5f20\u56fe\u7247"),t.next=16):t.next=10:t.next=16;break;case 10:return i=Array.from(null==(n=e.dataTransfer)?void 0:n.files).filter((function(t){return E.b.includes(t.type)})).slice(0,10),t.next=13,it(i,r);case 13:t.sent.forEach((function(t){Object(P.b)(t)})),K.hide();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=document.getElementById("mimeMaterialList_"+r);return null!=(e=i)&&e.addEventListener("dragover",t,!1),null!=(e=i)&&e.addEventListener("drop",n,!1),C.a.on(b.a.materialAdd+r,st),function(){var e;C.a.off(b.a.materialAdd+r,st),null!=(e=i)&&e.removeEventListener("dragover",t,!1),null!=(e=i)&&e.removeEventListener("drop",n,!1),i=null}}),[tt,Q]),Object(R.jsxs)("div",{className:"app-slide-content app-slide-material",children:[Object(R.jsx)("div",{className:"border-bottom add-btn",children:Object(R.jsx)(f.a,Object(i.a)(Object(i.a)({},t),{},{tips:"\u4ec5\u652f\u630120M\u4ee5\u5185\u7684\u56fe\u7247"}))}),ut?Object(R.jsxs)("div",{className:"mine-material__actions",children:[Object(R.jsxs)("div",{className:"mine-material__actions__left",children:[Object(R.jsx)(d.b,{checked:ut===l.length,onChange:function(t){return e(t.target.checked)}}),Object(R.jsxs)("span",{className:"mine-material__actions__left__desc",children:["\u5df2\u9009\u62e9",ut,"\u6761"]}),Object(R.jsx)(d.c,{type:"vertical"}),Object(R.jsxs)("div",{className:"mine-material__actions__left__delete",onClick:function(){return ct()},children:[Object(R.jsx)(d.d,{name:"trash",fontSize:20}),Object(R.jsx)("span",{className:"mine-material__actions__left__desc",children:"\u5220\u9664"})]})]}),Object(R.jsx)("div",{className:"mine-material__actions__cancel",onClick:function(){return e(!1)},children:"\u9000\u51fa"})]}):null,Object(R.jsx)(d.g,{id:"mimeMaterialList_"+r,className:"app-slide-material__list",emptyNode:function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(d.d,{name:"subtitle",fontSize:64}),Object(R.jsx)("p",{children:"\u6682\u65e0\u5185\u5bb9"}),"\u53ef\u76f4\u63a5\u5c06\u6587\u4ef6\u62d6\u81f3\u6b64\u4f4d\u7f6e\u4e0a\u4f20\u6216\u70b9\u51fb\u6dfb\u52a0\uff08\u4ec5\u652f\u630120M\u4ee5\u5185 jpg\u3001png\u3001heic\u683c\u5f0f\u7684\u56fe\u7247\uff09"]})},loading:M,hasMore:B,dataSource:l,nextPageRequest:function(){!M&&B&&(at(),window._stat_track("hb_updown",{"\u5206\u7c7b":"\u4e0a\u6ed1\u52a0\u8f7d","\u6765\u6e90":"\u6211\u7684",is_search:1}))},isWaterfall:!0,getItemHeight:function(t){return t.height?108*t.height/t.width:108},renderItem:function(t){return Object(R.jsxs)("div",{"data-type":"track","data-track-id":t.id,className:"item",style:{height:t.height?108/t.width*t.height:"auto"},onClick:function(){return ot(0,0,t)},children:[Object(R.jsx)("img",{draggable:"true",onDragEnd:function(t){X(null)},onDragStart:function(e){var r;r=t,e.stopPropagation(),W(),X({url:r.url,width:r.width,height:r.height,type:y.a.customMaterial,stageWidth:J,stageHeight:V})},src:t.url?"success"===t.status?t.url:Object(_.q)(t.url,320):t.blobUrl,alt:t.name}),t.blobUrl?Object(R.jsx)("div",{className:"processBox",children:"error"===t.status?Object(R.jsx)("div",{className:"retry",children:Object(R.jsx)(d.a,{onClick:function(e){var n,u,s;e.stopPropagation(),n=t.file,u=t.id,s=D.current.findIndex((function(t){return t.id===u})),D.current.splice(s,1,Object(i.a)(Object(i.a)({},D.current[s]),{},{status:"pending"})),v((function(t){return D.current.splice(s,1,Object(i.a)(Object(i.a)({},D.current[s]),{},{status:"pending"})),Object(c.a)(D.current)})),Object(S.d)(n).then(function(){var t=Object(o.a)(Object(a.a)().mark((function t(e){var n,i,o,u;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.url,t.next=3,Object(_.l)(n);case 3:return i=t.sent,t.next=6,Object(p.g)({url:n,width:i.width.toString()||"",height:i.height.toString()||"",module:"1",source:r});case 6:o=t.sent,u=o.data.data.id,v((function(t){return D.current.splice(s,1,{url:n,id:u.toString(),width:i.width,height:i.height,status:"success"}),Object(c.a)(D.current)})),d.i.success("\u6dfb\u52a0\u6210\u529f"),T(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){v((function(t){return D.current.splice(s,1,Object(i.a)(Object(i.a)({},D.current[s]),{},{status:"error",file:n})),Object(c.a)(D.current)}))}))},children:"\u91cd\u65b0\u4e0a\u4f20"})}):Object(R.jsx)("div",{className:"processBar",children:Object(R.jsx)("div",{className:"processing"})})}):Object(R.jsx)("div",{className:O()("item__operatePanel",{"item__operatePanel--active":!!Z[+t.id]},{show:Object.values(Z).some((function(t){return t}))}),"data-id":t.id,children:Object(R.jsx)(d.b,{className:"item__checkbox",checked:!!Z[+t.id],onClick:function(t){t.stopPropagation(),window._stat_track("tpbj_subfunction_tick",{func:"14_82",record_id:Y})},onChange:function(e){var r,c;r=e,c=t,$((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(n.a)({},c.id,r.target.checked))}))}})})]},"".concat(t.id,"-").concat(t.url))}})]})}))},1254:function(t,e,r){}}]);