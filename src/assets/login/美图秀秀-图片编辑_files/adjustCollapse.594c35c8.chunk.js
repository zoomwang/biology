/*! For license information please see adjustCollapse.594c35c8.chunk.js.LICENSE.txt */
(this["webpackJsonpimage-editor"]=this["webpackJsonpimage-editor"]||[]).push([[4],{1202:function(e,t,n){"use strict";var r=n(4),c=n(5),a=n(11),i=n(208),o=n(89),u=n(13),s=(n(1203),n(64)),l=n(18),d=n(1);t.a=function(){var e=(0,Object(o.b)().showUserInfo)(),t=Object(l.c)((function(e){return e.editor.AbTestModel.isSubscribeTest}));return{isFetchVipMaterial:function(){var n=Object(a.a)(Object(r.a)().mark((function n(o,l,f,h){var b,j;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=e&&e.is_vip||!t)return l&&l(),n.abrupt("return");n.next=3;break;case 3:return n.next=5,Object(i.g)({ids:o});case 5:if(b=n.sent,(j=b.data).data&&1===(null==(b=j.data[o])?void 0:b.threshold))return window._stat_track("vip_system_prompt_show_new",{entrance_type:"material"}),u.j.confirm({className:"vip-block-modal",hideIcon:!1,content:Object(d.jsx)("div",{children:"\u60a8\u9009\u62e9\u7684\u662f\u4f1a\u5458\u4e13\u5c5e\u7d20\u6750\uff0c\u5f00\u901a\u4f1a\u5458\u624d\u80fd\u4f7f\u7528\u54e6\uff5e"}),title:"\u6e29\u99a8\u63d0\u793a",hideCancelButton:!1,onCancel:function(e){window._stat_track("vip_system_prompt_click_new",{oper_type:"cancel"===e?"0":"2",entrance_type:"material"}),f&&f()},onOk:function(){var e=Object(a.a)(Object(r.a)().mark((function e(){var t,n,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window._stat_track("vip_system_prompt_click_new",{oper_type:"1",entrance_type:"material"}),f&&f(),e.next=4,Object(s.b)();case 4:if(t=e.sent,n=function(){var e=Object(a.a)(Object(r.a)().mark((function e(){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!t||null!=t&&t.is_vip||Object(s.f)(Object(c.a)({entrance:"save",source:"tpbj",vip_type:"material_".concat(null==(n=j.data[o])?void 0:n.type_id,"_").concat(o)},h||{}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t){e.next=17;break}return e.next=9,Object(s.e)();case 9:if(e.sent)return e.next=13,Object(s.b)();e.next=15;break;case 13:null!=(i=e.sent)&&i.is_vip||Object(s.f)(Object(c.a)({entrance:"save",source:"tpbj",vip_type:"material_".concat(null==(i=j.data[o])?void 0:i.type_id,"_").concat(o)},h||{}));case 15:return setTimeout(n,1e3),e.abrupt("return");case 17:n();case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),okText:"\u5f00\u901a\u4f1a\u5458",centered:!0,closable:!0,hideOkButton:!1}),n.abrupt("return");n.next=15;break;case 15:l&&l();case 16:case"end":return n.stop()}}),n)})));return function(e,t,r,c){return n.apply(this,arguments)}}(),isVipMaterial:function(n,i,o){var l;null!=e&&e.is_vip||!t?n&&n():(window._stat_track("vip_system_prompt_show_new",{entrance_type:"func"}),u.j.confirm({className:"vip-block-modal vip-block-modal__func",hideIcon:!1,content:Object(d.jsx)("div",{children:"\u60a8\u9009\u62e9\u7684\u662f\u4f1a\u5458\u4e13\u5c5e\u529f\u80fd\uff0c\u5f00\u901a\u4f1a\u5458\u624d\u80fd\u4f7f\u7528\u54e6\uff5e"}),title:"\u6e29\u99a8\u63d0\u793a",hideCancelButton:!1,onCancel:function(e){window._stat_track("vip_system_prompt_click_new",{oper_type:"cancel"===e?"0":"2",entrance_type:"func"}),i&&i()},onOk:(l=Object(a.a)(Object(r.a)().mark((function e(){var t,n,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window._stat_track("vip_system_prompt_click_new",{oper_type:"1",entrance_type:"func"}),i&&i(),e.next=5,Object(s.b)();case 5:if(t=e.sent,n=function(){var e=Object(a.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!t||null!=t&&t.is_vip||Object(s.f)(Object(c.a)({entrance:"save",source:"tpbj"},o||{}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t){e.next=18;break}return e.next=10,Object(s.e)();case 10:if(e.sent)return e.next=14,Object(s.b)();e.next=16;break;case 14:null!=(u=e.sent)&&u.is_vip||Object(s.f)(Object(c.a)({entrance:"save",source:"tpbj"},o||{}));case 16:return setTimeout(n,1e3),e.abrupt("return");case 18:n();case 19:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)}),cancelText:"\u6682\u4e0d\u5f00\u901a\uff0c\u53bb\u9664\u6548\u679c",okText:"\u5f00\u901a\u4f1a\u5458",centered:!0,closable:!0,hideOkButton:!1}))}}}},1203:function(e,t,n){},1205:function(e,t,n){"use strict";var r=n(8),c=n(18),a=n(9),i=n.n(a),o=n(13),u=n(0),s=(n(1218),n(1));t.a=function(e){var t=void 0===(t=e.className)?"":t,n=e.name,a=void 0!==(a=e.isVip)&&a,l=e.children,d=void 0===(f=e.functionTipsType)?null:f,f=void 0===(f=e.icon)?"brightness":f,h=e.onShowChange,b=e.showContent,j=(e=Object(u.useState)(!1),(e=Object(r.a)(e,2))[0]),p=e[1],O=Object(c.b)((function(e){return e.editor.collapseModel.setFunctionTip}));e=l?Object(s.jsx)("div",{className:"b-list-menu__footer",children:l}):null;return Object(u.useEffect)((function(){void 0!==b&&p(b)}),[b]),Object(s.jsxs)("div",{className:i()("b-list-menu",t,{active:b}),children:[Object(s.jsxs)("div",{className:"b-list-menu__header",onClick:function(){void 0===b&&p(!j),h&&h(!j)},children:[Object(s.jsxs)("div",{className:i()("b-list-menu__left"),children:[Object(s.jsx)(o.d,{fontSize:24,name:f}),Object(s.jsx)("span",{className:"b-list-menu__name",children:n}),d?Object(s.jsx)(o.d,{fontSize:20,name:"questionmarkCircle",onClick:function(e){e.stopPropagation(),O(d)}}):null]}),Object(s.jsxs)("div",{className:i()("b-list-menu__right",{rotate:j}),children:[a?Object(s.jsx)("img",{src:"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/vip-icon.png",alt:"",className:"b-list-menu__vip"}):null,Object(s.jsx)(o.d,{fontSize:16,name:"chevronDownBold"})]})]}),j?e:null]})}},1217:function(e,t,n){"use strict";var r=n(4),c=n(11),a=n(0),i=n.n(a),o=n(41),u=n(29),s=n(22),l=n(34),d=n(151),f=n(528),h=n(1205),b=(n(1219),n(350)),j=n(1);t.a=i.a.memo((function(e){var t=e.onSlider,n=e.onReset,i=e.onToggle,p=e.onAttrChange,O=e.onTab,m=e.tipType,v=e.featureType,_=e.curType,g=e.setCurType,y=(e=Object(u.d)()).register,w=e.use,x=Object(s.u)(),S=Object(s.i)(),k=Object(o.w)();return Object(a.useEffect)((function(){S||_!==v||g("")}),[S]),Object(a.useEffect)((function(){y(v,{enter:function(){k.init({customEliminate:function(e,t){return Object(c.a)(Object(r.a)().mark((function n(){var c,a,i;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e.toDataURL("image/png"),n.next=3,Object(d.c)(c);case 3:return c=n.sent,a=c.url,n.next=7,l.a.getRemoteUrlAsync(t.data.url);case 7:return i=n.sent,n.next=10,Object(f.a)(Object(b.b)(i),a);case 10:return i=n.sent,n.abrupt("return",i);case 12:case"end":return n.stop()}}),n)})))()}})},leave:function(){x(!1)}})}),[]),Object(j.jsx)(h.a,{name:"\u6d88\u9664\u7b14",showContent:_===v,icon:"eliminate",functionTipsType:m,onShowChange:function(e){e?(w(v),x(!0),g(v)):x(!1),null!=i&&i(v,e)},children:Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(o.f,{onPenSizeChange:function(){null!=t&&t(v,"penSize",0,!0)},onReset:function(){null!=n&&n(v)},onPenTypeChange:function(e){null!=p&&p(v,e,0)},onTabChange:function(e){null!=O&&O(v,e)}})})})}))},1218:function(e,t,n){},1219:function(e,t,n){},1220:function(e,t,n){"use strict";var r=n(13),c=n(0),a=n.n(c),i=n(520);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=(j="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",c=j.asyncIterator||"@@asyncIterator",a=j.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(t){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c,a,i,o;t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new y(r||[]);return t._invoke=(c=e,a=n,i=r,o="suspendedStart",function(e,t){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===e)throw t;return{value:void 0,done:!0}}for(i.method=e,i.arg=t;;){var n=i.delegate;if(n&&(n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}return"throw"===(r=l(r,t.iterator,n.arg)).type?(n.method="throw",n.arg=r.arg,n.delegate=null,d):(r=r.arg)?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,d):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}(n,i),n)){if(n===d)continue;return n}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===o)throw o="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);if(o="executing","normal"===(n=l(c,a,i)).type){if(o=i.done?"completed":"suspendedYield",n.arg===d)continue;return{value:n.arg,done:i.done}}"throw"===n.type&&(o="completed",i.method="throw",i.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function f(){}function h(){}function b(){}var j,p,O=((p=(p=(i(j={},r,(function(){return this})),Object.getPrototypeOf))&&p(p(w([]))))&&p!==t&&n.call(p,r)&&(j=p),b.prototype=f.prototype=Object.create(j));function m(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var r;this._invoke=function(c,a){function i(){return new t((function(r,i){!function r(c,a,i,u){var s;if("throw"!==(c=l(e[c],e,a)).type)return(a=(s=c.arg).value)&&"object"==o(a)&&n.call(a,"__await")?t.resolve(a.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(a).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}));u(c.arg)}(c,a,r,i)}))}return r=r?r.then(i,i):i()}}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function g(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function y(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function w(e){if(e){var t,c=e[r];if(c)return c.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return t=-1,(c=function r(){for(;++t<e.length;)if(n.call(e,t))return r.value=e[t],r.done=!1,r;return r.value=void 0,r.done=!0,r}).next=c}return{next:x}}function x(){return{value:void 0,done:!0}}return i(O,"constructor",h.prototype=b),i(b,"constructor",h),h.displayName=i(b,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,i(e,a,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},m(v.prototype),i(v.prototype,c,(function(){return this})),e.AsyncIterator=v,e.async=function(t,n,r,c,a){void 0===a&&(a=Promise);var i=new v(s(t,n,r,c),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},m(O),i(O,a,"Generator"),i(O,r,(function(){return this})),i(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=w,y.prototype={constructor:y,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var c=this.tryEntries.length-1;0<=c;--c){var a=this.tryEntries[c],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var c=this.tryEntries[r];if(c.tryLoc<=this.prev&&n.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var a=c;break}}var i=(a=a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc?null:a)?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),g(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,c=this.tryEntries[t];if(c.tryLoc===e)return"throw"===(n=c.completion).type&&(r=n.arg,g(c)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function s(e,t,n,r,c,a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,c)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,c=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw c}}return a}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?d(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(1221);var f={material:{},id:1e4,url:"",previewUrl:"",corner_mark_url:""};t.a=function(e){var t,n=void 0===(n=e.isShow)||n,o=e.handler,d=e.activeLayerMaskUrl,h=void 0===(t=e.itemStyle)?{}:t,b=e.getList,j=e.trackCallback,p=(e=(t=l(Object(c.useState)(!0),2))[0],t[1]),O=(t=l(Object(c.useState)(null),2))[0],m=t[1],v=(t=l(Object(c.useState)([f]),2))[0],_=t[1],g=function(){e=u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===O)return e.abrupt("return");e.next=2;break;case 2:return p(!0),e.next=5,b();case 5:n=e.sent,t=n.list,n=n.currentCursor,_(v.concat(t)),m(n),p(!1);case 11:case"end":return e.stop()}}),e)}));var e,t=function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function i(e){s(a,r,c,i,o,"next",e)}function o(e){s(a,r,c,i,o,"throw",e)}i(void 0)}))};return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){g()}),[]),n?(Object(i.a)("maskCollapseList",v,(function(e){j&&j(e)})),a.a.createElement(r.g,{id:"maskCollapseList",bodyClassName:"m-mask-list",loading:e,hasMore:!1,dataSource:v,nextPageRequest:g,renderItem:function(e){var t=e.id,n=e.url,c=(e.material,e.category),i=e.type_id,u=e.threshold,s=void 0===u?"0":u,l=""===n;return a.a.createElement("li",{key:t,"data-type":"track","data-track-id":t,"data-track-category":c,"data-track-type":i,"data-track-vip":s,onClick:function(){l?o&&o({url:"",materialId:"",type_id:"",threshold:s}):o&&o({url:n,materialId:t,type_id:i,threshold:s})},className:"\n                        ".concat(l?"clean-item":"","\n                        ").concat(d===n?"active":""),style:h},l?a.a.createElement(r.d,{fontSize:68,name:"slashCircle"}):(c=(u=e).url,u.threshold,e=u.corner_mark_url,u=u.previewUrl,a.a.createElement(a.a.Fragment,null,u?a.a.createElement("img",{className:"m-mask-list__img",src:u,alt:""}):null,c?a.a.createElement("img",{className:"m-mask-list__svg",src:c,alt:""}):null,e?a.a.createElement("img",{className:"m-mask-list__icon",src:e,alt:""}):null)))}})):null}},1221:function(e,t,n){},1234:function(e,t,n){},1235:function(e,t,n){},1236:function(e,t,n){},1237:function(e,t,n){},1238:function(e,t,n){},1239:function(e,t,n){},1298:function(e,t,n){"use strict";function r(){var e,t=Object(L.A)(),n=Object(L.w)().addOrUpdate,r=Object(F.a)().isFetchVipMaterial,c=function(){var e=Object(k.a)(Object(S.a)().mark((function e(){var t,n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.f)({count:50,type:"pic_shape"});case 2:return t=e.sent,n=((null==(n=t.data)||null==(n=n.data)?void 0:n.materials)||[]).map((function(e){var t=e.material,n=(e=e.corner_mark_url,t.meta),r=t.threshold;return{id:t.id.toString(),url:null==n||null==(t=n.svg_image)?void 0:t.url,threshold:r,corner_mark_url:e,previewUrl:null==n||null==(t=n.preview)?void 0:t.url}})),e.abrupt("return",{list:n,currentCursor:null==(n=t.data)||null==(t=n.data)?void 0:t.cursor});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(J.jsx)("div",{className:"b-size-mask",children:Object(J.jsx)(H.a,{isShow:!0,handler:function(e,c){r(e.materialId,(function(){var r=e&&null!=e&&e.url?null==e?void 0:e.url:"";(r=(t.data.maskURL=r,t.materialIds||(t.materialIds=new Map),t.materialIds.get(U.o.MASK)||[]))[0]=String(e.materialId),t.materialIds.set(U.o.MASK,r),t&&n(Object(y.a)({},t)),window._stat_track("tpbj_material_click",{func:"mb",type_id:e.type_id,material_id:e.materialId,label_id:"",belong:0,local_ind:0,material_vip:e.threshold||"0"}),window._stat_track("tpbj_material_tick",{func:"mb",local_ind:0,type_id:e.type_id,material_id:e.materialId,label_id:"",belong:0,material_vip:e.threshold||"0"})}))},trackCallback:function(e){var t=e.id,n=e.category;e=e.type;isNaN(parseInt(n))&&(n=""),window._stat_track("tpbj_material_show",{func:"mb",material_id:t,label_id:n,type_id:e,belong:0,local_ind:0})},activeLayerMaskUrl:null==t||null==(e=t.data)?void 0:e.maskURL,itemStyle:{marginRight:8},getList:c})}):null}function c(e,t){var n=q(e).filter((function(e){return e.id!==t}));return localStorage.setItem(e,JSON.stringify(n)),n}function a(e){function t(e,t){var r={width:n,height:a};r[t]=e,u||("width"===t?r.height=e/f:r.width=e*f),i(r,t)}var n=e.width,r=void 0===(r=e.maxVal)?8e3:r,c=void 0===(c=e.minVal)?1:c,a=e.height,i=e.onChange,o=e.inputStyleWidth,u=e.canAutoCrop,s=e.setCanAutoCrop,l=e.stageWidth,d=e.stageHeight,f=(e=Object(m.useState)(1),(e=Object(N.a)(e,2))[0]),h=e[1];Object(m.useEffect)((function(){u||h(l/d)}),[l,d,u]),e=Object(m.useCallback)((function(){s(!u)}),[u]);return Object(J.jsxs)("div",{className:"m-size-input",children:[Object(J.jsx)(R.f,{style:{width:"".concat(o||64,"px")},min:c,max:r,height:24,onChange:function(e){$()(e)||t(e,"width")},value:n,showStepBtn:!1}),Object(J.jsx)(ee,{canAutoCrop:u,handleLock:e}),Object(J.jsx)(R.f,{style:{width:"".concat(o||64,"px")},min:c,max:r,height:24,onChange:function(e){$()(e)||t(e,"height")},value:a,showStepBtn:!1})]})}function i(e){var t=e.width,n=e.height,r=e.setActiveId,c=e.activeId;e=e.contents;return Object(J.jsx)("div",{className:"b-list",children:Object(J.jsx)(_.Scrollbars,{style:{width:t,height:n},children:Object(J.jsx)("ul",{className:"b-list__content",children:e.map((function(e,t){return Object(J.jsx)("li",{className:+e.props.id===c?"active":"",onClick:function(){return r(+e.props.id)},children:e},e.props.id)}))})})})}function o(e){var t=e.addSizeCustom,n=(e=e.originStageSize,Object(V.g)().changeStageSize),r=Object(Y.x)(),o=(s=Object(V.w)()).width,u=s.height,s=Object(m.useState)(q(te)),l=(s=Object(N.a)(s,2))[0],d=s[1],f=(s=Object(m.useState)([]),(s=Object(N.a)(s,2))[0]),h=s[1],b=(s=Object(m.useState)(-1),(s=Object(N.a)(s,2))[0]),j=s[1],p=(s=Object(m.useState)(!0),(s=Object(N.a)(s,2))[0]),O=s[1],v=Object(V.w)(),_=(s=Object(m.useState)(0),(s=Object(N.a)(s,2))[0]),g=s[1],y=Object(D.j)();return Object(m.useEffect)((function(){r(p)}),[p,r]),Object(m.useEffect)((function(){0!==t&&t!==_&&(g(t),d(q(te)))}),[t,_,u,o]),Object(m.useEffect)((function(){p&&j(-1)}),[u,o]),Object(m.useEffect)((function(){var e,t;h((e=ne,t=l,[{id:-1,name:"\u81ea\u7531\u88c1\u526a",value:{width:0,height:0}}].concat(Object(B.a)(t.map((function(e){var t=e.width,n=e.height,r=e.maskName;return{id:e.id,isCustom:!0,name:"".concat(t,":").concat(n," ").concat(r," \u81ea\u5b9a\u4e49"),value:{width:t,height:n}}}))),Object(B.a)(e)).map((function(e){return{title:e.name,data:e}}))))}),[l]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(i,{setActiveId:function(e){j(e);var t,r,c,a,i=f.find((function(t){return t.data.id===e}));i&&(-1===(i=i.data).id?O(!0):(O(!1),t=v,r=i.value.width,i=i.value.height,a={width:c=(t=t.data).naturalWidth,height:t=t.naturalHeight},c<t?a.height=Object(Z.Pb)(c/r*i):a.width=Object(Z.Pb)(t/i*r),8e3<a.width?(a.width=c,a.height=Object(Z.Pb)(c/r*i)):8e3<a.height&&(a.height=t,a.width=Object(Z.Pb)(t/i*r)),n((c=a).width,c.height),y(c)))},activeId:b,width:228,height:175,contents:f.map((function(e){return Object(J.jsxs)("div",{className:"item",id:e.data.id.toString(),children:[Object(J.jsx)("span",{children:e.title}),e.data.isCustom?Object(J.jsx)(W.a,{name:"crossBold",fontSize:18,onClick:function(){var t=e.data.id||0;t=c(te,t),d(t)}}):null]})}))}),Object(J.jsx)("div",{className:"m-adjust-size__number",children:Object(J.jsx)(a,{inputStyleWidth:90,width:o,height:u,canAutoCrop:p,onChange:function(e){var t=e.width;e=e.height,p&&j(-1),t=Object(Z.Pb)(t),e=Object(Z.Pb)(e);(8e3<t||8e3<e)&&!p&&(t=o,e=u),n(t,e),y({width:t,height:e})},setCanAutoCrop:function(e){O(e)},stageWidth:e.width,stageHeight:e.height})})]})}function u(e,t){var n=t;return e===X.px?n=Object(Z.Pb)(t):e===X.cm?n=Object(Z.Mb)(Object(Z.Hb)(t)):e===X.ch&&(n=Object(Z.Mb)(Object(Z.Gb)(t))),n}function s(e,t){return e===X.px?t:e===X.cm?Object(Z.Cb)(t):e===X.ch?Object(Z.pb)(t):t}function l(e){var t=e.addSizeCustom,n=e.sizeList,r=(e=e.originStageSize,Object(Y.x)()),o=Object(L.k)().changeStageSize,l=(f=Object(L.A)()).width,d=f.height,f=Object(m.useState)(q(K)),h=(f=Object(N.a)(f,2))[0],b=f[1],j=Object(D.j)(),p=(f=Object(m.useState)([]),(f=Object(N.a)(f,2))[0]),O=f[1],v=(f=Object(m.useState)(-1),(f=Object(N.a)(f,2))[0]),_=f[1],g=(f=Object(m.useState)(!0),(f=Object(N.a)(f,2))[0]),y=f[1],w=(f=Object(m.useState)({height:0,width:0}),(f=Object(N.a)(f,2))[0]),x=f[1],S=(f=Object(m.useState)(X.px),(f=Object(N.a)(f,2))[0]),k=f[1],T=(f=Object(m.useState)(0),(f=Object(N.a)(f,2))[0]),C=f[1];return Object(m.useEffect)((function(){r(g)}),[g,r]),Object(m.useEffect)((function(){var e,t;O((e=n,t=h,[{id:-1,material:{id:"",default_name:"\u81ea\u7531\u88c1\u526a"}}].concat(Object(B.a)(t.map((function(e){var t=e.width,n=e.height,r=void 0===(r=e.maskName)?"":r,c=void 0===(c=e.unit)?"px":c;e=e.id;return{id:Number(e),isCustom:!0,material:{id:"",default_name:"\u81ea\u5b9a\u4e49\uff1a ".concat(t," x ").concat(n," ").concat(c," ").concat(r),meta:{template_size:{width:t,height:n},unit:c}}}}))),Object(B.a)(e)).map((function(e){var t;return{title:(null==(t=e.material)?void 0:t.default_name)||"",data:e}}))))}),[h,n]),Object(m.useEffect)((function(){var e,n,r,c,a;0!==t&&T!==t&&(C(t),e=u(S,l),n=u(S,d),"",c=S,(a=q(r=K)).unshift({width:e,height:n,maskName:"",id:Math.random(),unit:c,name:"\u81ea\u5b9a\u4e49",isCustom:!0}),localStorage.setItem(r,JSON.stringify(a)),b(q(K)))}),[t,T,d,l]),Object(m.useEffect)((function(){var e;s(S,w.width)===l&&s(S,w.height)===d||(g&&_(-1),e={width:u(S,l),height:u(S,d)},x(e))}),[d,l]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(i,{setActiveId:function(e){_(e);var t,n,r,c=p.find((function(t){return t.data.id===e}));c&&(-1===(c=c.data).id?y(!0):(n={width:(null==(n=c.material)||null==(n=n.meta)||null==(n=n.template_size)?void 0:n.width)||0,height:(null==(n=c.material)||null==(n=n.meta)||null==(n=n.template_size)?void 0:n.height)||0},y(!1),k((null==(r=c.material)||null==(r=r.meta)?void 0:r.unit)||X.px),r=s((null==(r=c.material)||null==(r=r.meta)?void 0:r.unit)||X.px,(null==(r=c.material)||null==(r=r.meta)||null==(r=r.template_size)?void 0:r.width)||0),c=s((null==(t=c.material)||null==(t=t.meta)?void 0:t.unit)||X.px,(null==(t=c.material)||null==(c=t.meta)||null==(t=c.template_size)?void 0:t.height)||0),o(r,c),j({width:r,height:c}),x(n)))},activeId:v,width:228,height:175,contents:p.map((function(e){var t;return Object(J.jsxs)("div",{className:"item",id:(null==e||null==(t=e.data)||null==(t=t.id)?void 0:t.toString())||Math.random().toString(),children:[Object(J.jsx)("span",{children:e.title}),e.data.isCustom?Object(J.jsx)(R.d,{name:"crossBold",fontSize:18,onClick:function(t){var n=e.data.id||0;n=c(K,n),b(n),t.preventDefault(),t.stopPropagation()}}):null]})}))}),Object(J.jsxs)("div",{className:"m-adjust-size__number",children:[Object(J.jsx)(a,{width:w.width||u(S,l),height:w.height||u(S,d),canAutoCrop:g,onChange:function(e,t){var n=e.width,r=(e=e.height,g&&_(-1),{width:S!==X.px?Object(Z.Mb)(n):Object(Z.Pb)(n)||1,height:S!==X.px?Object(Z.Mb)(e):Object(Z.Pb)(e)||1});n=Object(Z.Pb)(s(S,n)),e=Object(Z.Pb)(s(S,e));(8e3<n||8e3<e)&&!g&&(e=d,r={width:u(S,n=l),height:u(S,d)}),x(r),o(n,e),j({width:n,height:e})},setCanAutoCrop:function(e){y(e)},maxVal:(f=8e3,(v=S)===X.px?f=8e3:v===X.cm?f=211.67:v===X.ch&&(f=83.33),f),minVal:(v=1,(f=S)===X.px?v=1:f!==X.cm&&f!==X.ch||(v=.01),v),stageWidth:e.width,stageHeight:e.height}),Object(J.jsxs)(R.m,{className:"m-adjust-size__select",value:S,onChange:function(e){k(e),e={width:u(e,s(S,w.width)||0),height:u(e,s(S,w.height)||0)},x(e)},suffixIcon:Object(J.jsx)(R.d,{name:"chevronDownBold",fontSize:16}),children:[Object(J.jsx)(re,{value:X.px,children:"\u50cf\u7d20"},X.px),Object(J.jsx)(re,{value:X.ch,children:"\u82f1\u5bf8"},X.ch),Object(J.jsx)(re,{value:X.cm,children:"\u5398\u7c73"},X.cm)]})]})]})}function d(e){var t=void 0===(n=e.tabWidth)?114:n,n=void 0===(n=e.wrapStyle)?{}:n,r=void 0===(r=e.titleStyle)?{}:r,c=void 0===(a=e.tabHeight)?26:a,a=e.data,i=e.tabIndex,o=e.handleTabIndex;e=Object(y.a)({width:t*a.length},r);return Object(J.jsxs)("div",{className:"m-custom-tabs",style:n,children:[Object(J.jsxs)("div",{className:"m-custom-tabs__title",style:e,children:[Object(J.jsx)("div",{className:"slider",style:{width:t,height:c,left:i*t}}),Object(J.jsx)("div",{className:"m-custom-tabs__tab",children:a.map((function(e,n){return Object(J.jsx)("div",{onClick:function(){o(n)},style:{width:t,height:c},className:i===n?"active":"",children:e.title},n)}))})]}),Object(J.jsx)("div",{className:"m-custom-tabs__content",children:a.map((function(e,t){return Object(J.jsx)("div",{className:i===t?"active":"",children:e.hide?null:e.content},t)}))})]})}function f(e){var t=e.onClick,n=e.title;e=e.icon;return Object(J.jsxs)("div",{className:"b-reset-button",onClick:t,children:[null!==e?Object(J.jsx)(R.d,{name:e||"arrowCounterclockwise",fontSize:20}):null,Object(J.jsx)("div",{children:n||"\u91cd\u7f6e"})]})}function h(e){function t(){x(Q.current);var e=K();e&&I({width:e.width,height:e.height}),R(!1),Q.current=[]}var n,c,a,i,u=e.curType,s=e.setCurType,h=O.a.ADJUST_SIZE_CHANGE,b=(e=Object(m.useState)(0),(e=Object(N.a)(e,2))[0]),j=e[1],p=(e=Object(m.useState)(0),(e=Object(N.a)(e,2))[0]),v=e[1],_=(e=Object(m.useState)(0),(e=Object(N.a)(e,2))[0]),g=e[1],y=Object(A.d)(),x=Object(L.k)().resetStageSizeChange,I=Object(D.j)(),M=Object(D.h)().id,R=Object(D.l)(),H=Object(se.f)().renderTextMaterial,G=(e=Object(D.b)()).width,F=e.height,B=(e=Object(T.d)()).register,V=e.use,Y=e.getCurFeature,W=Object(oe.d)(),X=(e=Object(L.p)()).getLayers,K=e.getMainLayer,q=(e=Object(m.useState)({width:0,height:0}),(e=Object(N.a)(e,2))[0]),$=e[1],Q=Object(m.useRef)([]),ee=(e=Object(L.w)()).addOrUpdate,te=e.cloneLayer,ne=Object(L.f)().delActiveLayer,re=(n=Object(L.k)().resetStageSizeChange,c=Object(ae.e)(),a=Object(D.j)(),i=Object(L.p)().getMainLayer,Object(ae.i)(ie,{redo:function(e){n(e.newData),(e=i())&&a({width:e.width,height:e.height})},undo:function(e){n(e.oldData),(e=i())&&a({width:e.width,height:e.height})}}),{action:function(e,t){c.push(ie,{oldData:e,newData:t,isAdjust:!0})}}),fe=(e=Object(ue.c)((function(e){return e.editor.stageSizeCollapseModel.stageSizeList})),Object(m.useRef)()),he=function(){var e=Object(k.a)(Object(S.a)().mark((function e(){var t,n,r,c,a;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=X(),t=c.map((function(e){return te(e)||z()(e)})),n=Object(Z.X)(c),r=[],Object(Z.ec)(c,function(){var e=Object(k.a)(Object(S.a)().mark((function e(t){var c;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.layerType!==U.h.TEXT_LAYER&&t.layerType!==U.h.TEXT_MATERIAL_LAYER)return e.abrupt("return");e.next=2;break;case 2:if(t.parentId&&(null==(c=n[t.parentId])?void 0:c.layerType)===U.h.TEXT_MATERIAL_LAYER)return e.abrupt("return");e.next=4;break;case 4:t.layerType===U.h.TEXT_MATERIAL_LAYER&&r.push(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y.show(),c=0;case 7:if(c<r.length)return a=r[c],e.next=11,H(a,G,F);e.next=15;break;case 11:ee(a);case 12:c++,e.next=7;break;case 15:W(0),R(!1),re.action(Q.current,t),y.hide(),Q.current=[];case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=(b=(Object(m.useEffect)((function(){function e(){u===O.a.ADJUST_SIZE_CHANGE&&(t(),be())}return C.b.onInit(e),function(){C.b.offInit(e)}}),[]),Object(m.useEffect)((function(){B(h,{leave:function(){return Object(k.a)(Object(S.a)().mark((function e(){var n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y()===h&&s(""),n=X(),Q.current.length&&!function(e,t){try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return!1}}(Q.current,n)?ce.a.confirm({title:"\u6e29\u99a8\u63d0\u793a",content:"\u56fe\u7247\u5df2\u4fee\u6539,\u662f\u5426\u5e94\u7528\u6b64\u6548\u679c?",closable:!0,centered:!0,onInstance:function(e){fe.current=e},onOk:function(){he(),fe.current=null},onCancel:function(e){t(),fe.current=null,C.a.emit(de.ModalCancel)}}):t();case 4:case"end":return e.stop()}}),e)})))()},enter:function(){return Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne(),R(!0),Q.current=z()(X());case 3:case"end":return e.stop()}}),e)})))()}})}),[]),Object(m.useEffect)((function(){function e(){var e=Y();Object(E.a)(e)&&u===O.a.ADJUST_SIZE_CHANGE&&(R(!1),he(),be())}return C.a.on(le.b.enter,e),function(){C.a.off(le.b.enter,e)}}),[u]),[{title:"\u5c3a\u5bf8\u8c03\u6574",content:Object(J.jsx)(l,{addSizeCustom:b,sizeList:e,originStageSize:q}),hide:0!==_},{title:"\u6bd4\u4f8b\u88c1\u526a",content:Object(J.jsx)(o,{addSizeCustom:p,originStageSize:q}),hide:1!==_},{title:"\u5f62\u72b6\u8499\u7248",content:Object(J.jsx)(r,{})}]),function(){V(O.b.ADJUST_MENU),s("")});return Object(J.jsx)("div",{className:"m-adjust-size",children:Object(J.jsx)(w.a,{name:"\u88c1\u526a/\u65cb\u8f6c/\u5c3a\u5bf8",showContent:u===O.a.ADJUST_SIZE_CHANGE,icon:"crop",functionTipsType:O.c.SIZE_CHANGE,onShowChange:function(e){e?($({width:K().width,height:K().height}),V(h),s(h)):be(),j(0),window._stat_track("tpbj_subfunction_click",{func:"10_40",open:e?1:0,click_type:0,record_id:M})},children:Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(d,{tabWidth:76,tabHeight:26,tabIndex:_,handleTabIndex:function(e){window._stat_track("tpbj_subfunction_click",{func:"10_40_".concat(e+1),open:1,click_type:0,record_id:M}),g(e),j(0)},data:b}),Object(J.jsx)(P,{}),0===_?Object(J.jsx)(f,{title:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5c3a\u5bf8",onClick:function(){window._stat_track("tpbj_subfunction_click",{func:"10_40_5",open:1,click_type:0,record_id:M}),0===_?j(Math.random()):1===_&&v(Math.random())},icon:null}):null,Object(J.jsxs)("div",{className:"m-adjust-size__btn",children:[Object(J.jsx)("div",{className:"cancel",onClick:function(){t(),be()},children:"\u53d6\u6d88"}),Object(J.jsx)("div",{className:"confirm",onClick:function(){he(),be(),window._stat_track("tpbj_subfunction_click",{func:"10_40",record_id:M}),window._stat_track("tpbj_subfunction_tick",{func:"10_40",record_id:M})},children:"\u5e94\u7528"})]})]})})})}function b(e){var t=e.onSlider,n=e.onReset,r=e.onSelect,c=e.onTab;return{theme:Object(I.a)().theme,onAfterEnhance:function(e,n){null!=t&&t(e,n)},onReset:function(){null!=n&&n()},onSelect:function(e,t){null!=r&&r(e,t)},onTab:function(e){null!=c&&c(e)}}}function j(e,t,n){var r=Object(T.d)().use;return{onShowChange:function(c){c?(r(e),t(e)):(r(O.b.ADJUST_MENU),t("")),n(c)}}}function p(e,t,n,r){var c=Object(T.d)(),a=c.register,i=c.use,o=c.getCurFeature,u=Object(x.y)(),s=Object(A.d)(),l=Object(L.p)().getMainLayer,d=Object(m.useRef)(null);Object(m.useEffect)((function(){function c(){o()===e&&(s.show(),setTimeout(Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.create();case 2:s.hide();case 3:case"end":return e.stop()}}),e)}))),1))}a(e,{leave:function(){return new Promise((function(t){o()===e&&n("");var r=l();null!=r&&r.isDoEnhance?(s.show(),setTimeout(Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.destroy();case 2:s.hide(),t(null);case 5:case"end":return e.stop()}}),e)}))),1)):setTimeout(Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.destroy();case 2:t(null);case 4:case"end":return e.stop()}}),e)}))),1)}))},enter:function(){return new Promise((function(e){s.show(),setTimeout(Object(k.a)(Object(S.a)().mark((function t(){return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.current)return t.next=3,u.create(d.current);t.next=5;break;case 3:t.next=7;break;case 5:return t.next=7,u.create();case 7:d.current=null,s.hide(),e(null);case 10:case"end":return t.stop()}}),t)}))),1)}))}}),C.a.on(de.ModalCancel,c);var f=function(){var t=Object(k.a)(Object(S.a)().mark((function t(c){var a,f,h,b,j,p,m;return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=c.layer,f=c.args,h=c.values,b=o(),j=Object(E.a)(b),p=b===O.a.ADJUST_SIZE_CHANGE,!j||p)return s.show(),setTimeout(Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.doEnhance(a,f);case 2:s.hide();case 3:case"end":return e.stop()}}),e)}))),1),t.abrupt("return");t.next=8;break;case 8:if(b!==e)return d.current=a,t.next=12,i(e);t.next=15;break;case 12:n(e),t.next=25;break;case 15:if(j=l(),p=j.data.url,m=a.data.url,p!==m)return t.next=21,u.create(a);t.next=23;break;case 21:t.next=25;break;case 23:u.addOrUpdate(a);case 25:u.doGL(f),r(h);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return C.a.on("".concat(x.e.BeforeRedo).concat(t),f),C.a.on("".concat(x.e.BeforeUndo).concat(t),f),function(){C.a.off("".concat(x.e.BeforeRedo).concat(t),f),C.a.off("".concat(x.e.BeforeUndo).concat(t),f),C.a.off(de.ModalCancel,c)}}),[])}n.r(t);var O=n(28),m=n(0),v=n.n(m),_=n(114),g=n(1217),y=n(5),w=n(1205),x=n(41),S=n(4),k=n(11),T=n(29),C=n(19),E=n(513),A=n(45),I=n(101),L=n(10),N=n(8),M=(n(1234),n(15)),z=n.n(M),U=n(2),R=n(13),D=n(43),J=n(1),P=v.a.memo((function(){function e(e){setTimeout((function(){a(e)}))}var t=Object(D.h)().id,n=(i=Object(L.k)()).rotateFullStage,r=i.flipXStage,c=i.flipYStage,a=Object(D.j)(),i=Object(m.useCallback)((function(){window._stat_track("tpbj_subfunction_click",{func:"10_40_4",open:1,click_type:1,record_id:t}),n({rotate:-90,setStageSize:e})}),[t]),o=Object(m.useCallback)((function(){window._stat_track("tpbj_subfunction_click",{func:"10_40_4",open:1,click_type:1,record_id:t}),n({rotate:90,setStageSize:e})}),[t]),u=Object(m.useCallback)((function(){window._stat_track("tpbj_subfunction_click",{func:"10_40_4",open:1,click_type:1,record_id:t}),r()}),[t]),s=Object(m.useCallback)((function(){window._stat_track("tpbj_subfunction_click",{func:"10_40_4",open:1,click_type:1,record_id:t}),c()}),[t]);return Object(J.jsxs)("div",{className:"m-adjust-size__icons",children:[Object(J.jsx)(R.x,{title:"\u5de6\u65cb\u8f6c90\xb0",placement:"bottom",children:Object(J.jsx)("div",{children:Object(J.jsx)(R.d,{name:"arrowCounterclockwise",fontSize:28,onClick:i})})}),Object(J.jsx)(R.x,{title:"\u53f3\u65cb\u8f6c90\xb0",placement:"bottom",children:Object(J.jsx)("div",{children:Object(J.jsx)(R.d,{name:"arrowClockwise",fontSize:28,onClick:o})})}),Object(J.jsx)(R.x,{title:"\u6c34\u5e73\u7ffb\u8f6c",placement:"bottom",children:Object(J.jsx)("div",{children:Object(J.jsx)(R.d,{name:"flipHorizontal",fontSize:28,onClick:u})})}),Object(J.jsx)(R.x,{title:"\u5782\u76f4\u7ffb\u8f6c",placement:"bottom",children:Object(J.jsx)("div",{children:Object(J.jsx)(R.d,{name:"flipVertical",fontSize:28,onClick:s})})})]})})),H=n(1220),G=(n(1235),n(208)),F=n(1202),B=n(16),V=n(514),Y=n(512),Z=n(7),W=n(173),X=function(e){return e.px="px",e.ch="ch",e.cm="cm",e}({}),K="customSizeStoreKey",q=function(e){e=localStorage.getItem(e);try{return e?JSON.parse(e):[]}catch(e){return[]}},$=(M=n(330),n.n(M)),Q=(M=(n(1236),n(9)),n.n(M)),ee=v.a.memo((function(e){var t=e.canAutoCrop,n=e.handleLock;return Object(J.jsx)(R.x,{title:t?"\u672a\u9501\u5b9a\u6bd4\u4f8b":"\u9501\u5b9a\u6bd4\u4f8b",placement:"bottom",children:Object(J.jsx)("span",{className:Q()({"m-size-input__lock":!0,active:!t}),children:Object(J.jsx)(R.d,{fontSize:24,name:t?"delink":"link",onClick:function(){return n()}})})})})),te=(n(1237),"customCropSizeStoreKey"),ne=[{id:1,name:"1:1 \u6b63\u65b9\u5f62",value:{width:1,height:1}},{id:2,name:"2:3 \u5355\u53cd\u76f8\u673a(\u7ad6)",value:{width:2,height:3}},{id:3,name:"3:2 \u5355\u53cd\u76f8\u673a(\u6a2a)",value:{width:3,height:2}},{id:4,name:"3:4 \u6807\u51c6\u5c4f\u5e55(\u7ad6)",value:{width:3,height:4}},{id:5,name:"4:3 \u6807\u51c6\u5c4f\u5e55(\u6a2a)",value:{width:4,height:3}},{id:6,name:"9:16 \u89c6\u9891\u7ad6\u5c4f",value:{width:9,height:16}},{id:7,name:"16:9 \u89c6\u9891\u6a2a\u5c4f",value:{width:16,height:9}},{id:8,name:"9:18 \u5168\u9762\u5c4f(\u7ad6)",value:{width:9,height:18}},{id:9,name:"18:9 \u5168\u9762\u5c4f(\u6a2a)",value:{width:18,height:9}},{id:10,name:"5:3 \u5bbd\u5c4f\u76f8\u518c",value:{width:5,height:3}}],re=R.m.Option,ce=n(519),ae=(n(1238),n(1239),n(24)),ie=Symbol("stageSizeChangeAction"),oe=n(327),ue=n(18),se=n(233),le=n(523),de=function(e){return e.ModalCancel="a_S_C_E_M_C",e}({}),fe=v.a.memo((function(e){var t=e.onToggle,n=e.onReset,r=e.onSlider,c=e.featureType,a=e.curType,i=(e=e.setCurType,Object(x.H)()),o=b({onSlider:function(e){null!=r&&r(c,e)},onReset:function(){null!=n&&n(c)}}),u=j(c,e,(function(e){null!=t&&t(c,e)}));return p(c,x.i.color,e,i),Object(J.jsx)(w.a,Object(y.a)(Object(y.a)({name:"\u8272\u5f69",showContent:a===c,icon:"hslHue"},u),{},{children:Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(x.b,Object(y.a)({},o))})}))})),he=v.a.memo((function(e){var t=e.onToggle,n=e.onReset,r=e.onSlider,c=e.featureType,a=e.curType,i=(e=e.setCurType,Object(x.M)()),o=b({onSlider:function(e){null!=r&&r(c,e)},onReset:function(){null!=n&&n(c)}}),u=j(c,e,(function(e){null!=t&&t(c,e)}));return p(c,x.i.light,e,i),Object(J.jsx)(w.a,Object(y.a)(Object(y.a)({name:"\u5149\u6548",showContent:a===c,icon:"brightness"},u),{},{children:Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(x.l,Object(y.a)({},o))})}))})),be=n(521),je=v.a.memo((function(e){var t=e.onToggle,n=e.onReset,r=e.onSlider,c=e.featureType,a=e.curType,i=(e=e.setCurType,Object(x.N)()),o=Object(F.a)().isVipMaterial,u=b({onSlider:function(e){null!=r&&r(c,e)},onReset:function(){null!=n&&n(c)}}),s=j(c,e,(function(e){null!=t&&t(c,e)}));return p(c,x.i.particulars,e,i),Object(J.jsx)(w.a,Object(y.a)(Object(y.a)({name:"\u7ec6\u8282",icon:"structure",isVip:!0,showContent:a===c},s),{},{children:Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(x.n,Object(y.a)(Object(y.a)({},u),{},{isVipMaterial:function(e,t){o(e,t,{vip_type:"func_".concat(be.a[c].id,"_").concat(be.a[c].func)})}}))})}))})),pe=v.a.memo((function(e){var t=e.onToggle,n=e.onReset,r=e.onSlider,c=e.tipType,a=e.featureType,i=e.curType,o=e.setCurType,u=e.onSelect,s=e.onTab,l=(e=Object(x.O)(),b({onSelect:function(e,t){null!=u&&u(a,e,t)},onTab:function(e){null!=s&&s(a,e)},onSlider:function(e){null!=r&&r(a,e)},onReset:function(){null!=n&&n(a)}})),d=j(a,o,(function(e){null!=t&&t(a,e)}));return p(a,x.i.posterize,o,e),Object(J.jsx)(w.a,Object(y.a)(Object(y.a)({name:"\u8272\u8c03\u5206\u79bb",functionTipsType:c,showContent:i===a,icon:"eparation"},d),{},{children:Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(x.o,Object(y.a)({},l))})}))})),Oe=n(22),me=v.a.memo((function(e){var t=e.onToggle,n=(e.onReset,e.onSlider),r=e.tipType,c=e.featureType,a=e.curType,i=e.setCurType,o=(e=(e.onSelect,Object(T.d)())).register,u=e.use,s=Object(Oe.v)(),l=Object(x.K)(),d=Object(Oe.j)(),f=Object(T.d)().getCurFeature,h=Object(L.w)().addOrUpdate,b=Object(L.p)().getMainLayer,p=Object(m.useRef)(null),v=Object(m.useRef)(null),_=(e=Object(x.z)()).initIntelligentColors,g=e.renderAllIntelligentPreview,I=e.create,N=e.destroy,M=e.applyEnhance,U=e.action,D=e.doGlMask,P=e.resetMask,H=(e.getMaskData,e.pushHistory,Object(m.useEffect)((function(){d||a!==c||i("")}),[d]),Object(A.d)()),G=(Object(A.c)().isShowLoading,Object(Oe.w)()),F=function(){var e=Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!1),i(""),G(!1),setTimeout(Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:case"end":return e.stop()}}),e)}))),1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(m.useEffect)((function(){var e=function(){var e=Object(k.a)(Object(S.a)().mark((function e(t){var n,r,a,o,s,d,j,m,y;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,H.show(),n=t.values,r=t.layer,a=z()(n),o=f(),s=Object(E.a)(o),d=o===O.a.ADJUST_SIZE_CHANGE,!s||d)return H.show(),setTimeout(Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(z()(r),z()(n));case 2:H.hide();case 3:case"end":return e.stop()}}),e)}))),1),e.abrupt("return");e.next=11;break;case 11:if(o!==c)return p.current=r,e.next=15,u(c);e.next=18;break;case 15:i(c),e.next=27;break;case 18:if(s=b(),d=s.data.url,j=r.data.url,d!==j)return e.next=24,I(r);e.next=26;break;case 24:e.next=27;break;case 26:h(r);case 27:if(U(z()(n)),l({info:z()(n)}),j=z()(n),m=j.isHslSelectAll,y=j.hslPickColors,m&&"string"==typeof a.color&&(a.color=Object(x.t)(y)),null!=a&&a.maskCode)return e.next=34,D(a.maskCode);e.next=37;break;case 34:v.current=a.maskCode,e.next=39;break;case 37:P(),v.current=null;case 39:return e.next=41,g();case 41:return e.next=43,_();case 43:H.hide(),e.next=50;break;case 46:e.prev=46,e.t0=e.catch(0),H.hide();case 50:case"end":return e.stop()}}),e,null,[[0,46]])})));return function(t){return e.apply(this,arguments)}}();C.a.on("".concat(x.e.BeforeUndo).concat(x.i.intelligentColor),e),C.a.on("".concat(x.e.BeforeRedo).concat(x.i.intelligentColor),e)}),[]),e=j(c,i,(function(e){null!=t&&t(c,e)}));return Object(m.useEffect)((function(){o(c,{leave:function(){return Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.show(),e.next=3,F();case 3:H.hide();case 4:case"end":return e.stop()}}),e)})))()},enter:function(){return Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(k.a)(Object(S.a)().mark((function e(t,n){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{H.show(),b().data.isTransparent&&R.i.info("\u5f53\u524d\u529f\u80fd\u5bf9\u521b\u5efa\u7684\u7a7a\u753b\u5e03\u4e0d\u751f\u6548\u54e6~"),setTimeout(Object(k.a)(Object(S.a)().mark((function e(){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.current)return e.next=3,I(p.current);e.next=5;break;case 3:e.next=7;break;case 5:return e.next=7,I();case 7:return e.next=9,g();case 9:return e.next=11,_();case 11:s(!0),t(null),p.current=null,H.hide();case 15:case"end":return e.stop()}}),e)}))))}catch(e){}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))()}})}),[]),Object(m.useEffect)((function(){var e=function(){var e=Object(k.a)(Object(S.a)().mark((function e(t){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.current=null,window._stat_track("quick_color_change_click",{func:"retain_area",area_type:"contents",func_detail:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return C.a.on(x.p.drawEnd,e),function(){C.a.off(x.p.drawEnd,e)}}),[]),Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(w.a,Object(y.a)(Object(y.a)({className:"intelligent-step-entry",name:"\u4e00\u952e\u6362\u8272",icon:"inverse",functionTipsType:r,showContent:a===c},e),{},{children:Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(x.k,{onChange:function(e){var t=e.type||"";delete e.type,window._stat_track("quick_color_change_click",e),null!=n&&n(c,t)}})})}))})})),ve=v.a.memo((function(e){var t=e.onToggle,n=e.onReset,r=e.onSlider,c=e.tipType,a=e.featureType,i=e.curType,o=e.setCurType,u=e.onSelect,s=(e=Object(x.J)(),Object(F.a)().isVipMaterial),l=b({onSelect:function(e,t){null!=u&&u(a,e,t)},onSlider:function(e){null!=r&&r(a,e)},onReset:function(){null!=n&&n(a)}}),d=j(a,o,(function(e){null!=t&&t(a,e)}));return p(a,x.i.hsl,o,e),Object(J.jsx)(w.a,Object(y.a)(Object(y.a)({name:"HSL",icon:"hsl",isVip:!0,functionTipsType:c,showContent:i===a},d),{},{children:Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(x.j,Object(y.a)(Object(y.a)({},l),{},{isVipMaterial:function(e,t){s(e,t,{vip_type:"func_".concat(be.a[a].id,"_").concat(be.a[a].func)})}}))})}))})),_e=n(212),ge=n(522),ye=n(26);t.default=v.a.memo((function(){var e=Object(ue.c)((function(e){return e.editor.adjustCollapseModel.currentType})),t=Object(ue.b)((function(e){return e.editor.adjustCollapseModel.setCurrentType})),n=Object(_e.a)().destroy,r=(d=Object(T.d)()).use,c=d.getCurFeature,a=Object(D.h)().id,i=(d=Object(ge.b)(be.a)).onToggleHandle,o=d.onSliderHandle,u=d.onResetHandle,s=d.onAttrChangeHandle,l=d.onSelectHandle,d=d.onTabHandle,f=Object(ye.h)();return Object(m.useEffect)((function(){e===O.a.ADJUST_ELIMINATE&&n()}),[e]),Object(m.useEffect)((function(){function e(){var e=c();Object(E.a)(e)&&r(O.b.ADJUST_MENU),t("")}return C.b.onInit(e),function(){C.b.offInit(e)}}),[]),Object(m.useEffect)((function(){function e(){var e=f.type===x.h.LEGACY?O.a.ADJUST_ELIMINATE:O.a.ADJUST_AI_ELIMINATE;t(e)}var t=function(e){var t=c();Object(E.a)(t)&&(t=be.a[e],e=Object(ge.a)(t,f.penType),window._stat_track("tpbj_subfunction_tick",{func:e,recordId:a}))};return C.a.on(x.d.drawEnd,e),function(){C.a.off(x.d.drawEnd,e)}}),[a,f.type,f.penType]),Object(J.jsx)(_.Scrollbars,{children:Object(J.jsxs)("div",{children:[Object(J.jsx)(h,{curType:e,setCurType:t}),Object(J.jsx)(g.a,{tipType:f.type===x.h.LEGACY?O.c.ELIMINATE:O.c.AI_ELIMINATE,featureType:O.a.ADJUST_ELIMINATE,curType:e,setCurType:t,onToggle:function(e,t){f.type===x.h.LEGACY?i(O.a.ADJUST_ELIMINATE,t):i(O.a.ADJUST_AI_ELIMINATE,!0)},onReset:function(){f.type===x.h.LEGACY?u(O.a.ADJUST_ELIMINATE):u(O.a.ADJUST_AI_ELIMINATE)},onSlider:function(e,t,n,r){f.type===x.h.LEGACY?o(O.a.ADJUST_ELIMINATE,t,n,r):o(O.a.ADJUST_AI_ELIMINATE,t,n,r)},onAttrChange:function(e,t,n){f.type===x.h.LEGACY?s(O.a.ADJUST_ELIMINATE,t,n):s(O.a.ADJUST_AI_ELIMINATE,t,n)},onTab:function(e,t){t===x.h.LEGACY?(i(O.a.ADJUST_AI_ELIMINATE,!1),i(O.a.ADJUST_ELIMINATE,!0)):(i(O.a.ADJUST_ELIMINATE,!1),i(O.a.ADJUST_AI_ELIMINATE,!0))}}),Object(J.jsx)(he,{featureType:O.a.ADJUST_LIGHT,curType:e,setCurType:t,onToggle:i,onReset:u,onSlider:o}),Object(J.jsx)(fe,{featureType:O.a.ADJUST_COLOR,curType:e,setCurType:t,onToggle:i,onReset:u,onSlider:o}),Object(J.jsx)(me,{tipType:O.c.INTELLIGENT,featureType:O.a.ADJUST_INTELLIGENT,curType:e,setCurType:t,onToggle:i,onReset:u,onSlider:o}),Object(J.jsx)(pe,{tipType:O.c.POSTERIZE,featureType:O.a.ADJUST_POSTERIZE,curType:e,setCurType:t,onToggle:i,onReset:u,onSlider:o,onSelect:l,onTab:d}),Object(J.jsx)(je,{featureType:O.a.ADJUST_PARTICULARS,curType:e,setCurType:t,onToggle:i,onReset:u,onSlider:o}),Object(J.jsx)(ve,{tipType:O.c.HSL,featureType:O.a.ADJUST_HSL,curType:e,setCurType:t,onToggle:i,onReset:u,onSlider:o,onSelect:l})]})})}))}}]);