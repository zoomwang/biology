/*! For license information please see chunk-saas.1d21549a.chunk.js.LICENSE.txt */
(this["webpackJsonpimage-editor"]=this["webpackJsonpimage-editor"]||[]).push([[10],[,,function(t,e,r){"use strict";r.d(e,"s",(function(){return h})),r.d(e,"m",(function(){return p})),r.d(e,"j",(function(){return y})),r.d(e,"b",(function(){return g})),r.d(e,"k",(function(){return m})),r.d(e,"l",(function(){return v})),r.d(e,"i",(function(){return b})),r.d(e,"e",(function(){return w})),r.d(e,"c",(function(){return O})),r.d(e,"y",(function(){return x})),r.d(e,"C",(function(){return j})),r.d(e,"D",(function(){return _})),r.d(e,"B",(function(){return E})),r.d(e,"a",(function(){return n})),r.d(e,"p",(function(){return o})),r.d(e,"t",(function(){return i})),r.d(e,"r",(function(){return a})),r.d(e,"q",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"u",(function(){return s})),r.d(e,"n",(function(){return l})),r.d(e,"A",(function(){return f})),r.d(e,"z",(function(){return d})),r.d(e,"v",(function(){return T})),r.d(e,"x",(function(){return P.f})),r.d(e,"w",(function(){return P.e})),r.d(e,"o",(function(){return P.d})),r.d(e,"g",(function(){return P.b})),r.d(e,"f",(function(){return P.a})),r.d(e,"h",(function(){return P.c}));var n,o,i,a,c,u,s,l,f,d,h=25,p=50,y=8e3,g=30,m=12,v=20,b={url:"https://material-center.meitudata.com/material/image/61615aef9f64d8971.png",width:548,height:493},w="layer-canvas-",O={name:"AlibabaPuHuiTi-Regular",zip_file:"https://titan-h5.meitu.com/xiuxiu-pc/image-editor/text/fonts/Alibaba-PuHuiTi-Regular.zip",zip_url:"https://titan-h5.meitu.com/xiuxiu-pc/image-editor/text/fonts/Alibaba-PuHuiTi-Regular.ttf",woff2_file_url:"https://xiuxiupro-material-center.meitudata.com/material/font_subset/1658752217837.woff2"},x=2,j=(e=r(139),"ar_res"),_="https://titan-h5.meitu.com/xiuxiu-pc/image-editor/text/106/ar_res.zip",E=[{color:"#fe2f51ff",textShadow:[],textGlow:[],type:"local",id:"material_local_1",textStroke:[{id:Object(e.a)(),color:"#ffffffff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#ffb608ff",textShadow:[],textGlow:[],type:"local",id:"material_local_2",textStroke:[{id:Object(e.a)(),color:"#000000ff",width:15,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",textShadow:[],textGlow:[],type:"local",id:"material_local_3",textStroke:[{id:Object(e.a)(),color:"#5fc34bff",width:20,direction:0,hidden:!1,editable:!0}]},{color:"#2c6cd5ff",textShadow:[],textGlow:[],type:"local",id:"material_local_4",textStroke:[{id:Object(e.a)(),color:"#ffffffff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",type:"local",id:"material_local_5",textShadow:[{id:Object(e.a)(),color:"#00000033",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:20}],textGlow:[],textStroke:[]},{color:"#ffdbddff",isVip:!0,textVipId:"vip-font-style-2",type:"local",id:"material_local_6",textShadow:[{id:Object(e.a)(),color:"#fd8989ff",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:20}],textGlow:[],textStroke:[]},{color:"#000000ff",type:"local",id:"material_local_7",textShadow:[{id:Object(e.a)(),color:"#ffb507ff",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:20}],textGlow:[],textStroke:[]},{color:"#ffda08ff",isVip:!0,textVipId:"vip-font-style-3",type:"local",id:"material_local_8",textShadow:[{id:Object(e.a)(),color:"#ef4913ff",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:20}],textGlow:[],textStroke:[]},{color:"#ffffffff",isVip:!0,textVipId:"vip-font-style-4",type:"local",id:"material_local_8",textShadow:[],textGlow:[{id:Object(e.a)(),color:"#0bffdf99",blur:0,width:40,hidden:!1,editable:!0}],textStroke:[]},{color:"#ffffffff",type:"local",id:"material_local_9",textShadow:[],textGlow:[{id:Object(e.a)(),color:"#fb35dd99",blur:0,width:40,hidden:!1,editable:!0}],textStroke:[]},{color:"#fefefeff",type:"local",id:"material_local_10",textShadow:[],textGlow:[{id:Object(e.a)(),color:"#ffe90099",blur:0,width:40,hidden:!1,editable:!0}],textStroke:[]},{color:"#f21d36ff",type:"local",id:"material_local_11",textShadow:[{id:Object(e.a)(),color:"#fd1e7cff",blur:50,hidden:!1,editable:!0}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#ffffffff",width:6,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",type:"local",id:"material_local_12",textShadow:[],textGlow:[{id:Object(e.a)(),color:"#ffffff99",blur:0,width:40,hidden:!1,editable:!0}],textStroke:[{id:Object(e.a)(),color:"#000000ff",width:6,direction:0,hidden:!1,editable:!0}]},{color:"#5fc34bff",type:"local",id:"material_local_13",textShadow:[],textGlow:[{id:Object(e.a)(),color:"#5fc34b99",blur:0,width:70,hidden:!1,editable:!0}],textStroke:[{id:Object(e.a)(),color:"#ffffffff",width:15,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",type:"local",id:"material_local_14",isVip:!0,textVipId:"vip-font-style-7",textShadow:[],textGlow:[{id:Object(e.a)(),color:"#ff35a799",blur:0,width:40,hidden:!1,editable:!0}],textStroke:[{id:Object(e.a)(),color:"#ff35a7ff",width:5,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",type:"local",id:"material_local_15",isVip:!0,textVipId:"vip-font-style-8",textShadow:[],textGlow:[{id:Object(e.a)(),color:"#0fd7f599",blur:0,width:50,hidden:!1,editable:!0}],textStroke:[{id:Object(e.a)(),color:"#0fd7f5ff",width:5,direction:0,hidden:!1,editable:!0}]},{color:"#000000ff",type:"local",id:"material_local_16",textShadow:[{id:Object(e.a)(),color:"#000000ff",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:25.000000000000004}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#ffffffff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#fefefeff",type:"local",id:"material_local_17",textShadow:[{id:Object(e.a)(),color:"#cd2701ff",blur:0,hidden:!1,editable:!0,angle:-55,distance:24.999999999999996}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#ff693bff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#fde959ff",isVip:!0,textVipId:"vip-font-style-10",type:"local",id:"material_local_18",textShadow:[{id:Object(e.a)(),color:"#a52dc5ff",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:25.000000000000004}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#4933ffff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#ff7235ff",type:"local",id:"material_local_19",textShadow:[{id:Object(e.a)(),color:"#ffffffff",blur:0,hidden:!1,editable:!0,angle:-54.000000000000014,distance:25}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#ffffffff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",type:"local",id:"material_local_20",textShadow:[{id:Object(e.a)(),color:"#ff35a7ff",blur:0,hidden:!1,editable:!0,angle:-53.00000000000003,distance:19}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#ff35a7ff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",type:"local",id:"material_local_21",textShadow:[{id:Object(e.a)(),color:"#35c3ffff",blur:0,hidden:!1,editable:!0,angle:-53.00000000000003,distance:19}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#35c3ffff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#ffffffff",type:"local",id:"material_local_22",textShadow:[{id:Object(e.a)(),color:"#1343d366",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:25.000000000000004}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#415ff7ff",width:8,direction:0,hidden:!1,editable:!0}]},{color:"#f21e37ff",isVip:!0,textVipId:"vip-font-style-14",type:"local",id:"material_local_23",textShadow:[{id:Object(e.a)(),color:"#ffd735ff",blur:0,hidden:!1,editable:!0,angle:-59.99999999999999,distance:25.000000000000004}],textGlow:[],textStroke:[{id:Object(e.a)(),color:"#ffd735ff",width:5,direction:0,hidden:!1,editable:!0}]}];function k(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}function S(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(e=n=n||{}).LAYER="layer",e.OPERATE="operate",e.LOCK="lock",e.LOCK_ICON="lock-icon",e.MOVE="move",e.SCALE="scale",e.RESIZE="resize",e.ROTATE="rotate",e.LINK="link",e.LINK_ICON="link-icon",e.EDIT="edit",e.CROP_STAGE="crop-stage",(e=o=o||{})[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",(e=i=i||{}).LT="lt",e.LB="lb",e.RT="rt",e.RB="rb",(e=a=a||{}).TC="tc",e.BC="bc",e.LC="lc",e.RC="rc",(e=c=c||{}).RESIZE="resize",e.SCALE="scale",(e=u=u||{})[e.POSITIVE=1]="POSITIVE",e[e.OPPOSITE=-1]="OPPOSITE",(e=s=s||{})[e.none=0]="none",e[e.fill=1]="fill",e[e.cover=2]="cover",e[e.repeat=3]="repeat",k(e={},s.none,""),k(e,s.cover,"cover"),k(e,s.fill,"100% 100%"),(e=l=l||{})[e.none=0]="none",e[e.cut=1]="cut",e[e.imgLayer=2]="imgLayer",(e=f=f||{}).HORIZONTAL_TB="horizontal-tb",e.VERTICAL_LR="vertical-lr",e.VERTICAL_RL="vertical-rl",(e=d=d||{}).LEFT="left",e.CENTER="center",e.RIGHT="right",e.JUSTIFY="justify",S(e={},d.LEFT,"left"),S(e,d.CENTER,"center"),S(e,d.RIGHT,"right"),S(e,d.JUSTIFY,"justify"),(e=L=L||{})[e.NONE=0]="NONE",e[e.UNDERLINE=1]="UNDERLINE",e[e.LINETHROUGH=2]="LINETHROUGH",S(e={},L.UNDERLINE,"underline"),S(e,L.LINETHROUGH,"line-through"),S(e,L.NONE,"none"),(e=M=M||{})[e.NORMAL=0]="NORMAL",e[e.BOLD=1]="BOLD",S(L={},M.NORMAL,"normal"),S(L,M.BOLD,"bold"),(e=I=I||{})[e.NORMAL=0]="NORMAL",e[e.ITALIC=1]="ITALIC",S(L={},I.ITALIC,"italic"),S(L,I.NORMAL,"normal"),(M=T=T||{})[M.WITHOUT=0]="WITHOUT",M[M.CENTER=1]="CENTER";var L,I,T,M,P=r(88)},,,,,function(t,e,r){"use strict";r.d(e,"t",(function(){return n.b})),r.d(e,"mb",(function(){return n.f})),r.d(e,"y",(function(){return n.d})),r.d(e,"L",(function(){return n.e})),r.d(e,"x",(function(){return n.c})),r.d(e,"Lb",(function(){return n.g})),r.d(e,"i",(function(){return n.a})),r.d(e,"J",(function(){return o.b})),r.d(e,"r",(function(){return o.a})),r.d(e,"eb",(function(){return o.c})),r.d(e,"O",(function(){return i})),r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return f})),r.d(e,"sb",(function(){return d})),r.d(e,"vb",(function(){return h})),r.d(e,"ib",(function(){return p})),r.d(e,"k",(function(){return y})),r.d(e,"l",(function(){return g})),r.d(e,"m",(function(){return m})),r.d(e,"S",(function(){return b})),r.d(e,"V",(function(){return w})),r.d(e,"T",(function(){return O})),r.d(e,"bb",(function(){return x})),r.d(e,"wb",(function(){return _})),r.d(e,"ub",(function(){return E})),r.d(e,"z",(function(){return k.b})),r.d(e,"lb",(function(){return k.e})),r.d(e,"ob",(function(){return k.g})),r.d(e,"zb",(function(){return k.j})),r.d(e,"P",(function(){return k.c})),r.d(e,"Kb",(function(){return k.l})),r.d(e,"R",(function(){return k.d})),r.d(e,"Ab",(function(){return k.k})),r.d(e,"h",(function(){return k.a})),r.d(e,"xb",(function(){return k.i})),r.d(e,"tb",(function(){return k.h})),r.d(e,"nb",(function(){return k.f})),r.d(e,"u",(function(){return S.a})),r.d(e,"B",(function(){return S.c})),r.d(e,"v",(function(){return S.b})),r.d(e,"yb",(function(){return S.d})),r.d(e,"Bb",(function(){return S.e})),r.d(e,"q",(function(){return I})),r.d(e,"F",(function(){return T.h})),r.d(e,"s",(function(){return T.e})),r.d(e,"gc",(function(){return T.A})),r.d(e,"U",(function(){return T.o})),r.d(e,"o",(function(){return T.c})),r.d(e,"j",(function(){return T.b})),r.d(e,"gb",(function(){return T.v})),r.d(e,"p",(function(){return T.d})),r.d(e,"I",(function(){return T.j})),r.d(e,"H",(function(){return T.i})),r.d(e,"M",(function(){return T.l})),r.d(e,"cb",(function(){return T.u})),r.d(e,"ab",(function(){return T.t})),r.d(e,"K",(function(){return T.k})),r.d(e,"N",(function(){return T.m})),r.d(e,"hb",(function(){return T.w})),r.d(e,"Y",(function(){return T.r})),r.d(e,"E",(function(){return T.g})),r.d(e,"C",(function(){return T.f})),r.d(e,"X",(function(){return T.q})),r.d(e,"W",(function(){return T.p})),r.d(e,"f",(function(){return T.a})),r.d(e,"Z",(function(){return T.s})),r.d(e,"g",(function(){return M.b})),r.d(e,"Nb",(function(){return M.o})),r.d(e,"qb",(function(){return M.h})),r.d(e,"e",(function(){return M.a})),r.d(e,"kb",(function(){return M.g})),r.d(e,"G",(function(){return M.e})),r.d(e,"fc",(function(){return M.x})),r.d(e,"bc",(function(){return M.w})),r.d(e,"Jb",(function(){return M.m})),r.d(e,"Ib",(function(){return M.l})),r.d(e,"Yb",(function(){return M.t})),r.d(e,"D",(function(){return M.d})),r.d(e,"Fb",(function(){return M.k})),r.d(e,"w",(function(){return M.c})),r.d(e,"db",(function(){return M.f})),r.d(e,"Wb",(function(){return M.r})),r.d(e,"ac",(function(){return M.v})),r.d(e,"Xb",(function(){return M.s})),r.d(e,"Ob",(function(){return M.p})),r.d(e,"Zb",(function(){return M.u})),r.d(e,"Db",(function(){return M.i})),r.d(e,"Eb",(function(){return M.j})),r.d(e,"Mb",(function(){return M.n})),r.d(e,"Pb",(function(){return M.q})),r.d(e,"n",(function(){return A})),r.d(e,"fb",(function(){return C})),r.d(e,"A",(function(){return R.b})),r.d(e,"Rb",(function(){return R.l})),r.d(e,"Tb",(function(){return R.n})),r.d(e,"Ub",(function(){return R.o})),r.d(e,"Qb",(function(){return R.k})),r.d(e,"Sb",(function(){return R.m})),r.d(e,"Vb",(function(){return R.p})),r.d(e,"jb",(function(){return R.h})),r.d(e,"rb",(function(){return R.i})),r.d(e,"Q",(function(){return R.f})),r.d(e,"Cb",(function(){return N})),r.d(e,"pb",(function(){return D})),r.d(e,"Gb",(function(){return F})),r.d(e,"Hb",(function(){return B})),r.d(e,"d",(function(){return v})),r.d(e,"c",(function(){return U})),r.d(e,"cc",(function(){return z.a})),r.d(e,"ec",(function(){return z.c})),r.d(e,"dc",(function(){return z.b}));var n=r(375),o=r(388);function i(){var t="0"+(e=new Date).getHours(),e="0"+e.getMinutes();return"".concat(t.slice(-2),":").concat(e.slice(-2))}e=r(137);var a=r.n(e),c=r(19),u=r(2),s=!1,l="DOCUMENT_KEY_DOWN",f="DOCUMENT_KEY_UP",d=(window.addEventListener("blur",(function(){s=!1}),!1),document.addEventListener("keydown",(function(t){(t.metaKey||t.ctrlKey||t.shiftKey)&&(s=!0),c.a.emit(l,t)})),document.addEventListener("keyup",(function(t){var e=null==(e=t.key)?void 0:e.toLocaleLowerCase();(!(t.metaKey||t.ctrlKey||t.shiftKey)||t.metaKey&&"meta"===e&&!t.ctrlKey&&!t.shiftKey||t.ctrlKey&&"control"===e&&!t.metaKey&&!t.shiftKey||t.shiftKey&&"shift"===e&&!t.ctrlKey&&!t.metaKey)&&(s=!1),c.a.emit(f,t)})),function(){return s});function h(t){return"lock"===(null==t?void 0:t.getAttribute("data-type"))||"true"===(null==t?void 0:t.getAttribute("data-lock"))}function p(t){return(null==t?void 0:t.getAttribute("data-type"))||""}function y(t){return"true"===t.getAttribute("data-move-make-up")}function g(t,e){return p(t)===e}function m(t,e){return t=p(t),-1===a()(e,t)}var v,b=function(t){return j(t)&&(t.getAttribute("id")||t.getAttribute("data-id"))||""},w=function(t){return j(t)&&t.getAttribute("data-layer-type")||""},O=function(t){return!!j(t)&&"true"===t.getAttribute("data-lock")},x=p,j=function(t){return x(t)===u.a.LAYER},_=function(t){return!!(t=x(t))&&t!==u.a.LAYER},E=function(t){return t.button===u.p.LEFT},k=r(376),S=r(279),L=r(192),I=function(t){return t&&Object(L.original)(t)},T=r(133),M=r(162),P=(e=r(607),r.n(e)),A=function(t,e,r,n){return t=r<t?1:(t-u.s)/r,r=n<e?1:(e-u.s)/n,P()(t<r?t:r,2)},C=function(t){var e=t.top,r=t.left,n=t.width,o=t.height,i=(t=t.data).naturalWidth,a=t.naturalHeight;return{stageCenterPoint:n={x:n/2,y:o/2},originMainLayerCenterPoint:o={x:r+i*(t=t.imageTransform.scale)/2,y:e+a*t/2},originRelativeStagePoint:Object(M.i)(n,o)}},R=r(217),N=function(t){return 96*t/2.54},D=function(t){return 96*t},F=function(t){return t/96},B=function(t){return t/96*2.54};e=r(129),e=r.n(e);function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}document.addEventListener("mousedown",(function(t){t.button===u.p.LEFT&&(U.fireMouseup(),U.mousedownEvent=t,U.mousedownEventList.forEach((function(e){e(t)})))}),!1),document.addEventListener("mousemove",e()((function(t){t.button===u.p.LEFT&&U.mousemoveEventList.forEach((function(e){e(t)}))}),5,{leading:!0}),!1),document.addEventListener("mouseup",(function(t){t.button===u.p.LEFT&&(U.mousedownEvent=null,U.mouseupEventList.forEach((function(e){e(t)})))}),!1),(e=v=v||{})[e.Enter=0]="Enter",e[e.Move=1]="Move",e[e.Leave=2]="Leave";var U=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.startPoint=null,this.lastPoint=null,this.panEventCallback=null,this.firstMove=!0,this.isMoving=!1,this.currentTarget=null,this.mousedownHandle=void 0,this.mousemoveHandle=void 0,this.mouseupHandle=void 0}var e,r,n;return e=t,n=[{key:"fireMouseup",value:function(){t.mousedownEvent&&t.mouseupEventList.forEach((function(e){e(t.mousedownEvent)})),t.mousedownEvent=null}}],(r=[{key:"bindEvent",value:function(){var e=this;this.mousedownHandle=function(t){return e.start(t)},this.mousemoveHandle=function(t){return e.move(t)},this.mouseupHandle=function(t){return e.end(t)},t.mousedownEventList.add(this.mousedownHandle),t.mousemoveEventList.add(this.mousemoveHandle),t.mouseupEventList.add(this.mouseupHandle),t.mousedownEvent&&this.mousedownHandle(t.mousedownEvent)}},{key:"unbindEvent",value:function(){t.mousedownEventList.delete(this.mousedownHandle),t.mousemoveEventList.delete(this.mousemoveHandle),t.mouseupEventList.delete(this.mouseupHandle),this.mousedownHandle=null,this.mousemoveHandle=null,this.mouseupHandle=null}},{key:"start",value:function(t){this.currentTarget=t.target,this.startPoint={x:t.x,y:t.y},this.lastPoint={x:t.x,y:t.y}}},{key:"move",value:function(t){var e;null!==this.panEventCallback&&null!==this.startPoint&&null!==this.lastPoint&&(e={x:t.x,y:t.y},e={originEvent:t,startPoint:this.startPoint,lastPoint:this.lastPoint,currentPoint:e,distance:Object(M.k)(this.startPoint,e),deltaX:e.x-this.lastPoint.x,deltaY:e.y-this.lastPoint.y,displacementX:e.x-this.startPoint.x,displacementY:e.y-this.startPoint.y,distanceX:Math.abs(e.x-this.startPoint.x),distanceY:Math.abs(e.y-this.startPoint.y),target:this.currentTarget,isEnd:!1,x:t.x,y:t.y,isStart:this.firstMove},this.panEventCallback(e),this.lastPoint={x:t.x,y:t.y},this.isMoving=!0,this.firstMove=!1)}},{key:"end",value:function(t){var e;null!==this.startPoint&&null!==this.panEventCallback&&null!==this.lastPoint&&null!==this.currentTarget&&(e={x:t.x,y:t.y},e={originEvent:t,startPoint:this.startPoint,lastPoint:this.lastPoint,currentPoint:e,distance:Object(M.k)(this.startPoint,e),deltaX:e.x-this.lastPoint.x,deltaY:e.y-this.lastPoint.y,displacementX:e.x-this.startPoint.x,displacementY:e.y-this.startPoint.y,distanceX:Math.abs(e.x-this.startPoint.x),distanceY:Math.abs(e.y-this.startPoint.y),currentTarget:t.currentTarget,target:this.currentTarget,isEnd:!0,isStart:!1,x:t.x,y:t.y},this.isMoving&&this.panEventCallback(e),this.startPoint=null,this.firstMove=!0,this.currentTarget=null,this.isMoving=!1)}},{key:"on",value:function(t,e){t===v.Move&&(this.panEventCallback=e,this.bindEvent())}},{key:"off",value:function(t){t===v.Move&&(this.unbindEvent(),this.panEventCallback=null)}}])&&G(e.prototype,r),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();U.mousedownEvent=void 0,U.mousedownEventList=new Set,U.mousemoveEventList=new Set,U.mouseupEventList=new Set;var z=r(181)},,,function(t,e,r){"use strict";var n=r(73),o=(r.d(e,"d",(function(){return n.a})),r.d(e,"e",(function(){return n.b})),r(254)),i=(r.d(e,"a",(function(){return o.a})),r(514)),a=(r.d(e,"c",(function(){return i.a})),r.d(e,"f",(function(){return i.b})),r.d(e,"g",(function(){return i.c})),r.d(e,"h",(function(){return i.d})),r.d(e,"i",(function(){return i.e})),r.d(e,"j",(function(){return i.f})),r.d(e,"k",(function(){return i.g})),r.d(e,"l",(function(){return i.h})),r.d(e,"m",(function(){return i.i})),r.d(e,"n",(function(){return i.j})),r.d(e,"o",(function(){return i.k})),r.d(e,"p",(function(){return i.l})),r.d(e,"q",(function(){return i.m})),r.d(e,"r",(function(){return i.n})),r.d(e,"s",(function(){return i.o})),r.d(e,"t",(function(){return i.p})),r.d(e,"u",(function(){return i.q})),r.d(e,"v",(function(){return i.r})),r.d(e,"w",(function(){return i.s})),r.d(e,"x",(function(){return i.t})),r.d(e,"y",(function(){return i.u})),r.d(e,"z",(function(){return i.v})),r.d(e,"A",(function(){return i.w})),r.d(e,"B",(function(){return i.x})),r.d(e,"C",(function(){return i.y})),r.d(e,"D",(function(){return i.z})),r.d(e,"E",(function(){return i.A})),r.d(e,"F",(function(){return i.B})),r.d(e,"G",(function(){return i.C})),r.d(e,"H",(function(){return i.D})),r.d(e,"I",(function(){return i.E})),r.d(e,"J",(function(){return i.F})),r.d(e,"K",(function(){return i.G})),r.d(e,"L",(function(){return i.H})),r.d(e,"M",(function(){return i.I})),r.d(e,"N",(function(){return i.J})),r(524));r.d(e,"b",(function(){return a.a}))},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"d",(function(){return f.a})),r.d(e,"s",(function(){return h})),r.d(e,"e",(function(){return p})),r.d(e,"f",(function(){return O})),r.d(e,"g",(function(){return I})),r.d(e,"h",(function(){return A})),r.d(e,"i",(function(){return C.a})),r.d(e,"j",(function(){return R.a})),r.d(e,"k",(function(){return N})),r.d(e,"l",(function(){return D})),r.d(e,"m",(function(){return F})),r.d(e,"n",(function(){return U})),r.d(e,"o",(function(){return K})),r.d(e,"p",(function(){return H})),r.d(e,"q",(function(){return V})),r.d(e,"r",(function(){return X})),r.d(e,"t",(function(){return J})),r.d(e,"u",(function(){return tt})),r.d(e,"v",(function(){return et})),r.d(e,"w",(function(){return rt})),r.d(e,"x",(function(){return W})),r.d(e,"y",(function(){return at})),r(790),r(250);e=r(99);var n=(r(792),e.a),o=(r(525),r(232)),i=(r(558),r(804),r(0)),a=r.n(i);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}var s=function(t){return a.a.createElement(o.a,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==c(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===c(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t))},l=(e=(r(805),r(653)),e=(r(807),e.a,r(559),r(610)),r(809),e.a),f=(e=(r(473),r(312)),r(813),e.a,r(173)),d=(e=(e=r(815)).keys().map(e),new Map),h=(e.forEach((function(t){t.__esModule&&(t=t.default);var e=/.*\/(.*)\.svg$/.exec(t);e&&e[1]&&(e=e[1].split(".")[0],d.set(e,t))})),function(t){var e=t.name,r=t.width;t=t.height;return a.a.createElement("img",{style:{pointerEvents:"none"},src:d.get(e),width:r,height:t})}),p=(e=(r(475),r(429)),r(824),e.a),y=(r(273),r(132)),g=(r(476),r(611));function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r(826);var v=["showStepBtn","tip","max","min","value","precision","style","onChange"];function b(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==m(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===m(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var O=function(t){var e=void 0===(e=t.showStepBtn)||e,r=t.tip,n=void 0===(s=t.max)?Number.MAX_SAFE_INTEGER:s,o=void 0===(s=t.min)?Number.MIN_SAFE_INTEGER:s,c=t.value,u=t.precision,s=void 0===(s=t.style)?{}:s,l=t.onChange,d=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,v),Object(i.useRef)()),h=function(t){return t=Math.min(t,n),Math.max(t,o)};return a.a.createElement(y.a,{title:r||""},a.a.createElement("div",{className:"mt-input-number",style:w({},s)},a.a.createElement(g.a,w(w({value:h(+c.toFixed(u||0)),max:n,min:o,bordered:!1,stringMode:!0},t),{},{className:"m-input-container",onInput:function(t){d.current&&clearTimeout(d.current),d.current=setTimeout((function(){var e=+t,r=(isNaN(e)&&(e=c),h(e));r<o&&(r=o),void 0===u||(r=h(+e.toFixed(u||0))),l&&l(r),clearTimeout(d.current)}),500)}})),e?a.a.createElement("div",{className:"arrows",onClick:function(t){return t.stopPropagation()}},a.a.createElement("div",{className:"top",onClick:function(){var t=h(c+1);l&&l(+t)}},a.a.createElement(f.a,{fontSize:12,name:"chevronUp"})),a.a.createElement("div",{className:"bottom",onClick:function(){var t=h(c-1);l&&l(+t)}},a.a.createElement(f.a,{fontSize:12,name:"chevronDown"}))):null))},x=r(114),j=(e=r(9),r.n(e));function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==_(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===_(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?L(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(844);var I=function(t){var e=t.style,r=t.bodyStyle,n=t.bodyClassName,o=t.className,c=void 0===(u=t.loading)||u,u=void 0===(u=t.loadingText)?"\u73a9\u547d\u52a0\u8f7d\u4e2d...":u,s=void 0===(s=t.hasMore)||s,l=void 0===(l=t.noMoreText)?"\u6ca1\u6709\u66f4\u591a\u4e86":l,d=void 0===(d=t.emptyText)?"\u6682\u65e0\u6570\u636e":d,h=t.nextPageRequest,p=void 0===(w=t.reachBottomDis)?100:w,y=void 0===(w=(t.lazyLoadOffSet,t.dataSource))?[]:w,g=void 0===(w=t.renderItem)?function(){}:w,m=void 0!==(w=t.isWaterfall)&&w,v=void 0===(w=t.columns)?2:w,b=void 0===(w=t.getItemHeight)?function(){}:w,w=t.id,O=t.emptyNode,_=(t=void 0===(t=t.beforeEmpty)?function(){}:t,S(Object(i.useState)([]),2)),E=_[0],L=_[1];return Object(i.useEffect)((function(){var t,e;m&&(t=Array.from({length:v},(function(){return[]})),e=Array.from({length:v},(function(){return 0})),y.forEach((function(r){var n=Math.min.apply(Math,e);n=e.indexOf(n),t[n].push(r),r=b(r)||0;e[n]=parseInt("".concat(e[n]+r))})),L(t))}),[y]),a.a.createElement(x.Scrollbars,{className:j()("v-list-component",o),style:k({},e),onScroll:function(t){var e=t.target.clientHeight,r=t.target.scrollTop;t=t.target.scrollHeight;c||t-p<=e+r&&h()},id:w},t&&t(),!m&&a.a.createElement("div",{className:n,style:k({},r)},y.map((function(t,e){return g(t,e)}))),m?a.a.createElement("div",{className:"v-list-component__waterfall"},E.map((function(t,e){return a.a.createElement("div",{key:e},t.map((function(t,r){return g(t,e)})))}))):null,c?a.a.createElement("div",{className:"v-list-component__loading"},u):null,c||!y.length||s?null:a.a.createElement("div",{className:"v-list-component__noMore"},l),s||y.length||c?null:a.a.createElement("div",{className:"v-list-component__empty"},a.a.createElement("div",{className:"v-list-component__empty__content"},O?O():a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{name:"subtitle",fontSize:64}),d))))};function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==T(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===T(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(845);var A=function(t){var e=t.style,r=t.className,n=t.indicator;t=t.tip;return a.a.createElement("div",{className:j()("b-loading-component",r),style:P({},e)},a.a.createElement("div",{className:"b-loading-component__icon"},n||a.a.createElement("div",{className:"loading-wrap"},a.a.createElement("span",{className:"content"}))),t?a.a.createElement("div",{className:"b-loading-component__tip"},t):null)},C=(e=(r(474),r(306)),r(846),e.a,r(124)),R=r(519),N=(e=(r(562),r(662)),r(854),e.a),D=(e=(r(368),r(308)),e=(r(856),e.a,r(477),r(309)),r(858),e.a),F=(e=(r(369),r(174)),r(861),e.a);function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?G(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(862);var U=function(t){var e=t.angle,r=void 0===(r=t.title)?"\u89d2\u5ea6":r,n=t.tooltipVisible,o=t.onChange,c=t.onAfterChange,u=(t=B(Object(i.useState)(!1),2))[0],s=t[1],l=(t=B(Object(i.useState)(e),2))[0],f=t[1],d=Object(i.useRef)(null),h=(Object(i.useEffect)((function(){f(e)}),[e]),Object(i.useCallback)((function(t){var e,r,n;u&&d.current&&(e=~~d.current.offsetHeight/2+d.current.getBoundingClientRect().left,r=~~d.current.offsetWidth/2+d.current.getBoundingClientRect().top,n=t.pageX||t.clientX+document.body.scrollLeft,t=t.pageY||t.clientY+document.body.scrollTop,n=g(n,t,e,r),f(n),y(~~n))}),[u])),p=Object(i.useCallback)((function(){u&&(s(!1),c)&&c(e)}),[u,e]),y=function(t){o&&o(t)},g=function(t,e,r,n){return Math.atan2(n-e,t-r)*(180/Math.PI)};return Object(i.useEffect)((function(){return document.addEventListener("mousemove",h),function(){document.removeEventListener("mousemove",h)}}),[h]),Object(i.useEffect)((function(){return document.addEventListener("mouseup",p),function(){document.removeEventListener("mouseup",p)}}),[p]),a.a.createElement(W,{title:r,visible:n},a.a.createElement("div",{className:"mt-select-angle"},a.a.createElement("div",{ref:d,className:"mt-select-angle__operate",onMouseDown:function(){s(!0)}},a.a.createElement("div",{className:"mt-select-angle__container",style:{transform:"rotate("+(90-l)+"deg)"}},a.a.createElement("div",{className:"mt-select-angle__point"}))),a.a.createElement("div",{className:"mt-select-angle__text"},~~l,"\xb0")))},z=(e=r(129),r.n(e)),W=(r(863),r(864),y.a),K=(r(865),function(t){function e(t){return t=Math.min(t,o),Math.max(t,i)}function r(){return a.a.createElement("div",{className:"app-input-number",style:{width:c||80,height:u||32}},a.a.createElement(O,{value:n,max:o,min:i,bordered:!1,stringMode:!0,disabled:p,className:"m-input-container",onInput:y,onChange:s}))}var n=t.value,o=t.maxVal,i=t.minVal,c=t.width,u=t.height,s=t.onChange,l=(t.showStepBtn,t.tip),f=t.inputContent,d=t.decimalPoint,h=t.disabled,p=void 0!==h&&h,y=(t.autoSelect,z()((function(t){t=+t;var r=(isNaN(t)&&(t=n),e(t));r<i&&(r=i),void 0===d||(r=e(+t.toFixed(d||0))),s&&s(r)}),500));return a.a.createElement(W,{title:l||""},f?a.a.createElement(N,{content:f,placement:"bottom",overlayClassName:"app-font-size-list"},r()):r())});r(866),r(867);e=r(663);var H=(r(869),r(873),e.a),Y=(e=r(91),r.n(e)),V=(r(874),function(t){function e(t){g&&g(t)}function r(t){m&&m(t)}var n=void 0===(n=t.type)?"vertical":n,o=t.title,i=void 0===(i=t.max)?100:i,c=void 0===(c=t.min)?0:c,u=void 0===(u=t.step)?1:u,s=void 0!==(s=t.disabled)&&s,l=void 0===(l=t.tooltipPlacement)?"top":l,f=t.tipFormatter,d=t.tooltipVisible,h=t.defaultValue,p=t.value,y=void 0===(y=t.precision)?0:y,g=t.onChange,m=t.onAfterChange;return a.a.createElement("div",{className:j()("mt-slider-input",{"mt-slider-input--horizontal":"horizontal"===n,"mt-slider-input--vertical":"vertical"===n})},a.a.createElement("div",{className:"mt-slider-input__header"},"vertical"===n?a.a.createElement("span",null,o):null,a.a.createElement(O,{max:i,min:c,disabled:s,className:"mt-slider-input__input-number",onChange:function(t){Y()(t)&&(e(t),r(t))},showStepBtn:!1,precision:y,defaultValue:h,value:p})),a.a.createElement(H,{className:"mt-slider-input__slider",defaultValue:h,value:p,range:!1,max:i,min:c,disabled:s,step:u,tooltipPlacement:l,tipFormatter:f,tooltipVisible:d,onChange:e,onAfterChange:r}))}),X=(e=(r(565),r(654).b,r(478),r(407)),r(877),e.a),q=(r(1186),r(638));function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}r(881),r(882);var J=function(t){return a.a.createElement(q.a,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==$(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==$(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===$(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t))};function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(890);var tt=function(t){var e=t.data,r=t.handleTabClick,n=void 0===(n=t.tabsWidth)?"100%":n,o=void 0===(o=t.tabsHeight)?"26px":o,c=void 0===(c=t.defaultActiveIndex)?1:c,u=t.activeIndex,s=void 0!==(s=t.disabled)&&s,l=(t=void 0===(t=t.showContent)||t,c=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Q(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(i.useState)(c||1),2),c[0]),f=c[1];return a.a.createElement("div",{className:j()({"b-custom-tabs":!0,disabled:s})},a.a.createElement("div",{className:"b-custom-tabs__header",style:{width:n,height:o}},e.map((function(t,e){var n=void 0===(n=t.name)?"":n,o=void 0===(o=t.headerContent)?null:o,i=void 0===(c=t.tabKey)?"":c,c=t.disabled;return a.a.createElement("div",{onClick:function(){var t;t=e+1,r&&r(i),void 0===u&&f(t)},className:j()({item:!0,active:(void 0===u?l:u)===e+1,disabled:c}),key:n},o||n)}))),t?a.a.createElement("div",{className:"b-custom-tabs__content"},e.map((function(t,e){var r=void 0===(r=t.content)?null:r;t=t.name;return a.a.createElement("div",{className:j()({item:!0,active:(void 0===u?l:u)===e+1}),key:t},r)}))):null)},et=r(117),rt=r(516),nt=(r(892),r(645));function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}r(894);var at=function(t){return a.a.createElement(nt.a,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?it(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==ot(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===ot(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t))}},,,,function(t,e,r){"use strict";r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return Q}));e=r(12);var n=(d=(r(720),Object(e.f)())).useStoreState,o=d.useStoreActions,i=(d.useStoreDispatch,r(29)),a=r(19),c=r(24),u=r(10),s=r(22),l=function(t){var e=[Object(c.f)(),Object(u.t)(),Object(s.c)(),Object(i.e)()];return{init:function(){a.b.init(),e.forEach((function(t){t.init()})),null!=t&&t()}}},f=r(139),d={destroy:Object(e.b)((function(t){t.scale=1,t.version=Object(f.a)()})),version:Object(f.a)(),feature:"",setFeature:Object(e.b)((function(t,e){t.feature=e})),getFeature:Object(e.b)((function(t,e){e(t.feature)})),isShowPanel:!1,setIsShowPanel:Object(e.b)((function(t,e){t.isShowPanel=e})),isShowCollapse:!0,setIsShowCollapse:Object(e.b)((function(t,e){t.isShowCollapse=e})),scale:1,setScale:Object(e.b)((function(t,e){t.scale=e}))},h=r(616),p=r.n(h),y=(h={fontList:[],fontListMap:Object(e.c)((function(t){return p()(t.fontList,"category_name")})),setFontList:Object(e.b)((function(t,e){t.fontList=e})),defaultFont:"",setDefaultFont:Object(e.b)((function(t,e){t.defaultFont=e})),isLoadingFont:!1,setIsLoadingFont:Object(e.b)((function(t,e){t.isLoadingFont=e}))},r(194)),g="history-main",m={destroy:Object(e.b)((function(t){t.history.clear(),t.cursor=-1,t.canUndo=!1,t.canRedo=!1,t.currentHistoryType=g,t.disable=!1,t.version=-1})),version:-1,getStateByName:Object(e.b)((function(t,e){var r=e.payload,n=e.callback;switch(r){case y.a.canRedo:n(t.canRedo);break;case y.a.canUndo:n(t.canUndo);break;case y.a.disable:n(t.disable);break;case y.a.onRedoOrUndo:n(t.onRedoOrUndo);break;default:n(null)}})),disable:!1,setDisable:Object(e.b)((function(t,e){t.disable=e})),onRedoOrUndo:"",setRedoOrUndo:Object(e.b)((function(t){t.disable=!1,t.onRedoOrUndo=Object(f.a)()})),history:new Map,cursor:-1,canUndo:!1,canRedo:!1,currentHistoryType:g,push:Object(e.b)((function(t,e){var r=t.history.get(t.currentHistoryType);r?(r.length=t.cursor+1,r.push(e)):t.history.set(t.currentHistoryType,r=[e]),t.cursor++,t.canUndo=!0,t.canRedo=!1,t.version++})),back:Object(e.b)((function(t,e){var r=t.history.get(t.currentHistoryType);r&&-1!==t.cursor&&(t.cursor--,t.canUndo=-1!==t.cursor,t.canRedo=!0,t.version++,e(r[t.cursor+1]))})),forward:Object(e.b)((function(t,e){var r=t.history.get(t.currentHistoryType);r&&t.cursor!==r.length-1&&(t.cursor++,t.canUndo=!0,t.canRedo=t.cursor!==r.length-1,t.version++,e(r[t.cursor]))})),switchCurrentHistoryType:Object(e.b)((function(t,e){if(e)t.currentHistoryType=e;else if(t.currentHistoryType!==g&&(t.history.delete(t.currentHistoryType),t.currentHistoryType=g),e=t.history.get(g))return t.cursor=e.length-1,t.canUndo=-1!==t.cursor,void(t.canRedo=!1);t.version=-1,t.cursor=-1,t.canUndo=!1,t.canRedo=!1}))},v=r(15),b=r.n(v),w=(v=r(617),r.n(v)),O=(v=r(137),r.n(v)),x=(v=r(79),r.n(v)),j=(v=r(69),r.n(v)),_=(v=r(201),r.n(v)),E=(v=r(260),r.n(v)),k=(v=r(344),r.n(v)),S=r(123),L=r(236),I=r(2),T=r(7),M=r(73),P=r(253),A=r(170);function C(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?D(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function F(t,e){var r;t.layerType===I.h.TEXT_LAYER&&(r=(t=t.data).fontSize,t.fontSize=r*e)}function B(t,e){e=e.map((function(e){return Object(T.kb)(e,t.rotate)}));var r=j()(e,(function(t){return t.x})),n=x()(e,(function(t){return t.x})),o=j()(e,(function(t){return t.y})),i=(e=x()(e,(function(t){return t.y})),r.x),a=o.y;n=n.x-r.x,r=e.y-o.y,e=Object(T.G)({width:n,height:r,leftTop:{x:i,y:a},rotate:0}),o=Object(T.kb)(e,-t.rotate);t.left=o.x-n/2,t.top=o.y-r/2,t.width=n,t.height=r}function G(t,e){t.forEach((function(t){t.layerType===I.h.GROUP_LAYER&&Object(T.dc)(t,(function(t){var r;t.layerType===I.h.GROUP_LAYER&&(r=[],(t.children||[]).forEach((function(t){t=Object(T.eb)(t),r.push.apply(r,N(t))})),r.length)&&(B(t,r),e(t))}))}))}function U(t,e){(function e(r){var n,o;(r=t.flatLayersMap.get(r))&&r.layerType===I.h.GROUP_LAYER&&(n=[],o=[],(r.children||[]).forEach((function(e){(e=t.flatLayersMap.get(e.id))&&(o.push(e),e=Object(T.eb)(e),n.push.apply(n,N(e)))})),n.length)&&(r.children=o,B(r,n),t.flatLayersMap.delete(r.id),t.flatLayersMap.set(r.id,r),r.parentId)&&e(r.parentId)})(e),t.onGroupLayerChange=Object(f.a)()}function z(t,e){return O()(t.renderSortIdsArr,e)}function W(t,e){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];(e=t.flatLayersMap.get(e))&&function e(r){var n=[];(r.children||[]).forEach((function(r){var o=t.flatLayersMap.get(r.id);o&&n.push(o),e(r)})),r.children=n}(e),e=Object(T.q)(e);return r?b()(e):e}function K(t,e){(e=t.flatLayersMap.get(e))&&!0===e.data.isExtraGroup&&((e.children||[]).forEach((function(e){(e=t.flatLayersMap.get(e.id))&&(e.parentId=void 0,t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e),-1===O()(t.renderSortIdsArr,e.id))&&t.renderSortIdsArr.push(e.id)})),_()(t.renderSortIdsArr,e.id),t.flatLayersMap.delete(e.id))}function H(t,e){function r(t){var o=[];(t.children||[]).forEach((function(t){var i=e.get(t.id);(i=n?Object(T.q)(i):i)&&o.push(i),r(t)})),t.children=o}var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=[];return t.forEach((function(t){var a=e.get(t);if(null!=(c=a)&&c.parentId){var c=Y(t,e);if(null!=c&&c.hidden)return}!(a=n?Object(T.q)(a):a)||!o&&a.parentId||(r(a),i.push(a))})),i}function Y(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=e.get(t);return function t(o,i){if(o=e.get(o)){if(r&&o.layerType===I.h.GROUP_LAYER&&o.data.isExtraGroup)return void(n=i);o.parentId?t(o.parentId,n):n=o}else n=i}(t,n),n}function V(t,e,r){var n,o=t.data;o.stretchOption===I.u.cover&&(n=o.naturalHeight,o=o.naturalWidth,n=(o=Object(S.d)({imgWidth:o,imgHeight:n,stageHeigh:r,stageWidth:e})).widthRatio,o=o.heightRatio,t.data.imageTransform.widthRatio=n,t.data.imageTransform.heightRatio=o),t.width=e,t.height=r}v={destroy:Object(e.b)((function(t){t.activeChildInfoMap.clear(),t.activeInfo=null,t.flatLayersMap.clear(),t.hoverId=null,t.materialIds.length=0,t.pickIdsSet.clear(),t.renderSortIdsArr.length=0,t.resizeActionType=I.q.SCALE,t.originScale=1,t.stageSize={width:0,height:0}})),stageSize:{width:0,height:0},setStageSize:Object(e.b)((function(t,e){t.stageSize=R({},e)})),getStageSize:Object(e.b)((function(t,e){e(R({},t.stageSize))})),materialIds:[],hideMaterial:Object(e.b)((function(t){if(!t.materialIds.length){t.materialIds=b()(t.renderSortIdsArr);for(var e=[],r=0;r<t.renderSortIdsArr.length;r++){var n,o=t.renderSortIdsArr[r],i=t.flatLayersMap.get(o);i&&(i=i.layerType,null==(i=Object(M.a)(i))||null==(n=i.checkDisableHide)?void 0:n.call(i))&&e.push(o)}t.renderSortIdsArr=e}})),showMaterial:Object(e.b)((function(t){t.materialIds.length&&(t.renderSortIdsArr=b()(t.materialIds),t.materialIds.length=0)})),layers:Object(e.c)([function(t){return t.renderSortIdsArr},function(t){return t.flatLayersMap}],(function(t,e){return H(t,e)})),renderLayers:Object(e.c)([function(t){return t.renderSortIdsArr},function(t){return t.flatLayersMap}],(function(t,e){return H(t,e,!1,!0)})),mainLayer:Object(e.c)([function(t){return t.renderSortIdsArr},function(t){return t.flatLayersMap}],(function(t,e){for(var r=0;r<t.length;r++){var n,o,i=e.get(t[r]);if(i&&null!=(n=Object(M.a)(i.layerType))&&null!=(o=n.isMainLayer)&&o.call(n))return i}return{width:0,height:0}})),backGroundLayer:Object(e.c)([function(t){return t.renderSortIdsArr},function(t){return t.flatLayersMap}],(function(t,e){for(var r=0;r<t.length;r++){var n,o,i=e.get(t[r]);if(i&&null!=(n=Object(M.a)(i.layerType))&&null!=(o=n.isBackgroundLayer)&&o.call(n))return i}return{width:0,height:0}})),onLayerChange:"",onGroupLayerChange:"",flatLayersMap:new Map,setFlatLayer:Object(e.b)((function(t,e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)})),addOrUpdateLayer:Object(e.b)((function(t,e){var r=e.layer,n=e.deleteIds,o=e.insertIds,i=(n||o?(n&&(Array.isArray(n)?E:_)()(t.renderSortIdsArr,n),o&&(Array.isArray(o)?t.renderSortIdsArr=t.renderSortIdsArr.concat(o):"string"==typeof o?t.renderSortIdsArr.push(o):Object(T.qb)(t.renderSortIdsArr,o))):r=e,function(e){return-1!==O()(t.renderSortIdsArr,e)}),a=[];(function e(r){var n,o,c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];null!=(n=Object(M.a)(r.layerType))&&null!=(o=n.onBeforeAddOrUpdate)&&o.call(n,r),(r.children||[]).forEach((function(t){e(t)})),o=r.id,i(o)||t.renderSortIdsArr.push(o),c||a.push(r.id),Object(P.c)(r),t.flatLayersMap.delete(r.id),t.flatLayersMap.set(r.id,r)})(r,!0),a.length&&r.layerType===I.h.GROUP_LAYER&&!r.data.isExtraGroup&&(E()(t.renderSortIdsArr,a),n=O()(t.renderSortIdsArr,r.id),o=k()(t.renderSortIdsArr,0,n),e=k()(t.renderSortIdsArr,n),t.renderSortIdsArr=o.concat(a).concat(e)),t.onLayerChange=Object(f.a)()})),delLayer:Object(e.b)((function(t,e){!function e(r){(r.children||[]).forEach((function(t){e(t)})),t.flatLayersMap.delete(r.id),_()(t.renderSortIdsArr,r.id)}(e)})),delSvgLayers:Object(e.b)((function(t,e){var r=e.ids,n=(e=e.callback,new Map),o=[];r.forEach((function(e){var r=O()(t.renderSortIdsArr,e);-1!==r&&(n.set(r,e),r=t.flatLayersMap.get(e))&&o.push(b()(r)),t.flatLayersMap.delete(e)})),r.length&&E()(t.renderSortIdsArr,r),null!=e&&e(n,o)})),addSvgLayers:Object(e.b)((function(t,e){var r=e.map;e=e.layers;Object(T.qb)(t.renderSortIdsArr,r),e.forEach((function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)}))})),brokeGroup:Object(e.b)((function(t,e){K(t,e)})),createGroup:Object(e.b)((function(t,e){var r=e.groupId,n=(e=e.callback,[]),o=[];if(t.renderSortIdsArr.forEach((function(e){var i,a,c,u,s;t.pickIdsSet.has(e)&&(e=Object(T.q)(t.flatLayersMap.get(e)))&&(s=e.left,i=e.top,a=e.width,c=e.height,u=e.rotate,s=Object(T.eb)({left:s,top:i,width:a,height:c,rotate:u}),n.push.apply(n,N(s)),e.parentId=r,o.push(e))})),!n.length)return e(null);var i=j()(n,(function(t){return t.x})),a=x()(n,(function(t){return t.x})),c=j()(n,(function(t){return t.y})),u=x()(n,(function(t){return t.y})),s=Object(T.q)(t.flatLayersMap.get(r));a={left:i.x,top:c.y,width:a.x-i.x,height:u.y-c.y,rotate:0,children:o};e(i=s?R(R({},b()(s)),a):Object(T.N)(R(R({id:r},a),{},{data:{isExtraGroup:!0}})))})),renderSortIdsArr:[],setRenderSortIdsArr:Object(e.b)((function(t,e){t.renderSortIdsArr=e})),restoreRenderSortIds:Object(e.b)((function(t,e){E()(t.renderSortIdsArr,Array.from(e.values())),Object(T.qb)(t.renderSortIdsArr,e)})),changeRenderSortIds:Object(e.b)((function(t,e){var r,n=e.type,o=e.toId,i=e.originMap,a=(e=e.callback,Array.from(i.values())),c=(E()(t.renderSortIdsArr,a),"origin"===n?Object(T.qb)(t.renderSortIdsArr,i):(i=O()(t.renderSortIdsArr,o),"up"===n?i+=1:(n=t.flatLayersMap.get(o),r=-1,function t(e){((null==e?void 0:e.children)||[]).forEach((function(e){t(e)})),e&&r++}(n),i-=r),o=k()(t.renderSortIdsArr,0,i),n=k()(t.renderSortIdsArr,i),t.renderSortIdsArr=o.concat(a).concat(n)),new Map);a.forEach((function(e){c.set(O()(t.renderSortIdsArr,e),e)})),null!=e&&e(c)})),onActiveChange:"",activeInfo:null,activeChildInfoMap:new Map,setActiveInfo:Object(e.b)((function(t,e){var r;e||(null!=(r=t.activeInfo)&&r.id&&K(t,r.id),t.activeChildInfoMap.clear()),t.activeInfo=b()(e),t.onActiveChange=Object(f.a)()})),setActiveInfoById:Object(e.b)((function(t,e){var r,n=e.id,o=e.pickId,i=e.isLink,a=(e.from,t.activeChildInfoMap.clear(),t.onActiveChange=Object(f.a)(),null!=(e=t.activeInfo)&&e.id&&n!==(null==(e=t.activeInfo)?void 0:e.id)&&(null==(e=t.flatLayersMap.get(t.activeInfo.id))?void 0:e.layerType)===I.h.GROUP_LAYER&&!0===e.data.isExtraGroup&&((e.children||[]).forEach((function(e){(e=t.flatLayersMap.get(e.id))&&(e.parentId=void 0,t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e),-1===O()(t.renderSortIdsArr,e.id))&&t.renderSortIdsArr.push(e.id)})),_()(t.renderSortIdsArr,e.id),t.flatLayersMap.delete(e.id),t.activeInfo=null),function(e){var r,n,o;if(e=t.flatLayersMap.get(e.id))return n={id:e.id,left:e.left,top:e.top,rotate:e.rotate,width:e.width,height:e.height,layerType:e.layerType},o=null==(r=Object(M.a)(e.layerType))||null==(o=r.getActiveBaseInfo)?void 0:o.call(r,e),Object.assign(n,{pickId:"",cutWidth:I.l,cutHeight:I.l},o)}),c=function(e){(e||[]).forEach((function(e){c(e.children),(e=a(e))&&(t.activeChildInfoMap.delete(e.id),t.activeChildInfoMap.set(e.id,e))}))},u=(e=function(e){var r;if(i){var n=t.flatLayersMap.get(e);if(null!=n&&n.parentId&&(n=t.flatLayersMap.get(n.parentId))){var o=null==(o=Object(M.a)(n.layerType))?void 0:o.getActiveIdWithLink;if(o)return o(n)}return e}return function e(n,o){var i=t.flatLayersMap.get(n);i?i.parentId?e(i.parentId,n):r=i.id:r=o}(r=e,e),r}(n),t.flatLayersMap.get(e));u&&(o||e===n||(o=n),i?(e=null==(e=Object(M.a)(u.layerType))?void 0:e.correctActivePickId)&&(o=e()):o&&(e=t.flatLayersMap.get(o))&&(e=null==(e=Object(M.a)(e.layerType))?void 0:e.correctActivePickId)&&(o=e()),c(u.children),r=(e=t.activeInfo||{id:"",pickId:""}).id,e=e.pickId,u=a(u),t.activeInfo=u?R(R({},u),{},{pickId:o||(r===n?e:"")}):null)})),hoverId:null,hoverLayerType:null,setHoverId:Object(e.b)((function(t,e){t.hoverId=e.id,t.hoverLayerType=e.type})),getHoverId:Object(e.b)((function(t,e){e(t.hoverId,t.hoverLayerType)})),pickIdsSet:new Set,addPickId:Object(e.b)((function(t,e){t.pickIdsSet.has(e)||t.pickIdsSet.add(e)})),deletePickId:Object(e.b)((function(t,e){t.pickIdsSet.delete(e)})),clearPickIds:Object(e.b)((function(t){t.pickIdsSet.clear()})),setPickLayer:Object(e.b)((function(t,e){var r=Array.isArray(e);if(r&&!e.length)return t.pickIdsSet.clear();r?e.forEach((function(e){t.pickIdsSet.has(e)||t.pickIdsSet.add(e)})):t.pickIdsSet.has(e)||t.pickIdsSet.add(e);var n=Array.from(t.pickIdsSet);w()(n,r?e:[e]).forEach((function(e){t.pickIdsSet.delete(e)}))})),resizeActionType:I.q.SCALE,setResizeActionType:Object(e.b)((function(t,e){t.resizeActionType=e})),updateGroupLayer:Object(e.b)((function(t,e){U(t,e)})),updateActiveLayerPosition:Object(e.b)((function(t,e){var r=e.x,n=e.y,o=(e=e.callback,Object(T.C)(t));o&&(function e(o,i){(o.children||[]).forEach((function(r){var n=t.activeChildInfoMap.get(r.id);n&&e(r,n)}));var a=i.left;i=i.top;o.left=a+r,o.top=i+n,t.flatLayersMap.delete(o.id),t.flatLayersMap.set(o.id,o)}(o,t.activeInfo),null!=e)&&e(o.left,o.top)})),updateActiveLayerRotate:Object(e.b)((function(t,e){var r,n=e.angle,o=(e=e.callback,Object(T.C)(t));o&&(r=t.activeInfo,Object(A.a)(o,r,t.activeChildInfoMap,n,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)})),null!=e)&&e(o.rotate)})),updateActiveLayerScale:Object(e.b)((function(t,e){var r,n=e.offset,o=e.direction,i=e.reverse,a=(e=e.callback,Object(T.C)(t));a&&(r=t.activeInfo,n=Object(A.e)(t.flatLayersMap,r,t.activeChildInfoMap,n),Object(A.b)(a,n,r,t.activeChildInfoMap,o,i,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)})),null!=e)&&e(a.width,a.height,n.isMin)})),updateActiveLayerResize:Object(e.b)((function(t,e){var r,n,o,i,a,c,u,s=e.offset,l=e.direction,f=e.reverse,d=e.isChangeHeight,h=(e=e.callback,Object(T.C)(t));h&&(r=!1,u=(n=t.activeInfo).width,a=n.height,o=n.cutWidth,i=n.cutHeight,s<0&&(s=d?Math.max(s,-(a-i)):Math.max(s,-(u-o))),d?h.height=s+a:h.width=s+u,a=null==(i=Object(M.a)(h.layerType))||null==(o=i.onBeforeResizeUpdate)?void 0:o.call(i,h,d),s=h.width,u=h.height,a?(c=d?Object(A.d)(n,a,f,1):Object(A.d)(n,a,f,l),s=a.width,u=a.height):c=Object(A.d)(n,h,!1,l),h.left=c.x-s/2,h.top=c.y-u/2,t.flatLayersMap.delete(h.id),t.flatLayersMap.set(h.id,h),r=!(!a||!a.isMin)||(d?h.height<=n.cutHeight:h.width<=n.cutWidth),null!=e)&&e(h.width,h.height,r)})),originScale:1,updateStageSize:Object(e.b)((function(t,e){var r=e.width,n=e.height,o=(e=t.layers,t.mainLayer),i=o.top,a=o.left,c=o.rotate,u=(h=o.data).naturalWidth,s=h.naturalHeight,l=h.imageTransform,f=l.scale,d=n/s,h=d<(h=r/u)?h:d;l.scale=h,o.left=(r-u*h)/2,o.top=(n-s*h)/2,o.width=r,o.height=n,o.rotate=0,l.flipH=!1,l.flipV=!1,l.rotate=0,t.flatLayersMap.delete(o.id),t.flatLayersMap.set(o.id,o),t.originScale=l.scale,Object(T.ec)(e,(function(e){var d,h,p,y,g,m,v;e.layerType===I.h.BACKGROUND_LAYER?(V(e,r,n),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)):e.layerType===I.h.MAIN_LAYER||e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||(d=l.scale,h=o.left,p=o.top,g=e.left,m=e.top,v=e.width,y=e.height,g=d/f*(g+v/2-(a+u*f/2)),m=d/f*-(m+y/2-(i+s*f/2)),e.width=v*(d/f),e.height=y*(d/f),e.rotate=e.rotate-c,v={x:g+(h+u*d/2)-e.width/2,y:-m+(p+s*d/2)-e.height/2},e.left=v.x,e.top=v.y,F(e,d/f),Object(L.b)(e,d/f),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))})),G(e,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)}))})),rotateFullStage:Object(e.b)((function(t,e){var r=e.rotate,n=(e=e.setStageSize,t.layers),o=t.mainLayer,i=o.top,a=o.left,c=o.width,u=o.height,s=o.rotate,l=(h=o.data).naturalWidth,f=h.naturalHeight,d=h.imageTransform.scale,h=((h=Object(T.fb)(o).originRelativeStagePoint).y=-h.y,Object(T.Ib)(h,-r));o.width=u,o.height=c,o.rotate=(s+r)%360,s={x:h.x+u/2-l*d/2,y:-h.y+c/2-f*d/2};o.left=s.x,o.top=s.y,e&&e({width:o.width,height:o.height}),t.flatLayersMap.delete(o.id),t.flatLayersMap.set(o.id,o),Object(T.ec)(n,(function(e){var n,c,u,s,h,p;e.layerType===I.h.BACKGROUND_LAYER?(V(e,o.width,o.height),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)):e.layerType===I.h.MAIN_LAYER||e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||(e.rotate=(e.rotate+r)%360,n=o.left,c=o.top,p=e.left,h=e.top,u=e.width,s=e.height,p={x:p+u/2-(a+l*d/2),y:-(h+s/2-(i+f*d/2))},p={x:(h=Object(T.Ib)(p,-r)).x+(n+l*d/2)-u/2,y:-h.y+(c+f*d/2)-s/2},e.left=p.x,e.top=p.y,t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))}))})),rotateStage:Object(e.b)((function(t,e){var r=e.rotate,n=(e=(e.originScale,t.layers),t.mainLayer),o=n.width,i=n.height,a=(l=r)?l/Math.abs(l):1,c=(a=(90===Math.abs(n.rotate)?l=0<n.rotate*l?0:l:90<Math.abs(l+n.rotate%90)&&(l=(90-Math.abs(n.rotate%90))*a),r=l,n.data)).naturalWidth,u=a.naturalHeight,s=a.imageTransform,l=s.scale,f=(a=Object(T.fb)(n)).originRelativeStagePoint,d=a.originMainLayerCenterPoint,h=(a={x:(a=(f.y=-f.y,Object(T.Ib)({x:f.x,y:f.y},-r))).x+o/2-c*l/2,y:-a.y+i/2-u*l/2},(a=(n.left=a.x,n.top=a.y,n.rotate=n.rotate+r,Object(T.f)({mainLayerSize:{width:o,height:i},adjustLayerSize:{width:c*l,height:u*l},adjustLayerRotate:n.rotate,adjustLayerRelativePosition:Object(T.Ib)({x:-f.x,y:-f.y},n.rotate)}))).scale);a=a.movePoint;1===h?(n.left=f.x+a.x+o/2-c*l/2,n.top=-f.y-a.y+i/2-u*l/2):(s.scale=l*h,n.left=n.left+(c*l-c*l*h)/2,n.top=n.top+(u*l-u*l*h)/2),t.flatLayersMap.delete(n.id),t.flatLayersMap.set(n.id,n),Object(T.ec)(e,(function(e){var o,i,a,l,f;e.layerType===I.h.BACKGROUND_LAYER?(V(e,n.width,n.height),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)):e.layerType===I.h.MAIN_LAYER||e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||(f=e.left,o=e.top,l={x:f+(f=e.width)/2,y:o+(o=e.height)/2},(l=Object(T.Db)(d,l)).y=-l.y,l={x:(l=Object(T.Ib)(l,-r)).x,y:-l.y},i=n.left+c*s.scale/2,a=n.top+u*s.scale/2,l=Object(T.Eb)(l,h),e.width=f*h,e.height=o*h,f={x:l.x+i-e.width/2,y:l.y+a-e.height/2},e.left=f.x,e.top=f.y,e.rotate=e.rotate+r,F(e,h),Object(L.b)(e,h),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))})),G(e,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)}))})),moveStage:Object(e.b)((function(t,e){var r,n=e.movePoint,o=(e=e.isEnd,t.layers),i=t.mainLayer,a=i.left,c=i.top,u=i.width,s=i.height,l=i.rotate,f=(r=i.data).naturalWidth,d=r.naturalHeight,h=r.imageTransform,p=h.scale;i.left=i.left+n.x,i.top=i.top+n.y,(r=Object(T.fb)(i).originRelativeStagePoint).y=-r.y,e&&(n=Object(T.Ib)({x:-r.x,y:-r.y},l),r=(e=Object(T.f)({mainLayerSize:{width:u,height:s},adjustLayerSize:{width:f*p,height:d*p},adjustLayerRotate:i.rotate,adjustLayerRelativePosition:n})).scale,l=e.movePoint,1===r)&&(i.left=i.left+l.x,i.top=i.top-l.y),Object(T.ec)(o,(function(e){var r,n,o,u,s,l,y;e.layerType===I.h.MAIN_LAYER||e.layerType===I.h.BACKGROUND_LAYER||e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||(r=h.scale,n=i.left,o=i.top,s=e.left,l=e.top,y=e.width,u=e.height,s=r/p*(s+y/2-(a+f*p/2)),l=r/p*-(l+u/2-(c+d*p/2)),e.width=y*(r/p),e.height=u*(r/p),y={x:s+(n+f*r/2)-e.width/2,y:-l+(o+d*r/2)-e.height/2},e.left=y.x,e.top=y.y,F(e,r/p),Object(L.b)(e,r/p),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))})),t.flatLayersMap.delete(i.id),t.flatLayersMap.set(i.id,i),G(o,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)}))})),flipXStage:Object(e.b)((function(t){var e=t.layers,r=t.mainLayer,n=r.width,o=r.height;Object(T.ec)(e,(function(e){var r,i,a,c=e.left,u=e.top,s=e.width,l=e.height;e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||e.layerType!==I.h.BACKGROUND_LAYER&&(e.layerType===I.h.MAIN_LAYER&&(a=(i=e.data).naturalHeight,r=i.naturalWidth,s=(i=i.imageTransform.scale)*r,l=i*a),i={x:-(r={x:c+s/2-n/2,y:u+l/2-o/2}).x+n/2-s/2,y:r.y+o/2-l/2},e.rotate=e.rotate+(360-2*e.rotate),e.left=i.x,e.top=i.y,e.layerType===I.h.TEXT_LAYER?(a=e.data).flipH=!a.flipH:e.layerType!==I.h.IMAGE_LAYER&&e.layerType!==I.h.MAIN_LAYER||((c=e.data.imageTransform).flipH=!c.flipH),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))}))})),flipYStage:Object(e.b)((function(t){var e=t.layers,r=t.mainLayer,n=r.width,o=r.height;Object(T.ec)(e,(function(e){var r,i,a,c=e.left,u=e.top,s=e.width,l=e.height;e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||e.layerType!==I.h.BACKGROUND_LAYER&&(e.layerType===I.h.MAIN_LAYER&&(a=(i=e.data).naturalHeight,r=i.naturalWidth,s=(i=i.imageTransform.scale)*r,l=i*a),i={x:(r={x:c+s/2-n/2,y:u+l/2-o/2}).x+n/2-s/2,y:-r.y+o/2-l/2},e.rotate=-e.rotate,e.left=i.x,e.top=i.y,e.layerType===I.h.TEXT_LAYER?(a=e.data).flipV=!a.flipV:e.layerType!==I.h.IMAGE_LAYER&&e.layerType!==I.h.MAIN_LAYER||((c=e.data.imageTransform).flipV=!c.flipV),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))}))})),moveChangeStageSize:Object(e.b)((function(t,e){var r=e.params,n=e.setStageSize,o=(e=e.isEnd,t.layers),i=t.mainLayer,a=i.left,c=i.top,u=i.rotate,s=(h=i.data).naturalWidth,l=h.naturalHeight,f=h.imageTransform,d=f.scale,h=r.left,p=r.top,y=r.width;r=r.height;i.left=h,i.top=p,i.height=r,i.width=y,n&&n({width:y,height:r}),e&&((i.width>s*d||i.height>l*d)&&(i.left=(i.width-s*d)/2,i.top=(i.height-l*d)/2),(h=Object(T.fb)(i).originRelativeStagePoint).y=-h.y,p=Object(T.Ib)({x:-h.x,y:-h.y},u),y=(n=Object(T.f)({mainLayerSize:{width:i.width,height:i.height},adjustLayerSize:{width:s*d,height:l*d},adjustLayerRotate:i.rotate,adjustLayerRelativePosition:p})).scale,r=n.movePoint,1===y?(i.left=i.left+r.x,i.top=i.top-r.y):(f.scale=d*y,i.left=i.left+(s*d-s*d*y)/2,i.top=i.top+(l*d-l*d*y)/2)),t.flatLayersMap.delete(i.id),t.flatLayersMap.set(i.id,i),Object(T.ec)(o,(function(e){var r,n,o,u,h,p,y;e.layerType===I.h.BACKGROUND_LAYER?(V(e,i.width,i.height),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)):e.layerType===I.h.MAIN_LAYER||e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||(r=f.scale,n=i.left,o=i.top,h=e.left,p=e.top,y=e.width,u=e.height,h=r/d*(h+y/2-(a+s*d/2)),p=r/d*-(p+u/2-(c+l*d/2)),e.width=y*(r/d),e.height=u*(r/d),y={x:h+(n+s*r/2)-e.width/2,y:-p+(o+l*r/2)-e.height/2},e.left=y.x,e.top=y.y,F(e,r/d),Object(L.b)(e,r/d),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))})),G(o,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)}))})),moveScaleStageSize:Object(e.b)((function(t,e){var r=e.params,n=e.isEnd,o=(e=e.setStageSize,t.layers),i=t.mainLayer,a=i.left,c=i.top,u=i.rotate,s=(h=i.data).naturalWidth,l=h.naturalHeight,f=h.imageTransform,d=f.scale,h=r.left,p=r.top,y=r.width;r=r.height;i.left=h,i.top=p,i.height=r,i.width=y,n&&((i.width>s*d||i.height>l*d)&&(i.left=(i.width-s*d)/2,i.top=(i.height-l*d)/2),(h=Object(T.fb)(i).originRelativeStagePoint).y=-h.y,p=Object(T.Ib)({x:-h.x,y:-h.y},u),y=(r=Object(T.f)({mainLayerSize:{width:i.width,height:i.height},adjustLayerSize:{width:s*d,height:l*d},adjustLayerRotate:i.rotate,adjustLayerRelativePosition:p})).scale,n=r.movePoint,1===y?(i.left=i.left+n.x,i.top=i.top-n.y):(f.scale=d*y,i.left=i.left+(s*d-s*d*y)/2,i.top=i.top+(l*d-l*d*y)/2)),e&&e({width:i.width,height:i.height}),t.flatLayersMap.delete(i.id),t.flatLayersMap.set(i.id,i),Object(T.ec)(o,(function(e){var r,n,o,u,h,p,y;e.layerType===I.h.BACKGROUND_LAYER?(V(e,i.width,i.height),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)):e.layerType===I.h.MAIN_LAYER||e.children&&0<e.children.length&&e.layerType!==I.h.TEXT_MATERIAL_LAYER||(r=f.scale,n=i.left,o=i.top,h=e.left,p=e.top,y=e.width,u=e.height,h=r/d*(h+y/2-(a+s*d/2)),p=r/d*-(p+u/2-(c+l*d/2)),e.width=y*(r/d),e.height=u*(r/d),y={x:h+(n+s*r/2)-e.width/2,y:-p+(o+l*r/2)-e.height/2},e.left=y.x,e.top=y.y,F(e,r/d),Object(L.b)(e,r/d),t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e))})),G(o,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)}))})),resetStageSizeChange:Object(e.b)((function(t,e){Object(T.ec)(e,(function(e){t.flatLayersMap.delete(e.id),t.flatLayersMap.set(e.id,e)}))})),checkLayerInRender:Object(e.b)((function(t,e){var r=e.payload;(0,e.callback)(-1!==z(t,r))})),getLayers:Object(e.b)((function(t,e){var r=e.payload,n=(e=e.callback,r.isRenderLayers),o=(r=r.isResult,b()(t.renderSortIdsArr));r&&t.materialIds.length&&(o=b()(t.materialIds)),e(H(o,t.flatLayersMap,!0,n))})),getLayerById:Object(e.b)((function(t,e){var r=e.payload;(e=e.callback)(W(t,r.id,r=r.withClone))})),getMainLayer:Object(e.b)((function(t,e){for(var r=0;r<t.renderSortIdsArr.length;r++){var n,o,i=t.flatLayersMap.get(t.renderSortIdsArr[r]);if(i&&null!=(n=Object(M.a)(i.layerType))&&null!=(o=n.isMainLayer)&&o.call(n))return void e(Object(T.q)(i))}e()})),getBackgroundLayer:Object(e.b)((function(t,e){for(var r=0;r<t.renderSortIdsArr.length;r++){var n,o,i=t.flatLayersMap.get(t.renderSortIdsArr[r]);if(i&&null!=(n=Object(M.a)(i.layerType))&&null!=(o=n.isBackgroundLayer)&&o.call(n))return void e(Object(T.q)(i))}e()})),getLayerIndex:Object(e.b)((function(t,e){var r=e.payload;(0,e.callback)(z(t,r))})),getLayerIndexMap:Object(e.b)((function(t,e){function r(e){var r=z(t,e);-1!==r&&i.set(r,e)}var n=e.payload,o=(e=e.callback,n.id),i=(n=n.withSelf,new Map),a=t.flatLayersMap.get(o);n&&r(o),(null==a?void 0:a.layerType)===I.h.GROUP_LAYER&&(a.children||[]).forEach((function(t){r(t.id)})),e({id:o,layerIndexMap:i})})),getLayerIndexSortList:Object(e.b)((function(t,e){var r=e.payload,n=(e=e.callback,r.id),o=r.isExtraGroup,i=r.ignore,a=(r=t.flatLayersMap.get(n),[]),c=Object(T.r)(r),u="",s=new Map;!function e(r){var n,o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];(r.children||[]).forEach((function(t){o&&!u&&(u=t.id),e(t)})),o||-1!==(n=O()(t.renderSortIdsArr,r.id))&&s.set(n,r.id)}(r,o);u=u||r.id;for(var l=0,f=t.renderLayers.length;l<f;l++){var d=t.renderLayers[l],h=d.id,p=d.layerType,y=d.parentId,g=d.data,m=d.hidden;i&&-1!==O()(i,p)||(d=Object(T.r)(d),h!==u&&(y||!c.polygon.collidesWith(d.polygon)))||p===I.h.GROUP_LAYER&&g.isExtraGroup||m||a.push(h)}e({sortList:a,sortIndex:O()(a,u),sortId:u,originLayerSortMap:s})})),getCollisionLayers:Object(e.b)((function(t,e){for(var r=e.callback,n=e.payload.ignoreLockLayer,o=t.layers,i=[],a=0,c=o.length;a<c;a++){var u,s,l=Object(T.q)(o[a]);(n&&!l.lock||!n)&&!l.hidden&&(l.layerType===I.h.GROUP_LAYER?l.data.isExtraGroup?null!=(u=l.children)&&u.forEach((function(t){i.push(t)})):i.push(l):(null==(u=Object(M.a)(l.layerType))||null==(s=u.checkDisableHide)?void 0:s.call(u,l))||i.push(l))}r(i)})),cloneLayer:Object(e.b)((function(t,e){var r,n=e.payload,o=(e=e.callback,n.layer),i="string"==typeof o;n.withParentLayer?(r=i?W(t,o):b()(o),function e(n){null!=n&&n.parentId?e(W(t,n.parentId)):r=n}(o),e(r||void 0)):e(i?W(t,o)||void 0:b()(o))})),getLayerParentId:Object(e.b)((function(t,e){var r=e.payload,n=(e=e.callback,r.id);r=r.extraGroupIsWrap;e(null==(n=Y(n,t.flatLayersMap,r))?void 0:n.id)})),getActiveInfo:Object(e.b)((function(t,e){e(Object(T.q)(t.activeInfo))})),updateOpacity:Object(e.b)((function(t,e){var r=e.payload,n=(e=e.callback,r.id),o=(r=r.opacity,t.flatLayersMap.get(n));o&&(o.opacity=r,t.flatLayersMap.delete(n),t.flatLayersMap.set(n,o)),e()})),updateShine:Object(e.b)((function(t,e){var r=e.payload,n=(e=e.callback,r.id),o=(r=r.shine,t.flatLayersMap.get(n));o&&(o.shine=r,t.flatLayersMap.delete(n),t.flatLayersMap.set(n,o)),e()})),updateRotate:Object(e.b)((function(t,e){var r=e.payload,n=(e=e.callback,r.id),o=(r=r.rotate,t.flatLayersMap.get(n));o&&(o.rotate=r,t.flatLayersMap.delete(n),t.flatLayersMap.set(n,o)),null!=o&&o.parentId&&U(t,o.parentId),e()}))};var X=r(146),q={destroy:Object(e.b)((function(t){t.isBaseMove=!1,t.isEditingText=!1,t.isCropImage=!1,t.isBasicOperation=!1,t.linkLayerId=null,t.isCropStageOperating=!1,t.isStageAutoCrop=!0,t.isEliminatePen=!1,t.isShapePen=!1,t.isContextMenu=!1,t.isIntelligent=!1,t.isProtectPen=!1})),getQuickAddState:Object(e.b)((function(t,e){e(!(t.isEliminatePen||t.isIntelligent))})),layerDoubleClick:0,setLayerDoubleClick:Object(e.b)((function(t){t.layerDoubleClick+=1})),getStateByName:Object(e.b)((function(t,e){var r=e.payload,n=e.callback;switch(r){case X.a.isContextMenu:n(t.isContextMenu);break;case X.a.linkLayerId:n(t.linkLayerId);break;case X.a.isEditingText:n(t.isEditingText);break;case X.a.isCropImage:n(t.isCropImage);break;case X.a.isBasicOperation:n(t.isBasicOperation);break;case X.a.isCropStageOperating:n(t.isCropStageOperating);break;case X.a.isStageAutoCrop:n(t.isStageAutoCrop);break;case X.a.isEliminatePen:n(t.isEliminatePen);break;case X.a.isShapePen:n(t.isShapePen);break;case X.a.isIntelligent:n(t.isIntelligent);break;default:n(null)}})),isBaseMove:!1,setIsBaseMove:Object(e.b)((function(t,e){t.isBaseMove=e,t.isBasicOperation=e})),isEditingText:!1,setIsEditingText:Object(e.b)((function(t,e){t.isEditingText=e,t.isBasicOperation=e})),isCropImage:!1,setIsCropImage:Object(e.b)((function(t,e){t.isCropImage=e,t.isBasicOperation=e})),isBasicOperation:!1,setIsBasicOperation:Object(e.b)((function(t,e){t.isBasicOperation=e})),linkLayerId:null,setLinkLayerId:Object(e.b)((function(t,e){t.linkLayerId=e})),isCropStageOperating:!1,setIsCropStageOperating:Object(e.b)((function(t,e){t.isCropStageOperating=e})),isStageAutoCrop:!0,setIsStageAutoCrop:Object(e.b)((function(t,e){t.isStageAutoCrop=e})),isEliminatePen:!1,setIsEliminatePen:Object(e.b)((function(t,e){t.isEliminatePen=e})),isShapePen:!1,setIsShapePen:Object(e.b)((function(t,e){t.isShapePen=e})),isContextMenu:!1,setIsContextMenu:Object(e.b)((function(t,e){t.isContextMenu=e})),isIntelligent:!1,setIsIntelligent:Object(e.b)((function(t,e){t.isIntelligent=e})),isProtectPen:!1,setIsProtectPen:Object(e.b)((function(t,e){t.isProtectPen=e}))},$=r(13),Z=$.v.AppTheme,J=$.v.Helper,Q={themeManagerModel:{theme:J.getTheme(),setWhiteTheme:Object(e.b)((function(t){t.theme=Z.white,J.setTheme(Z.white)})),setDarkTheme:Object(e.b)((function(t){t.theme=Z.dark,J.setTheme(Z.dark)}))},operateManagerModel:q,layersManagerModel:v,historyManagerModel:m,editorManagerModel:d,fontManagerModel:h,watermarkLayerModel:r(163).c}},,function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return c}));var o=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,r;return e=t,r=[{key:"on",value:function(t,e,r){this.handle[t]||(this.handle[t]=[]),this.handle[t].push({func:e,target:r})}},{key:"onUnique",value:function(t,e,r){this.handle[t]=[{func:e,target:r}]}},{key:"off",value:function(t,e,r){var n=this.handle[t];if(n&&!(n.length<=0))if(e)for(var o=0;o<n.length;o++){var i=n[o];if(i.func===e&&(!r||r===i.target)){n.splice(o,1);break}}else delete this.handle[t]}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.dispatchEvent.apply(this,[t].concat(r))}},{key:"dispatchEvent",value:function(t){var e=this.handle[t];if(e&&!(e.length<=0)){for(var r=arguments.length,n=new Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var i=0;i<e.length;i++){var a=e[i];a.func.apply(a.target,n)}}}}],null&&n(e.prototype,null),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),i=(o.handle={},"init_event"),a={init:function(){o.emit(i)},onInit:function(t){o.on(i,t)},offInit:function(t){o.off(i,t)}},c=o},function(t,e,r){var n;window,n=function(){return e={"./node_modules/base64-js/index.js":function(t,e,r){"use strict";e.byteLength=function(t){return 3*((t=u(t))[0]+(t=t[1]))/4-t},e.toByteArray=function(t){var e,r,n=(a=u(t))[0],a=a[1],c=new i(function(t,e){return 3*(t+e)/4-e}(n,a)),s=0,l=0<a?n-4:n;for(r=0;r<l;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],c[s++]=e>>16&255,c[s++]=e>>8&255,c[s++]=255&e;return 2===a&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,c[s++]=255&e),1===a&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,c[s++]=e>>8&255,c[s++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=0,c=r-o;a<c;a+=16383)i.push(function(t,e,r){for(var o,i=[],a=e;a<r;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(function(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}(o));return i.join("")}(t,a,c<a+16383?c:a+16383));return 1==o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2==o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0;c<64;++c)n[c]=a[c],o[a.charCodeAt(c)]=c;function u(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return e=(t=-1===(t=t.indexOf("="))?e:t)===e?0:4-t%4,[t,e]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(t,e,r){"use strict";(function(t){var n=r("./node_modules/base64-js/index.js"),o=r("./node_modules/ieee754/index.js"),i=r("./node_modules/isarray/index.js");function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(t=null===t?new u(e):t).length=e,t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"!=typeof t)return s(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}function s(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=t,a=e,s=r;if(a.byteLength,s<0||a.byteLength<s)throw new RangeError("'offset' is out of bounds");if(a.byteLength<s+(n||0))throw new RangeError("'length' is out of bounds");return a=void 0===s&&void 0===n?new Uint8Array(a):void 0===n?new Uint8Array(a,s):new Uint8Array(a,s,n),u.TYPED_ARRAY_SUPPORT?(o=a).__proto__=u.prototype:o=d(o,a),o}if("string"!=typeof e){if(s=t,n=e,u.isBuffer(n))return 0!==(s=c(s,a=0|h(n.length))).length&&n.copy(s,0,0,a),s;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||function(t){return t!=t}(n.length)?c(s,0):d(s,n);if("Buffer"===n.type&&i(n.data))return d(s,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(o=t,n=e,t=r,u.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return(n=(o=c(o,e=0|p(n,t))).write(n,t))!==e?o.slice(0,n):o;throw new TypeError('"encoding" must be a valid string encoding')}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=c(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function d(t,e){var r=e.length<0?0:0|h(e.length);t=c(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(t).length;default:if(n)return M(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var o,i=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var a=e,c=r,u=this.length;(!c||c<0||u<c)&&(c=u);for(var s="",l=a=!a||a<0?0:a;l<c;++l)s+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(this[l]);return s;case"utf8":case"utf-8":return O(this,e,r);case"ascii":u=e;var f=r,d="";f=Math.min(this.length,f);for(var h=u;h<f;++h)d+=String.fromCharCode(127&this[h]);return d;case"latin1":case"binary":a=e;var p=r,y="";p=Math.min(this.length,p);for(var g=a;g<p;++g)y+=String.fromCharCode(this[g]);return y;case"base64":return m=this,o=r,0===(v=e)&&o===m.length?n.fromByteArray(m):n.fromByteArray(m.slice(v,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var m=e,v=r,b=this.slice(m,v),w="",x=0;x<b.length;x+=2)w+=String.fromCharCode(b[x]+256*b[x+1]);return w;default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?o?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,o);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):v(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,o){var i=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=i=2,c/=2,r/=2}function u(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o)for(var s=-1,l=r;l<a;l++)if(u(t,l)===u(e,-1===s?0:l-s)){if(l-(s=-1===s?l:s)+1===c)return s*i}else-1!==s&&(l-=l-s),s=-1;else for(l=r=a<r+c?a-c:r;0<=l;l--){for(var f=!0,d=0;d<c;d++)if(u(t,l+d)!==u(e,d)){f=!1;break}if(f)return l}return-1}function b(t,e,r,n){return A(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return A(function(t,e){for(var r,n,o=[],i=0;i<t.length&&!((e-=2)<0);++i)n=(r=t.charCodeAt(i))>>8,o.push(r%256),o.push(n);return o}(e,t.length-r),t,r,n)}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,c,u,s=t[o],l=null,f=239<s?4:223<s?3:191<s?2:1;if(o+f<=r)switch(f){case 1:s<128&&(l=s);break;case 2:128==(192&(i=t[o+1]))&&127<(u=(31&s)<<6|63&i)&&(l=u);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&2047<(u=(15&s)<<12|(63&i)<<6|63&a)&&(u<55296||57343<u)&&(l=u);break;case 4:i=t[o+1],a=t[o+2],c=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&c)&&65535<(u=(15&s)<<18|(63&i)<<12|(63&a)<<6|63&c)&&u<1114112&&(l=u)}null===l?(l=65533,f=1):65535<l&&(n.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}var d=n,h=d.length;if(h<=x)return String.fromCharCode.apply(String,d);for(var p="",y=0;y<h;)p+=String.fromCharCode.apply(String,d.slice(y,y+=x));return p}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return s(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}),u.alloc=function(t,e,r){return n=null,l(t),t<=0||void 0===e?c(n,t):"string"==typeof r?c(n,t).fill(e,r):c(n,t).fill(e);var n},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);if(void 0===e)for(o=e=0;o<t.length;++o)e+=t[o].length;for(var r=u.allocUnsafe(e),n=0,o=0;o<t.length;++o){var a=t[o];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,n),n+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?O(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(u.isBuffer(t))return this===t||0===u.compare(this,t);throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r)&&(t+=" ... "),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=e)return 0;if(o<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),c=Math.min(i,a),s=this.slice(n,o),l=t.slice(e,r),f=0;f<c;++f)if(s[f]!==l[f]){i=s[f],a=l[f];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||o<r)&&(r=o),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,a,c,u=!1;;)switch(n){case"hex":var s=t,l=e,f=r,d=(l=Number(l)||0,this.length-l);if((!f||d<(f=Number(f)))&&(f=d),(d=s.length)%2!=0)throw new TypeError("Invalid hex string");d/2<f&&(f=d/2);for(var h=0;h<f;++h){var p=parseInt(s.substr(2*h,2),16);if(isNaN(p))return h;this[l+h]=p}return h;case"utf8":case"utf-8":return d=e,c=r,A(M(t,(a=this).length-d),a,d,c);case"ascii":case"latin1":case"binary":return b(this,t,e,r);case"base64":return a=this,c=e,i=r,A(P(t),a,c,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function j(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,r,n,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function E(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function k(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function S(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,i){return i||S(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function I(t,e,r,n,i){return i||S(t,0,r,8),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=u.prototype;else for(var n=e-t,o=new u(n,void 0),i=0;i<n;++i)o[i]=this[i+t];return o},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){return e||j(t,2,this.length),32768&(e=this[t]|this[t+1]<<8)?4294901760|e:e},u.prototype.readInt16BE=function(t,e){return e||j(t,2,this.length),32768&(e=this[t+1]|this[t]<<8)?4294901760|e:e},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||_(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||_(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):E(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):E(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){t=+t,e|=0,n||_(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,a=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){t=+t,e|=0,n||_(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,a=0;for(this[e+o]=255&t;0<=--o&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):E(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):E(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return I(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return I(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o,i=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&r<e&&e<n)for(o=i-1;0<=o;--o)t[o+e]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){var o;if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length&&(o=t.charCodeAt(0))<256&&(t=o),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(!(r<=e))if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(c=e;c<r;++c)this[c]=t;else for(var i=u.isBuffer(t)?t:M(new u(t,n).toString()),a=i.length,c=0;c<r-e;++c)this[c+e]=i[c%a];return this};var T=/[^+\/0-9A-Za-z-_]/g;function M(t,e){e=e||1/0;for(var r,n=t.length,o=null,i=[],a=0;a<n;++a){if(55295<(r=t.charCodeAt(a))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(a+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,r<128){if(--e<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function P(t){return n.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function A(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/hex-to-rgba/build/index.js":function(t,e,r){"use strict";var n=function(t){return parseInt(t,16)};t.exports=function(t,e){var r,o,i,a={r:(a=3===(t="#"===t.charAt(0)?t.slice(1):t).length||4===t.length)?"".concat(t.slice(0,1)).concat(t.slice(0,1)):t.slice(0,2),g:a?"".concat(t.slice(1,2)).concat(t.slice(1,2)):t.slice(2,4),b:a?"".concat(t.slice(2,3)).concat(t.slice(2,3)):t.slice(4,6),a:(a?"".concat(t.slice(3,4)).concat(t.slice(3,4)):t.slice(6,8))||"ff"};r=(t=a).g,o=a.b,t=a.a,a={r:n(a.r),g:n(r),b:n(o),a:+(n(t)/255).toFixed(2)};return o=(r=a).r,t=a.g,i=a.b,r=a.a,a=function(t){return!isNaN(parseFloat(t))&&isFinite(t)}(a=e)?a:r,"rgba(".concat(o,", ").concat(t,", ").concat(i,", ").concat(a,")")}},"./node_modules/ieee754/index.js":function(t,e){e.read=function(t,e,r,n,o){var i,a,c=8*o-n-1,u=(1<<c)-1,s=u>>1,l=-7,f=r?o-1:0,d=r?-1:1;o=t[e+f];for(f+=d,i=o&(1<<-l)-1,o>>=-l,l+=c;0<l;i=256*i+t[e+f],f+=d,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;0<l;a=256*a+t[e+f],f+=d,l-=8);if(0===i)i=1-s;else{if(i===u)return a?NaN:1/0*(o?-1:1);a+=Math.pow(2,n),i-=s}return(o?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,c,u=8*i-o-1,s=(1<<u)-1,l=s>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,h=n?1:-1;i=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=s):(a=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(e+=1<=a+l?f/n:f*Math.pow(2,1-l))*n&&(a++,n/=2),s<=a+l?(c=0,a=s):1<=a+l?(c=(e*n-1)*Math.pow(2,o),a+=l):(c=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));8<=o;t[r+d]=255&c,d+=h,c/=256,o-=8);for(a=a<<o|c,u+=o;0<u;t[r+d]=255&a,d+=h,a/=256,u-=8);t[r+d-h]|=128*i}},"./node_modules/isarray/index.js":function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},"./node_modules/jszip-utils/lib/index.js":function(t,e,r){"use strict";var n={};function o(){try{return new window.XMLHttpRequest}catch(t){}}n._getBinaryFromXHR=function(t){return t.response||t.responseText};var i="undefined"!=typeof window&&window.ActiveXObject?function(){return o()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:o;n.getBinaryContent=function(t,e){var r,o,a,c;"function"==typeof(e=e||{})?(c=e,e={}):"function"==typeof e.callback&&(c=e.callback),c||"undefined"==typeof Promise?(o=function(t){c(null,t)},a=function(t){c(t,null)}):r=new Promise((function(t,e){o=t,a=e}));try{var u=i();u.open("GET",t,!0),"responseType"in u&&(u.responseType="arraybuffer"),u.overrideMimeType&&u.overrideMimeType("text/plain; charset=x-user-defined"),u.onreadystatechange=function(e){if(4===u.readyState)if(200===u.status||0===u.status)try{o(n._getBinaryFromXHR(u))}catch(e){a(new Error(e))}else a(new Error("Ajax error for "+t+" : "+this.status+" "+this.statusText))},e.progress&&(u.onprogress=function(r){e.progress({path:t,originalEvent:r,percent:r.loaded/r.total*100,loaded:r.loaded,total:r.total})}),u.send()}catch(r){a(new Error(r),null)}return r},t.exports=n},"./node_modules/jszip/dist/jszip.min.js":function(t,e,r){(function(e,r,n){t.exports=function t(e,r,n){function o(a,c){if(!r[a]){if(!e[a]){if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}u=r[a]={exports:{}},e[a][0].call(u.exports,(function(t){return o(e[a][1][t]||t)}),u,u.exports,t,e,r,n)}return r[a].exports}for(var i=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){"use strict";var n=t("./utils"),o=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,o,a,c,u,s=[],l=0,f=t.length,d="string"!==n.getTypeOf(t);l<t.length;)u=f-l,o=d?(e=t[l++],r=l<f?t[l++]:0,l<f?t[l++]:0):(e=t.charCodeAt(l++),r=l<f?t.charCodeAt(l++):0,l<f?t.charCodeAt(l++):0),a=(3&e)<<4|r>>4,c=1<u?(15&r)<<2|o>>6:64,u=2<u?63&o:64,s.push(i.charAt(e>>2)+i.charAt(a)+i.charAt(c)+i.charAt(u));return s.join("")},r.decode=function(t){var e,r,n,a,c,u=0,s=0;if("data:"===t.substr(0,5))throw new Error("Invalid base64 input, it looks like a data url.");var l,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===i.charAt(64)&&f--,t.charAt(t.length-2)===i.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=new(o.uint8array?Uint8Array:Array)(0|f);u<t.length;)e=i.indexOf(t.charAt(u++))<<2|(a=i.indexOf(t.charAt(u++)))>>4,r=(15&a)<<4|(a=i.indexOf(t.charAt(u++)))>>2,n=(3&a)<<6|(c=i.indexOf(t.charAt(u++))),l[s++]=e,64!==a&&(l[s++]=r),64!==c&&(l[s++]=n);return l}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var n=t("./external"),o=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function c(t,e,r,n,o){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=o}c.prototype={getContentWorker:function(){var t=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(t,e,r){return t.pipe(new i).pipe(new a("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var n=t("./utils"),o=function(){for(var t=[],e=0;e<256;e++){for(var r=e,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;t[e]=r}return t}();e.exports=function(t,e){return void 0!==t&&t.length?("string"!==n.getTypeOf(t)?function(t,e,r){var n=o,i=0+r;t^=-1;for(var a=0;a<i;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}:function(t,e,r){var n=o,i=0+r;t^=-1;for(var a=0;a<i;a++)t=t>>>8^n[255&(t^e.charCodeAt(a))];return-1^t})(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";t="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:t}},{lie:37}],7:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=t("pako"),i=t("./utils"),a=t("./stream/GenericWorker"),c=n?"uint8array":"array";function u(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\0",i.inherits(u,a),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(c,t.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new u("Deflate",t)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function n(t,e){for(var r="",n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r}function o(t,e,r,o,a,l){var f=t.file,d=t.compression,h=l!==c.utf8encode,p=i.transformTo("string",l(f.name)),y=i.transformTo("string",c.utf8encode(f.name)),g=f.comment,m=(l=i.transformTo("string",l(g)),i.transformTo("string",c.utf8encode(g))),v=y.length!==f.name.length,b=(g=m.length!==g.length,""),w=f.dir,O=f.date,x={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(x.crc32=t.crc32,x.compressedSize=t.compressedSize,x.uncompressedSize=t.uncompressedSize),r=0,e&&(r|=8),h||!v&&!g||(r|=2048),t=0,e=0,w&&(t|=16),"UNIX"===a?(e=798,t|=(65535&((h=f.unixPermissions)?h:w?16893:33204))<<16):(e=20,t|=63&(f.dosPermissions||0)),a=O.getUTCHours(),a=(a=((a<<=6)|O.getUTCMinutes())<<5)|O.getUTCSeconds()/2,h=O.getUTCFullYear()-1980,h=(h=((h<<=4)|O.getUTCMonth()+1)<<5)|O.getUTCDate(),v&&(w=n(1,1)+n(u(p),4)+y,b+="up"+n(w.length,2)+w),g&&(f=n(1,1)+n(u(l),4)+m,b+="uc"+n(f.length,2)+f),O="",O=(O=(O=(O=(O=(O=(O=(O=(O=(O+="\n\0")+n(r,2))+d.magic)+n(a,2))+n(h,2))+n(x.crc32,4))+n(x.compressedSize,4))+n(x.uncompressedSize,4))+n(p.length,2))+n(b.length,2);return{fileRecord:s.LOCAL_FILE_HEADER+O+p+b,dirRecord:s.CENTRAL_FILE_HEADER+n(e,2)+O+n(l.length,2)+"\0\0\0\0"+n(t,4)+n(o,4)+p+b+l}}var i=t("../utils"),a=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),s=t("../signature");function l(t,e,r,n){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(l,a),l.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,a.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;e?(t=o(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:t.fileRecord,meta:{percent:0}})):this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=o(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:(e=t,s.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t;r=function(t,e,r,o,a){return a=i.transformTo("string",a(o)),s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(r,4)+n(a.length,2)+a}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!a.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var n=t("../compressions"),o=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var i=new o(e.streamFiles,r,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,r){a++;var o=function(t,e){if(e=n[t=t||e])return e;throw new Error(t+" is not a valid compression method !")}(r.options.compression,e.compression),c=r.options.compressionOptions||e.compressionOptions||{},u=r.dir,s=r.date;r._compressWorker(o,c).withStreamInfo("file",{name:t,dir:u,date:s,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(i)})),i.entriesCount=a}catch(t){i.error(t)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t,e=new n;for(t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.7.1",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var n=t("./utils"),o=t("./external"),i=t("./utf8"),a=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),u.isNode&&u.isStream(t)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new a(e);return r.load(t),r})).then((function(t){var r=[o.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var i=0;i<n.length;i++)r.push(function(t){return new o.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new c);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}(n[i]));return o.Promise.all(r)})).then((function(t){for(var n=(t=t.shift()).files,o=0;o<n.length;o++){var i=n[o];r.file(i.fileNameStr,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:e.createFolders})}return t.zipComment.length&&(r.comment=t.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var n=t("../utils"),o=t("../stream/GenericWorker");function i(t,e){o.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(i,o),i.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function o(t,e,r){n.call(this,e),this._helper=t;var o=this;t.on("data",(function(t,e){o.push(t)||o._helper.pause(),r&&r(e)})).on("error",(function(t){o.emit("error",t)})).on("end",(function(){o.push(null)}))}t("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},e.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){"use strict";r.exports={isNode:void 0!==e,newBufferFrom:function(t,r){if(e.from&&e.from!==Uint8Array.from)return e.from(t,r);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new e(t,r)},allocBuffer:function(t){return e.alloc?e.alloc(t):((t=new e(t)).fill(0),t)},isBuffer:function(t){return e.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,r){"use strict";function n(t,e,r){var n=a.getTypeOf(e),i=a.extend(r||{},s),u=(i.date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(t=y(t)),i.createFolders&&(u=function(t){var e=(t="/"===t.slice(-1)?t.substring(0,t.length-1):t).lastIndexOf("/");return 0<e?t.substring(0,e):""}(t))&&o.call(this,u,!0),"string"===n&&!1===i.binary&&!1===i.base64);r&&void 0!==r.binary||(i.binary=!u),(e instanceof l&&0===e.uncompressedSize||i.dir||!e||0===e.length)&&(i.base64=!1,i.binary=!0,e="",i.compression="STORE"),n=e instanceof l||e instanceof c?e:h.isNode&&h.isStream(e)?new p(t,e):a.prepareContent(t,e,i.binary,i.optimizedBinaryString,i.base64),r=new f(t,n,i);this.files[t]=r}function o(t,e){return e=void 0!==e?e:s.createFolders,t=y(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]}var i=t("./utf8"),a=t("./utils"),c=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),s=t("./defaults"),l=t("./compressedObject"),f=t("./zipObject"),d=t("./generate"),h=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),y=function(t){return"/"!==t.slice(-1)&&(t+="/"),t};function g(t){return"[object RegExp]"===Object.prototype.toString.call(t)}e.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n)},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},file:function(t,e,r){var o;return 1!==arguments.length?(t=this.root+t,n.call(this,t,e,r),this):g(t)?(o=t,this.filter((function(t,e){return!e.dir&&o.test(t)}))):(e=this.files[this.root+t])&&!e.dir?e:null},folder:function(t){var e,r;return t?g(t)?this.filter((function(e,r){return r.dir&&t.test(e)})):(e=this.root+t,e=o.call(this,e),(r=this.clone()).root=e.name,r):this},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e={};try{if((e=a.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=e.type.toLowerCase(),e.compression=e.compression.toUpperCase(),"binarystring"===e.type&&(e.type="string"),!e.type)throw new Error("No output type specified.");a.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var r=e.comment||this.comment||"",n=d.generateWorker(this,e,r)}catch(t){(n=new c("error")).error(t)}return new u(n,e.type||"string",e.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var n=t("./DataReader");function o(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data[this.zero+t]},o.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),o=t.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===e&&this.data[i+1]===r&&this.data[i+2]===n&&this.data[i+3]===o)return i-this.zero;return-1},o.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),o=(t=t.charCodeAt(3),this.readData(4));return e===o[0]&&r===o[1]&&n===o[2]&&t===o[3]},o.prototype.readData=function(t){var e;return this.checkOffset(t),0===t?[]:(e=this.data.slice(this.zero+this.index,this.zero+this.index+t),this.index+=t,e)},e.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var n=t("../utils");function o(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=o},{"../utils":32}],19:[function(t,e,r){"use strict";var n=t("./Uint8ArrayReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var n=t("./DataReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},o.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var n=t("./ArrayReader");function o(t){n.call(this,t)}t("../utils").inherits(o,n),o.prototype.readData=function(t){var e;return this.checkOffset(t),0===t?new Uint8Array(0):(e=this.data.subarray(this.zero+this.index,this.zero+this.index+t),this.index+=t,e)},e.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var n=t("../utils"),o=t("../support"),i=t("./ArrayReader"),a=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||o.uint8array?"nodebuffer"===e?new c(t):o.uint8array?new u(n.transformTo("uint8array",t)):new i(n.transformTo("array",t)):new a(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,e,r){"use strict";var n=t("./GenericWorker"),o=t("../utils");function i(t){n.call(this,"ConvertWorker to "+t),this.destType=t}o.inherits(i,n),i.prototype.processChunk=function(t){this.push({data:o.transformTo(this.destType,t.data),meta:t.meta})},e.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var n=t("./GenericWorker"),o=t("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,n),i.prototype.processChunk=function(t){this.streamInfo.crc32=o(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var n=t("../utils"),o=t("./GenericWorker");function i(t){o.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(i,o),i.prototype.processChunk=function(t){var e;t&&(e=this.streamInfo[this.propName]||0,this.streamInfo[this.propName]=e+t.data.length),o.prototype.processChunk.call(this,t)},e.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var n=t("../utils"),o=t("./GenericWorker");function i(t){o.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished)||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){var t;return!(!this.isPaused||this.isFinished||(t=this.isPaused=!1,this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),t))},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,r,n){"use strict";var o=t("../utils"),i=t("./ConvertWorker"),a=t("./GenericWorker"),c=t("../base64"),u=t("../support"),s=t("../external"),l=null;if(u.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function f(t,e,r){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=e,this._mimeType=r,o.checkSupport(n),this._worker=t.pipe(new i(n)),t.lock()}catch(t){this._worker=new a("error"),this._worker.error(t)}}f.prototype={accumulate:function(t){return r=this,n=t,new s.Promise((function(t,i){var a=[],u=r._internalType,s=r._outputType,l=r._mimeType;r.on("data",(function(t,e){a.push(t),n&&n(e)})).on("error",(function(t){a=[],i(t)})).on("end",(function(){try{var r=function(t,e,r){switch(t){case"blob":return o.newBlob(o.transformTo("arraybuffer",e),r);case"base64":return c.encode(e);default:return o.transformTo(t,e)}}(s,function(t,r){for(var n=0,o=null,i=0,a=0;a<r.length;a++)i+=r[a].length;switch(t){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(o=new Uint8Array(i),a=0;a<r.length;a++)o.set(r[a],n),n+=r[a].length;return o;case"nodebuffer":return e.concat(r);default:throw new Error("concat : unsupported type '"+t+"'")}}(u,a),l);t(r)}catch(r){i(r)}a=[]})).resume()}));var r,n},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){o.delay(e,arguments,r)})),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(o.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==e,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var o=new ArrayBuffer(0);try{n.blob=0===new Blob([o],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),n.blob=0===i.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";for(var n=t("./utils"),o=t("./support"),i=t("./nodejsUtils"),a=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function s(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}c[254]=c[254]=1,r.utf8encode=function(t){if(o.nodebuffer)return i.newBufferFrom(t,"utf-8");for(var e,r,n,a,c=t,u=c.length,s=0,l=0;l<u;l++)55296==(64512&(r=c.charCodeAt(l)))&&l+1<u&&56320==(64512&(n=c.charCodeAt(l+1)))&&(r=65536+(r-55296<<10)+(n-56320),l++),s+=r<128?1:r<2048?2:r<65536?3:4;for(e=new(o.uint8array?Uint8Array:Array)(s),l=a=0;a<s;l++)55296==(64512&(r=c.charCodeAt(l)))&&l+1<u&&56320==(64512&(n=c.charCodeAt(l+1)))&&(r=65536+(r-55296<<10)+(n-56320),l++),r<128?e[a++]=r:(r<2048?e[a++]=192|r>>>6:(r<65536?e[a++]=224|r>>>12:(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63),e[a++]=128|r>>>6&63),e[a++]=128|63&r);return e},r.utf8decode=function(t){if(o.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");for(var e,r,i,a=t=n.transformTo(o.uint8array?"uint8array":"array",t),u=a.length,s=new Array(2*u),l=e=0;l<u;)if((r=a[l++])<128)s[e++]=r;else if(4<(i=c[r]))s[e++]=65533,l+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&l<u;)r=r<<6|63&a[l++],i--;1<i?s[e++]=65533:r<65536?s[e++]=r:(r-=65536,s[e++]=55296|r>>10&1023,s[e++]=56320|1023&r)}return s.length!==e&&(s.subarray?s=s.subarray(0,e):s.length=e),n.applyFromCharCode(s)},n.inherits(s,a),s.prototype.processChunk=function(t){var e=n.transformTo(o.uint8array?"uint8array":"array",t.data),i=(this.leftOver&&this.leftOver.length&&(o.uint8array?(i=e,(e=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),e.set(i,this.leftOver.length)):e=this.leftOver.concat(e),this.leftOver=null),function(t,e){for(var r=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=r&&128==(192&t[r]);)r--;return!(r<0)&&0!==r&&r+c[t[r]]>e?r:e}(e)),a=e;i!==e.length&&(o.uint8array?(a=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(a=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:r.utf8decode(a),meta:t.meta})},s.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=s,n.inherits(l,a),l.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var n=t("./support"),o=t("./base64"),i=t("./nodejsUtils"),a=t("set-immediate-shim"),c=t("./external");function u(t){return t}function s(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}r.newBlob=function(e,n){r.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(e),o.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(t,e,r){var n=[],o=0,i=t.length;if(i<=r)return String.fromCharCode.apply(null,t);for(;o<i;)n.push("array"===e||"nodebuffer"===e?String.fromCharCode.apply(null,t.slice(o,Math.min(o+r,i))):String.fromCharCode.apply(null,t.subarray(o,Math.min(o+r,i)))),o+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,n=r.getTypeOf(t),o=!0;if("uint8array"===n?o=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(o=l.applyCanBeUsed.nodebuffer),o)for(;1<e;)try{return l.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return l.stringifyByChar(t)}function d(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=f;var h={};h.string={string:u,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return h.string.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:function(t){return s(t,i.allocBuffer(t.length))}},h.array={string:f,array:u,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return i.newBufferFrom(t)}},h.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:u,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return i.newBufferFrom(new Uint8Array(t))}},h.uint8array={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:u,nodebuffer:function(t){return i.newBufferFrom(t)}},h.nodebuffer={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return h.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:u},r.transformTo=function(t,e){if(e=e||"",!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return h[n][t](e)},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&i.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){for(var e,r="",n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},r.delay=function(t,e,r){a((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},r.extend=function(){for(var t,e={},r=0;r<arguments.length;r++)for(t in arguments[r])arguments[r].hasOwnProperty(t)&&void 0===e[t]&&(e[t]=arguments[r][t]);return e},r.prepareContent=function(t,e,i,a,u){return c.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new c.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var l=r.getTypeOf(e);return l?("arraybuffer"===l?e=r.transformTo("uint8array",e):"string"===l&&(u?e=o.decode(e):i&&!0!==a&&(e=s(l=e,new(n.uint8array?Uint8Array:Array)(l.length)))),e):c.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),o=t("./utils"),i=t("./signature"),a=t("./zipEntry"),c=(t("./utf8"),t("./support"));function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){var e;if(!this.reader.readAndCheckSignature(t))throw this.reader.index-=4,e=this.reader.readString(4),new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t),t=this.reader.readString(4)===e;return this.reader.setIndex(r),t},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=c.uint8array?"uint8array":"array";e=o.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(e)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var t,e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}if(t=this.centralDirOffset+this.centralDirSize,0<(t=e-(t=this.zip64?t+20+(12+this.zip64EndOfCentralSize):t)))this.isSignature(e,i.CENTRAL_FILE_HEADER)||(this.reader.zero=t);else if(t<0)throw new Error("Corrupted zip: missing "+Math.abs(t)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),o=t("./utils"),i=t("./compressedObject"),a=t("./crc32"),c=t("./utf8"),u=t("./compressions"),s=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e;if(t.skip(22),this.fileNameLength=t.readInt(2),e=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(e),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){var e;this.extraFields[1]&&(e=n(this.extraFields[1].value),this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS)&&(this.diskNumberStart=e.readInt(4))},readExtraFields:function(t){var e,r,n,o=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<o;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n};t.setIndex(o)},handleUTF8:function(){var t,e=s.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment)):(null!==(t=this.findExtraFieldUnicodePath())?this.fileNameStr=t:(t=o.transformTo(e,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(t)),null!==(t=this.findExtraFieldUnicodeComment())?this.fileCommentStr=t:(t=o.transformTo(e,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(t)))},findExtraFieldUnicodePath:function(){var t,e=this.extraFields[28789];return e&&1===(t=n(e.value)).readInt(1)&&a(this.fileName)===t.readInt(4)?c.utf8decode(t.readData(e.length-5)):null},findExtraFieldUnicodeComment:function(){var t,e=this.extraFields[25461];return e&&1===(t=n(e.value)).readInt(1)&&a(this.fileComment)===t.readInt(4)?c.utf8decode(t.readData(e.length-5)):null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function n(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var o=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),a=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(r=t.toLowerCase())||"text"===r,i=("binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker(),!this._dataBinary);i&&!n&&(e=e.pipe(new a.Utf8EncodeWorker)),!i&&n&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new u("error")).error(t)}return new o(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){var r;return this._data instanceof c&&this._data.compression.magic===t.magic?this._data.getCompressedWorker():(r=this._decompressWorker(),this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),c.createWorkerFrom(r,t,e))},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new i(this._data)}};for(var s=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<s.length;f++)n.prototype[s[f]]=l;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){"use strict";var r,n,o,i,a=t.MutationObserver||t.WebKitMutationObserver,c=a?(n=0,a=new a(s),o=t.document.createTextNode(""),a.observe(o,{characterData:!0}),function(){o.data=n=++n%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){s(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(s,0)}:((i=new t.MessageChannel).port1.onmessage=s,function(){i.port2.postMessage(0)}),u=[];function s(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}e.exports=function(t){1!==u.push(t)||r||c()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,r){"use strict";var n=t("immediate");function o(){}var i={},a=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function s(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==o&&h(this,t)}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){n((function(){var n;try{n=e(r)}catch(n){return i.reject(t,n)}n===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,n)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function h(t,e){var r=!1;function n(e){r||(r=!0,i.reject(t,e))}function o(e){r||(r=!0,i.resolve(t,e))}var a=p((function(){e(o,n)}));"error"===a.status&&n(a.value)}function p(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}(e.exports=s).prototype.finally=function(t){var e;return"function"!=typeof t?this:(e=this.constructor,this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))})))},s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r;return"function"!=typeof t&&this.state===c||"function"!=typeof e&&this.state===a?this:(r=new this.constructor(o),this.state!==u?f(r,this.state===c?t:e,this.outcome):this.queue.push(new l(r,t,e)),r)},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},i.resolve=function(t,e){var r=p(d,e);if("error"===r.status)return i.reject(t,r.value);if(r=r.value)h(t,r);else{t.state=c,t.outcome=e;for(var n=-1,o=t.queue.length;++n<o;)t.queue[n].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},s.resolve=function(t){return t instanceof this?t:i.resolve(new this(o),t)},s.reject=function(t){var e=new this(o);return i.reject(e,t)},s.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),c=0,u=-1,s=new this(o);++u<r;)!function(t,o){e.resolve(t).then((function(t){a[o]=t,++c!==r||n||(n=!0,i.resolve(s,a))}),(function(t){n||(n=!0,i.reject(s,t))}))}(t[u],u);return s},s.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,r=!1;if(!e)return this.resolve([]);for(var n,a=-1,c=new this(o);++a<e;)n=t[a],this.resolve(n).then((function(t){r||(r=!0,i.resolve(c,t))}),(function(t){r||(r=!0,i.reject(c,t))}));return c}},{immediate:36}],38:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),o=t("./utils/common"),i=t("./utils/strings"),a=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=((t=this.options).raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0,n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy));if(0!==e)throw new Error(a[e]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){if(t="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(e=n.deflateSetDictionary(this.strm,t)))throw new Error(a[e]);this._dict_set=!0}}function l(t,e){if((e=new s(e)).push(t,!0),e.err)throw e.msg||a[e.err];return e.result}s.prototype.push=function(t,e){var r,a,c=this.strm,s=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?c.input=i.string2buf(t):"[object ArrayBuffer]"===u.call(t)?c.input=new Uint8Array(t):c.input=t,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new o.Buf8(s),c.next_out=0,c.avail_out=s),1!==(r=n.deflate(c,a))&&0!==r)return this.onEnd(r),!(this.ended=!0)}while(0!==c.avail_out&&(0!==c.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(c.output,c.next_out))):this.onData(o.shrinkBuf(c.output,c.next_out))),(0<c.avail_in||0===c.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),!(c.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=s,r.deflate=l,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),o=t("./utils/common"),i=t("./utils/strings"),a=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),s=t("./zlib/gzheader"),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;if((t=(e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits)&&(e.windowBits=-15),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0,n.inflateInit2(this.strm,e.windowBits)))!==a.Z_OK)throw new Error(c[t]);this.header=new s,n.inflateGetHeader(this.strm,this.header)}function d(t,e){if((e=new f(e)).push(t,!0),e.err)throw e.msg||c[e.err];return e.result}f.prototype.push=function(t,e){var r,c,u,s,f,d=this.strm,h=this.options.chunkSize,p=this.options.dictionary,y=!1;if(this.ended)return!1;c=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?d.input=i.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new o.Buf8(h),d.next_out=0,d.avail_out=h),(r=n.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&p&&(f="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===l.call(p)?new Uint8Array(p):p,r=n.inflateSetDictionary(this.strm,f)),r===a.Z_BUF_ERROR&&!0===y&&(r=a.Z_OK,y=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),!(this.ended=!0)}while(!d.next_out||0!==d.avail_out&&r!==a.Z_STREAM_END&&(0!==d.avail_in||c!==a.Z_FINISH&&c!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(f=i.utf8border(d.output,d.next_out),u=d.next_out-f,s=i.buf2string(d.output,f),d.next_out=u,d.avail_out=h-u,u&&o.arraySet(d.output,d.output,f,u,0),this.onData(s)):this.onData(o.shrinkBuf(d.output,d.next_out))),0===d.avail_in&&0===d.avail_out&&(y=!0),(0<d.avail_in||0===d.avail_out)&&r!==a.Z_STREAM_END);return(c=r===a.Z_STREAM_END?a.Z_FINISH:c)===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):c!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(d.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=f,r.inflate=d,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,o=(r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)},{arraySet:function(t,e,r,n,o){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),o);else for(var i=0;i<n;i++)t[o+i]=e[r+i]},flattenChunks:function(t){for(var e,r,n,o,i=e=0,a=t.length;i<a;i++)e+=t[i].length;for(o=new Uint8Array(e),i=r=0,a=t.length;i<a;i++)n=t[i],o.set(n,r),r+=n.length;return o}}),i={arraySet:function(t,e,r,n,o){for(var i=0;i<n;i++)t[o+i]=e[r+i]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,i))},r.setTyped(n)},{}],42:[function(t,e,r){"use strict";var n=t("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){i=!1}for(var a=new n.Buf8(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(t,e){if(e<65537&&(t.subarray&&i||!t.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,r.string2buf=function(t){for(var e,r,o,i,a=t.length,c=0,u=0;u<a;u++)55296==(64512&(r=t.charCodeAt(u)))&&u+1<a&&56320==(64512&(o=t.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(o-56320),u++),c+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(c),u=i=0;i<c;u++)55296==(64512&(r=t.charCodeAt(u)))&&u+1<a&&56320==(64512&(o=t.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(o-56320),u++),r<128?e[i++]=r:(r<2048?e[i++]=192|r>>>6:(r<65536?e[i++]=224|r>>>12:(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63),e[i++]=128|r>>>6&63),e[i++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,o=e.length;r<o;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){for(var r,n,o,i=e||t.length,c=new Array(2*i),s=r=0;s<i;)if((n=t[s++])<128)c[r++]=n;else if(4<(o=a[n]))c[r++]=65533,s+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&s<i;)n=n<<6|63&t[s++],o--;1<o?c[r++]=65533:n<65536?c[r++]=n:(n-=65536,c[r++]=55296|n>>10&1023,c[r++]=56320|1023&n)}return u(c,r)},r.utf8border=function(t,e){for(var r=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=r&&128==(192&t[r]);)r--;return!(r<0)&&0!==r&&r+a[t[r]]>e?r:e}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var o=65535&t|0,i=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;i=i+(o=o+e[n++]|0)|0,--a;);o%=65521,i%=65521}return o|i<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var n=function(){for(var t=[],e=0;e<256;e++){for(var r=e,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;t[e]=r}return t}();e.exports=function(t,e,r,o){var i=n,a=o+r;t^=-1;for(var c=o;c<a;c++)t=t>>>8^i[255&(t^e[c])];return-1^t}},{}],46:[function(t,e,r){"use strict";var n,o=t("../utils/common"),i=t("./trees"),a=t("./adler32"),c=t("./crc32"),u=t("./messages"),s=0,l=0,f=-2,d=2,h=8,p=286,y=30,g=19,m=2*p+1,v=15,b=3,w=258,O=w+b+1,x=42,j=113;function _(t,e){return t.msg=u[e],e}function E(t){return(t<<1)-(4<t?9:0)}function k(t){for(var e=t.length;0<=--e;)t[e]=0}function S(t){var e=t.state,r=e.pending;0!==(r=r>t.avail_out?t.avail_out:r)&&(o.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending)&&(e.pending_out=0)}function L(t,e){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,S(t.strm)}function I(t,e){t.pending_buf[t.pending++]=e}function T(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function M(t,e){var r,n,o=t.max_chain_length,i=t.strstart,a=t.prev_length,c=t.nice_match,u=t.strstart>t.w_size-O?t.strstart-(t.w_size-O):0,s=t.window,l=t.w_mask,f=t.prev,d=t.strstart+w,h=s[i+a-1],p=s[i+a];t.prev_length>=t.good_match&&(o>>=2),c>t.lookahead&&(c=t.lookahead);do{if(s[(r=e)+a]===p&&s[r+a-1]===h&&s[r]===s[i]&&s[++r]===s[i+1]){for(i+=2,r++;s[++i]===s[++r]&&s[++i]===s[++r]&&s[++i]===s[++r]&&s[++i]===s[++r]&&s[++i]===s[++r]&&s[++i]===s[++r]&&s[++i]===s[++r]&&s[++i]===s[++r]&&i<d;);if(n=w-(d-i),i=d-w,a<n){if(t.match_start=e,c<=(a=n))break;h=s[i+a-1],p=s[i+a]}}}while((e=f[e&l])>u&&0!=--o);return a<=t.lookahead?a:t.lookahead}function P(t){var e,r,n,i,u,s,l,f,d,h=t.w_size;do{if(f=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-O)){for(o.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=r=t.hash_size;n=t.head[--e],t.head[e]=h<=n?n-h:0,--r;);for(e=r=h;n=t.prev[--e],t.prev[e]=h<=n?n-h:0,--r;);f+=h}if(0===t.strm.avail_in)break;if(u=t.strm,s=t.window,l=t.strstart+t.lookahead,d=void 0,r=0===(d=f<(d=u.avail_in)?f:d)?0:(u.avail_in-=d,o.arraySet(s,u.input,u.next_in,d,l),1===u.state.wrap?u.adler=a(u.adler,s,d,l):2===u.state.wrap&&(u.adler=c(u.adler,s,d,l)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=r,t.lookahead+t.insert>=b)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+b-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<b)););}while(t.lookahead<O&&0!==t.strm.avail_in)}function A(t,e){for(var r,n;;){if(t.lookahead<O){if(P(t),t.lookahead<O&&e===s)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-O&&(t.match_length=M(t,r)),t.match_length>=b)if(n=i._tr_tally(t,t.strstart-t.match_start,t.match_length-b),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=b){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(L(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(L(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?1:2}function C(t,e){for(var r,n,o;;){if(t.lookahead<O){if(P(t),t.lookahead<O&&e===s)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=b-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-O&&(t.match_length=M(t,r),t.match_length<=5)&&(1===t.strategy||t.match_length===b&&4096<t.strstart-t.match_start)&&(t.match_length=b-1),t.prev_length>=b&&t.match_length<=t.prev_length){for(o=t.strstart+t.lookahead-b,n=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-b),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=b-1,t.strstart++,n&&(L(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=i._tr_tally(t,0,t.window[t.strstart-1]))&&L(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(L(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?1:2}function R(t,e,r,n,o){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=o}function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=h,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*m),this.dyn_dtree=new o.Buf16(2*(2*y+1)),this.bl_tree=new o.Buf16(2*(2*g+1)),k(this.dyn_ltree),k(this.dyn_dtree),k(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(v+1),this.heap=new o.Buf16(2*p+1),k(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*p+1),k(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function D(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=d,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?x:j,t.adler=2===e.wrap?0:1,e.last_flush=s,i._tr_init(e),l):_(t,f)}function F(t){var e=D(t);return e===l&&((t=t.state).window_size=2*t.w_size,k(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=b-1,t.match_available=0,t.ins_h=0),e}function B(t,e,r,n,i,a){if(!t)return f;var c=1;if(-1===e&&(e=6),n<0?(c=0,n=-n):15<n&&(c=2,n-=16),i<1||9<i||r!==h||n<8||15<n||e<0||9<e||a<0||4<a)return _(t,f);8===n&&(n=9);var u=new N;return(t.state=u).strm=t,u.wrap=c,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+b-1)/b),u.window=new o.Buf8(2*u.w_size),u.head=new o.Buf16(u.hash_size),u.prev=new o.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new o.Buf8(u.pending_buf_size),u.d_buf=+u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,F(t)}n=[new R(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(P(t),0===t.lookahead&&e===s)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,L(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-O&&(L(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(L(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(L(t,!1),t.strm.avail_out),1)})),new R(4,4,8,4,A),new R(4,5,16,8,A),new R(4,6,32,32,A),new R(4,4,16,16,C),new R(8,16,32,32,C),new R(8,16,128,128,C),new R(8,32,128,256,C),new R(32,128,258,1024,C),new R(32,258,258,4096,C)],r.deflateInit=function(t,e){return B(t,e,h,15,8,0)},r.deflateInit2=B,r.deflateReset=F,r.deflateResetKeep=D,r.deflateSetHeader=function(t,e){return t&&t.state&&2===t.state.wrap?(t.state.gzhead=e,l):f},r.deflate=function(t,e){var r,o,a,u;if(!t||!t.state||5<e||e<0)return t?_(t,f):f;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||666===o.status&&4!==e)return _(t,0===t.avail_out?-5:f);if(o.strm=t,r=o.last_flush,o.last_flush=e,o.status===x&&(2===o.wrap?(t.adler=0,I(o,31),I(o,139),I(o,8),o.gzhead?(I(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),I(o,255&o.gzhead.time),I(o,o.gzhead.time>>8&255),I(o,o.gzhead.time>>16&255),I(o,o.gzhead.time>>24&255),I(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),I(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(I(o,255&o.gzhead.extra.length),I(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=c(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(I(o,0),I(o,0),I(o,0),I(o,0),I(o,0),I(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),I(o,3),o.status=j)):(d=h+(o.w_bits-8<<4)<<8,d|=(2<=o.strategy||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(d|=32),d+=31-d%31,o.status=j,T(o,d),0!==o.strstart&&(T(o,t.adler>>>16),T(o,65535&t.adler)),t.adler=1)),69===o.status)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(t.adler=c(t.adler,o.pending_buf,o.pending-a,a)),S(t),a=o.pending,o.pending!==o.pending_buf_size));)I(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(t.adler=c(t.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(t.adler=c(t.adler,o.pending_buf,o.pending-a,a)),S(t),a=o.pending,o.pending===o.pending_buf_size)){u=1;break}}while(u=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,I(o,u),0!==u);o.gzhead.hcrc&&o.pending>a&&(t.adler=c(t.adler,o.pending_buf,o.pending-a,a)),0===u&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(t.adler=c(t.adler,o.pending_buf,o.pending-a,a)),S(t),a=o.pending,o.pending===o.pending_buf_size)){u=1;break}}while(u=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,I(o,u),0!==u);o.gzhead.hcrc&&o.pending>a&&(t.adler=c(t.adler,o.pending_buf,o.pending-a,a)),0===u&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&S(t),o.pending+2<=o.pending_buf_size&&(I(o,255&t.adler),I(o,t.adler>>8&255),t.adler=0,o.status=j)):o.status=j),0!==o.pending){if(S(t),0===t.avail_out)return o.last_flush=-1,l}else if(0===t.avail_in&&E(e)<=E(r)&&4!==e)return _(t,-5);if(666===o.status&&0!==t.avail_in)return _(t,-5);if(0!==t.avail_in||0!==o.lookahead||e!==s&&666!==o.status){var d=2===o.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(P(t),0===t.lookahead)){if(e===s)return 1;break}if(t.match_length=0,r=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(L(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(L(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?1:2}(o,e):3===o.strategy?function(t,e){for(var r,n,o,a,c=t.window;;){if(t.lookahead<=w){if(P(t),t.lookahead<=w&&e===s)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=b&&0<t.strstart&&(n=c[o=t.strstart-1])===c[++o]&&n===c[++o]&&n===c[++o]){for(a=t.strstart+w;n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&o<a;);t.match_length=w-(a-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=b?(r=i._tr_tally(t,1,t.match_length-b),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(L(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(L(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(L(t,!1),0===t.strm.avail_out)?1:2}(o,e):n[o.level].func(o,e);if(3!==d&&4!==d||(o.status=666),1===d||3===d)return 0===t.avail_out&&(o.last_flush=-1),l;if(2===d&&(1===e?i._tr_align(o):5!==e&&(i._tr_stored_block(o,0,0,!1),3===e)&&(k(o.head),0===o.lookahead)&&(o.strstart=0,o.block_start=0,o.insert=0),S(t),0===t.avail_out))return o.last_flush=-1,l}return 4===e&&(o.wrap<=0||(2===o.wrap?(I(o,255&t.adler),I(o,t.adler>>8&255),I(o,t.adler>>16&255),I(o,t.adler>>24&255),I(o,255&t.total_in),I(o,t.total_in>>8&255),I(o,t.total_in>>16&255),I(o,t.total_in>>24&255)):(T(o,t.adler>>>16),T(o,65535&t.adler)),S(t),0<o.wrap&&(o.wrap=-o.wrap),0===o.pending))?1:l},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==x&&69!==e&&73!==e&&91!==e&&103!==e&&e!==j&&666!==e?_(t,f):(t.state=null,e===j?_(t,-3):l):f},r.deflateSetDictionary=function(t,e){var r,n,i,c,u,s,d,h=e.length;if(!t||!t.state)return f;if(2===(c=(r=t.state).wrap)||1===c&&r.status!==x||r.lookahead)return f;for(1===c&&(t.adler=a(t.adler,e,h,0)),r.wrap=0,h>=r.w_size&&(0===c&&(k(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new o.Buf8(r.w_size),o.arraySet(d,e,h-r.w_size,r.w_size,0),e=d,h=r.w_size),d=t.avail_in,u=t.next_in,s=t.input,t.avail_in=h,t.next_in=0,t.input=e,P(r);r.lookahead>=b;){for(n=r.strstart,i=r.lookahead-(b-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+b-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=b-1,P(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=b-1,r.match_available=0,t.next_in=u,t.input=s,t.avail_in=d,r.wrap=c,l},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,o,i,a,c,u=t.state,s=t.next_in,l=t.input,f=s+(t.avail_in-5),d=t.next_out,h=t.output,p=d-(e-t.avail_out),y=d+(t.avail_out-257),g=u.dmax,m=u.wsize,v=u.whave,b=u.wnext,w=u.window,O=u.hold,x=u.bits,j=u.lencode,_=u.distcode,E=(1<<u.lenbits)-1,k=(1<<u.distbits)-1;t:do{for(x<15&&(O+=l[s++]<<x,x+=8,O+=l[s++]<<x,x+=8),r=j[O&E];;){if(O>>>=n=r>>>24,x-=n,0==(n=r>>>16&255))h[d++]=65535&r;else{if(!(16&n)){if(0==(64&n)){r=j[(65535&r)+(O&(1<<n)-1)];continue}if(32&n){u.mode=12;break t}t.msg="invalid literal/length code",u.mode=30;break t}for(o=65535&r,(n&=15)&&(x<n&&(O+=l[s++]<<x,x+=8),o+=O&(1<<n)-1,O>>>=n,x-=n),x<15&&(O+=l[s++]<<x,x+=8,O+=l[s++]<<x,x+=8),r=_[O&k];;){if(O>>>=n=r>>>24,x-=n,!(16&(n=r>>>16&255))){if(0==(64&n)){r=_[(65535&r)+(O&(1<<n)-1)];continue}t.msg="invalid distance code",u.mode=30;break t}if(i=65535&r,x<(n&=15)&&(O+=l[s++]<<x,(x+=8)<n)&&(O+=l[s++]<<x,x+=8),g<(i+=O&(1<<n)-1)){t.msg="invalid distance too far back",u.mode=30;break t}if(O>>>=n,x-=n,(n=d-p)<i){if(v<(n=i-n)&&u.sane){t.msg="invalid distance too far back",u.mode=30;break t}if(c=w,(a=0)===b){if(a+=m-n,n<o){for(o-=n;h[d++]=w[a++],--n;);a=d-i,c=h}}else if(b<n){if(a+=m+b-n,(n-=b)<o){for(o-=n;h[d++]=w[a++],--n;);if(a=0,b<o){for(o-=n=b;h[d++]=w[a++],--n;);a=d-i,c=h}}}else if(a+=b-n,n<o){for(o-=n;h[d++]=w[a++],--n;);a=d-i,c=h}for(;2<o;)h[d++]=c[a++],h[d++]=c[a++],h[d++]=c[a++],o-=3;o&&(h[d++]=c[a++],1<o)&&(h[d++]=c[a++])}else{for(a=d-i;h[d++]=h[a++],h[d++]=h[a++],h[d++]=h[a++],2<(o-=3););o&&(h[d++]=h[a++],1<o)&&(h[d++]=h[a++])}break}}break}}while(s<f&&d<y);s-=o=x>>3,O&=(1<<(x-=o<<3))-1,t.next_in=s,t.next_out=d,t.avail_in=s<f?f-s+5:5-(s-f),t.avail_out=d<y?y-d+257:257-(d-y),u.hold=O,u.bits=x}},{}],49:[function(t,e,r){"use strict";var n=t("../utils/common"),o=t("./adler32"),i=t("./crc32"),a=t("./inffast"),c=t("./inftrees"),u=0,s=-2,l=1,f=852,d=592;function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=l,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(f),e.distcode=e.distdyn=new n.Buf32(d),e.sane=1,e.back=-1,u):s}function g(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,y(t)):s}function m(t,e){var r,n;return!t||!t.state||(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e))?s:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,g(t))}function v(t,e){var r;return t?(r=new p,(t.state=r).window=null,(r=m(t,e))!==u&&(t.state=null),r):s}var b,w,O=!0;function x(t,e,r,o){var i;return null===(t=t.state).window&&(t.wsize=1<<t.wbits,t.wnext=0,t.whave=0,t.window=new n.Buf8(t.wsize)),o>=t.wsize?(n.arraySet(t.window,e,r-t.wsize,t.wsize,0),t.wnext=0,t.whave=t.wsize):(o<(i=t.wsize-t.wnext)&&(i=o),n.arraySet(t.window,e,r-o,i,t.wnext),(o-=i)?(n.arraySet(t.window,e,r-o,o,0),t.wnext=o,t.whave=t.wsize):(t.wnext+=i,t.wnext===t.wsize&&(t.wnext=0),t.whave<t.wsize&&(t.whave+=i))),0}r.inflateReset=g,r.inflateReset2=m,r.inflateResetKeep=y,r.inflateInit=function(t){return v(t,15)},r.inflateInit2=v,r.inflate=function(t,e){var r,f,d,p,y,g,m,v,j,_,E,k,S,L,I,T,M,P,A,C,R,N,D,F,B=0,G=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return s;12===(r=t.state).mode&&(r.mode=13),y=t.next_out,d=t.output,m=t.avail_out,p=t.next_in,f=t.input,g=t.avail_in,v=r.hold,j=r.bits,_=g,E=m,N=u;t:for(;;)switch(r.mode){case l:if(0===r.wrap)r.mode=13;else{for(;j<16;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(2&r.wrap&&35615===v)G[r.check=0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0),j=v=0,r.mode=2;else if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31)t.msg="incorrect header check",r.mode=30;else if(8!=(15&v))t.msg="unknown compression method",r.mode=30;else{if(j-=4,R=8+(15&(v>>>=4)),0===r.wbits)r.wbits=R;else if(R>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<R,t.adler=r.check=1,r.mode=512&v?10:12,j=v=0}}break;case 2:for(;j<16;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(r.flags=v,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0)),j=v=0,r.mode=3;case 3:for(;j<32;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}r.head&&(r.head.time=v),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,G[2]=v>>>16&255,G[3]=v>>>24&255,r.check=i(r.check,G,4,0)),j=v=0,r.mode=4;case 4:for(;j<16;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0)),j=v=0,r.mode=5;case 5:if(1024&r.flags){for(;j<16;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0)),j=v=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((k=g<(k=r.length)?g:k)&&(r.head&&(R=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,f,p,k,R)),512&r.flags&&(r.check=i(r.check,f,k,p)),g-=k,p+=k,r.length-=k),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===g)break t;for(k=0;R=f[p+k++],r.head&&R&&r.length<65536&&(r.head.name+=String.fromCharCode(R)),R&&k<g;);if(512&r.flags&&(r.check=i(r.check,f,k,p)),g-=k,p+=k,R)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===g)break t;for(k=0;R=f[p+k++],r.head&&R&&r.length<65536&&(r.head.comment+=String.fromCharCode(R)),R&&k<g;);if(512&r.flags&&(r.check=i(r.check,f,k,p)),g-=k,p+=k,R)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;j<16;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(v!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}j=v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;j<32;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}t.adler=r.check=h(v),j=v=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=g,r.hold=v,r.bits=j,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last)v>>>=7&j,j-=7&j,r.mode=27;else{for(;j<3;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}switch(r.last=1&v,--j,3&(v>>>=1)){case 0:r.mode=14;break;case 1:z=W=void 0;var z,W=r;if(O){for(b=new n.Buf32(512),w=new n.Buf32(32),z=0;z<144;)W.lens[z++]=8;for(;z<256;)W.lens[z++]=9;for(;z<280;)W.lens[z++]=7;for(;z<288;)W.lens[z++]=8;for(c(1,W.lens,0,288,b,0,W.work,{bits:9}),z=0;z<32;)W.lens[z++]=5;c(2,W.lens,0,32,w,0,W.work,{bits:5}),O=!1}if(W.lencode=b,W.lenbits=9,W.distcode=w,W.distbits=5,r.mode=20,6!==e)break;v>>>=2,j-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}v>>>=2,j-=2}break;case 14:for(v>>>=7&j,j-=7&j;j<32;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,j=v=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(k=r.length){if(0===(k=m<(k=g<k?g:k)?m:k))break t;n.arraySet(d,f,p,k,y),g-=k,p+=k,m-=k,y+=k,r.length-=k}else r.mode=12;break;case 17:for(;j<14;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(r.nlen=257+(31&v),v>>>=5,j-=5,r.ndist=1+(31&v),v>>>=5,j-=5,r.ncode=4+(15&v),v>>>=4,j-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;j<3;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}r.lens[U[r.have++]]=7&v,v>>>=3,j-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},N=c(0,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,N){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;T=(B=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,M=65535&B,!((I=B>>>24)<=j);){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(M<16)v>>>=I,j-=I,r.lens[r.have++]=M;else{if(16===M){for(F=I+2;j<F;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(v>>>=I,j-=I,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}R=r.lens[r.have-1],k=3+(3&v),v>>>=2,j-=2}else if(17===M){for(F=I+3;j<F;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}R=0,k=3+(7&(v>>>=I)),v>>>=3,j=j-I-3}else{for(F=I+7;j<F;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}R=0,k=11+(127&(v>>>=I)),v>>>=7,j=j-I-7}if(r.have+k>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;k--;)r.lens[r.have++]=R}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,D={bits:r.lenbits},N=c(1,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,N){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},N=c(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,N){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=g&&258<=m){t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=g,r.hold=v,r.bits=j,a(t,E),y=t.next_out,d=t.output,m=t.avail_out,p=t.next_in,f=t.input,g=t.avail_in,v=r.hold,j=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;T=(B=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,M=65535&B,!((I=B>>>24)<=j);){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(T&&0==(240&T)){for(P=I,A=T,C=M;T=(B=r.lencode[C+((v&(1<<P+A)-1)>>P)])>>>16&255,M=65535&B,!(P+(I=B>>>24)<=j);){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}v>>>=P,j-=P,r.back+=P}if(v>>>=I,j-=I,r.back+=I,r.length=M,0===T){r.mode=26;break}if(32&T){r.back=-1,r.mode=12;break}if(64&T){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&T,r.mode=22;case 22:if(r.extra){for(F=r.extra;j<F;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;T=(B=r.distcode[v&(1<<r.distbits)-1])>>>16&255,M=65535&B,!((I=B>>>24)<=j);){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(0==(240&T)){for(P=I,A=T,C=M;T=(B=r.distcode[C+((v&(1<<P+A)-1)>>P)])>>>16&255,M=65535&B,!(P+(I=B>>>24)<=j);){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}v>>>=P,j-=P,r.back+=P}if(v>>>=I,j-=I,r.back+=I,64&T){t.msg="invalid distance code",r.mode=30;break}r.offset=M,r.extra=15&T,r.mode=24;case 24:if(r.extra){for(F=r.extra;j<F;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,j-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===m)break t;if(r.offset>(k=E-m)){if((k=r.offset-k)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}S=k>r.wnext?(k-=r.wnext,r.wsize-k):r.wnext-k,k>r.length&&(k=r.length),L=r.window}else L=d,S=y-r.offset,k=r.length;for(m-=k=m<k?m:k,r.length-=k;d[y++]=L[S++],--k;);0===r.length&&(r.mode=21);break;case 26:if(0===m)break t;d[y++]=r.length,m--,r.mode=21;break;case 27:if(r.wrap){for(;j<32;){if(0===g)break t;g--,v|=f[p++]<<j,j+=8}if(E-=m,t.total_out+=E,r.total+=E,E&&(t.adler=r.check=(r.flags?i:o)(r.check,d,E,y-E)),E=m,(r.flags?v:h(v))!==r.check){t.msg="incorrect data check",r.mode=30;break}j=v=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;j<32;){if(0===g)break t;g--,v+=f[p++]<<j,j+=8}if(v!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}j=v=0}r.mode=29;case 29:N=1;break t;case 30:N=-3;break t;case 31:return-4;default:return s}return t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=g,r.hold=v,r.bits=j,(r.wsize||E!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&x(t,t.output,t.next_out,E-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,E-=t.avail_out,t.total_in+=_,t.total_out+=E,r.total+=E,r.wrap&&E&&(t.adler=r.check=(r.flags?i:o)(r.check,d,E,t.next_out-E)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),N=(0==_&&0===E||4===e)&&N===u?-5:N)},r.inflateEnd=function(t){var e;return t&&t.state?((e=t.state).window&&(e.window=null),t.state=null,u):s},r.inflateGetHeader=function(t,e){return t&&t.state&&0!=(2&(t=t.state).wrap)?((t.head=e).done=!1,u):s},r.inflateSetDictionary=function(t,e){var r,n=e.length;return!t||!t.state||0!==(r=t.state).wrap&&11!==r.mode?s:11===r.mode&&o(1,e,n,0)!==r.check?-3:x(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,u)},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var n=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,s,l,f,d){var h,p,y,g,m,v,b,w,O,x=d.bits,j=0,_=0,E=0,k=0,S=0,L=0,I=0,T=0,M=0,P=0,A=null,C=0,R=new n.Buf16(16),N=new n.Buf16(16),D=null,F=0;for(j=0;j<=15;j++)R[j]=0;for(_=0;_<u;_++)R[e[r+_]]++;for(S=x,k=15;1<=k&&0===R[k];k--);if(k<S&&(S=k),0===k)s[l++]=20971520,s[l++]=20971520,d.bits=1;else{for(E=1;E<k&&0===R[E];E++);for(S<E&&(S=E),j=T=1;j<=15;j++)if((T=(T<<1)-R[j])<0)return-1;if(0<T&&(0===t||1!==k))return-1;for(N[1]=0,j=1;j<15;j++)N[j+1]=N[j]+R[j];for(_=0;_<u;_++)0!==e[r+_]&&(f[N[e[r+_]]++]=_);if(v=0===t?(A=D=f,19):1===t?(A=o,C-=257,D=i,F-=257,256):(A=a,D=c,-1),j=E,m=l,I=_=P=0,y=-1,g=(M=1<<(L=S))-1,1===t&&852<M||2===t&&592<M)return 1;for(;;){for(O=f[_]<v?(w=0,f[_]):f[_]>v?(w=D[F+f[_]],A[C+f[_]]):(w=96,0),h=1<<(b=j-I),E=p=1<<L;s[m+(P>>I)+(p-=h)]=b<<24|w<<16|O|0,0!==p;);for(h=1<<j-1;P&h;)h>>=1;if(P=0!==h?(P&h-1)+h:0,_++,0==--R[j]){if(j===k)break;j=e[r+f[_]]}if(S<j&&(P&g)!==y){for(m+=E,T=1<<(L=j-(I=0===I?S:I));L+I<k&&!((T-=R[L+I])<=0);)L++,T<<=1;if(M+=1<<L,1===t&&852<M||2===t&&592<M)return 1;s[y=P&g]=S<<24|L<<16|m-l|0}}0!==P&&(s[m+P]=j-I<<24|64<<16|0),d.bits=S}return 0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var n=t("../utils/common");function o(t){for(var e=t.length;0<=--e;)t[e]=0}var i=16,a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576),f=(o(l),new Array(60)),d=(o(f),new Array(512)),h=(o(d),new Array(256)),p=(o(h),new Array(29));o(p);var y,g,m,v=new Array(30);function b(t,e,r,n,o){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=t&&t.length}function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function O(t){return t<256?d[t]:d[256+(t>>>7)]}function x(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function j(t,e,r){t.bi_valid>i-r?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>i-t.bi_valid,t.bi_valid+=r-i):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function _(t,e,r){j(t,r[2*e],r[2*e+1])}function E(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function k(t,e,r){for(var n,o=new Array(16),i=0,a=1;a<=15;a++)o[a]=i=i+r[a-1]<<1;for(n=0;n<=e;n++){var c=t[2*n+1];0!==c&&(t[2*n]=E(o[c]++,c))}}function S(t){for(var e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function L(t){8<t.bi_valid?x(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function I(t,e,r,n){var o=2*e,i=2*r;return t[o]<t[i]||t[o]===t[i]&&n[e]<=n[r]}function T(t,e,r){for(var n=t.heap[r],o=r<<1;o<=t.heap_len&&(o<t.heap_len&&I(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!I(e,n,t.heap[o],t.depth));)t.heap[r]=t.heap[o],r=o,o<<=1;t.heap[r]=n}function M(t,e,r){var n,o,i,u,s=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],o=t.pending_buf[t.l_buf+s],s++,0==n?_(t,o,e):(_(t,(i=h[o])+256+1,e),0!==(u=a[i])&&j(t,o-=p[i],u),_(t,i=O(--n),r),0!==(u=c[i])&&j(t,n-=v[i],u)),s<t.last_lit;);_(t,256,e)}function P(t,e){var r,n,o,i=e.dyn_tree,a=e.stat_desc.static_tree,c=e.stat_desc.has_stree,u=e.stat_desc.elems,s=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==i[2*r]?(t.heap[++t.heap_len]=s=r,t.depth[r]=0):i[2*r+1]=0;for(;t.heap_len<2;)i[2*(o=t.heap[++t.heap_len]=s<2?++s:0)]=1,t.depth[o]=0,t.opt_len--,c&&(t.static_len-=a[2*o+1]);for(e.max_code=s,r=t.heap_len>>1;1<=r;r--)T(t,i,r);for(o=u;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,i[2*o]=i[2*r]+i[2*n],t.depth[o]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,i[2*r+1]=i[2*n+1]=o,t.heap[1]=o++,T(t,i,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1];for(var l,f,d,h,p,y=t,g=e.dyn_tree,m=e.max_code,v=e.stat_desc.static_tree,b=e.stat_desc.has_stree,w=e.stat_desc.extra_bits,O=e.stat_desc.extra_base,x=e.stat_desc.max_length,j=0,_=0;_<=15;_++)y.bl_count[_]=0;for(g[2*y.heap[y.heap_max]+1]=0,l=y.heap_max+1;l<573;l++)x<(_=g[2*g[2*(f=y.heap[l])+1]+1]+1)&&(_=x,j++),g[2*f+1]=_,m<f||(y.bl_count[_]++,h=0,O<=f&&(h=w[f-O]),p=g[2*f],y.opt_len+=p*(_+h),b&&(y.static_len+=p*(v[2*f+1]+h)));if(0!==j){do{for(_=x-1;0===y.bl_count[_];)_--}while(y.bl_count[_]--,y.bl_count[_+1]+=2,y.bl_count[x]--,0<(j-=2));for(_=x;0!==_;_--)for(f=y.bl_count[_];0!==f;)m<(d=y.heap[--l])||(g[2*d+1]!==_&&(y.opt_len+=(_-g[2*d+1])*g[2*d],g[2*d+1]=_),f--)}k(i,s,t.bl_count)}function A(t,e,r){var n,o,i=-1,a=e[1],c=0,u=7,s=4;for(0===a&&(u=138,s=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)o=a,a=e[2*(n+1)+1],++c<u&&o===a||(c<s?t.bl_tree[2*o]+=c:0!==o?(o!==i&&t.bl_tree[2*o]++,t.bl_tree[32]++):c<=10?t.bl_tree[34]++:t.bl_tree[36]++,i=o,s=(c=0)===a?(u=138,3):o===a?(u=6,3):(u=7,4))}function C(t,e,r){var n,o,i=-1,a=e[1],c=0,u=7,s=4;for(0===a&&(u=138,s=3),n=0;n<=r;n++)if(o=a,a=e[2*(n+1)+1],!(++c<u&&o===a)){if(c<s)for(;_(t,o,t.bl_tree),0!=--c;);else 0!==o?(o!==i&&(_(t,o,t.bl_tree),c--),_(t,16,t.bl_tree),j(t,c-3,2)):c<=10?(_(t,17,t.bl_tree),j(t,c-3,3)):(_(t,18,t.bl_tree),j(t,c-11,7));i=o,s=(c=0)===a?(u=138,3):o===a?(u=6,3):(u=7,4)}}o(v);var R=!1;function N(t,e,r,o){j(t,0+(o?1:0),3),o=e,e=r,L(r=t),x(r,e),x(r,~e),n.arraySet(r.pending_buf,r.window,o,e,r.pending),r.pending+=e}r._tr_init=function(t){if(!R){for(var e,r,n,o,i=new Array(16),s=n=0;s<28;s++)for(p[s]=n,e=0;e<1<<a[s];e++)h[n++]=s;for(h[n-1]=s,s=o=0;s<16;s++)for(v[s]=o,e=0;e<1<<c[s];e++)d[o++]=s;for(o>>=7;s<30;s++)for(v[s]=o<<7,e=0;e<1<<c[s]-7;e++)d[256+o++]=s;for(r=0;r<=15;r++)i[r]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,i[8]++;for(;e<=255;)l[2*e+1]=9,e++,i[9]++;for(;e<=279;)l[2*e+1]=7,e++,i[7]++;for(;e<=287;)l[2*e+1]=8,e++,i[8]++;for(k(l,287,i),e=0;e<30;e++)f[2*e+1]=5,f[2*e]=E(e,5);y=new b(l,a,257,286,15),g=new b(f,c,0,30,15),m=new b(new Array(0),u,0,19,7),R=!0}t.l_desc=new w(t.dyn_ltree,y),t.d_desc=new w(t.dyn_dtree,g),t.bl_desc=new w(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,S(t)},r._tr_stored_block=N,r._tr_flush_block=function(t,e,r,n){var o,i,a,c=0;if(0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){for(var e=4093624447,r=0;r<=31;r++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*r])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==t.dyn_ltree[2*r])return 1;return 0}(t)),P(t,t.l_desc),P(t,t.d_desc),c=function(t){var e;for(A(t,t.dyn_ltree,t.l_desc.max_code),A(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,(i=t.static_len+3+7>>>3)<=o&&(o=i)):o=i=r+5,r+4<=o&&-1!==e)N(t,e,r,n);else if(4===t.strategy||i===o)j(t,2+(n?1:0),3),M(t,l,f);else{j(t,4+(n?1:0),3);var u=t,d=(e=t.l_desc.max_code+1,r=t.d_desc.max_code+1,c+1);for(j(u,e-257,5),j(u,r-1,5),j(u,d-4,4),a=0;a<d;a++)j(u,u.bl_tree[2*s[a]+1],3);C(u,u.dyn_ltree,e-1),C(u,u.dyn_dtree,r-1),M(t,t.dyn_ltree,t.dyn_dtree)}S(t),n&&L(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(h[r]+256+1)]++,t.dyn_dtree[2*O(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){j(t,2,3),_(t,256,l),16===t.bi_valid?(x(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){"use strict";e.exports="function"==typeof n?n:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)}).call(this,r("./node_modules/buffer/index.js").Buffer,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/timers-browserify/main.js").setImmediate)},"./node_modules/process/browser.js":function(t,e){var r,n;t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var c,u=[],s=!1,l=-1;function f(){s&&c&&(s=!1,c.length?u=c.concat(u):l=-1,u.length)&&d()}function d(){if(!s){for(var t=a(f),e=(s=!0,u.length);e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new h(t,e)),1!==u.length||s||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},"./node_modules/setimmediate/setImmediate.js":function(t,e,r){(function(t,e){!function(t,r){"use strict";var n,o,i,a,c,u,s,l;function f(t){delete o[t]}function d(t){if(i)setTimeout(d,0,t);else{var e=o[t];if(e){i=!0;try{var n=e,a=n.callback,c=n.args;switch(c.length){case 0:a();break;case 1:a(c[0]);break;case 2:a(c[0],c[1]);break;case 3:a(c[0],c[1],c[2]);break;default:a.apply(r,c)}}finally{f(t),i=!1}}}}t.setImmediate||(n=1,i=!(o={}),a=t.document,l=(l=Object.getPrototypeOf&&Object.getPrototypeOf(t))&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?c=function(t){e.nextTick((function(){d(t)}))}:function(){var e,r;if(t.postMessage&&!t.importScripts)return e=!0,r=t.onmessage,t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}()?function(){function e(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(r)&&d(+e.data.slice(r.length))}var r="setImmediate$"+Math.random()+"$";t.addEventListener?t.addEventListener("message",e,!1):t.attachEvent("onmessage",e),c=function(e){t.postMessage(r+e,"*")}}():c=t.MessageChannel?((s=new MessageChannel).port1.onmessage=function(t){d(t.data)},function(t){s.port2.postMessage(t)}):a&&"onreadystatechange"in a.createElement("script")?(u=a.documentElement,function(t){var e=a.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,u.removeChild(e),e=null},u.appendChild(e)}):function(t){setTimeout(d,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];return o[n]={callback:t,args:e},c(n),n++},l.clearImmediate=f)}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))},"./node_modules/timers-browserify/main.js":function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r("./node_modules/setimmediate/setImmediate.js"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(t,e){var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},"./src/index.ts":function(t,e,r){"use strict";r.r(e),r.d(e,"imageKit",(function(){return P})),r.d(e,"filterBridge",(function(){return yt})),r.d(e,"enhanceBridge",(function(){return It})),r.d(e,"enhanceGLBridge",(function(){return At})),r.d(e,"penBridge",(function(){return Bt})),r.d(e,"textBridge",(function(){return Qt})),r.d(e,"complexBridge",(function(){return se})),r.d(e,"magicpenBridge",(function(){return ye})),r.d(e,"maskSmearBridge",(function(){return je})),r.d(e,"waterMarkBridge",(function(){return Se})),r.d(e,"imageKitConfig",(function(){return u})),r.d(e,"setConfig",(function(){return s})),r.d(e,"createCanvas",(function(){return x})),r.d(e,"createCanvasWithExpand",(function(){return j})),r.d(e,"canvasPenHelper",(function(){return Ce})),r.d(e,"blurFilterRun",(function(){return Xe})),r.d(e,"newBlurFilterRun",(function(){return $e})),r.d(e,"expandImageWithGL",(function(){return Ze})),r.d(e,"foreExtractRunWithExpand",(function(){return Je})),r.d(e,"PosterizeColorLevel",(function(){return Kt})),r.d(e,"TextAlignType",(function(){return Ht})),r.d(e,"TextWritingType",(function(){return Yt})),r.d(e,"StrokeDirectionType",(function(){return Vt})),r.d(e,"ResizeActionType",(function(){return Xt}));var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e,r,n){return new(r=r||Promise)((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))}function c(t,e){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){var u=[a,c];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,(u=o?[2&u[0],o.value]:u)[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3]))i.label=u[1];else if(6===u[0]&&i.label<o[1])i.label=o[1],o=u;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(u)}}u=e.call(t,i)}catch(c){u=[6,c],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}Object.create,Object.create;var u={debug:!0,libmtImageKit:{wasmJsUrl:"/wasm/libmtImageKit.111.js",wasmGlobalName:"wasmMTImageKit",asmJsUrl:"/asmjs/libmtImageKit.js",asmGlobalName:"asmMTImageKit",wasmUrl:"/wasm/libmtImageKit.111.wasm.zip"},libmtImageKitDebug:{wasmJsUrl:"/wasm_debug/libmtImageKit.111.js",wasmGlobalName:"wasmMTImageKit",asmJsUrl:"/asmjs_debug/libmtImageKit.js",asmGlobalName:"asmMTImageKit",wasmUrl:"/wasm_debug/libmtImageKit.wasm.zip"}};function s(t){var e=[];t&&(t.libmtImageKit&&e.push({key:"libmtImageKit",value:t.libmtImageKit}),t.libmtImageKitDebug)&&e.push({key:"libmtImageKitDebug",value:t.libmtImageKitDebug}),e.forEach((function(t){var e,r=t.key,n=t.value;for(e in n)n[e]&&Object.prototype.hasOwnProperty.call(n,e)&&(u[r][e]=n[e])})),u.debug=null==t?void 0:t.debug}var l=r("./node_modules/jszip/dist/jszip.min.js"),f=(e=r("./node_modules/jszip-utils/lib/index.js"),r.n(e));function d(t,e,r,n){var o=this,i=(void 0===r&&(r=""),[]),u=1;return new Promise((function(s,d){f.a.getBinaryContent(e,(function(e,f){return a(o,void 0,void 0,(function(){var o,h,p,y,g,m,v=this;return c(this,(function(b){switch(b.label){case 0:if(e)return[2,d(e)];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,l.loadAsync(f)];case 2:return o=b.sent(),y=p=h=0,g=!r,o.forEach((function(e){return a(v,void 0,void 0,(function(){var a,l,f,m,v,b,w;return c(this,(function(c){switch(c.label){case 0:if(r&&0===y&&(g=0===e.indexOf(r),y++),(a=e.lastIndexOf("/"))===e.length-1)return[3,4];p++,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,null==(w=null==o?void 0:o.file(e))?void 0:w.async("arraybuffer")];case 2:if(w=c.sent(),l=new Uint8Array(w||[]),f=e.substring(0,a),t.FS_createPath("/",g?f:"".concat(r,"/").concat(f),!0,!0),t.FS_createDataFile(g?e:"".concat(r,"/").concat(e),null,l,!0,!0,!0),f=g?e:"".concat(r,"/").concat(e),n&&-1!==f.indexOf(n)){for(m="",v=0;v<l.length;v++)m+=String.fromCharCode(l[v]);(b=m.match(/<key>DefaultAlpha<\/key>\s*<string>(.*)<\/string>/))&&!isNaN(parseFloat(b[1]))&&(u=parseFloat(b[1]))}return i.push(f),++h===p&&s({temp:i,defaultAlpha:u}),[3,4];case 3:return b=c.sent(),d(b),[3,4];case 4:return[2]}}))}))})),[3,4];case 3:return m=b.sent(),d(m),[3,4];case 4:return[2]}}))}))}))}))}function h(t,e){for(var r=[],n=0,o=e.length;n<o;++n)r.push(e.charCodeAt(n));r.push(0);var i=new Uint8Array(r),a=t._malloc(i.length);return t.HEAPU8.set(i,a),a}function p(t,e){e=(new TextEncoder).encode(e);var r=((r=Array.from(e)).push(0),e=new Uint8Array(r),t._malloc(e.length*e.BYTES_PER_ELEMENT));return t.HEAPU8.set(e,r),r}function y(t,e){t._free(e)}function g(t,e,r){return new Float32Array(t.HEAPF32.buffer,e,r)}function m(t){var e=new Int32Array([110,90]),r=t._malloc(e.length*e.BYTES_PER_ELEMENT);return t.HEAP32.set(e,r/e.BYTES_PER_ELEMENT),r}function v(t,e,r){return new Int32Array(t.HEAP32.buffer,e,r)}var b=window;function w(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),new Promise((function(r,n){t&&e||n(),(n=document.createElement("script")).onload=function(){r(b[e])},n.src=t,document.body.appendChild(n)}))}function O(t,e,r){return void 0===r&&(r=""),a(this,void 0,void 0,(function(){function n(t,e){var n=u.debug,o=u.libmtImageKit,i=(n&&(o=u.libmtImageKitDebug),"".concat(r).concat(o.wasmUrl));return new Promise((function(r,n){r(function(t){var e;return void 0===t&&(t=""),a(this,void 0,void 0,(function(){var r,n,o,i,a,u;return c(this,(function(c){switch(c.label){case 0:r=[],c.label=1;case 1:return c.trys.push([1,8,,9]),[4,f.a.getBinaryContent(t)];case 2:return u=c.sent(),[4,l.loadAsync(u)];case 3:for(i in n=c.sent(),o=[],n.files)o.push(i);a=0,c.label=4;case 4:return a<o.length?0<=(u=o[a]).indexOf(".wasm")?[4,null==(e=null==n?void 0:n.file(u))?void 0:e.async("arraybuffer")]:[3,6]:[3,7];case 5:r=c.sent(),c.label=6;case 6:return a++,[3,4];case 7:return[3,9];case 8:return c.sent(),[3,9];case 9:return[2,r]}}))}))}(i).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(t){return t.instance})).then(e,(function(t){n(t)})))}))}return c(this,(function(r){switch(r.label){case 0:return[4,e({canvas:t,instantiateWasm:n})];case 1:return[2,r.sent()]}}))}))}function x(t,e,r){var n,o=document.createElement("canvas");return o.width=t,o.height=e,r&&null!=(n=o.getContext("2d"))&&n.drawImage(r,0,0,t,e),o}function j(t,e,r,n){void 0===n&&(n=1);var o,i=document.createElement("canvas"),a=(i.width=t,i.height=e,document.createElement("canvas")),c=(a.width=t*n,a.height=e*n,Math.round((n-1)*t/2));n=Math.round((n-1)*e/2);return r&&(null!=(o=i.getContext("2d"))&&o.drawImage(r,0,0,t,e),null!=(o=a.getContext("2d")))&&o.drawImage(i,c,n,t,e),a}S.prototype.getInstanceId=function(){return this._instanceId},S.prototype.destroy=function(){};var _,E,k;e=S;function S(t){this._instanceId=0,this._wasmModule=null,this._instanceId=0,this._wasmModule=t}(Y=_=_||{})[Y.FE_TouchType_Down=0]="FE_TouchType_Down",Y[Y.FE_TouchType_Up=1]="FE_TouchType_Up",Y[Y.FE_TouchType_Move=2]="FE_TouchType_Move",Y[Y.FE_TouchType_Cancel=3]="FE_TouchType_Cancel",Y[Y.FE_TouchType_OutSide=4]="FE_TouchType_OutSide",Y[Y.FE_TouchType_Point_Down=5]="FE_TouchType_Point_Down",Y[Y.FE_TouchType_Point_Up=6]="FE_TouchType_Point_Up",Y[Y.FE_TouchType_Point_Move=7]="FE_TouchType_Point_Move",(Y=E=E||{})[Y.MTIK_MODE_MAIN=0]="MTIK_MODE_MAIN",Y[Y.MTIK_MODE_STICKER=1]="MTIK_MODE_STICKER",Y[Y.MTIK_MODE_STICKER_SMEARING=2]="MTIK_MODE_STICKER_SMEARING",Y[Y.MTIK_MODE_STICKER_CUT=3]="MTIK_MODE_STICKER_CUT",Y[Y.MTIK_MODE_TEXT=4]="MTIK_MODE_TEXT",Y[Y.MTIK_MODE_TEXT_EDIT=5]="MTIK_MODE_TEXT_EDIT",Y[Y.MTIK_MODE_TEXT_SMEARING=6]="MTIK_MODE_TEXT_SMEARING",Y[Y.MTIK_MODE_BEAUTY=7]="MTIK_MODE_BEAUTY",Y[Y.MTIK_MODE_CUTOUT=8]="MTIK_MODE_CUTOUT",Y[Y.MTIK_MODE_WATERMARK=9]="MTIK_MODE_WATERMARK",Y[Y.MTIK_MODE_PUZZLE=10]="MTIK_MODE_PUZZLE",Y[Y.MTIK_MODE_MAGICPEN=11]="MTIK_MODE_MAGICPEN",Y[Y.MTIK_MODE_ELIMINATE_PEN=12]="MTIK_MODE_ELIMINATE_PEN",Y[Y.MTIK_MODE_MARK=13]="MTIK_MODE_MARK",Y[Y.MTIK_MODE_ENHANCE=14]="MTIK_MODE_ENHANCE",Y[Y.MTIK_MODE_NUM=15]="MTIK_MODE_NUM",(Y=k=k||{})[Y.CMTIKExternalOperatorTypeRotate=0]="CMTIKExternalOperatorTypeRotate",Y[Y.CMTIKExternalOperatorTypeScale=1]="CMTIKExternalOperatorTypeScale",Y[Y.CMTIKExternalOperatorTypeRotateScale=2]="CMTIKExternalOperatorTypeRotateScale",Y[Y.CMTIKExternalOperatorTypeTransform=3]="CMTIKExternalOperatorTypeTransform",Y[Y.CMTIKExternalOperatorTypeExtend=4]="CMTIKExternalOperatorTypeExtend",Y[Y.CMTIKExternalOperatorTypeExtendLeft=5]="CMTIKExternalOperatorTypeExtendLeft",Y[Y.CMTIKExternalOperatorTypeExtendRight=6]="CMTIKExternalOperatorTypeExtendRight",Y[Y.CMTIKExternalOperatorTypeExtendTop=7]="CMTIKExternalOperatorTypeExtendTop",Y[Y.CMTIKExternalOperatorTypeExtendBottom=8]="CMTIKExternalOperatorTypeExtendBottom",Y[Y.CMTIKExternalOperatorTypeDoubleRotate=9]="CMTIKExternalOperatorTypeDoubleRotate",Y[Y.CMTIKExternalOperatorTypeDoubleScale=10]="CMTIKExternalOperatorTypeDoubleScale",Y[Y.CMTIKExternalOperatorTypeDoubleTransform=11]="CMTIKExternalOperatorTypeDoubleTransform",Y[Y.CMTIKExternalOperatorTypeDoubleRST=12]="CMTIKExternalOperatorTypeDoubleRST",Y[Y.CMTIKExternalOperatorTypeNone=13]="CMTIKExternalOperatorTypeNone",Y[Y.CMTIKExternalOperatorTypeExtendNum=14]="CMTIKExternalOperatorTypeExtendNum",o(T,L=e),T.prototype.destroy=function(){return!!this._instanceId&&this._wasmModule._MTIKDisplayView_Destroy(this._instanceId)},T.prototype.getDisplayViewSize=function(){var t=this._wasmModule._MTIKDisplayView_GetViewSize(this._instanceId);return{width:(t=g(this._wasmModule,t,2))[0],height:t[1]}},T.prototype.mouseEventTrigger=function(t,e){this._wasmModule._MTIKDisplayView_TouchEvent(this._instanceId,t,e,e.length)},T.prototype.setViewLocateStatus=function(t,e,r){this._wasmModule._MTIKDisplayView_SetViewLocateStatus(this._instanceId,t,e,r)},T.prototype.getViewLocateStatus=function(){return this._wasmModule._MTIKDisplayView_GetViewLocateStatus(this._instanceId)},T.prototype.setRecoverViewLocate=function(t,e,r,n){this._wasmModule._MTIKDisplayView_SetRecoverViewLocate(this._instanceId,t,e,r,n)},T.prototype.setShowViewLocate=function(t,e,r,n,o,i,a){this._wasmModule._MTIKDisplayView_SetShowViewLocate(this._instanceId,t,e,r,n,o,i,a)},T.prototype.setMargin=function(t,e,r,n){this._wasmModule._MTIKDisplayView_SetMargin(this._instanceId,t,e,r,n)},T.prototype.setViewSelectFilter=function(t){this._wasmModule._MTIKDisplayView_SetViewSelectFilter(this._instanceId,t.getInstanceId())},T.prototype.viewDidLayout=function(t,e){this._wasmModule._MTIKDisplayView_ViewDidLayout(this._instanceId,t,e)},T.prototype.setBackgroundColor=function(t,e,r,n,o,i,a,c){this._wasmModule._MTIKDisplayView_SetBackgroundColor(this._instanceId,t,e,r,n,o,i,a,c)},T.prototype.setBackgroundColorNew=function(t,e,r,n,o,i,a,c){this._wasmModule._MTIKDisplayView_SetBackgroundColorNew(this._instanceId,t,e,r,n,o,i,a,c)},T.prototype.setMTIKManager=function(t){this._managerInstanceId=t,this._wasmModule._MTIKDisplayView_SetMTIKManager(this._instanceId,t)},T.prototype.refreshViewSelectFilter=function(){this._wasmModule._MTIKDisplayView_RefreshViewSelectFilter(this._instanceId)},T.prototype.setTouchSize=function(t){this._wasmModule._MTIKDisplayView_SetTouchSize(this._instanceId,t)},T.prototype.setShowMagnifier=function(t){this._wasmModule._MTIKDisplayView_SetShowMagnifier(this._instanceId,t)},T.prototype.setMagnifierShowPos=function(t,e,r){this._wasmModule._MTIKDisplayView_SetMagnifierShowPos(this._instanceId,t,e,r)},T.prototype.setMagnifierRadius=function(t){this._wasmModule._MTIKDisplayView_SetMagnifierRadius(this._instanceId,t)},T.prototype.setMagnifierBorderSize=function(t){this._wasmModule._MTIKDisplayView_SetMagnifierBorderSize(this._instanceId,t)},T.prototype.setMagnifierBorderColor=function(t,e,r,n){this._wasmModule._MTIKDisplayView_SetMagnifierBorderColor(this._instanceId,t,e,r,n)},T.prototype.setMagnifierAnimationTime=function(t){this._wasmModule._MTIKDisplayView_SetMagnifierAnimationTime(this._instanceId,t)},T.prototype.setViewMaxScale=function(t){this._wasmModule._MTIKDisplayView_SetViewMaxScale(this._instanceId,t)},T.prototype.setViewMinScale=function(t){this._wasmModule._MTIKDisplayView_SetViewMinScale(this._instanceId,t)},T.prototype.setPaintMask=function(t){this._wasmModule._MTIKDisplayView_SetPaintMask(this._instanceId,t)},T.prototype.setMaskColor=function(t,e,r,n){this._wasmModule._MTIKDisplayView_SetMaskColor(this._instanceId,t,e,r,n)},T.prototype.setMaskPenSize=function(t){this._wasmModule._MTIKDisplayView_SetMaskPenSize(this._instanceId,t)},T.prototype.setBgMoveLimitBorderWidth=function(t){this._wasmModule._MTIKDisplayView_SetBgMoveLimitBorderWidth(this._instanceId,t)},T.prototype.updateView=function(){this._wasmModule._MTIKManager_ProcessRender(this._managerInstanceId,!0)},T.prototype.canvasEvent=function(t){var e=this;function r(e){var r=(e=e||window.event).offsetX-t.offsetLeft;e=e.offsetY-t.offsetTop;return t.style.width&&t.style.height&&(r=t.width/parseFloat(t.style.width)*r,e=t.height/parseFloat(t.style.height)*e),{x:r,y:e}}return t.onmouseleave=function(t){t=r(t),e.mouseEventTrigger(_.FE_TouchType_Cancel,[t.x,t.y])},t.onmouseenter=function(){},t.onmousedown=function(n){n.offsetX,t.offsetLeft,n.offsetY,t.offsetTop,n=r(n),e.mouseEventTrigger(_.FE_TouchType_Down,[n.x,n.y])},t.onmousemove=function(t){t=r(t),e.mouseEventTrigger(_.FE_TouchType_Move,[t.x,t.y])},t.onmouseup=function(t){t=r(t),e.mouseEventTrigger(_.FE_TouchType_Up,[t.x,t.y])},this},T.prototype.Test=function(){this._wasmModule._MTIKDisplayView_Test([5,6],2)};var L,I=T;function T(t,e){var r=((t=L.call(this,t)||this)._managerInstanceId=0,(null==e?void 0:e.width)||0),n=(null==e?void 0:e.height)||0;return t._instanceId=t._wasmModule._MTIKDisplayView_Create(r,n),t.canvasEvent(e),t.Test(),t}function M(){this.pending=!1,this.filterWasm=null,this.zipRes=new Map,this.materiaZipRes=new Map,this.watermarkRes=new Map,this.initCallbackList=[],this.glCanvas=null,this.displayView=null}M.prototype.getDisplayView=function(){return this.displayView},M.prototype.init=function(t){var e=this;return void 0===t&&(t=""),new Promise((function(r,n){return a(e,void 0,void 0,(function(){var e,o,i,a,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:if(this.filterWasm)return[2,r(this.filterWasm)];if(this.initCallbackList.push({resolve:r,reject:n}),this.pending)return[2];this.pending=!0,a=u.debug,o=u.libmtImageKit,e=u.libmtImageKitDebug,e=(a=a?e:o).wasmJsUrl,o=a.wasmGlobalName,c.label=1;case 1:return c.trys.push([1,4,,5]),this.glCanvas=x(10,10),[4,w("".concat(t).concat(e),o)];case 2:return a=c.sent(),s=this,[4,O(this.glCanvas,a,t)];case 3:return s.filterWasm=c.sent(),this.displayView=new I(this.filterWasm,this.glCanvas),[3,5];case 4:return l=c.sent(),i=l,[3,5];case 5:for(this.pending=!1,f=0;f<this.initCallbackList.length;f++)d=this.initCallbackList[f],i?d.reject(i):d.resolve(this.filterWasm);return this.initCallbackList=[],[2]}}))}))}))},M.prototype.initWithCanvas=function(t,e){var r=this;return void 0===e&&(e=""),new Promise((function(n,o){return a(r,void 0,void 0,(function(){var r,i,a,s,l,f,d,h;return c(this,(function(c){switch(c.label){case 0:if(this.filterWasm)return[2,n(this.filterWasm)];if(this.initCallbackList.push({resolve:n,reject:o}),this.pending)return[2];this.pending=!0,s=u.debug,i=u.libmtImageKit,r=u.libmtImageKitDebug,r=(s=s?r:i).wasmJsUrl,i=s.wasmGlobalName,c.label=1;case 1:return c.trys.push([1,4,,5]),this.glCanvas=null==t?x(10,10):t,[4,w("".concat(e).concat(r),i)];case 2:return s=c.sent(),l=this,[4,O(this.glCanvas,s,e)];case 3:return l.filterWasm=c.sent(),this.displayView=new I(this.filterWasm,this.glCanvas),[3,5];case 4:return f=c.sent(),a=f,[3,5];case 5:for(this.pending=!1,d=0;d<this.initCallbackList.length;d++)h=this.initCallbackList[d],a?h.reject(a):h.resolve(this.filterWasm);return this.initCallbackList=[],[2]}}))}))}))},M.prototype.setGLSize=function(t,e){this.glCanvas&&this.displayView&&(this.glCanvas.width=t,this.glCanvas.height=e,this.displayView.viewDidLayout(t,e))},M.prototype.getGLCanvas=function(){return this.glCanvas},M.prototype.isLoaded=function(t){return this.zipRes.has(t)},M.prototype.loadZip=function(t,e,r){return a(this,void 0,void 0,(function(){var n,o;return c(this,(function(i){switch(i.label){case 0:return!e||this.isLoaded(t)?[3,2]:[4,d(this.filterWasm,e,t,r)];case 1:return o=i.sent(),n=o.defaultAlpha,o=o.temp,this.zipRes.set(t,n),[2,o];case 2:return[2,!0]}}))}))},M.prototype.setZipRes=function(t){this.zipRes.set(t,1)},M.prototype.loadMagicZip=function(t,e,r){return a(this,void 0,void 0,(function(){var n;return c(this,(function(o){switch(o.label){case 0:return n=t+"/"+r,!e||this.materiaZipRes.has(t)?[3,2]:[4,d(this.filterWasm,e,t)];case 1:o.sent(),this.materiaZipRes.set(t,n),o.label=2;case 2:return[2,n]}}))}))},M.prototype.getDefaultAlpha=function(t){return this.zipRes.get(t)||1},M.prototype.isReady=function(){return!!this.filterWasm},M.prototype.loadWaterMark=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return!t||this.isWaterMarkLoaded(t)?[3,2]:[4,function(t,e){return void 0===e&&(e=""),a(this,void 0,void 0,(function(){var r,n;return c(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,f.a.getBinaryContent(e)];case 1:return n=o.sent(),r=e.lastIndexOf("/"),r=e.substring(0,r),n=new Uint8Array(n||[]),t.FS_createPath("/",r,!0,!0),t.FS_createDataFile(e,null,n,!0,!0,!0),[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}(this.filterWasm,t)];case 1:e.sent(),this.watermarkRes.set(t,1),e.label=2;case 2:return[2,!0]}}))}))},M.prototype.isWaterMarkLoaded=function(t){return this.watermarkRes.has(t)};var P=new M,A=P,C=(R.prototype.MTIKTextInteractionStruct=function(){this.mTextRect=new B,this.mTextString="",this.mInputFlag="",this.mTextFont="system",this.mTextSize=100,this.mTextORgba=new G,this.mTextORgbaIsWork=!0,this.mStrokeConfig=new z,this.mShadowConfig=new W,this.mBgConfig=new K,this.mGlowConfig=new H,this.mEditableConfig=new U,this.mJustify=N.ALIGN_VCENTER_HCENTER},R);function R(){this.mTextIndex=-1,this.mTextEnum=-1,this.mTextRect=new B,this.mTextString="",this.mInputFlag="",this.mTextFont="",this.mTextSize=0,this.mTextORgba=new G}var N,D,F,B=function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.left=0,this.top=0,this.right=0,this.bottom=0,this.left=t,this.top=e,this.right=r,this.bottom=n},G=function(t,e,r,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),this.o=1,this.r=0,this.g=0,this.b=0,this.a=0,this.o=t,this.r=e,this.g=r,this.b=n,this.a=o},U=function(t,e,r,n,o,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===i&&(i=!0),this.editable=!0,this.horizontalEditable=!0,this.verticalEditable=!0,this.spacingEditable=!0,this.lineSpacingEditable=!0,this.pinyinEditable=!0,this.editable=t,this.horizontalEditable=e,this.verticalEditable=r,this.spacingEditable=n,this.lineSpacingEditable=o,this.pinyinEditable=i},z=function(t,e,r,n,o,i,a){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),this.enable=!1,this.editable=!1,this.r=0,this.g=0,this.b=0,this.a=0,this.size=0,this.enable=t,this.editable=e,this.r=r,this.g=n,this.b=o,this.a=i,this.size=a},W=function(t,e,r,n,o,i,a,c,u){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===c&&(c=0),void 0===u&&(u=0),this.enable=!1,this.editable=!1,this.r=0,this.g=0,this.b=0,this.a=0,this.offset_x=0,this.offset_y=0,this.blur=0,this.enable=t,this.editable=e,this.r=r,this.g=n,this.b=o,this.a=i,this.offset_x=a,this.offset_y=c,this.blur=u},K=function(t,e,r,n,o,i,a,c,u){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===c&&(c=[0,0,0,0]),void 0===u&&(u=0),this.enable=!1,this.editable=!1,this.r=0,this.g=0,this.b=0,this.a=0,this.margin=0,this.marginExtendLeft=0,this.marginExtendRight=0,this.marginExtendTop=0,this.marginExtendBottom=0,this.roundWeight=0,this.enable=t,this.editable=e,this.r=r,this.g=n,this.b=o,this.a=i,this.margin=a,this.roundWeight=u,this.marginExtendLeft=c[0],this.marginExtendRight=c[1],this.marginExtendTop=c[2],this.marginExtendBottom=c[3]},H=function(t,e,r,n,o,i,a,c){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===c&&(c=0),this.enable=!1,this.editable=!1,this.r=0,this.g=0,this.b=0,this.a=0,this.blur=0,this.strokeWidth=0,this.enable=t,this.editable=e,this.r=r,this.g=n,this.b=o,this.a=i,this.blur=a,this.strokeWidth=c},Y=((Y=N=N||{})[Y.ALIGN_LEFT=1]="ALIGN_LEFT",Y[Y.ALIGN_HCENTER=2]="ALIGN_HCENTER",Y[Y.ALIGN_RIGHT=4]="ALIGN_RIGHT",Y[Y.ALIGN_TOP=16]="ALIGN_TOP",Y[Y.ALIGN_VCENTER=32]="ALIGN_VCENTER",Y[Y.ALIGN_BOTTOM=64]="ALIGN_BOTTOM",Y[Y.ALIGN_TOP_LEFT=17]="ALIGN_TOP_LEFT",Y[Y.ALIGN_VCENTER_LEFT=33]="ALIGN_VCENTER_LEFT",Y[Y.ALIGN_BOTTOM_LEFT=65]="ALIGN_BOTTOM_LEFT",Y[Y.ALIGN_TOP_HCENTER=18]="ALIGN_TOP_HCENTER",Y[Y.ALIGN_VCENTER_HCENTER=34]="ALIGN_VCENTER_HCENTER",Y[Y.ALIGN_BOTTOM_HCENTER=66]="ALIGN_BOTTOM_HCENTER",Y[Y.ALIGN_TOP_RIGHT=20]="ALIGN_TOP_RIGHT",Y[Y.ALIGN_VCENTER_RIGHT=36]="ALIGN_VCENTER_RIGHT",Y[Y.ALIGN_BOTTOM_RIGHT=68]="ALIGN_BOTTOM_RIGHT",Y[Y.ALIGN_NUM=69]="ALIGN_NUM",(Y=D=D||{})[Y.CURRENT=0]="CURRENT",Y[Y.INDEX=1]="INDEX",Y[Y.ALL=2]="ALL",o(V,F=e),V.prototype.destroy=function(){this._instanceId=0},V.prototype.getUUId=function(){return this._wasmModule._MTIKFilter_GetUUID(this._instanceId)},V.prototype.setManager=function(t){this.mManager=t},V.prototype.getMTIKManager=function(){return this.mManager},V.prototype.getLocateStatus=function(){var t={mCenterX:.5,mCenterY:.5,mWidthRatio:.5,mWHRatio:1,mFlip:!1,mVFlip:!1,mRotate:0,mAlpha:1},e=(t.mWHRatio=this._wasmModule._MTIKFilter_GetWHRatio(this._instanceId),t.mWidthRatio=this._wasmModule._MTIKFilter_GetWidthRatio(this._instanceId),this._wasmModule._MTIKFilter_GetCenter(this._instanceId)),r=g(this._wasmModule,e,2);return t.mCenterX=r[0],t.mCenterY=r[1],y(this._wasmModule,e),t.mAlpha=this._wasmModule._MTIKFilter_GetAlpha(this._instanceId),t.mRotate=this._wasmModule._MTIKFilter_GetRotate(this._instanceId),t.mFlip=this._wasmModule._MTIKFilter_GetFlip(this._instanceId),t.mVFlip=this._wasmModule._MTIKFilter_GetVFlip(this._instanceId),t},V.prototype.setLocateStatus=function(t){t=JSON.stringify(t),t=h(this._wasmModule,t),this._wasmModule._MTIKFilter_SetLocateStatus(this._instanceId,t),this.calculatePosition(),y(this._wasmModule,t)},V.prototype.setLocateStatusWithViewOperate=function(t,e){t=JSON.stringify(t),t=h(this._wasmModule,t),this._wasmModule._MTIKFilter_SetLocateStatusWithViewOperate(this._instanceId,t,e),y(this._wasmModule,t),this.calculatePosition()},V.prototype.getResultImage=function(t,e,r){var n=m(this._wasmModule);e={width:(t=(this._wasmModule._MTIKFilter_GetResultBitmapLimit(this._instanceId,t,n,e,r),v(this._wasmModule,n,2)))[0],height:t[1]};return this._wasmModule._free(n),e},V.prototype.calculatePosition=function(){this._wasmModule._MTIKFilter_SetNeedRefreshPosition(this._instanceId,!0),this._wasmModule._MTIKFilter_SetNeedRefreshTexPosition(this._instanceId,!0),this._wasmModule._MTIKFilter_CalculatePosition(this._instanceId)},V.prototype.getLayerBorder=function(){var t=this._wasmModule._MTIKFilter_GetLayerBorder(this._instanceId),e=g(this._wasmModule,t,8);e=this.calculateRect(e);return y(this._wasmModule,t),e},V.prototype.calculateRect=function(t){var e=new B(0,0,0,0),r=Math.max(Math.max(t[0],t[2]),Math.max(t[4],t[6])),n=Math.min(Math.min(t[0],t[2]),Math.min(t[4],t[6])),o=Math.max(Math.max(t[1],t[3]),Math.max(t[5],t[7]));t=Math.min(Math.min(t[1],t[3]),Math.min(t[5],t[7]));return e.left=n,e.top=t,e.right=r,e.bottom=o,e},V.prototype.setShow=function(t){this._wasmModule._MTIKFilter_SetShow(this._instanceId,t)},V);function V(t){return F.call(this,t)||this}o($,X=Y),$.prototype.destroy=function(){this._instanceId&&X.prototype.destroy.call(this)},$.prototype.loadConfigPlist=function(t){t=p(this._wasmModule,t),this._wasmModule._MTIKRealtimeFilter_LoadConfigPlist(this._instanceId,t),y(this._wasmModule,t)},$.prototype.setAlpha=function(t){this._wasmModule._MTIKRealtimeFilter_SetAlpha(this._instanceId,t)};var X,q=$;function $(t){return(t=X.call(this,t)||this)._instanceId=t._wasmModule._MTIKRealtimeFilter_Create(),t}J.prototype.setNativeImage=function(t,e,r,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),i=(i=void 0!==i&&i)?t:null!==t&&t.byteLength?new Uint8Array(t):new Uint8Array(e*r*4),(null===t||e<0||r<0)&&(null!==this.nativeImagePtr&&(this._wasmModule._free(this.nativeImagePtr),this.nativeImagePtr=null),this.nativeImageWidth=0,this.nativeImageHeight=0),e===this.nativeImageWidth&&r===this.nativeImageHeight||(null!==this.nativeImagePtr&&(this._wasmModule._free(this.nativeImagePtr),this.nativeImagePtr=null),this.nativeImageWidth=0,this.nativeImageHeight=0),null===this.nativeImagePtr&&(this.nativeImageSize=e*r*4,this.nativeImageWidth=e,this.nativeImageHeight=r,this.nativeImagePtr=this._wasmModule._malloc(this.nativeImageSize)),this.nativeImagestride=n,this.nativeImageOrientation=o,this._wasmModule.HEAPU8.set(i,this.nativeImagePtr)},J.prototype.setImagePtr=function(t,e,r){this.nativeImagePtr=t,this.nativeImageWidth=e,this.nativeImageHeight=r,this.nativeImageSize=e*r*4},J.prototype.getNativeImage=function(){return this.nativeImagePtr},J.prototype.getImageWidth=function(){return this.nativeImageWidth},J.prototype.getImageHeight=function(){return this.nativeImageHeight},J.prototype.getImageData=function(t){return void 0===t&&(t=this.nativeImageSize),this._wasmModule.HEAPU8.subarray(this.nativeImagePtr,this.nativeImagePtr+t)},J.prototype.destroy=function(){null!==this.nativeImagePtr&&(this._wasmModule._free(this.nativeImagePtr),this.nativeImagePtr=null,this.nativeImageWidth=0,this.nativeImageHeight=0)};var Z=J;function J(t){this.nativeImagePtr=null,this.nativeImageWidth=0,this.nativeImageHeight=0,this.nativeImageSize=0,this.nativeImageOrientation=0,this.nativeImagestride=0,this._wasmModule=null,this._wasmModule=t}o(et,Q=e),et.prototype.destroy=function(){return!!this._instanceId&&this._wasmModule._MTIKManager_Uninitialized(this._instanceId)},et.prototype.setSrcImage=function(t,e,r){return this._wasmModule._MTIKManager_SetSrcBitmap(this._instanceId,t,e,r)},et.prototype.getImageSize=function(){var t=this._wasmModule._MTIKManager_GetImageSize(this._instanceId);return{width:(t=g(this._wasmModule,t,2))[0],height:t[1]}},et.prototype.setDisplayView=function(t,e){this._displayInstance=t.getInstanceId(),t.setMTIKManager(this._instanceId),this.mDisplayView=t,this._wasmModule._MTIKManager_SetDisplayView(this._instanceId,this._displayInstance),this._wasmModule._MTIKDisplayView_SetMTIKManager(this._displayInstance,this._instanceId),e&&this._wasmModule._MTIKManager_ProcessRender(this._instanceId,!0)},et.prototype.getDisplayView=function(){return this.mDisplayView},et.prototype.addFilter=function(t){return t.setManager(this),this._wasmModule._MTIKManager_AddFilter(this._instanceId,t.getInstanceId(),999999999,!0)},et.prototype.removeFilter=function(t,e){return this._wasmModule._MTIKManager_RemoveFilter(this._instanceId,t.getInstanceId(),e)},et.prototype.removeAllFilter=function(){return this._wasmModule._MTIKManager_RemoveAllFilter(this._instanceId,-1)},et.prototype.processRender=function(t){this._wasmModule._MTIKManager_ProcessRender(this._instanceId,t)},et.prototype.setResPath=function(t){t=p(this._wasmModule,t);var e=this._wasmModule._MTIKManager_SetResPath(t);return y(this._wasmModule,t),e},et.prototype.initMTAiEngine=function(t){return this._wasmModule._MTIKManager_InitMTAiEngine(this._instanceId)},et.prototype.setSelectFilter=function(t){this._wasmModule._MTIKManager_SetSelectFilter(this._instanceId,t.getInstanceId())},et.prototype.setFEMode=function(t){this._wasmModule._MTIKManager_SetFEMode(this._instanceId,t)},et.prototype.getFEMode=function(){return this._wasmModule._MTIKManager_GetFEMode(this._instanceId)},et.prototype.getImageData=function(t,e,r){this._wasmModule._MTIKManager_GetResultBitmap(this._instanceId,t,e,r)},et.prototype.setArPublicParamsPlist=function(t){t=p(this._wasmModule,t);var e=this._wasmModule._MTIKManager_SetArPublicParamsPlist(this._instanceId,t);return y(this._wasmModule,t),e},et.prototype.setARDirectory=function(t,e){var r=p(this._wasmModule,t);this._wasmModule._MTIKAR_SetDirectory(r,e),y(this._wasmModule,t)},et.prototype.registerARFont=function(t,e){t=p(this._wasmModule,t),e=p(this._wasmModule,e),this._wasmModule._MTIKAR_RegisterFont(t,e),y(this._wasmModule,t),y(this._wasmModule,e)},et.prototype.setViewCapability=function(t,e){this._wasmModule._MTIKManager_SetViewCapability(this._instanceId,t,e)},et.prototype.getViewCapability=function(t){return this._wasmModule._MTIKManager_GetCapability(this._instanceId,t)},et.prototype.resetViewCapability=function(){return this._wasmModule._MTIKManager_ResetViewCapability(this._instanceId)},et.prototype.setCapability=function(t,e){this._wasmModule._MTIKManager_SetCapability(this._instanceId,t,e)},et.prototype.getCapability=function(t,e){return this._wasmModule._MTIKManager_GetCapability(this._instanceId,t)},et.prototype.resetCapability=function(){return this._wasmModule._MTIKManager_ResetCapability(this._instanceId)},et.prototype.setABCreateStatus=function(t,e){this._wasmModule._MTIKManager_SetABCreateStatus(this._instanceId,t,e)},et.prototype.setMinSrcLength=function(t){this._wasmModule._MTIKManager_SetMinSrcLength(this._instanceId,t)},et.prototype.setGLPushType=function(t){this._wasmModule._MTIKManager_SetGLPushType(this._instanceId,t)},et.prototype.getIsInReadering=function(t){this._wasmModule._MTIKManager_GetIsInReadering(this._instanceId,t)},et.prototype.interruptRendering=function(t){this._wasmModule._MTIKManager_InterruptRendering(this._instanceId,t)},et.prototype.setPreBufferWithState=function(t,e){this._wasmModule._MTIKManager_SetPreBufferWithState(this._instanceId,t,e)},et.prototype.enableRenderToView=function(t,e){this._wasmModule._MTIKManager_EnableRenderToView(this._instanceId,t,e)},et.prototype.destroyAllFilter=function(){this._wasmModule._MTIKManager_DestroyAllFilter(this._instanceId)},et.prototype._initialize=function(){var t=!1;return this._instanceId=this._wasmModule._MTIKManager_Create(),!!this._wasmModule._MTIKManager_Initialize(this._instanceId)||t};var Q,tt=et;function et(t){return(t=Q.call(this,t)||this)._displayInstance=0,t.mDisplayView=null,t._initialize(),t}function rt(){}rt.prototype.canDo=function(){return!!this.fromCanvas},rt.prototype.getManager=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.getWasm()];case 1:return t=e.sent(),this.manager||(this.isRelease=!0,this.manager=new tt(t),this.manager.setFEMode(E.MTIK_MODE_MAIN)),[2,this.manager]}}))}))},rt.prototype.setManager=function(t,e){var r;return this.isRelease&&(this.manager&&null!=(r=this.manager)&&r.destroy(),this.manager=null),this.isRelease=e,this.manager||(this.manager=t),this},rt.prototype.baseDestroy=function(){var t;null!=(t=this.srcImageData)&&t.destroy(),this.isRelease&&this.manager&&null!=(t=this.manager)&&t.destroy(),this.manager=null,this.fromCanvas=null},rt.prototype.getWasm=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return this.filterWasm?[3,2]:(t=this,[4,A.init()]);case 1:t.filterWasm=e.sent(),e.label=2;case 2:return[2,this.filterWasm]}}))}))},rt.prototype.from=function(t){return this.fromCanvas=t,this},rt.prototype.getGLResult=function(){return a(this,void 0,void 0,(function(){var t,e,r,n,o,i,a;return c(this,(function(c){switch(c.label){case 0:return this.fromCanvas?(e=this.fromCanvas,t=e.width,e=e.height,[4,this.getWasm()]):[3,3];case 1:return r=c.sent(),[4,this.getManager()];case 2:return o=c.sent(),(n=new Z(r)).setNativeImage(null,t,e),o.getImageData(n.getNativeImage(),t,e),o=x(t,e),i=o.getContext("2d"),(a=null==i?void 0:i.createImageData(t,e))&&(a.data.set(n.getImageData()),null!=i)&&i.putImageData(a,0,0),n.destroy(),[2,{canvas:o,width:t,height:e}];case 3:return[2,{canvas:null,width:0,height:0}]}}))}))},rt.prototype.initMTIKManagerForm=function(t){return this.setSrcImage(t),this},rt.prototype.setSrcImage=function(t,e,r){var n,o;return void 0===e&&(e=!0),void 0===r&&(r=!0),a(this,void 0,void 0,(function(){var i,a,u,s;return c(this,(function(c){switch(c.label){case 0:return[4,this.getManager()];case 1:return c.sent(),this.fromCanvas==t?[3,3]:(this.fromCanvas=t,[4,this.getWasm()]);case 2:i=c.sent(),u=this.fromCanvas,a=u.width,u=u.height,s=null==(s=this.fromCanvas.getContext("2d"))?void 0:s.getImageData(0,0,a,u),null!=(n=this.srcImageData)&&n.destroy(),this.srcImageData=new Z(i),null!=(n=this.srcImageData)&&n.setNativeImage(null==s?void 0:s.data,a,u),null!=(n=this.manager)&&n.setSrcImage(null==(n=this.srcImageData)?void 0:n.getNativeImage(),a,u),c.label=3;case 3:return e&&null!=(n=this.manager)&&n.removeAllFilter(),null!=(o=this.manager)&&o.setResPath(""),r?[4,this.setMTIKDisplayView()]:[3,5];case 4:c.sent(),c.label=5;case 5:return[2]}}))}))},rt.prototype.setSrcImageWithData=function(t,e,r,n,o){var i;return void 0===n&&(n=!0),void 0===o&&(o=!0),a(this,void 0,void 0,(function(){var a;return c(this,(function(c){switch(c.label){case 0:return[4,this.getManager()];case 1:return c.sent(),[4,this.getWasm()];case 2:return a=c.sent(),null!=(i=this.srcImageData)&&i.destroy(),this.srcImageData=new Z(a),null!=(i=this.srcImageData)&&i.setNativeImage(t,e,r,0,0,!0),null!=(i=this.manager)&&i.setSrcImage(null==(i=this.srcImageData)?void 0:i.getNativeImage(),e,r),n&&null!=(i=this.manager)&&i.removeAllFilter(),null!=(i=this.manager)&&i.setResPath(""),o?[4,this.setMTIKDisplayView()]:[3,4];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))},rt.prototype.processRender=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.getManager()];case 1:return t.sent().processRender(!0),[2]}}))}))},rt.prototype.setMTIKDisplayView=function(){return a(this,void 0,void 0,(function(){var t,e,r;return c(this,(function(n){switch(n.label){case 0:return e=this.fromCanvas,t=e.width,e=e.height,r=A.getDisplayView(),A.setGLSize(t,e),r?[4,this.getManager()]:[3,2];case 1:n.sent().setDisplayView(r,!0),n.label=2;case 2:return[2]}}))}))},o(ct,nt=it=rt);var nt,ot,it,at=ct;function ct(){return null!==nt&&nt.apply(this,arguments)||this}function ut(){return null!==ot&&ot.apply(this,arguments)||this}o(ut,ot=it);var st,lt="filter/configuration_filter.plist";function ft(){return null!==st&&st.apply(this,arguments)||this}o(ft,st=it=ut),ft.prototype.destroy=function(){this.baseDestroy(),this._realtimeFilter&&this._realtimeFilter.destroy(),this._realtimeFilter=null},ft.prototype.getDefaultAlpha=function(t,e,r){return void 0===r&&(r=lt),a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,this.getWasm()];case 1:return n.sent(),[4,A.loadZip(t,e,r)];case 2:return n.sent(),[2,A.getDefaultAlpha(t)]}}))}))},ft.prototype.apply=function(t,e,r,n){return void 0===n&&(n=lt),a(this,void 0,void 0,(function(){var o,i,a,u,s,l,f;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return o=c.sent(),a=this.fromCanvas,i=a.width,a=a.height,u=null==(u=this.fromCanvas.getContext("2d"))?void 0:u.getImageData(0,0,i,a),[4,A.loadZip(t,e)];case 2:return c.sent(),(s=new Z(o)).setNativeImage(null==u?void 0:u.data,i,a),(l=new q(o)).loadConfigPlist("".concat(t,"/").concat(n)),l.setAlpha(r),[4,this.getManager()];case 3:return(f=c.sent()).removeAllFilter(),f.setSrcImage(s.getNativeImage(),i,a),f.setResPath(""),f.addFilter(l),f.processRender(!0),[4,this.getGLResult()];case 4:return f=c.sent(),s.destroy(),l.destroy(),this.destroy(),[2,f]}}))}))},ft.prototype.initRealtimeFilter=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),a(this,void 0,void 0,(function(){var r;return c(this,(function(n){switch(n.label){case 0:return null!=this._realtimeFilter?[3,3]:[4,this.getWasm()];case 1:return r=n.sent(),this._realtimeFilter=new q(r),[4,this.getManager()];case 2:return r=n.sent(),e&&r.removeAllFilter(),t&&r.addFilter(this._realtimeFilter),[3,4];case 3:n.label=4;case 4:return[2]}}))}))},ft.prototype.loadConfigPath=function(t,e,r,n,o){var i;return void 0===n&&(n=!0),void 0===o&&(o=lt),a(this,void 0,void 0,(function(){return c(this,(function(a){switch(a.label){case 0:return[4,A.loadZip(t,e)];case 1:return a.sent(),null!=(i=this._realtimeFilter)&&i.loadConfigPlist("".concat(t,"/").concat(o)),null!=(i=this._realtimeFilter)&&i.setAlpha(r),n?[4,this.getManager()]:[3,4];case 2:return a.sent().processRender(!0),[4,this.getGLResult()];case 3:return[2,a.sent()];case 4:return[2,null]}}))}))},ft.prototype.setAlpha=function(t){var e;return a(this,void 0,void 0,(function(){return c(this,(function(r){return null!=(e=this._realtimeFilter)&&e.setAlpha(t),[2]}))}))},ft.prototype.setShow=function(t){var e;return a(this,void 0,void 0,(function(){return c(this,(function(r){return null!=(e=this._realtimeFilter)&&e.setShow(t),[2]}))}))};var dt,ht,pt,yt=new ft,gt=((Oe=dt=dt||{})[Oe.MTIKEnhanceColorRed=0]="MTIKEnhanceColorRed",Oe[Oe.MTIKEnhanceColorOrange=1]="MTIKEnhanceColorOrange",Oe[Oe.MTIKEnhanceColorYellow=2]="MTIKEnhanceColorYellow",Oe[Oe.MTIKEnhanceColorGreen=3]="MTIKEnhanceColorGreen",Oe[Oe.MTIKEnhanceColorBlue=4]="MTIKEnhanceColorBlue",Oe[Oe.MTIKEnhanceColorPurple=5]="MTIKEnhanceColorPurple",Oe[Oe.MTIKEnhanceColorMagenata=6]="MTIKEnhanceColorMagenata",Oe[Oe.MTIKEnhanceColorAll=7]="MTIKEnhanceColorAll",Oe[Oe.MTIKEnhanceColorMax=8]="MTIKEnhanceColorMax",o(mt,ht=Y),mt.prototype.destroy=function(){this._instanceId&&ht.prototype.destroy.call(this)},mt.prototype.materialPathInit=function(t){return this._wasmModule._MTIKEnhanceFilter_MaterialPathInit(this._instanceId)},mt.prototype.setParams=function(t,e){void 0===e&&(e=!1);var r=new Array;if(t.light)r.push(3),r.push((t.light.brightness||0)/100),r.push((t.light.contrast||0)/100),r.push((t.light.highlight||0)/100),r.push((t.light.shadow||0)/100),r.push((t.light.fade||0)/100);else for(var n=0;n<6;++n)r.push(0);if(t.color)r.push((t.color.saturation||0)/100),r.push((t.color.temperature||0)/100),r.push((t.color.tinge||0)/100);else for(n=0;n<3;++n)r.push(0);if(t.particulars)r.push((t.particulars.sharpen||0)/100),r.push((t.particulars.particle||0)/100),r.push((t.particulars.dispersion||0)/2e3),r.push((t.particulars.vignette||0)/100*.7),r.push((t.particulars.structure||0)/100*.65);else for(n=0;n<5;++n)r.push(0);if(t.color)r.push(t.color.posterize_light_color||0),r.push(t.color.posterize_shadow_color||0),r.push((t.color.posterize_light||0)/100),r.push((t.color.posterize_shadow||0)/100);else for(n=0;n<4;++n)r.push(0);for(var o=0;o<dt.MTIKEnhanceColorMax;o++)t.color&&t.color.hsl_hue&&t.color.hsl_hue[o]?r.push(t.color.hsl_hue[o]):r.push(0),t.color&&t.color.hsl_saturation&&t.color.hsl_saturation[o]?r.push(t.color.hsl_saturation[o]):r.push(0),t.color&&t.color.hsl_light&&t.color.hsl_light[o]?r.push(t.color.hsl_light[o]):r.push(0);if(t.light?r.push((t.light.smartLightAlpha||0)/100):r.push(0),t.isHslSelectAll?r.push(t.isHslSelectAll||0):r.push(0),t.pickColors){var i=Math.floor(t.pickColors.length/4);for(n=0;n<i;n++){o=4*n;var a=3*n;r.push(t.pickColors[o]||0),r.push(t.pickColors[o+1]||0),r.push(t.pickColors[o+2]||0),r.push(t.pickColors[o+3]||0),r.push(t.hslPickColors[a]||0),r.push(t.hslPickColors[1+a]||0),r.push(t.hslPickColors[2+a]||0),r.push(t.pickFuzziness&&t.pickFuzziness[n]||0)}}this._wasmModule._MTIKEnhanceFilter_SetParams(this._instanceId,r,r.length,e)},mt.prototype.setHSLMode=function(t){this._wasmModule._MTIKEnhanceFilter_SetHSLMode(this._instanceId,t)},mt.prototype.startSmear=function(t){this._wasmModule._MTIKEnhanceFilter_StartSmear(this._instanceId,t)},mt.prototype.stopSmear=function(){this._wasmModule._MTIKEnhanceFilter_StopSmear(this._instanceId)},mt.prototype.hasDoEffect=function(){this._wasmModule.MTIKEnhanceFilter_HasDoEffect(this._instanceId)},mt.prototype.getHSLFromColors=function(t,e){return this._wasmModule._MTIKEnhanceFilter_GetHSLFromColors(this._instanceId,t,e)},mt.prototype.getColorFromHSL=function(t,e){return this._wasmModule._MTIKEnhanceFilter_GetColorFromHSL(this._instanceId,t,e)},mt);function mt(t){return(t=ht.call(this,t)||this)._instanceId=t._wasmModule._MTIKEnhanceFilter_Create(),t}(Oe=pt=pt||{})[Oe.MTIKViewCapabilityTypeNotifyLongPress=0]="MTIKViewCapabilityTypeNotifyLongPress",Oe[Oe.MTIKViewCapabilityTypeBgMove=1]="MTIKViewCapabilityTypeBgMove",Oe[Oe.MTIKViewCapabilityTypeBgSignedMove=2]="MTIKViewCapabilityTypeBgSignedMove",Oe[Oe.MTIKViewCapabilityTypeBgDoubleMove=3]="MTIKViewCapabilityTypeBgDoubleMove",Oe[Oe.MTIKViewCapabilityTypeBgBound=4]="MTIKViewCapabilityTypeBgBound",Oe[Oe.MTIKViewCapabilityTypeEdgeLimit=5]="MTIKViewCapabilityTypeEdgeLimit",Oe[Oe.MTIKViewCapabilityTypeScaleLimit=6]="MTIKViewCapabilityTypeScaleLimit",Oe[Oe.MTIKViewCapabilityTypeChangeSelect=7]="MTIKViewCapabilityTypeChangeSelect",Oe[Oe.MTIKViewCapabilityTypeHoverSelectFirst=8]="MTIKViewCapabilityTypeHoverSelectFirst",Oe[Oe.MTIKViewCapabilityTypeDoubleClickRestore=9]="MTIKViewCapabilityTypeDoubleClickRestore",Oe[Oe.MTIKViewCapabilityTypeAlign=10]="MTIKViewCapabilityTypeAlign",Oe[Oe.MTIKViewCapabilityTypeSelectFlash=11]="MTIKViewCapabilityTypeSelectFlash",Oe[Oe.MTIKViewCapabilityTypeMargin=12]="MTIKViewCapabilityTypeMargin",Oe[Oe.MTIKViewCapabilityTypeBgMoveLimitInSideView=13]="MTIKViewCapabilityTypeBgMoveLimitInSideView",Oe[Oe.MTIKViewCapabilityTypeUnselect=14]="MTIKViewCapabilityTypeUnselect",Oe[Oe.MTIKViewCapabilityTypeNum=15]="MTIKViewCapabilityTypeNum",o(wt,vt=e),wt.prototype.destroy=function(){this.releaseNativeImage(),this._instanceId&&vt.prototype.destroy.call(this)},wt.prototype.releaseNativeImage=function(){},wt.prototype.progress=function(t,e,r,n,o){return this._wasmModule._MTIKStaticExtractColorProcess_ExtractColor(t,e,r,n,o)};var vt,bt=wt;function wt(t){return vt.call(this,t)||this}o(kt,Ot=e),kt.prototype.destroy=function(){this._instanceId&&Ot.prototype.destroy.call(this)},kt.prototype.onMTIKRenderEvent=function(t,e){this._wasmModule.onMTIKRenderEvent=t.bind(e)},kt.prototype.clickUpOnView=function(t,e){this._wasmModule.clickUpOnView=t.bind(e)},kt.prototype.onLiquifyFilterEvent=function(t,e){this._wasmModule.onLiquifyFilterEvent=t.bind(e)};var Ot,xt,jt,_t,Et=kt;function kt(t){return Ot.call(this,t)||this}function St(){return null!==_t&&_t.apply(this,arguments)||this}(Oe=xt=xt||{})[Oe.MTIKOutTouchTypeDown=0]="MTIKOutTouchTypeDown",Oe[Oe.MTIKOutTouchTypeMove=1]="MTIKOutTouchTypeMove",Oe[Oe.MTIKOutTouchTypeUp=2]="MTIKOutTouchTypeUp",Oe[Oe.MTIKOutTouchTypeNum=3]="MTIKOutTouchTypeNum",(Oe=jt=jt||{})[Oe.MTIKLiquifyEventRefreshView=0]="MTIKLiquifyEventRefreshView",Oe[Oe.MTIKLiquifyEventUndoSmear=1]="MTIKLiquifyEventUndoSmear",Oe[Oe.MTIKLiquifyEventRedoSmear=2]="MTIKLiquifyEventRedoSmear",Oe[Oe.MTIKLiquifyEventTouchDown=3]="MTIKLiquifyEventTouchDown",Oe[Oe.MTIKLiquifyEventTouchUp=4]="MTIKLiquifyEventTouchUp",Oe[Oe.MTIKLiquifyEventTypeNum=5]="MTIKLiquifyEventTypeNum",o(St,_t=it),St.prototype.destroy=function(){var t;this.baseDestroy(),null!=(t=this.localFilter)&&t.destroy(),this.localFilter=null},St.prototype.doEnhance=function(t,e){return a(this,void 0,void 0,(function(){var r,n,o,i,a,u;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return r=c.sent(),o=this.fromCanvas,n=o.width,o=o.height,i=null==(i=this.fromCanvas.getContext("2d"))?void 0:i.getImageData(0,0,n,o),[4,A.loadZip(t,e)];case 2:return c.sent(),(a=new Z(r)).setNativeImage(null==i?void 0:i.data,n,o),this.localFilter=new gt(r),this.localFilter.materialPathInit(""),[4,this.getManager()];case 3:return(u=c.sent()).removeAllFilter(),u.setSrcImage(a.getNativeImage(),n,o),u.setResPath(""),u.addFilter(this.localFilter),u.processRender(!0),a.destroy(),[2]}}))}))},St.prototype.setHSLMode=function(t){if(this.localFilter)return this.localFilter.setHSLMode(t),this},St.prototype.startSmear=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.localFilter?[4,this.getManager()]:[2];case 1:return e.sent().setViewCapability(pt.MTIKViewCapabilityTypeNotifyLongPress,!0),this.localFilter.startSmear(t._instanceId),[2]}}))}))},St.prototype.stopSmear=function(t){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return this.localFilter?[4,this.getManager()]:[2];case 1:return t=e.sent(),this.localFilter.stopSmear(),t.processRender(!0),this.localFilter=null,[2]}}))}))},St.prototype.setParams=function(t){this.localFilter&&this.localFilter.setParams(t,!0)};var Lt,It=new St;function Tt(){var t=Lt.call(this)||this;return t.localFilter=null,t._listener=null,t}o(Tt,Lt=at),Tt.prototype.destroy=function(){var t;this.baseDestroy(),null!=(t=this.localFilter)&&t.destroy(),this.localFilter=null},Tt.prototype.create=function(t,e,r){var n;return void 0===r&&(r={}),a(this,void 0,void 0,(function(){var o,i,a,u,s,l,f;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return o=c.sent(),a=this.fromCanvas,i=a.width,a=a.height,u=null==(u=this.fromCanvas.getContext("2d"))?void 0:u.getImageData(0,0,i,a),[4,A.loadZip(t,e)];case 2:return c.sent(),(s=new Z(o)).setNativeImage(null==u?void 0:u.data,i,a),this.localFilter=new gt(o),this.localFilter.materialPathInit(""),this.localFilter.setParams(r),[4,this.getManager()];case 3:return l=c.sent(),f=A.getDisplayView(),A.setGLSize(i,a),l.removeAllFilter(),l.setSrcImage(s.getNativeImage(),i,a),l.setResPath(""),f&&(l.setDisplayView(f,!0),f.setPaintMask(!0)),l.addFilter(this.localFilter),l.processRender(!0),l.setViewCapability(pt.MTIKViewCapabilityTypeBgMove,!1),s.destroy(),this._listener||(this._listener=new Et(o),null!=(n=this._listener)&&n.onMTIKRenderEvent(this.onMTIKRenderEvent,this),null!=(n=this._listener)&&n.onLiquifyFilterEvent(this.onLiquifyFilterEvent,this)),[2,A.getGLCanvas()]}}))}))},Tt.prototype.onMTIKRenderEvent=function(t){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.getManager()];case 1:return null!=(t=e.sent())&&t.processRender(!0),[2]}}))}))},Tt.prototype.onLiquifyFilterEvent=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(t){return jt.MTIKLiquifyEventTouchUp,[2]}))}))},Tt.prototype.setParams=function(t){this.localFilter&&this.localFilter.setParams(t,!0)},Tt.prototype.setHSLMode=function(t){if(this.localFilter)return this.localFilter.setHSLMode(t),this},Tt.prototype.startSmear=function(t){return a(this,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:return this.localFilter?[4,this.getManager()]:[2];case 1:return(e=r.sent()).setViewCapability(pt.MTIKViewCapabilityTypeNotifyLongPress,!0),(e=e.getDisplayView())&&e.setViewSelectFilter(t),this.localFilter.startSmear(t._instanceId),[2]}}))}))},Tt.prototype.stopSmear=function(t){return a(this,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:return this.localFilter?[4,this.getManager()]:[2];case 1:return e=r.sent(),this.localFilter.stopSmear(),e.removeFilter(t,!1),e.processRender(!0),[2]}}))}))},Tt.prototype.setMaskPenSize=function(t){return a(this,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:return[4,this.getManager()];case 1:return(e=(e=r.sent()).getDisplayView())&&e.setMaskPenSize(t),[2]}}))}))},Tt.prototype.setMaskColor=function(t){return a(this,void 0,void 0,(function(){var e,r,n,o,i;return c(this,(function(a){switch(a.label){case 0:return[4,this.getManager()];case 1:return(e=(e=a.sent()).getDisplayView())&&(r=t[0],n=t[1],o=t[2],i=t[3],e.setMaskColor(r,n,o,i)),[2]}}))}))},Tt.prototype.imageDetec=function(){return a(this,void 0,void 0,(function(){var t,e,r,n,o,i;return c(this,(function(a){switch(a.label){case 0:return[4,this.getWasm()];case 1:return i=a.sent(),t=[],e=new bt(i),n=this.fromCanvas,r=n.width,n=n.height,o=null==(o=this.fromCanvas.getContext("2d"))?void 0:o.getImageData(0,0,r,n),(i=new Z(i)).setNativeImage(null==o?void 0:o.data,r,n),[2,e.progress(i.getNativeImage(),r,n,t,t.length)]}}))}))},Tt.prototype.getHSLFromColors=function(t,e){if(this.localFilter)return this.localFilter.getHSLFromColors(t,e)},Tt.prototype.getColorFromHSL=function(t,e){if(this.localFilter)return this.localFilter.getColorFromHSL(t,e)};var Mt,Pt,At=new Tt,Ct=(o(Rt,Mt=e),Rt.prototype.destroy=function(){this.releaseNativeImage(),this._instanceId&&Mt.prototype.destroy.call(this)},Rt.prototype.releaseNativeImage=function(){},Rt.prototype.progress=function(t,e,r,n,o,i){return this._wasmModule._MTIKEliminatePen_Process(t,e,r,n,o,i)},Rt.prototype.blurMask=function(t,e,r,n,o){return this._wasmModule._MTIKMaskBlur_Progress(t,e,r,n,o)},Rt);function Rt(t){return Mt.call(this,t)||this}function Nt(){return null!==Pt&&Pt.apply(this,arguments)||this}o(Nt,Pt=it),Nt.prototype.destroy=function(){this.baseDestroy()},Nt.prototype.eliminate=function(t){return a(this,void 0,void 0,(function(){var e,r,n,o,i,a,u,s,l,f;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return e=c.sent(),a=t.getContext("2d"),r=t.width,n=t.height,a=null==a?void 0:a.getImageData(0,0,r,n),null!=(o=new Z(e))&&o.setNativeImage(null==a?void 0:a.data,r,n),a=this.fromCanvas,i=a.width,a=a.height,s=null==(s=this.fromCanvas.getContext("2d"))?void 0:s.getImageData(0,0,i,a),(u=new Z(e)).setNativeImage(null==s?void 0:s.data,i,a),[4,this.getManager()];case 2:return s=c.sent(),(l=new Ct(e)).progress(u.getNativeImage(),i,a,o.getNativeImage(),r,n),s.setSrcImage(u.getNativeImage(),i,a),s.processRender(!0),[4,this.getGLResult()];case 3:return f=c.sent(),o.destroy(),u.destroy(),l.destroy(),this.destroy(),[2,f]}}))}))},Nt.prototype.maskBlur=function(t,e){return void 0===e&&(e=40),a(this,void 0,void 0,(function(){var r,n,o,i,a,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return r=c.sent(),a=t.getContext("2d"),o=t.width,i=t.height,a=null==a?void 0:a.getImageData(0,0,o,i),null!=(n=new Z(r))&&n.setNativeImage(null==a?void 0:a.data,o,i),a=this.fromCanvas,o=a.width,i=a.height,a=Math.max(o,i),u=Math.min(o,i,400),e=e*a/u,a=this.fromCanvas.getContext("2d"),u=null==a?void 0:a.getImageData(0,0,o,i),(a=new Z(r)).setNativeImage(null==u?void 0:u.data,o,i),[4,this.getManager()];case 2:return u=c.sent(),(s=new Ct(r)).blurMask(a.getNativeImage(),o,i,e,n.getNativeImage()),u.setSrcImage(a.getNativeImage(),o,i),u.processRender(!0),l=x(o,i),d=l.getContext("2d"),(f=null==d?void 0:d.createImageData(o,i))&&(f.data.set(n.getImageData()),null!=d)&&d.putImageData(f,0,0),[4,this.getGLResult()];case 3:return d=c.sent(),n.destroy(),a.destroy(),s.destroy(),this.destroy(),[2,{result:d,canvasMask:l}]}}))}))},Nt.prototype.newMaskBlur=function(t,e){return void 0===e&&(e=40),a(this,void 0,void 0,(function(){var r,n,o,i,a,u,s,l;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return a=c.sent(),o=t.getContext("2d"),l=t.width,n=t.height,o=null==o?void 0:o.getImageData(0,0,l,n),null!=(r=new Z(a))&&r.setNativeImage(null==o?void 0:o.data,l,n),o=this.fromCanvas,l=o.width,n=o.height,o=Math.max(l,n),i=Math.min(l,n,400),e=e*o/i,o=this.fromCanvas.getContext("2d"),i=null==o?void 0:o.getImageData(0,0,l,n),(o=new Z(a)).setNativeImage(null==i?void 0:i.data,l,n),(i=new Ct(a)).blurMask(o.getNativeImage(),l,n,e,r.getNativeImage()),a=x(l,n),u=a.getContext("2d"),(s=null==u?void 0:u.createImageData(l,n))&&(s.data.set(r.getImageData()),null!=u)&&u.putImageData(s,0,0),u=x(l,n),s=u.getContext("2d"),(l=null==s?void 0:s.createImageData(l,n))&&(l.data.set(o.getImageData()),null!=s)&&s.putImageData(l,0,0),r.destroy(),o.destroy(),i.destroy(),this.destroy(),[2,{resutlCanvas:u,canvasMask:a}]}}))}))};var Dt,Ft,Bt=new Nt,Gt=(o(Ut,Dt=Y),Ut.prototype.destroy=function(){this._instanceId&&Dt.prototype.destroy.call(this)},Ut.prototype.checkConfigPlist=function(t){t=p(this._wasmModule,t);var e=this._wasmModule._MTIKTextFilter_CheckConfigPlist(this._instanceId,t);return y(this._wasmModule,t),e},Ut.prototype.loadConfigPlist=function(t){t=p(this._wasmModule,t),this._wasmModule._MTIKTextFilter_Only4ParsePlist(this._instanceId,t),y(this._wasmModule,t)},Ut.prototype.setMaterialPath=function(t,e){t=p(this._wasmModule,t),e=p(this._wasmModule,e),this._wasmModule._MTIKTextFilter_SetMaterialPath(this._instanceId,t,e),y(this._wasmModule,t),y(this._wasmModule,e)},Ut.prototype.getBinaryImage=function(t,e,r,n){return void 0===n&&(n=-1),null!=(t=null==t?new Z(this._wasmModule):t)&&t.destroy(),null!=t&&t.setNativeImage(null,e,r),this.getResultImage(null==t?void 0:t.getNativeImage(),n,!1)},Ut.prototype.getKnockoutBinaryImage=function(t,e,r,n){return void 0===n&&(n=-1),null!=(t=null==t?new Z(this._wasmModule):t)&&t.destroy(),null!=t&&t.setNativeImage(null,e,r),this.getResultBitmapLimit4Knockout(null==t?void 0:t.getNativeImage(),n)},Ut.prototype.testButton=function(){for(var t=this.getLayerTextsCount(),e=0;e<t;++e)this.getTextActualSize(D.INDEX,e)},Ut.prototype.getSelectedTextIndex=function(){return this._wasmModule._MTIKTextFilter_GetCurSelectTextIndex(this._instanceId)},Ut.prototype.getTextInteractionStruts=function(t,e){var r=new Array;switch(t){case D.CURRENT:e=this.getSelectedTextIndex(),t=D.INDEX;break;case D.INDEX:if(e<0||e>this.getLayerTextsCount())return r;break;case D.ALL:for(var n=this.getLayerTextsCount(),o=0;o<n;o++){var i=this.getTextInteractionStruts(D.INDEX,o);if(null==i||1!=i.length){r=[];break}r=r.concat(i)}return r}var a=new C;return a.mTextIndex=e,a.mTextEnum=this.getTextEnum(t,e),a.mTextRect=this.getTextRectOnLayer(t,e),a.mTextString=this.getTextString(t,e),a.mInputFlag=this.getInputFlag(e),a.mTextFont=this.getTextFont(t,e),a.mTextSize=this.getTextSize(t,e),a.mTextORgba=this.getTextORGBA(t,e),a.mTextORgbaIsWork=this.getTextORGBAIsWork(t,e),a.mStrokeConfig=this.getTextStroke(t,e),a.mShadowConfig=this.getTextShadow(t,e),a.mBgConfig=this.getTextBackground(t,e),a.mGlowConfig=this.getTextGlow(t,e),a.mBold=this.getTextBold(t,e),a.mItalic=this.getTextItalic(t,e),a.mUnderline=this.getTextUnderline(t,e),a.mStrikeThrough=this.getTextStrikeThrough(t,e),a.mJustify=this.getTextJustify(t,e),a.mHorizontal=this.getTextHorizontal(t,e),a.mLeftToRight=this.getTextLeftToRight(t,e),a.mWrap=this.getTextWrap(t,e),a.mShrink=this.getTextShrink(t,e),a.mSpacing=this.getTextSpacing(t,e),a.mLineSpacing=this.getTextLineSpacing(t,e),a.mEditableConfig=this.getTextEditableConfig(e),r.push(a),r},Ut.prototype.getTextEnum=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextEnum(this._instanceId,t)},Ut.prototype.getInputFlag=function(t){return(t=this._wasmModule._MTIKTextFilter_GetInputFlag(this._instanceId,t))||""},Ut.prototype.getLayerTextsCount=function(){return this._wasmModule._MTIKTextFilter_GetLayerTextsCount(this._instanceId)},Ut.prototype.getTextBorderOnTex=function(t){t=this._wasmModule._MTIKTextFilter_GetTextBorder(this._instanceId,t);var e=g(this._wasmModule,t,8);e=this.calculateRect(e);return y(this._wasmModule,t),e},Ut.prototype.getTextRectOnLayer=function(t,e){return t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_GetTextRect(this._instanceId,t),t=g(this._wasmModule,e,4),t=new B(t[0],t[1],t[2],t[3]),y(this._wasmModule,e),t},Ut.prototype.getDefaultSizeRect=function(){var t=this._wasmModule._MTIKTextFilter_DefaultSizeRect(this._instanceId),e=g(this._wasmModule,t,4);e=new B(e[0],e[1],e[2],e[3]);return y(this._wasmModule,t),e},Ut.prototype.getFinalSizeRect=function(){var t=this._wasmModule._MTIKTextFilter_FinalRect(this._instanceId),e=g(this._wasmModule,t,4);e=new B(e[0],e[1],e[2],e[3]);return y(this._wasmModule,t),e},Ut.prototype.getTextString=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextString(this._instanceId,t)},Ut.prototype.setTextString=function(t,e,r,n){return void 0===n&&(n=!1),t=this.convertIndexDependType(t,e,!1),e=p(this._wasmModule,r),t=this._wasmModule._MTIKTextFilter_SetTextString(this._instanceId,t,e,r.length),y(this._wasmModule,e),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp),t},Ut.prototype.getTextFont=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextFont(this._instanceId,t)},Ut.prototype.setTextFont=function(t,e,r,n){return void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),e=p(this._wasmModule,r),r=this._wasmModule._MTIKTextFilter_SetTextFont(this._instanceId,t,e),y(this._wasmModule,e),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp),r},Ut.prototype.getRenderMode=function(t){return this._wasmModule._MTIKTextFilter_GetRenderMode(this._instanceId,t)},Ut.prototype.getTextSize=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextSize(this._instanceId,t)},Ut.prototype.getTextActualSize=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextActualSize(this._instanceId,t)},Ut.prototype.setTextSize=function(t,e,r,n,o){return void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1),t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_SetTextSize(this._instanceId,t,r),o&&this.renderAndCallback(n),e},Ut.prototype.getTextORGBA=function(t,e){return t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_GetTextORGBA(this._instanceId,t),t=g(this._wasmModule,e,5),t=new G(t[0],t[1],t[2],t[3],t[4]),y(this._wasmModule,e),t},Ut.prototype.setTextORGBA=function(t,e,r,n,o){return void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1),t=this.convertIndexDependType(t,e,!1),e=this._wasmModule._MTIKTextFilter_SetTextORGBA(this._instanceId,t,r.o,r.r,r.g,r.b,r.a),o&&this.renderAndCallback(n),e},Ut.prototype.getTextEditableConfig=function(t){t=this._wasmModule._MTIKTextFilter_GetTextEditableConfig(this._instanceId,t);var e=v(this._wasmModule,t,4);e=new U(Boolean(e[0]),Boolean(e[1]),Boolean(e[2]),Boolean(e[3]),Boolean(e[4]),Boolean(e[5]));return y(this._wasmModule,t),e},Ut.prototype.getTextORGBAIsWork=function(t,e){return this.convertIndexDependType(t,e),!0},Ut.prototype.setTextORGBAIsWork=function(t,e,r,n){return void 0===n&&(n=!1),this.convertIndexDependType(t,e),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp),!0},Ut.prototype.getTextStroke=function(t,e){t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_IsTextStrokeEditable(this._instanceId,t);var r=this._wasmModule._MTIKTextFilter_IsEnableTextStroke(this._instanceId,t),n=this._wasmModule._MTIKTextFilter_GetTextStrokeRGBA(this._instanceId,t);n=g(this._wasmModule,n,4),t=this._wasmModule._MTIKTextFilter_GetTextStrokeSize(this._instanceId,t),r=new z(r,e,n[0],n[1],n[2],n[3],t);return y(this._wasmModule,n),r},Ut.prototype.setTextStroke=function(t,e,r,n,o){void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1),n=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextStroke(this._instanceId,n,r.enable),this._wasmModule._MTIKTextFilter_SetTextStrokeRGBA(this._instanceId,n,r.r,r.g,r.b,r.a),this._wasmModule._MTIKTextFilter_SetTextStrokeSize(this._instanceId,n,r.size),o&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextBackground=function(t,e){t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_IsEnableTextBackgroundColor(this._instanceId,t);var r=this._wasmModule._MTIKTextFilter_IsTextBackgroundEditable(this._instanceId,t),n=this._wasmModule._MTIKTextFilter_GetTextBackgroundColorRGBA(this._instanceId,t),o=g(this._wasmModule,n,4),i=this._wasmModule._MTIKTextFilter_GetTextBackgroundColorMargin(this._instanceId,t),a=this._wasmModule._MTIKTextFilter_GetTextBackgroundColorMarginExtend(this._instanceId,t),c=g(this._wasmModule,a,4);t=this._wasmModule._MTIKTextFilter_GetTextBackgroundColorRoundWeight(this._instanceId,t),e=new K(e,r,o[0],o[1],o[2],o[3],i,[c[0],c[1],c[2],c[3]],t);return y(this._wasmModule,n),y(this._wasmModule,a),e},Ut.prototype.setTextBackground=function(t,e,r,n,o){void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1);var i,a;t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextBackgroundColor(this._instanceId,t,r.enable),this._wasmModule._MTIKTextFilter_SetTextBackgroundColorRGBA(this._instanceId,t,r.r,r.g,r.b,r.a),this._wasmModule._MTIKTextFilter_SetTextBackgroundColorMargin(this._instanceId,t,r.margin),e=this._wasmModule,i=[r.marginExtendLeft,r.marginExtendRight,r.marginExtendTop,r.marginExtendBottom],i=new Float32Array(i),a=e._malloc(i.length*i.BYTES_PER_ELEMENT),e.HEAPF32.set(i,a>>2),e=a;this._wasmModule._MTIKTextFilter_SetTextBackgroundColorMarginExtends(this._instanceId,t,e),this._wasmModule._free(e),this._wasmModule._MTIKTextFilter_SetTextBackgroundColorRoundWeight(this._instanceId,t,r.roundWeight),o&&this.renderAndCallback(n)},Ut.prototype.getTextShadow=function(t,e){t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_IsEnableTextShadow(this._instanceId,t);var r=this._wasmModule._MTIKTextFilter_IsTextShadowEditable(this._instanceId,t),n=this._wasmModule._MTIKTextFilter_GetTextShadowRGBA(this._instanceId,t),o=this._wasmModule._MTIKTextFilter_GetTextShadowOffset(this._instanceId,t),i=g(this._wasmModule,n,4),a=g(this._wasmModule,o,2);t=this._wasmModule._MTIKTextFilter_GetTextShadowBlur(this._instanceId,t),e=new W(e,r,i[0],i[1],i[2],i[3],a[0],a[1],t);return y(this._wasmModule,n),y(this._wasmModule,o),e},Ut.prototype.setTextShadow=function(t,e,r,n,o){void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextShadow(this._instanceId,t,r.enable),this._wasmModule._MTIKTextFilter_SetTextShadowRGBA(this._instanceId,t,r.r,r.g,r.b,r.a),this._wasmModule._MTIKTextFilter_SetTextShadowOffset(this._instanceId,t,r.offset_x,r.offset_y),this._wasmModule._MTIKTextFilter_SetTextShadowBlur(this._instanceId,t,r.blur),o&&this.renderAndCallback(n)},Ut.prototype.getTextGlow=function(t,e){t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_IsEnableTextGlow(this._instanceId,t);var r=this._wasmModule._MTIKTextFilter_IsTextGlowEditable(this._instanceId,t),n=this._wasmModule._MTIKTextFilter_GetTextGlowRGBA(this._instanceId,t),o=g(this._wasmModule,n,4),i=this._wasmModule._MTIKTextFilter_GetTextGlowBlur(this._instanceId,t);t=this._wasmModule._MTIKTextFilter_GetTextGlowStrokeWidth(this._instanceId,t),e=new H(e,r,o[0],o[1],o[2],o[3],i,t);return y(this._wasmModule,n),e},Ut.prototype.setTextGlow=function(t,e,r,n,o){void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextGlow(this._instanceId,t,r.enable),this._wasmModule._MTIKTextFilter_SetTextGlowRGBA(this._instanceId,t,r.r,r.g,r.b,r.a),this._wasmModule._MTIKTextFilter_SetTextGlowBlur(this._instanceId,t,r.blur),this._wasmModule._MTIKTextFilter_SetTextGlowStrokeWidth(this._instanceId,t,r.strokeWidth),o&&this.renderAndCallback(n)},Ut.prototype.getTextBold=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_IsEnableTextBold(this._instanceId,t)},Ut.prototype.setTextBold=function(t,e,r,n){void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextBold(this._instanceId,t,r),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextItalic=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_IsEnableTextItalic(this._instanceId,t)},Ut.prototype.setTextItalic=function(t,e,r,n){void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextItalic(this._instanceId,t,r),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextUnderline=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_IsEnableTextUnderline(this._instanceId,t)},Ut.prototype.setTextUnderline=function(t,e,r,n){void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextUnderline(this._instanceId,t,r),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextStrikeThrough=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_IsEnableTextStrikeThrough(this._instanceId,t)},Ut.prototype.setTextStrikeThrough=function(t,e,r,n,o){void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextStrikeThrough(this._instanceId,t,r),o&&this.renderAndCallback(n)},Ut.prototype.getTextJustify=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextJustify(this._instanceId,t)},Ut.prototype.setTextJustify=function(t,e,r,n){void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextJustify(this._instanceId,t,r),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextHorizontal=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextHorizontal(this._instanceId,t)},Ut.prototype.setTextHorizontal=function(t,e,r,n){return void 0===n&&(n=!1),n=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextHorizontal(this._instanceId,n,r)},Ut.prototype.getTextLeftToRight=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextLeftToRight(this._instanceId,t)},Ut.prototype.setTextLeftToRight=function(t,e,r,n){void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextLeftToRight(this._instanceId,t,r),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextWrap=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextWrap(this._instanceId,t)},Ut.prototype.setTextWrap=function(t,e,r,n){void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextWrap(this._instanceId,t,r),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextShrink=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextShrink(this._instanceId,t)},Ut.prototype.setTextShrink=function(t,e,r,n){void 0===n&&(n=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextShrink(this._instanceId,t,!1),n&&this.renderAndCallback(xt.MTIKOutTouchTypeUp)},Ut.prototype.getTextSpacing=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextSpacing(this._instanceId,t)},Ut.prototype.setTextSpacing=function(t,e,r,n,o){void 0===n&&(n=xt.MTIKOutTouchTypeUp),void 0===o&&(o=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextSpacing(this._instanceId,t,r),o&&this.renderAndCallback(n)},Ut.prototype.getTextLineSpacing=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextLineSpacing(this._instanceId,t)},Ut.prototype.setTextLineSpacing=function(t,e,r,n,o,i){void 0===o&&(o=xt.MTIKOutTouchTypeUp),void 0===i&&(i=!1),t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_SetTextLineSpacing(this._instanceId,t,r),i&&this.renderAndCallback(o)},Ut.prototype.getTextPinyin=function(t,e){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetTextPinyin(this._instanceId,t)},Ut.prototype.getClickPadding=function(){var t=this._wasmModule._MTIKTextFilter_GetClickPadding(this._instanceId);t=g(this._wasmModule,t,4);return{left:Math.abs(t[0]),top:Math.abs(t[1]),right:Math.abs(t[2]),bottom:Math.abs(t[3])}},Ut.prototype.renderAndCallback=function(t){},Ut.prototype.convertIndexDependType=function(t,e,r){switch(void 0===r&&(r=!1),t){case D.ALL:e=-1,r&&(e=0);break;case D.INDEX:(e<0||e>=this.getLayerTextsCount())&&(e=0);break;case D.CURRENT:e=this.getSelectedTextIndex()}return e},Ut.prototype.findEnumWithValue=function(t){N.ALIGN_LEFT;for(var e=0;e<N.ALIGN_NUM.valueOf()&&t!==N.ALIGN_NUM.valueOf();e++);return t},Ut.prototype.getFallbackFontLibraries=function(t,e){return t=this.convertIndexDependType(t,e),e=this._wasmModule._MTIKTextFilter_GetFallbackFontLibraries(this._instanceId,t),JSON.parse(e)},Ut.prototype.setFallbackFontLibraries=function(t,e,r){return t=this.convertIndexDependType(t,e),e=p(this._wasmModule,JSON.stringify(r)),r=this._wasmModule._MTIKTextFilter_SetFallbackFontLibraries(this._instanceId,t,e),y(this._wasmModule,e),r},Ut.prototype.getMissGlyphText=function(t,e,r){return t=this.convertIndexDependType(t,e),this._wasmModule._MTIKTextFilter_GetMissGlyphText(this._instanceId,t)},Ut.prototype.setDefaultFallbackFontLibraries=function(t){t=p(this._wasmModule,JSON.stringify(t));var e=this._wasmModule._MTIKTextFilter_SetDefaultFallbackFontLibraries(this._instanceId,t);return y(this._wasmModule,t),e},Ut.prototype.getResultBitmapLimit4Knockout=function(t,e){var r=m(this._wasmModule);e={width:(t=(this._wasmModule._MTIKTextFilter_GetResultBitmapLimit4Knockout(this._instanceId,t,r,e),v(this._wasmModule,r,2)))[0],height:t[1]};return this._wasmModule._free(r),e},Ut.prototype.setKnockoutBg=function(t){t=p(this._wasmModule,t);var e=this._wasmModule._MTIKTextFilter_SetKnockoutBg(this._instanceId,t);return y(this._wasmModule,t),e},Ut.prototype.clearKnockoutBg=function(t){this._wasmModule._MTIKTextFilter_ClearKnockoutBg(this._instanceId)},Ut.prototype.getKnockoutBgPath=function(){return this._wasmModule._MTIKTextFilter_GetKnockoutBgPath(this._instanceId)},Ut);function Ut(t,e){return void 0===e&&(e=0),(t=Dt.call(this,t)||this)._instanceId=0==e?t._wasmModule._MTIKTextFilter_Create():e,t}function zt(t){return{r:+(t=(t=(t=(t=null!=t&&t.includes("#")?$t()(t):t).replace(/rgba\(/g,"")).replace(/\)/g,"")).split(","))[0],g:+t[1],b:+t[2],a:100*+t[3]}}function Wt(t,e){var r=0;if(t===Yt.HORIZONTAL_TB)switch(e){case Ht.LEFT:r=1;break;case Ht.CENTER:r=2;break;case Ht.RIGHT:r=4;case Ht.JUSTIFY:}else if(t===Yt.VERTICAL_RL)switch(e){case Ht.LEFT:r=16;break;case Ht.CENTER:r=32;break;case Ht.RIGHT:r=64;case Ht.JUSTIFY:}return r}(Oe=Ft=Ft||{})[Oe.kDirectoryBuiltIn=0]="kDirectoryBuiltIn",Oe[Oe.kDirectoryFont=1]="kDirectoryFont",Oe[Oe.kDirectoryEffectCoreBundle=2]="kDirectoryEffectCoreBundle",Oe[Oe.kDirectoryCache=3]="kDirectoryCache";e=r("./node_modules/hex-to-rgba/build/index.js");var Kt,Ht,Yt,Vt,Xt,qt,$t=r.n(e);function Zt(){var t=null!==qt&&qt.apply(this,arguments)||this;return t._arResID="",t._arResPath="/assets/text/ar_res.zip",t._arPublicParamsPath="https://titan-h5.meitu.com/xiuxiu-pc/image-editor/text/hbpArPublicParams.zip",t._alibabaFontPathZip="https://titan-h5.meitu.com/xiuxiu-pc/image-editor/text/fonts/Alibaba-PuHuiTi-Regular.zip",t._systemFontPath="AlibabaPuHuiTi-Regular/Alibaba-PuHuiTi-Regular.ttf",t._alibabaFont="AlibabaPuHuiTi-Regular",t._fontZipCache={},t._fontLibraries=["AlibabaPuHuiTi-Regular"],t}(Oe=Kt=Kt||{})[Oe.Level0=0]="Level0",Oe[Oe.Level1=1]="Level1",Oe[Oe.Level2=2]="Level2",Oe[Oe.Level3=3]="Level3",Oe[Oe.Level4=4]="Level4",Oe[Oe.Level5=5]="Level5",(r=Ht=Ht||{}).LEFT="left",r.CENTER="center",r.RIGHT="right",r.JUSTIFY="justify",(e=Yt=Yt||{}).HORIZONTAL_TB="horizontal-tb",e.VERTICAL_LR="vertical-lr",e.VERTICAL_RL="vertical-rl",(Oe=Vt=Vt||{})[Oe.WITHOUT=0]="WITHOUT",Oe[Oe.CENTER=1]="CENTER",(r=Xt=Xt||{}).RESIZE="resize",r.SCALE="scale",o(Zt,qt=it),Zt.prototype.apply=function(t,e,r,n,o,i,u){var s;return void 0===n&&(n=""),void 0===o&&(o="/assets/text/ar_res.zip"),void 0===u&&(u=!1),a(this,void 0,void 0,(function(){var a,l,f,d,h,p,y,g;return c(this,(function(c){switch(c.label){case 0:return this._arResID=n,this._arResPath=o,this._fontLibraries=null!=i&&i.length?i:this._fontLibraries,[4,this.getWasm()];case 1:return a=c.sent(),f=this.fromCanvas,l=f.width,f=f.height,d=null==(d=this.fromCanvas.getContext("2d"))?void 0:d.getImageData(0,0,l,f),[4,A.loadZip(t,e)];case 2:return c.sent(),(h=new Z(a)).setNativeImage(null==d?void 0:d.data,l,f),p=new Gt(a),null!=(s=this._textFilter)&&s.destroy(),(this._textFilter=p).setMaterialPath(r,""),[4,A.loadZip(this._arResID,this._arResPath)];case 3:return c.sent(),[4,this.getManager()];case 4:return(y=c.sent()).removeAllFilter(),y.setARDirectory(this._arResID,Ft.kDirectoryBuiltIn),y.setSrcImage(h.getNativeImage(),l,f),u&&(g=A.getDisplayView(),A.setGLSize(l,f),g)&&y.setDisplayView(g,!0),y.setResPath(""),y.addFilter(p),y.setSelectFilter(p),[4,this.registerFont()];case 5:return c.sent(),p.setDefaultFallbackFontLibraries(this._fontLibraries),y.processRender(!0),h.destroy(),[2,!0]}}))}))},Zt.prototype.initTextFilter=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){return this._textFilter=t,[2]}))}))},Zt.prototype.registerFont=function(t,e){return a(this,void 0,void 0,(function(){var r,n,o,i,a;return c(this,(function(c){switch(c.label){case 0:return[4,this.getManager()];case 1:return r=c.sent(),n=t||this._alibabaFont,o=e||this._alibabaFontPathZip,[4,A.loadZip(n,o)];case 2:return o=c.sent(),i=this._systemFontPath,"[object Array]"===Object.prototype.toString.call(o)&&o.length?(a=o.filter((function(t){return 2===t.split("/").length&&t.split("/")[0]===n||1===t.split("/").length})),this._fontZipCache[n]=a[0],i=a[0]):this._fontZipCache[n]&&(i=this._fontZipCache[n]),null!=r&&r.registerARFont(n,i),u.debug&&(null!=r&&r.registerARFont("AlibabaPuHuiTi-Regular",i),null!=r&&r.registerARFont("CooperBT-Black",i),null!=r&&r.registerARFont("AaLFT",i),null!=r&&r.registerARFont("NewYork",i),this._textFilter.setDefaultFallbackFontLibraries(["AlibabaPuHuiTi-Regular"])),[2]}}))}))},Zt.prototype.registerArPublic=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.getManager()];case 1:return t=e.sent(),[4,A.loadZip("hbpArPublicParams",this._arPublicParamsPath)];case 2:return e.sent(),t.setArPublicParamsPlist("hbpArPublicParams.plist"),[2]}}))}))},Zt.prototype.createFileFormCanvas=function(t,e){return a(this,void 0,void 0,(function(){var r,n,o,i,a,u;return c(this,(function(c){switch(c.label){case 0:if(A.isLoaded(e))return[3,2];for(i=t.toDataURL("image/png",1),r=atob(i.split(",")[1]),n=new Uint8Array(r.length),o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return[4,this.getWasm()];case 1:if(i=c.sent(),(a=e.lastIndexOf("/"))!==e.length-1)try{u=e.substring(0,a),i.FS_createPath("/",u,!0,!0),i.FS_createDataFile(e,null,n,!0,!0,!0)}catch(c){}A.setZipRes(e),c.label=2;case 2:return[2]}}))}))},Zt.prototype.setKnockoutBg=function(t,e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return this.fromCanvas?[4,this.getManager()]:[3,3];case 1:return t=r.sent(),[4,this.createFileFormCanvas(this.fromCanvas,e)];case 2:r.sent(),this._textFilter.setKnockoutBg(e),t.processRender(!0),r.label=3;case 3:return[2]}}))}))},Zt.prototype.getResultImage=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=-1),a(this,void 0,void 0,(function(){var r,n,o,i,a,u,s;return c(this,(function(c){switch(c.label){case 0:return t&&this.fromCanvas?(n=this.fromCanvas,r=n.width,n=n.height,[4,this.getWasm()]):[3,2];case 1:return o=c.sent(),o=new Z(o),i=this._textFilter.getBinaryImage(o,r,n,e),a=x(i.width,i.height),(u=a.getContext("2d"))&&((s=u.createImageData(i.width,i.height)).data.set(o.getImageData(i.width*i.height*4)),u.putImageData(s,0,0)),o.destroy(),[2,{canvas:a,width:r,height:n}];case 2:return[2,{width:0,height:0}]}}))}))},Zt.prototype.getKnockoutResultImage=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=-1),a(this,void 0,void 0,(function(){var r,n,o,i,a,u,s;return c(this,(function(c){switch(c.label){case 0:return t&&this.fromCanvas?(n=this.fromCanvas,r=n.width,n=n.height,[4,this.getWasm()]):[3,2];case 1:return o=c.sent(),o=new Z(o),i=this._textFilter.getKnockoutBinaryImage(o,r,n,e),a=x(i.width,i.height),(u=a.getContext("2d"))&&((s=u.createImageData(i.width,i.height)).data.set(o.getImageData(i.width*i.height*4)),u.putImageData(s,0,0)),o.destroy(),[2,{canvas:a,width:r,height:n}];case 2:return[2,{width:0,height:0}]}}))}))},Zt.prototype.testButton=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.getManager()];case 1:return t=e.sent(),this._textFilter.testButton(),t.processRender(!0),[2]}}))}))},Zt.prototype.destroy=function(){this._textFilter&&this._textFilter.destroy()},Zt.prototype.changeAttr=function(t,e,r){switch(t){case 1:this._textFilter.setTextBold(D.INDEX,r||0,e);break;case 2:this._textFilter.setTextUnderline(D.INDEX,r||0,e);break;case 3:this._textFilter.setTextItalic(D.INDEX,r||0,e);break;case 4:this._textFilter.setTextStrikeThrough(D.INDEX,r||0,e);break;case 5:this._textFilter.setTextWrap(D.INDEX,r||0,e);break;case 6:this._textFilter.setTextShrink(D.INDEX,r||0,e);break;case 7:this._textFilter.setTextHorizontal(D.INDEX,r||0,e)}},Zt.prototype.changeText=function(t,e){this._textFilter.setTextString(D.INDEX,e||0,t)},Zt.prototype.setTextColor=function(t,e,r,n,o){this._textFilter.setTextORGBA(D.INDEX,o||0,new G(1,t/255,e/255,r/255,n/100)),this._textFilter.setTextORGBAIsWork(D.INDEX,o||0,!0)},Zt.prototype.setTextStroke=function(t,e,r,n,o,i){this._textFilter.setTextStroke(D.INDEX,i||0,new z(!0,!0,t/255,e/255,r/255,n/100,o))},Zt.prototype.setTextBackground=function(t,e,r,n,o){return a(this,void 0,void 0,(function(){return c(this,(function(i){return this._textFilter.setTextBackground(D.INDEX,o||0,new K(!0,!0,t/255,e/255,r/255,n/100)),[2]}))}))},Zt.prototype.setTextShadow=function(t,e,r,n,o,i,a,c){this._textFilter.setTextShadow(D.INDEX,c||0,new W(!0,!0,t/255,e/255,r/255,n/100,i,a,o))},Zt.prototype.setTextGlow=function(t,e,r,n,o,i,a){this._textFilter.setTextGlow(D.INDEX,a||0,new H(!0,!0,t/255,e/255,r/255,n/100,o,i))},Zt.prototype.setTextJustify=function(t,e){this._textFilter.setTextJustify(D.INDEX,e||0,t)},Zt.prototype.setTextSize=function(t,e){this._textFilter.setTextSize(D.INDEX,e||0,t)},Zt.prototype.setWidthRation=function(t){this._textFilter.setLocateStatusWithViewOperate({mWidthRatio:t},k.CMTIKExternalOperatorTypeDoubleScale)},Zt.prototype.setTextLineSpacing=function(t,e){this._textFilter.setTextLineSpacing(D.INDEX,e||0,t,0)},Zt.prototype.setTextSpacing=function(t,e){this._textFilter.setTextSpacing(D.INDEX,e||0,t)},Zt.prototype.setTextFont=function(t,e){return e=this._textFilter.setTextFont(D.INDEX,e||0,t),this._textFilter.setDefaultFallbackFontLibraries(this._fontLibraries),e},Zt.prototype.getTextFont=function(t){return this._textFilter.getTextFont(D.INDEX,t||0)},Zt.prototype.setLocateStatus=function(t){this._textFilter.setLocateStatus(t)},Zt.prototype.updateTextLayerAttr=function(t,e,r,n,o){var i,a=void 0===(a=t.textIndex)?0:a,c=t.text,u=t.fontSize,s=t.fontFamily,l=t.color,f=t.bold,d=t.underline,h=t.italic,p=t.lineThrough,y=t.textAlign,g=t.writingMode,m=t.lineSpacing,v=t.letterSpacing,b=t.textShadow,w=t.textGlow,O=t.textStroke;t=t.textBackground,l=zt(l),this.changeAttr(7,g===Yt.HORIZONTAL_TB,a),e=g===Yt.HORIZONTAL_TB?+(e/n).toFixed(4):+(r/n).toFixed(4);this.setWidthRation(e),o||this.setTextSize(u,a),this.changeText(c,a),this.setTextFont(s,a),this.setTextColor(l.r,l.g,l.b,l.a,a),this.changeAttr(1,f,a),this.changeAttr(2,d,a),this.changeAttr(3,h,a),this.changeAttr(4,p,a),Wt(g,y)&&this.setTextJustify(Wt(g,y),a),this.setTextLineSpacing(m,a),this.setTextSpacing(v,a),O&&(n=zt((r=O[0]||{color:"#ffffff",width:0,hidden:!0}).color),this.setTextStroke(n.r,n.g,n.b,r.hidden?0:n.a,r.width,a)),w&&(i=zt((e=w[0]||{color:"#ffffff",width:0,hidden:!0}).color),this.setTextGlow(i.r,i.g,i.b,e.hidden?0:i.a,e.blur,e.width,a)),b&&(u=zt((o=b[0]||{color:"#ffffff",x:0,y:0,blur:0,hidden:!0}).color),this.setTextShadow(u.r,u.g,u.b,o.hidden?0:u.a,o.blur,o.x,o.y,a)),t&&(i=zt((c=t[0]||{color:"#ffffff",hidden:!0}).color),this.setTextBackground(i.r,i.g,i.b,c.hidden?0:i.a,a))},Zt.prototype.getTextInteractionStruts=function(t){return this._textFilter.getTextInteractionStruts(D.INDEX,t)[0]},Zt.prototype.getTextActualSize=function(t){return this._textFilter.getTextActualSize(D.INDEX,t)||0},Zt.prototype.getTextsInfo=function(){return a(this,void 0,void 0,(function(){var t,e,r,n,o,a,u,s,l,f,d,h,p;return c(this,(function(c){for(o=this._textFilter.getLayerBorder(),t=this._textFilter.getLayerTextsCount(),e=+Math.floor(o.left+.5),r=+Math.floor(o.top+.5),n=+Math.floor(o.right+.5),o=+Math.floor(o.bottom+.5),n=Math.abs(n-e),o=Math.abs(o-r),a=[],u=0;u<t;u++)d=this._textFilter.getTextBorderOnTex(u),s=this._textFilter.getTextInteractionStruts(D.INDEX,u)[0],l=this.getTextActualSize(u),h=+Math.floor(d.left+.5),f=+Math.floor(d.right+.5),p=+Math.floor(d.top+.5),d=+Math.floor(d.bottom+.5),f=Math.abs(f-h),d=Math.abs(p-d),h=Math.abs(e-h),p=Math.abs(r-p),a.push({width:f,height:d,x:h,y:p,info:Object.assign({},s,{mTextRect:i(i({},s.mTextRect),{width:Math.abs(Math.floor(s.mTextRect.right+.5)-Math.floor(s.mTextRect.left+.5)),height:Math.abs(Math.floor(s.mTextRect.bottom+.5)-Math.floor(s.mTextRect.top+.5))}),mTextSize:l})});return[2,{layer:{width:n,height:o},textLayers:a}]}))}))},Zt.prototype.processRender=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.getManager()];case 1:return t.sent().processRender(!0),[2]}}))}))},Zt.prototype.getCurrentTextFilter=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this._textFilter]}))}))},Zt.prototype.destroyAllFilter=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.getManager()];case 1:return(t=e.sent()).destroyAllFilter(),this._textFilter&&this._textFilter.destroy(),t.processRender(!0),[2]}}))}))};var Jt,Qt=new Zt,te=(o(ee,Jt=Y),ee.prototype.destroy=function(){this._instanceId&&Jt.prototype.destroy.call(this)},ee.prototype.loadConfigPath=function(t){t=p(this._wasmModule,t),this._wasmModule._MTIKComplexFilter_LoadConfigPath(this._instanceId,t),y(this._wasmModule,t)},ee.prototype.setTotalEffectAlpha=function(t){this._wasmModule._MTIKComplexFilter_SetTotalEffectAlpha(this._instanceId,t)},ee.prototype.getTotalEffectAlpha=function(){return this._wasmModule._MTIKComplexFilter_GetTotalEffectAlpha(this._instanceId)},ee.prototype.getComplexFilterConfigArray=function(){var t=this._wasmModule._MTIKTextFilter_GetComplexFilterConfigArray(this._instanceId);return JSON.parse(t)},ee.prototype.setComplexFilterConfigArray=function(t){t=p(this._wasmModule,JSON.stringify(t));var e=this._wasmModule._MTIKTextFilter_SetComplexFilterConfigArray(this._instanceId,t);return y(this._wasmModule,t),e},ee.prototype.setEnableTotalControl=function(t){this._wasmModule._MTIKComplexFilter_SetEnableTotalControl(this._instanceId,t)},ee.prototype.getEnableTotalControl=function(){return this._wasmModule._MTIKComplexFilter_GetEnableTotalControl(this._instanceId)},ee.prototype.updateComplexEffect=function(){return this._wasmModule._MTIKComplexFilter_UpdateComplexEffect(this._instanceId)},ee.polarCoordinates2EulerCoordinates=function(t,e){return{x:Math.cos(e*Math.PI/180)*t,y:-Math.sin(e*Math.PI/180)*t}},ee);function ee(t){return(t=Jt.call(this,t)||this)._instanceId=t._wasmModule._MTIKComplexFilter_Create(),t}var re,ne="configuration.plist",oe="/assets/SmearRes.zip";function ie(){return null!==re&&re.apply(this,arguments)||this}o(ie,re=it),ie.prototype.destroy=function(){this.baseDestroy(),this._complexFilter&&this._complexFilter.destroy(),this._complexFilter=null},ie.prototype.apply=function(t,e,r,n,o){return void 0===n&&(n=ne),void 0===o&&(o=oe),a(this,void 0,void 0,(function(){var r,i,a,u,s,l,f;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return r=c.sent(),a=this.fromCanvas,i=a.width,a=a.height,u=null==(u=this.fromCanvas.getContext("2d"))?void 0:u.getImageData(0,0,i,a),[4,A.loadZip(t,e)];case 2:return c.sent(),[4,this.proLoadResource(o)];case 3:return c.sent(),(s=new Z(r)).setNativeImage(null==u?void 0:u.data,i,a),[4,this.getManager()];case 4:return(l=c.sent()).removeAllFilter(),l.setSrcImage(s.getNativeImage(),i,a),f=A.getDisplayView(),A.setGLSize(i,a),f&&l.setDisplayView(f,!0),l.setResPath(""),this._complexFilter=new te(r),l.addFilter(this._complexFilter),this._complexFilter.setEnableTotalControl(!0),this._complexFilter.loadConfigPath("".concat(t,"/").concat(n)),l.processRender(!0),[4,this.getGLResult()];case 5:return f=c.sent(),s.destroy(),[2,f]}}))}))},ie.prototype.proLoadResource=function(t){return void 0===t&&(t=oe),a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,A.loadZip("",t)];case 1:return e.sent(),[2]}}))}))},ie.prototype.setTotalEffectAlpha=function(t){var e;null!=(e=this._complexFilter)&&e.setTotalEffectAlpha(t)},ie.prototype.setEnableTotalControl=function(t){var e;null!=(e=this._complexFilter)&&e.setEnableTotalControl(t)},ie.prototype.getComplexFilterConfigArray=function(){var t;return null==(t=this._complexFilter)?void 0:t.getComplexFilterConfigArray()},ie.prototype.setComplexFilterConfigArray=function(t){var e;return null==(e=this._complexFilter)?void 0:e.setComplexFilterConfigArray(t)},ie.prototype.polarCoordinates2EulerCoordinates=function(t,e){return te.polarCoordinates2EulerCoordinates(t,e)},ie.prototype.EulerCoordinates2OffsetCoordinates=function(t,e){return{offsetX:t/2+.5,offsetY:e/2+.5}},ie.prototype.initComplexFilter=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),a(this,void 0,void 0,(function(){var r;return c(this,(function(n){switch(n.label){case 0:return null!=this._complexFilter?[3,3]:[4,this.getWasm()];case 1:return r=n.sent(),this._complexFilter=new te(r),[4,this.getManager()];case 2:return r=n.sent(),e&&r.removeAllFilter(),t&&r.addFilter(this._complexFilter),[3,4];case 3:n.label=4;case 4:return[2]}}))}))},ie.prototype.loadConfigPath=function(t,e,r,n,o,i){var u;return void 0===n&&(n=!0),void 0===o&&(o=ne),void 0===i&&(i=oe),a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,A.loadZip(t,e)];case 1:return r.sent(),[4,this.proLoadResource(i)];case 2:return r.sent(),null!=(u=this._complexFilter)&&u.loadConfigPath("".concat(t,"/").concat(o)),n?[4,this.getManager()]:[3,5];case 3:return r.sent().processRender(!0),[4,this.getGLResult()];case 4:return[2,r.sent()];case 5:return[2,null]}}))}))},ie.prototype.setShow=function(t){var e;return a(this,void 0,void 0,(function(){return c(this,(function(r){return null!=(e=this._complexFilter)&&e.setShow(t),[2]}))}))};var ae,ce,ue,se=new ie,le=(o(fe,ae=Y),fe.prototype.initialize=function(t){var e;t=p(this._wasmModule,t);null!=(e=this._wasmModule)&&e._MTIKMagicPen_Initialize(this._instanceId,t),y(this._wasmModule,t)},fe.prototype.setOptions=function(t){this._centerMode=t},fe.prototype.renderFrame=function(t,e,r,n){var o;return null==(o=this._wasmModule)?void 0:o._MTIKMagicPen_RenderFrame(this._instanceId,t,e,r,n)},fe.prototype.onSurfaceChanged=function(t,e){var r;null!=(r=this._wasmModule)&&r._MTIKMagicPen_OnSurfaceChanged(this._instanceId,t,e)},fe.prototype.renderClear=function(t,e,r,n){var o;null!=(o=this._wasmModule)&&o._MTIKMagicPen_RenderClear(this._instanceId,t,e,r,n)},fe.prototype.getFrameLayout=function(t,e){var r;return null==(r=this._wasmModule)?void 0:r._MTIKMagicPen_GetFrameLayout(this._instanceId,this._centerMode,t,e)},fe.prototype.undo=function(){var t;null!=(t=this._wasmModule)&&t._MTIKMagicPen_Undo(this._instanceId)},fe.prototype.canUndo=function(){var t;return null==(t=this._wasmModule)?void 0:t._MTIKMagicPen_CanUndo(this._instanceId)},fe.prototype.redo=function(){var t;return null==(t=this._wasmModule)?void 0:t._MTIKMagicPen_Redo(this._instanceId)},fe.prototype.canRedo=function(){var t;return null==(t=this._wasmModule)?void 0:t._MTIKMagicPen_CanRedo(this._instanceId)},fe.prototype.setDensity=function(t){var e;null!=(e=this._wasmModule)&&e._MTIKMagicPen_SetDensity(this._instanceId,t)},fe.prototype.setPenColor=function(t,e,r,n){var o;null!=(o=this._wasmModule)&&o._MTIKMagicPen_SetPenColor(this._instanceId,t,e,r,n)},fe.prototype.setPenSize=function(t){var e=(null==(e=this._wasmModule)?void 0:e.canvas.width)/parseFloat(null==(e=this._wasmModule)?void 0:e.canvas.style.width);e&&0!=e&&(t*=e),null!=(e=this._wasmModule)&&e._MTIKMagicPen_SetPenSize(this._instanceId,t)},fe.prototype.setPenSizeMode=function(t){var e;null!=(e=this._wasmModule)&&e._MTIKMagicPen_SetPenSizeMode(this._instanceId,t)},fe.prototype.changeMagicPen=function(t,e){e=p(this._wasmModule,e);var r=null==(r=this._wasmModule)?void 0:r._MTIKMagicPen_ChangeMagicPen(this._instanceId,t,e);return y(this._wasmModule,e),r},fe);function fe(t){return(t=ae.call(this,t)||this)._centerMode=0,t._instanceId=t._wasmModule._MTIKMagicPen_CreateInstance(),t._wasmModule._MTIKMagicPen_Initialize(),t}function de(){var t=null!==ue&&ue.apply(this,arguments)||this;return t._penFilter=null,t}(e=ce=ce||{})[e.PenSizeFixedPixel=0]="PenSizeFixedPixel",e[e.PenSizeFixedScreen=1]="PenSizeFixedScreen",e[e.PenSizeModeNum=2]="PenSizeModeNum",o(de,ue=at),de.prototype.apply=function(t,e,r,n){var o;return void 0===r&&(r=""),void 0===n&&(n=0),a(this,void 0,void 0,(function(){var i,a,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return i=c.sent(),u=this.fromCanvas,a=u.width,u=u.height,d=null==(d=this.fromCanvas.getContext("2d"))?void 0:d.getImageData(0,0,a,u),(s=new Z(i)).setNativeImage(null==d?void 0:d.data,a,u),[4,this.getManager()];case 2:return(l=c.sent()).removeAllFilter(),f=A.getDisplayView(),A.setGLSize(t,e),[4,this.getCurrentPen()];case 3:return(d=c.sent()).initialize(r),d.setOptions(n),d.setPenSizeMode(ce.PenSizeFixedPixel),l.setSrcImage(s.getNativeImage(),a,u),l.addFilter(d),f&&l.setDisplayView(f,!0),l.setFEMode(E.MTIK_MODE_MAGICPEN),l.setViewCapability(pt.MTIKViewCapabilityTypeNotifyLongPress,!1),l.setViewCapability(pt.MTIKViewCapabilityTypeBgMoveLimitInSideView,!0),l.setViewCapability(pt.MTIKViewCapabilityTypeBgSignedMove,!1),l.setViewCapability(pt.MTIKViewCapabilityTypeEdgeLimit,!1),l.setViewCapability(pt.MTIKViewCapabilityTypeDoubleClickRestore,!1),null!=f&&f.setViewSelectFilter(d),null!=f&&f.viewDidLayout(t,e),null!=f&&f.setBackgroundColor(123,123,123,255,123,123,123,255),l.processRender(!0),this._listener||(this._listener=new Et(i),null!=(o=this._listener)&&o.onMTIKRenderEvent(this.onMTIKRenderEvent,this),null!=(o=this._listener)&&o.clickUpOnView(this.clickUpOnView,this)),s.destroy(),[2,A.getGLCanvas()]}}))}))},de.prototype.destroy=function(){this._penFilter&&(this._penFilter.destroy(),this._penFilter=null)},de.prototype.changePen=function(t){return a(this,void 0,void 0,(function(){var e,r;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,A.loadMagicZip(t.id,t.zip,t.config)];case 1:return e=n.sent(),[4,this.getCurrentPen()];case 2:return null!=(r=n.sent())&&r.changeMagicPen(t.type,e),null!=r&&r.setPenSize(50),[3,4];case 3:throw n.sent();case 4:return[2,this]}}))}))},de.prototype.getCurrentPen=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),this._penFilter?[3,2]:[4,this.getWasm()];case 1:t=e.sent(),this._penFilter=new le(t),e.label=2;case 2:return[2,this._penFilter];case 3:throw e.sent();case 4:return[2]}}))}))},de.prototype.changeBackgroundImage=function(t){return a(this,void 0,void 0,(function(){var e,r,n,o,i,a;return c(this,(function(c){switch(c.label){case 0:if(this.canDo())return[4,this.getWasm()];throw"\u6765\u6e90\u753b\u5e03\u4e0d\u53ef\u4e3a\u7a7a\uff0c\u8bf7\u901a\u8fc7 from \u51fd\u6570\u8bbe\u7f6e";case 1:return e=c.sent(),n=this.fromCanvas,r=n.width,n=n.height,null!=(o=this.fromCanvas.getContext("2d"))&&(o.fillStyle="#FFFFFFFF"),null!=o&&o.fillRect(0,0,r,n),null!=o&&o.drawImage(t,0,0,r,n),o=null==o?void 0:o.getImageData(0,0,r,n),[4,this.getManager()];case 2:return i=c.sent(),(a=new Z(e)).setNativeImage(null==o?void 0:o.data,r,n),i.setSrcImage(a.getNativeImage(),r,n),i.processRender(!0),a.destroy(),[2,this]}}))}))},de.prototype.onMTIKRenderEvent=function(t){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.getManager()];case 1:return null!=(t=e.sent())&&t.processRender(!0),[2]}}))}))},de.prototype.clickUpOnView=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2]}))}))},de.prototype.onMouseScroll=function(t){return a(this,void 0,void 0,(function(){var e,r,n,o;return c(this,(function(i){switch(i.label){case 0:return[4,this.getWasm()];case 1:return e=i.sent(),[4,this.getManager()];case 2:return r=i.sent(),n=A.getDisplayView(),o=null==n?void 0:n.getViewLocateStatus(),o=(o=g(e,o,9))[8],0<t.wheelDelta?o+=.03:o-=.03,(o=2<o?2:o)<.2&&(o=.2),null!=n&&n.setViewLocateStatus(0,0,o),null!=r&&r.processRender(!0),[2]}}))}))};var he,pe,ye=new de,ge=(o(me,he=Y),me.prototype.destroy=function(){this._instanceId&&he.prototype.destroy.call(this)},me.prototype.setCachePath=function(t){t=p(this._wasmModule,t);var e=this._wasmModule._MTIKMaskSmearFilter_SetCachePath(this._instanceId,t);return y(this._wasmModule,t),e},me.prototype.canUndo=function(){return this._wasmModule._MTIKMaskSmearFilter_CanUndo(this._instanceId)},me.prototype.undo=function(){this._wasmModule._MTIKMaskSmearFilter_Undo(this._instanceId)},me.prototype.canRedo=function(){return this._wasmModule._MTIKMaskSmearFilter_CanRedo(this._instanceId)},me.prototype.redo=function(){this._wasmModule._MTIKMaskSmearFilter_Redo(this._instanceId)},me.prototype.hasDoEffect=function(){return this._wasmModule._MTIKMaskSmearFilter_HasDoEffect(this._instanceId)},me.prototype.setMaskSmearMode=function(t){this._wasmModule._MTIKMaskSmearFilter_SetMaskSmearMode(this._instanceId,t)},me.prototype.setMaskColor=function(t,e,r,n){this._wasmModule._MTIKMaskSmearFilter_SetMaskColor(this._instanceId,t,e,r,n)},me.prototype.reset=function(){this._wasmModule._MTIKMaskSmearFilter_Reset(this._instanceId)},me.prototype.getMaskData=function(t,e,r){this._wasmModule._MTIKMaskSmearFilter_GetMaskBitmap(this._instanceId,t,e,r)},me.prototype.setMaskData=function(t,e,r){this._wasmModule._MTIKMaskSmearFilter_SetMaskBitmap(this._instanceId,t,e,r)},me.prototype.getMaskDataSize=function(){var t=this._wasmModule._MTIKMaskSmearFilter_GetMaskSize(this._instanceId),e={width:(e=v(this._wasmModule,t,2))[0],height:e[1]};return y(this._wasmModule,t),e},me.prototype.enableRenderToView=function(t){this._wasmModule._MTIKMaskSmearFilter_EnableRenderToView(this._instanceId,t)},me.prototype.useUndoRedo=function(t){this._wasmModule._MTIKMaskSmearFilter_UseUndoRedo(this._instanceId,t)},me);function me(t){return(t=he.call(this,t)||this)._instanceId=t._wasmModule._MTIKMaskSmearFilter_Create(),t}function ve(){var t=pe.call(this)||this;return t.localFilter=null,t}o(ve,pe=at),ve.prototype.destroy=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.getManager()];case 1:return t=e.sent(),this.localFilter&&(null!=t&&t.removeFilter(this.localFilter,!0),this.baseDestroy(),this.localFilter=null),[2]}}))}))},ve.prototype.create=function(){return a(this,void 0,void 0,(function(){var t,e;return c(this,(function(r){switch(r.label){case 0:return[4,this.getWasm()];case 1:return t=r.sent(),[4,this.getManager()];case 2:return e=r.sent(),null==this.localFilter&&e&&(this.localFilter=new ge(t),this.localFilter.useUndoRedo(!1),e.addFilter(this.localFilter)),[2]}}))}))},ve.prototype.setMaskSmearMode=function(t){var e;null!=(e=this.localFilter)&&e.setMaskSmearMode(t)},ve.prototype.enableRenderToView=function(t,e){var r;return a(this,void 0,void 0,(function(){var n;return c(this,(function(o){switch(o.label){case 0:return null!=(r=this.localFilter)&&r.enableRenderToView(t),[4,this.getManager()];case 1:return n=o.sent(),e&&n.processRender(e),[2]}}))}))},ve.prototype.setMaskColor=function(t,e,r,n){var o;null!=(o=this.localFilter)&&o.setMaskColor(t,e,r,n)},ve.prototype.getFilterInstanceId=function(){var t;return null==(t=this.localFilter)?void 0:t.getInstanceId()},ve.prototype.getFilterInstance=function(){return this.localFilter},ve.prototype.canUndo=function(){var t;return null==(t=this.localFilter)?void 0:t.canUndo()},ve.prototype.undo=function(){var t;null!=(t=this.localFilter)&&t.undo()},ve.prototype.canRedo=function(){var t;return null==(t=this.localFilter)?void 0:t.canRedo()},ve.prototype.redo=function(){var t;null!=(t=this.localFilter)&&t.redo()},ve.prototype.reset=function(){var t;null!=(t=this.localFilter)&&t.reset()},ve.prototype.getMaskData=function(){var t;return a(this,void 0,void 0,(function(){var e,r,n;return c(this,(function(o){switch(o.label){case 0:return[4,this.getWasm()];case 1:return r=o.sent(),null==(null==(e=null==(t=this.localFilter)?void 0:t.getMaskDataSize())?void 0:e.height)||null==(null==e?void 0:e.width)?[2]:(null!=(r=new Z(r))&&r.destroy(),null!=r&&r.setNativeImage(null,e.width,e.height),null!=(t=this.localFilter)&&t.getMaskData(r.getNativeImage(),e.width,e.height),n={imagedata:n=new Uint8Array(null==r?void 0:r.getImageData()),width:e.width,height:e.height},null!=r&&r.destroy(),[2,n])}}))}))},ve.prototype.setMaskData=function(t,e,r){var n;return a(this,void 0,void 0,(function(){var o;return c(this,(function(i){switch(i.label){case 0:return[4,this.getWasm()];case 1:return o=i.sent(),(o=new Z(o)).setNativeImage(t,e,r),null!=(n=this.localFilter)&&n.setMaskData(o.getNativeImage(),e,r),[2]}}))}))};var be,we,Oe,xe,je=new ve,_e=(o(Ee,be=Y),Ee.prototype.destroy=function(){this._instanceId&&be.prototype.destroy.call(this)},Ee.prototype.setCustomizePath=function(t,e){return t=p(this._wasmModule,t),e=this._wasmModule._MTIKWatermarkFilter_SetCustomizePath(this._instanceId,t,e),y(this._wasmModule,t),e},Ee.prototype.getCustomizePath=function(){this._wasmModule._MTIKWatermarkFilter_GetCustomizePath(this._instanceId)},Ee.prototype.startEdit=function(){return this._wasmModule._MTIKWatermarkFilter_StartEdit(this._instanceId)},Ee.prototype.stopEdit=function(t){return this._wasmModule._MTIKWatermarkFilter_StopEdit(this._instanceId,t)},Ee.prototype.setMaterialPath=function(t,e){return t=p(this._wasmModule,t),e=this._wasmModule._MTIKWatermarkFilter_SetMaterialPath(this._instanceId,t,e),y(this._wasmModule,t),e},Ee.prototype.getMaterialPath=function(){this._wasmModule._MTIKWatermarkFilter_GetMaterialPath(this._instanceId)},Ee.prototype.getLocateStatus=function(){return this._wasmModule._MTIKWatermarkFilter_GetLocateStatus(this._instanceId)},Ee.prototype.setLocateStatus=function(t){return this._wasmModule._MTIKWatermarkFilter_SetLocateStatus(this._instanceId,t)},Ee.prototype.setFullscreen=function(t,e){this._wasmModule._MTIKWatermarkFilter_SetFullscreen(this._instanceId,t,e)},Ee.prototype.getFullscreen=function(){return this._wasmModule._MTIKWatermarkFilter_GetFullscreen(this._instanceId)},Ee.prototype.setWidthRatio=function(t,e){this._wasmModule._MTIKWatermarkFilter_SetWidthRatio(this._instanceId,t,e)},Ee.prototype.getWidthRatio=function(){return this._wasmModule._MTIKWatermarkFilter_GetWidthRatio(this._instanceId)},Ee.prototype.setSpacing=function(t,e){this._wasmModule._MTIKWatermarkFilter_SetSpacing(this._instanceId,t,e)},Ee.prototype.getSpacing=function(){return this._wasmModule._MTIKWatermarkFilter_GetSpacing(this._instanceId)},Ee.prototype.setRotate=function(t,e){this._wasmModule._MTIKWatermarkFilter_SetRotate(this._instanceId,t,e)},Ee.prototype.getRotate=function(){return this._wasmModule._MTIKWatermarkFilter_GetRotate(this._instanceId)},Ee.prototype.setStaggered=function(t,e){this._wasmModule._MTIKWatermarkFilter_SetStaggered(this._instanceId,t,e)},Ee.prototype.getStaggered=function(){return this._wasmModule._MTIKWatermarkFilter_GetStaggered(this._instanceId)},Ee.prototype.setMoveOffsetX=function(t){this._wasmModule._MTIKWatermarkFilter_SetMoveOffsetX(this._instanceId,t)},Ee.prototype.getMoveOffsetX=function(){return this._wasmModule._MTIKWatermarkFilter_GetMoveOffsetX(this._instanceId)},Ee.prototype.setMoveOffsetY=function(t){this._wasmModule._MTIKWatermarkFilter_SetMoveOffsetY(this._instanceId,t)},Ee.prototype.getMoveOffsetY=function(){return this._wasmModule._MTIKWatermarkFilter_GetMoveOffsetY(this._instanceId)},Ee.prototype.getWaterMarkSplitBitmap=function(){var t=m(this._wasmModule);return{imagePtr:this._wasmModule._MTIKWatermarkFilter_GetWaterMarkSplitBitmap(this._instanceId,t),width:(t=v(this._wasmModule,t,2))[0],height:t[1]}},Ee.prototype.setWaterMarkFilterMode=function(t){this._wasmModule._MTIKWatermarkFilter_SetWaterMarkFilterMode(this._instanceId,t)},Ee.prototype.getTextFilter=function(){return this._wasmModule._MTIKWatermarkFilter_GetTextFilter(this._instanceId)},Ee.prototype.updateResultBuffer=function(){return this._wasmModule._MTIKWatermarkFilter_UpdateResultBuffer(this._instanceId)},Ee.prototype.removeText=function(t){return this._wasmModule._MTIKWatermarkFilter_RemoveText(this._instanceId,t)},Ee.prototype.addTextString=function(t){t=p(this._wasmModule,t),this._wasmModule._MTIKWatermarkFilter_AddTextString(this._instanceId,t),y(this._wasmModule,t)},Ee);function Ee(t){return(t=be.call(this,t)||this)._instanceId=t._wasmModule._MTIKWatermarkFilter_Create(),t}function ke(){var t=xe.call(this)||this;return t._arResID="",t._arResPath="/assets/text/ar_res.zip",t._arPublicParamsPath="https://titan-h5.meitu.com/xiuxiu-pc/image-editor/text/hbpArPublicParams.zip",t._alibabaFontPathZip="https://titan-h5.meitu.com/xiuxiu-pc/image-editor/text/fonts/Alibaba-PuHuiTi-Regular.zip",t._systemFontPath="AlibabaPuHuiTi-Regular/Alibaba-PuHuiTi-Regular.ttf",t._alibabaFont="AlibabaPuHuiTi-Regular",t._fontZipCache={},t._filterList=new Map,t}(Oe=we=we||{})[Oe.watermarkModeMain=0]="watermarkModeMain",Oe[Oe.watermarkModeSplit=1]="watermarkModeSplit",o(ke,xe=at),ke.prototype.destroy=function(){this.baseDestroy(),this._filterList.clear()},ke.prototype.create=function(t,e){return void 0===t&&(t=""),void 0===e&&(e="/assets/text/ar_res.zip"),a(this,void 0,void 0,(function(){var r,n,o,i;return c(this,(function(a){switch(a.label){case 0:return this._arResID=t,this._arResPath=e,[4,this.getWasm()];case 1:return o=a.sent(),n=this.fromCanvas,r=n.width,n=n.height,i=null==(i=this.fromCanvas.getContext("2d"))?void 0:i.getImageData(0,0,r,n),(o=new Z(o)).setNativeImage(null==i?void 0:i.data,r,n),[4,A.loadZip(this._arResID,this._arResPath)];case 2:return a.sent(),[4,this.getManager()];case 3:return(i=a.sent()).removeAllFilter(),i.setSrcImage(o.getNativeImage(),r,n),i.setARDirectory(this._arResID,Ft.kDirectoryBuiltIn),i.setViewCapability(pt.MTIKViewCapabilityTypeBgMove,!1),i.setFEMode(E.MTIK_MODE_WATERMARK),i.processRender(!0),o.destroy(),[2,A.getGLCanvas()]}}))}))},ke.prototype.registerFont=function(t,e){return a(this,void 0,void 0,(function(){var r,n,o,i,a;return c(this,(function(c){switch(c.label){case 0:return[4,this.getManager()];case 1:return r=c.sent(),n=t||this._alibabaFont,o=e||this._alibabaFontPathZip,[4,A.loadZip(n,o)];case 2:return o=c.sent(),i=this._systemFontPath,"[object Array]"===Object.prototype.toString.call(o)&&o.length?(a=o.filter((function(t){return 2===t.split("/").length&&t.split("/")[0]===n||1===t.split("/").length})),this._fontZipCache[n]=a[0],i=a[0]):this._fontZipCache[n]&&(i=this._fontZipCache[n]),null!=r&&r.registerARFont(n,i),[2]}}))}))},ke.prototype.addWaterMark=function(t){return a(this,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:return[4,this.getWasm()];case 1:return e=r.sent(),e=new _e(e),[4,this.getManager()];case 2:return r.sent().addFilter(e),t=t||e.getUUId().toString(),this._filterList.set(t,e),e.setWaterMarkFilterMode(we.watermarkModeMain),[2,t]}}))}))},ke.prototype.removeWaterMark=function(t){return a(this,void 0,void 0,(function(){var e,r;return c(this,(function(n){switch(n.label){case 0:return e=this._filterList.get(t),[4,this.getManager()];case 1:return r=n.sent(),e&&(r.removeFilter(e,!0),this._filterList.delete(t)),[2,!0]}}))}))},ke.prototype.setCustomizePath=function(t,e){var r;return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,A.loadWaterMark(e)];case 1:return n.sent(),null!=(r=this._filterList.get(t))&&r.setCustomizePath(e,!0),null!=(r=this._filterList.get(t))&&r.updateResultBuffer(),[2]}}))}))},ke.prototype.setMaterialPath=function(t,e,r,n){var o;return a(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return[4,A.loadZip(e,r)];case 1:return i.sent(),null!=(o=this._filterList.get(t))&&o.setMaterialPath(n,!0),[2]}}))}))},ke.prototype.setFullscreen=function(t,e){null!=(t=this._filterList.get(t))&&t.setFullscreen(e,!0)},ke.prototype.setRotate=function(t,e,r){null!=(t=this._filterList.get(t))&&t.setRotate(e,r)},ke.prototype.setSpacing=function(t,e,r){null!=(t=this._filterList.get(t))&&t.setSpacing(e,r)},ke.prototype.setWidthRatio=function(t,e,r){null!=(t=this._filterList.get(t))&&t.setWidthRatio(e,r)},ke.prototype.setStaggered=function(t,e,r){null!=(t=this._filterList.get(t))&&t.setStaggered(e,r)},ke.prototype.setMoveOffsetX=function(t,e){null!=(t=this._filterList.get(t))&&t.setMoveOffsetX(e)},ke.prototype.setMoveOffsetY=function(t,e){null!=(t=this._filterList.get(t))&&t.setMoveOffsetY(e)},ke.prototype.getWaterMarkSplitBitmap=function(t){var e;return a(this,void 0,void 0,(function(){var r,n,o,i,a;return c(this,(function(c){switch(c.label){case 0:return[4,this.getWasm()];case 1:return n=c.sent(),null==(null==(r=null==(e=this._filterList.get(t))?void 0:e.getWaterMarkSplitBitmap())?void 0:r.width)||null==(null==r?void 0:r.height)?[2]:((n=new Z(n)).setImagePtr(null==r?void 0:r.imagePtr,null==r?void 0:r.width,null==r?void 0:r.height),o=x(null==r?void 0:r.width,null==r?void 0:r.height),i=o.getContext("2d"),(a=null==i?void 0:i.createImageData(null==r?void 0:r.width,null==r?void 0:r.height))&&(a.data.set(n.getImageData()),null!=i)&&i.putImageData(a,0,0),[2,{url:o.toDataURL("image/png"),width:null==r?void 0:r.width,height:null==r?void 0:r.height}])}}))}))},ke.prototype.changeText=function(t,e,r){var n;return a(this,void 0,void 0,(function(){var o,i;return c(this,(function(a){switch(a.label){case 0:return[4,this.getWasm()];case 1:return i=a.sent(),0==(o=null==(n=this._filterList.get(t))?void 0:n.getTextFilter())?[2,!1]:(i=new Gt(i,o),Qt.initTextFilter(i),Qt.changeText(e,r),[2,!0])}}))}))},ke.prototype.setTextColor=function(t,e,r,n,o,i){var u;return a(this,void 0,void 0,(function(){var a,s;return c(this,(function(c){switch(c.label){case 0:return[4,this.getWasm()];case 1:return s=c.sent(),0==(a=null==(u=this._filterList.get(t))?void 0:u.getTextFilter())?[2,!1]:(s=new Gt(s,a),Qt.initTextFilter(s),Qt.setTextColor(e,r,n,o,i),[2])}}))}))},ke.prototype.getTextsInfo=function(t){var e;return a(this,void 0,void 0,(function(){var r,n;return c(this,(function(o){switch(o.label){case 0:return[4,this.getWasm()];case 1:return n=o.sent(),0==(r=null==(e=this._filterList.get(t))?void 0:e.getTextFilter())?[2,null]:(n=new Gt(n,r),Qt.initTextFilter(n),[4,Qt.getTextsInfo()]);case 2:return[2,o.sent()]}}))}))},ke.prototype.setTextFont=function(t,e,r){var n;return a(this,void 0,void 0,(function(){var o,i;return c(this,(function(a){switch(a.label){case 0:return[4,this.getWasm()];case 1:return i=a.sent(),0==(o=null==(n=this._filterList.get(t))?void 0:n.getTextFilter())?[2,null]:(i=new Gt(i,o),Qt.initTextFilter(i),[4,Qt.setTextFont(e,r)]);case 2:return[2,a.sent()]}}))}))},ke.prototype.getTextFont=function(t,e){var r;return a(this,void 0,void 0,(function(){var n,o;return c(this,(function(i){switch(i.label){case 0:return[4,this.getWasm()];case 1:return o=i.sent(),0==(n=null==(r=this._filterList.get(t))?void 0:r.getTextFilter())?[2,null]:(o=new Gt(o,n),Qt.initTextFilter(o),[4,Qt.getTextFont(e)]);case 2:return[2,i.sent()]}}))}))},ke.prototype.isFullScreen=function(t){return null==(t=this._filterList.get(t))?void 0:t.getFullscreen()},ke.prototype.getFullScreenInfo=function(t){var e;return(null==(e=this._filterList.get(t))?void 0:e.getFullscreen())?{widthRatio:100*(null==(e=this._filterList.get(t))?void 0:e.getWidthRatio()),spacing:100*(null==(e=this._filterList.get(t))?void 0:e.getSpacing()),rotate:null==(e=this._filterList.get(t))?void 0:e.getRotate(),staggered:100*(null==(e=this._filterList.get(t))?void 0:e.getStaggered())}:null},ke.prototype.removeText=function(t,e){null!=(t=this._filterList.get(t))&&t.removeText(e)},ke.prototype.addText=function(t,e){null!=(t=this._filterList.get(t))&&t.addTextString(e)},ke.prototype.updateResultBuffer=function(t){null!=(t=this._filterList.get(t))&&t.updateResultBuffer()};var Se=new ke,Le=!1,Ie=!1,Te={x:0,y:0},Me={x:0,y:0},Pe={x:0,y:0},Ae={x:0,y:0};function Ce(t,e,r){void 0===r&&(r=5);var n=t.getContext("2d");t.onmouseleave=function(){Ie=!0},t.onmouseenter=function(){Ie=!1},t.onmousedown=function(o){o=o||window.event;var i=t.width/parseFloat(t.style.width);Te.x=(o.clientX-t.offsetLeft)*i,Te.y=(o.clientY-t.offsetTop)*i,null!=n&&n.moveTo(Te.x,Te.y),document.onmousemove=function(e){Le&&(null!=n&&n.beginPath(),Le=!1),e=e||window.event,null!=n&&(n.globalAlpha=1),null!=n&&(n.strokeStyle="#ff0000FF"),null!=n&&(n.lineWidth=r*i),Me.x=(e.offsetX-t.offsetLeft)*i,Me.y=(e.offsetY-t.offsetTop)*i,Math.sqrt(Me.x-Te.x^Me.y-Te.y+2^2)<r||(Pe.x=(Me.x-Te.x)/4+Te.x,Pe.y=(Me.y-Te.y)/4+Te.y,Ae.x=(Me.x-Te.x)/4*3+Te.x,Ae.y=(Me.y-Te.y)/4*3+Te.y,null!=n&&n.lineTo(Me.x,Me.y),null!=n&&n.stroke(),Te.x=Me.x,Te.y=Me.y)},document.onmouseup=function(){var r;Le&&Ie||(document.onmousemove=null,(document.onload=null)!=(r=null==e?void 0:e.getContext("2d"))&&r.clearRect(0,0,t.width,t.height),null!=(r=null==e?void 0:e.getContext("2d"))&&r.drawImage(t,0,0,t.width,t.height),null!=n&&n.clearRect(0,0,t.width,t.height),Le=!0)}}}function Re(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r}var Ne="\n        precision highp float;\n        attribute vec4 position;\n        attribute vec4 inputTextureCoordinate;\n        varying vec2 textureCoordinate;\n\n        void main() {\n            gl_Position = position;\n            textureCoordinate = vec2((position.x+1.0)/2.0, 1.0-(position.y+1.0)/2.0);\n        }\n    ",De="\n         uniform vec2 blurVectorX;\n         uniform vec2 blurVectorY;\n         uniform sampler2D texture;\n         uniform sampler2D maskTexture;\n         \n         uniform int type;\n         \n         varying vec2 textureCoordinate;\n\n         vec4 avgBlur(sampler2D tex)\n         {\n             float coefficient = 1.0;\n             vec4 avgValue = vec4(0.0);\n             vec4 coefficientSum = vec4(0);\n             \n             for (int i = -kernelSize; i <= kernelSize; i++) {\n                 for (int j = -kernelSize; j <= kernelSize; j++) {\n                     avgValue += texture2D(tex, textureCoordinate + float(i) * blurVectorX + float(j) * blurVectorY) * coefficient;\n                     coefficientSum += coefficient;\n                 }\n             }\n            \n             return avgValue / coefficientSum;\n         }\n         \n         vec4 avgBlurWithMul(sampler2D tex, sampler2D factorTex, bool oneMinusFactor)\n         {\n             float coefficient = 1.0;\n             vec4 avgValue = vec4(0.0);\n             vec4 coefficientSum = vec4(0);\n             \n             for (int i = -kernelSize; i <= kernelSize; i++) {\n                 for (int j = -kernelSize; j <= kernelSize; j++) {\n                     float factor = texture2D(factorTex, textureCoordinate + float(i) * blurVectorX + float(j) * blurVectorY).a;\n                     if (oneMinusFactor) {\n                         factor = 1.0 - factor;\n                     }\n                     vec4 mergeFacotr = vec4(factor);\n                     avgValue += texture2D(tex, textureCoordinate + float(i) * blurVectorX + float(j) * blurVectorY) * mergeFacotr * coefficient;\n                     coefficientSum += coefficient;\n                 }\n             }\n            \n             return avgValue / coefficientSum;\n         }\n\n         void main()\n         {\n              vec4 srcImage = texture2D(texture, textureCoordinate);\n              vec4 maskImage = texture2D(maskTexture, textureCoordinate);\n             \n                if (type == 0) {\n                     // \u524d\u666f\u63d0\u53d6\uff0c\u7b97\u6cd5\u7531\u5b9e\u9a8c\u5ba4\u63d0\u4f9b\uff1ahttps://cf.meitu.com/confluence/pages/viewpage.action?pageId=264073451\n                     float alpha = maskImage.a;\n                     float blurredAlpha = avgBlur(maskTexture).a;\n                     vec3 blurredFA = avgBlurWithMul(texture, maskTexture, false).rgb;\n                     vec3 blurredF = blurredFA / (blurredAlpha + 0.0001);\n                     \n                     vec3 blurredB1A = avgBlurWithMul(texture, maskTexture, true).rgb;\n                     vec3 blurredB = blurredB1A / (1.0 - blurredAlpha + 0.0001);\n                     vec3 tmp = srcImage.rgb + blurredF * (-alpha) + blurredB * (alpha-1.0);\n                     vec3 fore = blurredF + tmp * (alpha);\n    \n                     gl_FragColor = vec4(fore * srcImage.a * maskImage.a, srcImage.a * maskImage.a);\n                } else {\n                    gl_FragColor = vec4(srcImage.rgb, 1.0);\n                }\n                 \n         }\n    ",Fe="\n         precision highp float;\n         uniform sampler2D texture;\n         uniform sampler2D maskTexture;\n         uniform sampler2D blurred_alpha;\n         uniform sampler2D blurred_FA;\n         uniform sampler2D blurred_B1A;\n         varying vec2 textureCoordinate;\n\n         void main()\n         {\n              vec4 srcImage = texture2D(texture, textureCoordinate);\n              vec4 maskImage = texture2D(maskTexture, textureCoordinate);\n\n              float alpha = maskImage.a;\n              float blurredAlpha = texture2D(blurred_alpha, textureCoordinate).a;\n            //   vec3 blurredFA = texture2D(blurred_FA, textureCoordinate).rgb;\n              vec4 blurredFALoad = texture2D(blurred_FA, textureCoordinate);\n              vec3 blurredFA = blurredFALoad.rgb;//srcImage.rgb * blurredFALoad.a;\n\n              vec3 blurredF = blurredFA / (blurredAlpha + 0.0001);\n\n              vec4 blurredB1ALoad = texture2D(blurred_B1A, textureCoordinate); \n            //   vec3 blurredB1A = blurredB1ALoad.rgb * blurredB1ALoad.a * (1.0-blurredAlpha);\n            vec3 blurredB1A = blurredB1ALoad.rgb;//srcImage.rgb * (1.0-blurredAlpha);\n\n            //   vec3 blurredB1A = texture2D(blurred_B1A, textureCoordinate).rgb;\n            //   vec3 blurredB = blurredB1A / (1.0 - blurredAlpha + 0.0001);\n            vec3 blurredB = blurredB1A * blurredB1ALoad.a / (1.0 - blurredAlpha + 0.0001);\n              vec3 tmp = srcImage.rgb + blurredF * (-alpha) + blurredB * (alpha-1.0);\n              vec3 fore = blurredF + tmp * (alpha);\n\n              // 1.\u539f\u59cb\u7684\u65b9\u6cd5\uff1a\n                // gl_FragColor = vec4(fore * srcImage.a * maskImage.a, srcImage.a * maskImage.a);\n                \n                // 2.\u5c1d\u8bd5\u6dfb\u52a0\u539f\u56fe\u7684rbg\n                vec4 resultColor = vec4(fore * srcImage.a * maskImage.a, srcImage.a * maskImage.a);\n                vec4 outputColor = resultColor;\n                if (resultColor.a == 0.0) {\n                  outputColor.rgb = srcImage.rgb;\n                } \n                gl_FragColor = outputColor;//vec4(srcImage.rgb, resultColor.a);\n         }\n    ",Be="\n    precision mediump float;\n    varying vec2 textureCoordinate;\n    uniform sampler2D texture;\n    uniform float textureWidth;\n    uniform float textureHeight;\n    uniform float size;\n    const int  radius = 8;\n    // const int kernelSize = 40;\n    void main()\n    {        \n        \n        vec4 sum            = vec4(0.0);\n        vec4 result         = vec4(0.0);\n        vec2 unit_uv        = vec2(size / textureWidth,size / textureHeight)*1.0;\n        vec4 curColor       = texture2D(texture, textureCoordinate);\n\n        vec4 centerPixel    = curColor;\n        \n        float sum_weight    = 1.0;\n        //horizontal\n        for(int i=-radius;i<=radius;i++)\n        {\n            vec2 curRightCoordinate = textureCoordinate+vec2(float(i),0.0)*unit_uv;\n            vec2 curLeftCoordinate  = textureCoordinate+vec2(float(i),0.0)*unit_uv;\n            sum += texture2D(texture,curRightCoordinate);\n            sum += texture2D(texture,curLeftCoordinate);\n            sum_weight+=2.0;\n        }\n        \n        result = (sum+centerPixel)/sum_weight;\n        \n        gl_FragColor = result;\n    }\n",Ge="\n    precision mediump float;\n    varying vec2 textureCoordinate;\n    uniform sampler2D texture;\n    uniform float textureWidth;\n    uniform float textureHeight;\n    const int  radius = 8;\n    uniform float size;\n\n    void main()\n    { \n        vec4 sum            = vec4(0.0);\n        vec4 result         = vec4(0.0);\n        vec2 unit_uv        = vec2(size / textureWidth,size / textureHeight)*1.0;\n        vec4 centerPixel    = texture2D(texture, textureCoordinate);\n        float  sum_weight   = 1.0;\n        \n        //vertical\n        for(int i=-radius;i<=radius;i++)\n        {\n            vec2 curBottomCoordinate    = textureCoordinate+vec2(0.0,float(i))*unit_uv;\n            vec2 curTopCoordinate       = textureCoordinate+vec2(0.0,float(i))*unit_uv;\n            sum+=texture2D(texture,curBottomCoordinate);\n            sum+=texture2D(texture,curTopCoordinate);\n            sum_weight+=2.0;\n        }\n        \n        result = (sum+centerPixel)/sum_weight;\n        \n        gl_FragColor = result;\n    }\n",Ue="\n    precision mediump float;\n    uniform sampler2D texture1;\n    uniform sampler2D texture2;\n    uniform int type;\n    varying vec2 textureCoordinate;\n\n    vec4 avgBlurWithMul(sampler2D tex, sampler2D factorTex, bool oneMinusFactor)\n    {\n        float coefficient = 1.0;\n        vec4 avgValue = vec4(0.0);\n        vec4 coefficientSum = vec4(0);\n        \n                float factor = texture2D(factorTex, textureCoordinate).a;\n                if (oneMinusFactor) {\n                    factor = 1.0 - factor;\n                }\n                vec4 mergeFacotr = vec4(factor);\n                avgValue += texture2D(tex, textureCoordinate) * mergeFacotr * coefficient;\n                coefficientSum += coefficient;\n       \n        return avgValue / coefficientSum;\n    }\n\n    void main()\n    {   \n        vec4 color1 = texture2D(texture1, textureCoordinate);\n        vec4 color2 = texture2D(texture2, textureCoordinate);\n        // if (type == 1) {\n        //     gl_FragColor = avgBlurWithMul(texture1, texture2, false);//color1 * color2;\n        // } else if (type == 2) {\n        //     // todo:\n        //     // gl_FragColor = color1 / color2;\n        // } else if (type == 3) {\n        //     gl_FragColor = avgBlurWithMul(texture1, texture2, true);//color1 * (vec4(1.0)-color2);\n        // }  \n        \n        if (type == 1) {\n            gl_FragColor = mix(vec4(0.0,0.0,0.0,1.0), color1, color2.a);//avgBlurWithMul(texture1, texture2, false);//color1 * color2;\n        } else if (type == 2) {\n            // todo:\n            // gl_FragColor = color1 / color2;\n        } else if (type == 3) {\n            gl_FragColor = mix(vec4(0.0,0.0,0.0,1.0), color1, 1.0-color2.a);//avgBlurWithMul(texture1, texture2, true);//color1 * (vec4(1.0)-color2);\n        }  \n    }\n",ze="\n        attribute vec4 position;\n        attribute vec4 inputTextureCoordinate;\n        varying vec2 textureCoordinate;\n        void main() {\n            gl_Position=vec4(vec3(position) * u_scale, 1.0);\n            textureCoordinate = vec2((position.x+1.0)/2.0, 1.0-(position.y+1.0)/2.0);\n        }\n    ",We="\n    precision mediump float;\n    uniform sampler2D texture;\n    varying vec2 textureCoordinate;\n    void main()\n    {\n        gl_FragColor = texture2D(texture, textureCoordinate);\n    }\n";function Ke(t,e,r){if(e=t.createShader(e),t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;t.deleteShader(e)}function He(t,e,r){var n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS))return n;t.deleteProgram(n)}function Ye(t,e){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r}var Ve=[1,1,1,-1,-1,1,-1,-1];function Xe(t,e,r,n){return a(this,void 0,void 0,(function(){var o,i,a,u,s,l,f,d,h;return c(this,(function(c){switch(c.label){case 0:return o=Re(t,e),null==(i=o.getContext("webgl"))?[2,null]:(i.viewport(0,0,t,e),a=Ke(i,i.VERTEX_SHADER,Ne),u=Math.floor(Math.min(t,e)/4e3*90),u="precision highp float;\n        const int kernelSize = ".concat(u,";\n        ").concat(De),u=Ke(i,i.FRAGMENT_SHADER,u),s=He(i,a,u),l=Ye(i,r),f=Ye(i,n),i.useProgram(s),d=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,d),i.bufferData(i.ARRAY_BUFFER,new Float32Array(Ve),i.STATIC_DRAW),d=i.getAttribLocation(s,"position"),i.enableVertexAttribArray(d),i.vertexAttribPointer(d,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l),d=i.getUniformLocation(s,"texture"),i.uniform1i(d,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,f),d=i.getUniformLocation(s,"maskTexture"),i.uniform1i(d,1),d=i.getUniformLocation(s,"type"),i.uniform1i(d,0),d=i.getUniformLocation(s,"blurVectorX"),h=1/t,i.uniform2fv(d,[h,0]),d=i.getUniformLocation(s,"blurVectorY"),h=1/e,i.uniform2fv(d,[0,h]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(Re(100,100))]);case 1:return c.sent(),i.deleteProgram(s),i.deleteShader(u),i.deleteShader(a),i.deleteTexture(l),i.deleteTexture(f),[2,o]}}))}))}function qe(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){return[2,new Promise((function(e,r){var n=new Image;n.src=t.toDataURL("image/png"),n.onload=function(){e(n)}}))]}))}))}function $e(t,e,r,n){return a(this,void 0,void 0,(function(){var o,i,a,u,s,l,f,d,h,p,y,g,m,v,b,w,O,x,j,_,E,k;return c(this,(function(c){switch(c.label){case 0:return o=Re(t,e),null==(i=o.getContext("webgl"))?[2,null]:(i.viewport(0,0,t,e),a=Math.min(t,e)/501*1.1,u=Ke(i,i.VERTEX_SHADER,Ne),s=Ke(i,i.FRAGMENT_SHADER,Be),l=Ke(i,i.FRAGMENT_SHADER,Ge),f=Ke(i,i.FRAGMENT_SHADER,Ue),d=Ke(i,i.FRAGMENT_SHADER,Fe),h=He(i,u,s),p=He(i,u,l),y=He(i,u,f),g=He(i,u,d),m=Ye(i,r),v=Ye(i,n),O=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,O),i.bufferData(i.ARRAY_BUFFER,new Float32Array(Ve),i.STATIC_DRAW),i.useProgram(h),i.enableVertexAttribArray(i.getAttribLocation(h,"position")),i.vertexAttribPointer(i.getAttribLocation(h,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,v),i.uniform1i(i.getUniformLocation(h,"texture"),0),i.uniform1fv(i.getUniformLocation(h,"textureWidth"),[t]),i.uniform1fv(i.getUniformLocation(h,"textureHeight"),[e]),i.uniform1fv(i.getUniformLocation(h,"size"),[a]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)]);case 1:return b=c.sent(),w=Ye(i,b),i.useProgram(p),i.enableVertexAttribArray(i.getAttribLocation(p,"position")),i.vertexAttribPointer(i.getAttribLocation(p,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(i.getUniformLocation(p,"texture"),0),i.uniform1fv(i.getUniformLocation(p,"textureWidth"),[t]),i.uniform1fv(i.getUniformLocation(p,"textureHeight"),[e]),i.uniform1fv(i.getUniformLocation(p,"size"),[a]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)];case 2:return O=c.sent(),x=Ye(i,O),i.deleteTexture(w),i.useProgram(y),i.enableVertexAttribArray(i.getAttribLocation(y,"position")),i.vertexAttribPointer(i.getAttribLocation(y,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,m),i.uniform1i(i.getUniformLocation(y,"texture1"),0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,v),i.uniform1i(i.getUniformLocation(y,"texture2"),1),i.uniform1iv(i.getUniformLocation(y,"type"),[1]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)];case 3:return j=c.sent(),_=Ye(i,j),i.useProgram(h),i.enableVertexAttribArray(i.getAttribLocation(h,"position")),i.vertexAttribPointer(i.getAttribLocation(h,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,_),i.uniform1i(i.getUniformLocation(h,"texture"),0),i.uniform1fv(i.getUniformLocation(h,"textureWidth"),[t]),i.uniform1fv(i.getUniformLocation(h,"textureHeight"),[e]),i.uniform1fv(i.getUniformLocation(h,"size"),[a]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)];case 4:return b=c.sent(),w=Ye(i,b),i.deleteTexture(_),i.useProgram(p),i.enableVertexAttribArray(i.getAttribLocation(p,"position")),i.vertexAttribPointer(i.getAttribLocation(p,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(i.getUniformLocation(p,"texture"),0),i.uniform1fv(i.getUniformLocation(p,"textureWidth"),[t]),i.uniform1fv(i.getUniformLocation(p,"textureHeight"),[e]),i.uniform1fv(i.getUniformLocation(p,"size"),[a]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)];case 5:return j=c.sent(),_=Ye(i,j),i.deleteTexture(w),i.useProgram(y),i.enableVertexAttribArray(i.getAttribLocation(y,"position")),i.vertexAttribPointer(i.getAttribLocation(y,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,m),i.uniform1i(i.getUniformLocation(y,"texture1"),0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,v),i.uniform1i(i.getUniformLocation(y,"texture2"),1),i.uniform1iv(i.getUniformLocation(y,"type"),[3]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)];case 6:return E=c.sent(),k=Ye(i,E),i.useProgram(h),i.enableVertexAttribArray(i.getAttribLocation(h,"position")),i.vertexAttribPointer(i.getAttribLocation(h,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,k),i.uniform1i(i.getUniformLocation(h,"texture"),0),i.uniform1fv(i.getUniformLocation(h,"textureWidth"),[t]),i.uniform1fv(i.getUniformLocation(h,"textureHeight"),[e]),i.uniform1fv(i.getUniformLocation(h,"size"),[a]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)];case 7:return b=c.sent(),w=Ye(i,b),i.deleteTexture(k),i.useProgram(p),i.enableVertexAttribArray(i.getAttribLocation(p,"position")),i.vertexAttribPointer(i.getAttribLocation(p,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(i.getUniformLocation(p,"texture"),0),i.uniform1fv(i.getUniformLocation(p,"textureWidth"),[t]),i.uniform1fv(i.getUniformLocation(p,"textureHeight"),[e]),i.uniform1fv(i.getUniformLocation(p,"size"),[a]),i.drawArrays(i.TRIANGLE_STRIP,0,4),[4,qe(o)];case 8:return E=c.sent(),k=Ye(i,E),i.deleteTexture(w),i.useProgram(g),i.enableVertexAttribArray(i.getAttribLocation(g,"position")),i.vertexAttribPointer(i.getAttribLocation(g,"position"),2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,m),i.uniform1i(i.getUniformLocation(g,"texture"),0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,v),i.uniform1i(i.getUniformLocation(g,"maskTexture"),1),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,x),i.uniform1i(i.getUniformLocation(g,"blurred_alpha"),2),i.activeTexture(i.TEXTURE3),i.bindTexture(i.TEXTURE_2D,_),i.uniform1i(i.getUniformLocation(g,"blurred_FA"),3),i.activeTexture(i.TEXTURE4),i.bindTexture(i.TEXTURE_2D,k),i.uniform1i(i.getUniformLocation(g,"blurred_B1A"),4),i.drawArrays(i.TRIANGLE_STRIP,0,4),i.deleteProgram(h),i.deleteProgram(p),i.deleteProgram(y),i.deleteProgram(g),i.deleteShader(u),i.deleteShader(s),i.deleteShader(l),i.deleteShader(f),i.deleteShader(d),i.deleteTexture(m),i.deleteTexture(v),i.deleteTexture(x),i.deleteTexture(_),i.deleteTexture(k),[2,o]}}))}))}function Ze(t,e,r,n){return void 0===n&&(n=1),a(this,void 0,void 0,(function(){var o,i,a,u,s,l,f;return c(this,(function(c){return 1==n?[2,r]:(o=Re(a=t*n,u=e*n),null==(i=o.getContext("webgl"))?[2,null]:(s="precision highp float;\n        const float u_scale = ".concat(s=1/n,";\n        ").concat(ze),i.viewport(0,0,a,u),a=Ke(i,i.VERTEX_SHADER,s),u=Ke(i,i.FRAGMENT_SHADER,We),s=He(i,a,u),l=Ye(i,r),i.useProgram(s),f=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,f),i.bufferData(i.ARRAY_BUFFER,new Float32Array(Ve),i.STATIC_DRAW),f=i.getAttribLocation(s,"position"),i.enableVertexAttribArray(f),i.vertexAttribPointer(f,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l),f=i.getUniformLocation(s,"texture"),i.uniform1i(f,0),i.drawArrays(i.TRIANGLE_STRIP,0,4),i.deleteProgram(s),i.deleteShader(u),i.deleteShader(a),i.deleteTexture(l),[2,o]))}))}))}function Je(t,e,r,n,o){return void 0===o&&(o=1),a(this,void 0,void 0,(function(){var i,a,u,s,l,f,d,h,p,y,g,m,v,b,w,O,x,j,_,E,k,S;return c(this,(function(c){switch(c.label){case 0:return i=Re(t*=o,e*=o),null==(a=i.getContext("webgl"))?[2,null]:(a.viewport(0,0,t,e),u=Math.min(t,e)/501*1.1,s="precision highp float;\n        const float u_scale = ".concat(s=1/o,";\n        ").concat(ze),s=Ke(a,a.VERTEX_SHADER,s),l=Ke(a,a.FRAGMENT_SHADER,Be),f=Ke(a,a.FRAGMENT_SHADER,Ge),d=Ke(a,a.FRAGMENT_SHADER,Ue),h=Ke(a,a.FRAGMENT_SHADER,Fe),p=He(a,s,l),y=He(a,s,f),g=He(a,s,d),m=He(a,s,h),v=Ye(a,r),b=Ye(a,n),x=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,x),a.bufferData(a.ARRAY_BUFFER,new Float32Array(Ve),a.STATIC_DRAW),a.useProgram(p),a.enableVertexAttribArray(a.getAttribLocation(p,"position")),a.vertexAttribPointer(a.getAttribLocation(p,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,b),a.uniform1i(a.getUniformLocation(p,"texture"),0),a.uniform1fv(a.getUniformLocation(p,"textureWidth"),[t]),a.uniform1fv(a.getUniformLocation(p,"textureHeight"),[e]),a.uniform1fv(a.getUniformLocation(p,"size"),[u]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)]);case 1:return w=c.sent(),O=Ye(a,w),a.useProgram(y),a.enableVertexAttribArray(a.getAttribLocation(y,"position")),a.vertexAttribPointer(a.getAttribLocation(y,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,O),a.uniform1i(a.getUniformLocation(y,"texture"),0),a.uniform1fv(a.getUniformLocation(y,"textureWidth"),[t]),a.uniform1fv(a.getUniformLocation(y,"textureHeight"),[e]),a.uniform1fv(a.getUniformLocation(y,"size"),[u]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)];case 2:return x=c.sent(),j=Ye(a,x),a.deleteTexture(O),a.useProgram(g),a.enableVertexAttribArray(a.getAttribLocation(g,"position")),a.vertexAttribPointer(a.getAttribLocation(g,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,v),a.uniform1i(a.getUniformLocation(g,"texture1"),0),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,b),a.uniform1i(a.getUniformLocation(g,"texture2"),1),a.uniform1iv(a.getUniformLocation(g,"type"),[1]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)];case 3:return _=c.sent(),E=Ye(a,_),a.useProgram(p),a.enableVertexAttribArray(a.getAttribLocation(p,"position")),a.vertexAttribPointer(a.getAttribLocation(p,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,E),a.uniform1i(a.getUniformLocation(p,"texture"),0),a.uniform1fv(a.getUniformLocation(p,"textureWidth"),[t]),a.uniform1fv(a.getUniformLocation(p,"textureHeight"),[e]),a.uniform1fv(a.getUniformLocation(p,"size"),[u]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)];case 4:return w=c.sent(),O=Ye(a,w),a.deleteTexture(E),a.useProgram(y),a.enableVertexAttribArray(a.getAttribLocation(y,"position")),a.vertexAttribPointer(a.getAttribLocation(y,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,O),a.uniform1i(a.getUniformLocation(y,"texture"),0),a.uniform1fv(a.getUniformLocation(y,"textureWidth"),[t]),a.uniform1fv(a.getUniformLocation(y,"textureHeight"),[e]),a.uniform1fv(a.getUniformLocation(y,"size"),[u]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)];case 5:return _=c.sent(),E=Ye(a,_),a.deleteTexture(O),a.useProgram(g),a.enableVertexAttribArray(a.getAttribLocation(g,"position")),a.vertexAttribPointer(a.getAttribLocation(g,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,v),a.uniform1i(a.getUniformLocation(g,"texture1"),0),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,b),a.uniform1i(a.getUniformLocation(g,"texture2"),1),a.uniform1iv(a.getUniformLocation(g,"type"),[3]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)];case 6:return k=c.sent(),S=Ye(a,k),a.useProgram(p),a.enableVertexAttribArray(a.getAttribLocation(p,"position")),a.vertexAttribPointer(a.getAttribLocation(p,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,S),a.uniform1i(a.getUniformLocation(p,"texture"),0),a.uniform1fv(a.getUniformLocation(p,"textureWidth"),[t]),a.uniform1fv(a.getUniformLocation(p,"textureHeight"),[e]),a.uniform1fv(a.getUniformLocation(p,"size"),[u]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)];case 7:return w=c.sent(),O=Ye(a,w),a.deleteTexture(S),a.useProgram(y),a.enableVertexAttribArray(a.getAttribLocation(y,"position")),a.vertexAttribPointer(a.getAttribLocation(y,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,O),a.uniform1i(a.getUniformLocation(y,"texture"),0),a.uniform1fv(a.getUniformLocation(y,"textureWidth"),[t]),a.uniform1fv(a.getUniformLocation(y,"textureHeight"),[e]),a.uniform1fv(a.getUniformLocation(y,"size"),[u]),a.drawArrays(a.TRIANGLE_STRIP,0,4),[4,qe(i)];case 8:return k=c.sent(),S=Ye(a,k),a.deleteTexture(O),a.useProgram(m),a.enableVertexAttribArray(a.getAttribLocation(m,"position")),a.vertexAttribPointer(a.getAttribLocation(m,"position"),2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,v),a.uniform1i(a.getUniformLocation(m,"texture"),0),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,b),a.uniform1i(a.getUniformLocation(m,"maskTexture"),1),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,j),a.uniform1i(a.getUniformLocation(m,"blurred_alpha"),2),a.activeTexture(a.TEXTURE3),a.bindTexture(a.TEXTURE_2D,E),a.uniform1i(a.getUniformLocation(m,"blurred_FA"),3),a.activeTexture(a.TEXTURE4),a.bindTexture(a.TEXTURE_2D,S),a.uniform1i(a.getUniformLocation(m,"blurred_B1A"),4),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.deleteProgram(p),a.deleteProgram(y),a.deleteProgram(g),a.deleteProgram(m),a.deleteShader(s),a.deleteShader(l),a.deleteShader(f),a.deleteShader(d),a.deleteShader(h),a.deleteTexture(v),a.deleteTexture(b),a.deleteTexture(j),a.deleteTexture(E),a.deleteTexture(S),[2,i]}}))}))}}},r={},t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s="./src/index.ts");function t(n){var o;return(r[n]||(o=r[n]={i:n,l:!1,exports:{}},e[n].call(o.exports,o,o.exports,t),o.l=!0,o)).exports}var e,r},t.exports=n()},,function(t,e,r){"use strict";r.d(e,"a",(function(){return n.a})),r.d(e,"b",(function(){return o.a})),r.d(e,"n",(function(){return i.l})),r.d(e,"A",(function(){return i.z})),r.d(e,"h",(function(){return i.e})),r.d(e,"t",(function(){return i.s})),r.d(e,"p",(function(){return i.n})),r.d(e,"f",(function(){return i.c})),r.d(e,"s",(function(){return i.q})),r.d(e,"d",(function(){return i.a})),r.d(e,"q",(function(){return i.o})),r.d(e,"g",(function(){return i.d})),r.d(e,"y",(function(){return i.x})),r.d(e,"i",(function(){return i.f})),r.d(e,"u",(function(){return i.t})),r.d(e,"l",(function(){return i.i})),r.d(e,"x",(function(){return i.w})),r.d(e,"m",(function(){return i.k})),r.d(e,"z",(function(){return i.y})),r.d(e,"e",(function(){return i.b})),r.d(e,"r",(function(){return i.p})),r.d(e,"j",(function(){return i.g})),r.d(e,"v",(function(){return i.u})),r.d(e,"k",(function(){return i.h})),r.d(e,"w",(function(){return i.v})),r.d(e,"o",(function(){return i.m})),r.d(e,"c",(function(){return c}));var n=r(146),o=r(518),i=r(512),a=r(17),c=function(){var t=Object(a.b)((function(t){return t.sdk.operateManagerModel.destroy}));return{init:function(){t()}}}},function(t,e,r){"use strict";r(1061);var n=r(46),o=(r.d(e,"w",(function(){return n.a})),r.d(e,"x",(function(){return n.c})),r.d(e,"y",(function(){return n.d})),r.d(e,"z",(function(){return n.e})),r.d(e,"A",(function(){return n.f})),r.d(e,"B",(function(){return n.g})),r(2)),i=(r.d(e,"a",(function(){return o.h})),r.d(e,"b",(function(){return o.o})),r.d(e,"c",(function(){return o.u})),r(7));r.d(e,"d",(function(){return i.h})),r.d(e,"e",(function(){return i.t})),r.d(e,"f",(function(){return i.u})),r.d(e,"g",(function(){return i.z})),r.d(e,"h",(function(){return i.A})),r.d(e,"i",(function(){return i.E})),r.d(e,"j",(function(){return i.M})),r.d(e,"k",(function(){return i.O})),r.d(e,"l",(function(){return i.P})),r.d(e,"m",(function(){return i.W})),r.d(e,"n",(function(){return i.Y})),r.d(e,"o",(function(){return i.Z})),r.d(e,"p",(function(){return i.cb})),r.d(e,"q",(function(){return i.nb})),r.d(e,"r",(function(){return i.ob})),r.d(e,"s",(function(){return i.tb})),r.d(e,"t",(function(){return i.xb})),r.d(e,"u",(function(){return i.zb})),r.d(e,"v",(function(){return i.ec}))},function(t,e,r){"use strict";r.d(e,"e",(function(){return n.c})),r.d(e,"c",(function(){return n.a})),r.d(e,"i",(function(){return n.d})),r.d(e,"d",(function(){return n.b})),r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"g",(function(){return c})),r.d(e,"f",(function(){return u})),r.d(e,"h",(function(){return s.a}));var n=r(389),o=r(17),i=function(){return Object(o.d)((function(t){return t.sdk.historyManagerModel.canRedo}))},a=function(){return Object(o.d)((function(t){return t.sdk.historyManagerModel.canUndo}))},c=function(){return Object(o.d)((function(t){return t.sdk.historyManagerModel.onRedoOrUndo}))},u=function(){var t=Object(o.b)((function(t){return t.sdk.historyManagerModel.destroy}));return{init:function(){t()}}},s=r(382)},,function(t,e,r){"use strict";r.d(e,"g",(function(){return z})),r.d(e,"b",(function(){return _})),r.d(e,"d",(function(){return L})),r.d(e,"a",(function(){return E})),r.d(e,"e",(function(){return I})),r.d(e,"j",(function(){return R})),r.d(e,"i",(function(){return f.e})),r.d(e,"D",(function(){return f.A})),r.d(e,"h",(function(){return f.d})),r.d(e,"C",(function(){return f.z})),r.d(e,"f",(function(){return f.b})),r.d(e,"B",(function(){return f.y})),r.d(e,"k",(function(){return f.g})),r.d(e,"E",(function(){return f.B})),r.d(e,"t",(function(){return f.p})),r.d(e,"J",(function(){return f.G})),r.d(e,"u",(function(){return f.q})),r.d(e,"K",(function(){return f.I})),r.d(e,"v",(function(){return f.r})),r.d(e,"L",(function(){return f.J})),r.d(e,"p",(function(){return f.l})),r.d(e,"G",(function(){return f.D})),r.d(e,"z",(function(){return f.w})),r.d(e,"A",(function(){return f.x})),r.d(e,"n",(function(){return f.i})),r.d(e,"M",(function(){return f.K})),r.d(e,"l",(function(){return f.h})),r.d(e,"w",(function(){return f.s})),r.d(e,"r",(function(){return f.n})),r.d(e,"I",(function(){return f.F})),r.d(e,"y",(function(){return f.v})),r.d(e,"o",(function(){return f.k})),r.d(e,"F",(function(){return f.C})),r.d(e,"x",(function(){return f.u})),r.d(e,"q",(function(){return f.m})),r.d(e,"H",(function(){return f.E})),r.d(e,"c",(function(){return f.a})),r.d(e,"s",(function(){return f.o})),r.d(e,"N",(function(){return f.L})),r.d(e,"O",(function(){return f.M})),r.d(e,"m",(function(){return ft}));var n=r(20),o=(e=r(15),r.n(e)),i=r(139),a=r(24),c=r(10),u=r(34),s=r(2),l=r(7),f=r(111),d=r(52),h=(e=r(90),r.n(e)),p=(e=r(91),r.n(e)),y=(e=r(186),r.n(e)),g=r(19),m={particulars:{sharpen:1.5,structure:.8,vignette:1.3,particle:1.5,dispersion:2.5},light:{smartLightAlpha:1.5,brightness:1,contrast:2,highlight:1.5,shadow:1.5,fade:1.5},color:{saturation:1.2,temperature:1.2,tinge:1.2,hsl_hue:[1.5,1.5,1.5,1.5,1.5,1.5,1.5],hsl_saturation:[1.5,1.5,1.5,1.5,1.5,1.5,1.5],hsl_light:[1.5,1.5,1.5,1.5,1.5,1.5,1.5],posterize_light:1.2,posterize_shadow:1.2}};function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(){O=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==v(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,w(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function x(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){x(i,n,o,a,c,"next",t)}function c(t){x(i,n,o,a,c,"throw",t)}a(void 0)}))}}var _,E,k="Enhance",S="https://titan-h5.meitu.com/xiuxiu-pc/image-editor/filter/Enhance.zip",L=((e=_=_||{}).color="color",e.hsl="hsl",e.light="light",e.particulars="particulars",e.posterize="posterize",e.intelligentColor="intelligentColor",e.waterMark="watermark",e.aiEliminate="aiEliminate",new Set);function I(t){return T.apply(this,arguments)}function T(){return(T=j(O().mark((function t(e){var r,o;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.isDoEnhance,delete e.renderGLCanvas,delete e.isDoEnhance,r){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,n.enhanceGLBridge.getGLResult();case 7:r=t.sent,(o=r.canvas)&&(o=o.toDataURL(),e.data.url=u.a.getCode(o,Object(i.a)()));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=j(O().mark((function t(e,r){var o,i,a;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.P)(r);case 2:return a=t.sent,i=a.img,o=a.width,a=a.height,o=Object(n.createCanvas)(o,a,i),a=Object(l.F)(e),i=a.width,a=a.height,t.abrupt("return",Object(n.createCanvas)(i,a,o));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){var e,r=o()(t);for(e in r){if(!m[e])return;Object.prototype.hasOwnProperty.call(r,e)&&function(){var t,n=r[e];for(t in n)!function(t){var r,o;m[e][t]&&(Object.prototype.hasOwnProperty.call(n,t)&&(r=n[t],o=m[e][t],p()(r)?n[t]=r*o:h()(r)&&r.forEach((function(e,r){n[t][r]=e*o[r]}))))}(t)}()}return r}L.add(_.hsl),L.add(_.particulars),L.add(_.aiEliminate),(e=E=E||{}).BeforeUndo="enhance_event_before_undo",e.BeforeRedo="enhance_event_before_redo";var C=Symbol("enhanceAction"),R=function(){var t=Object(c.p)().getMainLayer,e=Object(c.w)().addOrUpdate,r=Object(a.e)(),i=Object(f.f)(),l=Object(f.H)(),d=Object(f.t)(),h=(Object(a.i)(C,{undo:function(t){var e=t.type,r=t.oldLayer;t=t.params;g.a.emit(E.BeforeUndo),g.a.emit("".concat(E.BeforeUndo).concat(e),{layer:r,args:t.oldArgs,values:t.old})},redo:function(t){var e=t.type,r=t.newLayer;t=t.params;g.a.emit(E.BeforeRedo),g.a.emit("".concat(E.BeforeRedo).concat(e),{layer:r,args:t.newArgs,values:t.new})}}),{doEnhance:function(t,r){return j(O().mark((function o(){var i,a,c,s,l;return O().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=t.data.url,a=JSON.stringify(r)+i,c=y.a.hashBinary(a),o.next=5,u.a.getLocalUrlAsync(c);case 5:if(o.sent===c)return o.next=9,M(t.id,i);o.next=23;break;case 9:return s=o.sent,o.next=12,n.enhanceBridge.from(s).doEnhance(k,S);case 12:return n.enhanceBridge.setParams(A(r)),o.next=15,n.enhanceBridge.getGLResult();case 15:if(s=o.sent,l=null==(l=s.canvas)?void 0:l.toDataURL())return o.next=21,u.a.getCode(l,a);o.next=23;break;case 21:o.sent;case 23:t.data.url=c,delete t.renderGLCanvas,delete t.isDoEnhance,e(t);case 28:case"end":return o.stop()}}),o)})))()},destroy:function(){return j(O().mark((function r(){var n;return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d(),n=o()(t()),r.next=4,I(n);case 4:e(n);case 5:case"end":return r.stop()}}),r)})))()},create:function(r){return j(O().mark((function i(){var a,c,u;return O().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=r||o()(t()),r&&(a.isDoEnhance=!0),l(a),c=a.data.url,i.next=6,M(a.id,c);case 6:return c=i.sent,i.next=9,n.enhanceGLBridge.from(c).create(k,S);case 9:return u=i.sent,a.renderGLCanvas=!0,e(a),i.abrupt("return",u);case 13:case"end":return i.stop()}}),i)})))()},reset:function(a,c){return j(O().mark((function u(){var s,l,f;return O().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(d(),s=function(){var t;return i((function(e){t=e})),t||null}()){u.next=4;break}return u.abrupt("return");case 4:return u.next=6,n.enhanceGLBridge.setParams(c.args);case 6:(l=o()(t())).isDoEnhance&&(f=o()(s),e(f),r.push(C,{type:a,oldLayer:l,newLayer:f,params:w({},c.extraData)}));case 8:case"end":return u.stop()}}),u)})))()},pushHistory:function(n,i){return j(O().mark((function a(){var c,u,l;return O().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=o()(t()),u=o()(c),L.has(n)&&(u.materialIds||(u.materialIds=new Map),(l=u.materialIds.get(s.o.FILTER))?l.includes(n)||l.push(n):u.materialIds.set(s.o.FILTER,[n])),u.isDoEnhance=!0,e(u),r.push(C,{type:n,oldLayer:c,newLayer:u,params:w({},i.extraData)});case 6:case"end":return a.stop()}}),a)})))()},action:function(t){return j(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.doGL(t.args);case 2:case"end":return e.stop()}}),e)})))()},doGL:function(t){return j(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.enhanceGLBridge.setParams(A(t));case 2:case"end":return e.stop()}}),e)})))()},addOrUpdate:function(t){e(t)}});return h};function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(){D=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==N(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function F(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function B(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){F(i,n,o,a,c,"next",t)}function c(t){F(i,n,o,a,c,"throw",t)}a(void 0)}))}}var G=Symbol("eliminateAction"),U=function(){var t=B(D().mark((function t(e,r){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","");case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),z=function(){function t(){var t;return y((function(e){t=e})),t||null}var e=Object(c.p)().getMainLayer,r=Object(c.w)().addOrUpdate,h=Object(a.e)(),p=Object(f.c)(),y=Object(f.f)(),g=Object(f.H)(),m=(Object(a.i)(G,{undo:function(t){var e=t.oldLayer;t=t.originLayer;p(),g(t),r(e)},redo:function(t){var e=t.newLayer;t=t.originLayer;p(),g(t),r(e)}}),{destroy:p,init:function(t){return null!=t&&t.customEliminate&&(U=null==t?void 0:t.customEliminate),t=o()(e()),g(t),t},reset:function(){var n,i,a=t();a&&(n=o()(e()),i=o()(a),n.data.url!==i.data.url)&&(r(i),h.push(G,{isEliminate:!0,originLayer:a,oldLayer:n,newLayer:i})),p(),m.init()},action:function(a,c){return B(D().mark((function f(){var p,y,g,v,b,w,O,x,j,E,k;return D().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(p=t()||m.init(),b=Object(l.F)(p.id),y=b.canvas,g=b.ctx,v=b.width,b=b.height,c===d.a.AI)return f.next=5,U(a,e());f.next=10;break;case 5:return w=f.sent,f.next=8,Object(l.zb)(w);case 8:f.next=19;break;case 10:return x=Object(n.createCanvas)(v,b,y),f.next=13,n.penBridge.from(x).eliminate(a);case 13:if((O=f.sent).canvas){f.next=16;break}return f.abrupt("return");case 16:null!=g&&g.drawImage(O.canvas,0,0),x=O.canvas.toDataURL(),w=u.a.getCode(x,Object(i.a)());case 19:j=o()(e()),(E=o()(j)).data.url=w,c===d.a.AI&&(E.materialIds||(E.materialIds=new Map),(k=E.materialIds.get(s.o.FUNC_LIST)||[]).push(_.aiEliminate),E.materialIds.set(s.o.FUNC_LIST,k)),r(E),h.push(G,{isEliminate:!0,type:c,originLayer:p,oldLayer:j,newLayer:E});case 25:case"end":return f.stop()}}),f)})))()}});return m},W=r(47),K=r(297),H=r(29),Y=r(22);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){var r,n,o,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return"string"==typeof t?q(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $(){$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==V(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Z(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function J(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Z(i,n,o,a,c,"next",t)}function c(t){Z(i,n,o,a,c,"throw",t)}a(void 0)}))}}var Q="Enhance",tt="https://titan-h5.meitu.com/xiuxiu-pc/image-editor/filter/Enhance.zip",et=Symbol("intelligentColor"),rt=_.intelligentColor,nt=[73/255,114/255,223/255,.7],ot=[73/255,114/255,223/255,.7];function it(){return at.apply(this,arguments)}function at(){return(at=J($().mark((function t(e,r){var n,o,i;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.P)(r);case 2:return i=t.sent,o=i.img,n=i.width,i=i.height,n=Object(l.t)(n,i,o),i=Object(l.F)(e),o=i.width,i=i.height,t.abrupt("return",Object(l.t)(o,i,n.canvas));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(t){var e=t.pickColors,r=t.hslPickColors,n=void 0!==(n=t.isHslSelectAll)&&n,o=t.color,i=t.maskCode;t=void 0===(t=t.pickFuzziness)?0:t,i={isHslSelectAll:+n,maskCode:void 0===i?"":i};return n?i.color=void 0===o?{}:o:(i.pickColors=e?e.split(",").map((function(t){return+t/255})):"",i.hslPickColors=r,i.pickFuzziness=[t]),i}var ut=function(){var t=J($().mark((function t(e,r){var n,o,i;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.P)(e);case 2:return o=t.sent,n=o.img,i=o.width,o=o.height,i=216/i,o=Object(l.t)(216,o*i,n),i=o.canvas,t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();function st(){return(st=J($().mark((function t(e){var r,o;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==e?void 0:e.isDoEnhance,null!=e&&delete e.renderGLCanvas,null!=e&&delete e.isDoEnhance,r){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,n.enhanceGLBridge.getGLResult();case 7:r=t.sent,(o=r.canvas)&&(o=o.toDataURL(),e.data.url=u.a.getCode(o,Object(i.a)()));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var lt={imageData:null,code:""},ft=function(){var t=Object(f.h)(),e=Object(f.F)(),r=Object(f.j)(),s=Object(f.E)(),d=Object(Y.k)(),h=Object(Y.w)(),p=Object(H.i)(),y=Object(f.D)(),m=Object(c.p)().getMainLayer,v=Object(c.w)().addOrUpdate,b=Object(a.e)(),w=Object(f.H)(),O=(Object(a.i)(et,{undo:function(t){d&&(n.maskSmearBridge.getFilterInstance()&&n.maskSmearBridge.destroy(),O.setSmearPenSize(W.g/2/p),y(W.g),h(!1)),t.type;var e=t.oldLayer;t=t.params;s(o()(t.old)),g.a.emit("".concat(E.BeforeUndo).concat(_.intelligentColor),{layer:o()(e),values:o()(t.old)})},redo:function(t){d&&(n.maskSmearBridge.getFilterInstance()&&n.maskSmearBridge.destroy(),y(W.g),O.setSmearPenSize(W.g/2/p),h(!1)),t.type;var e=t.params;t=t.newLayer;s(o()(e.new)),g.a.emit(E.BeforeRedo),g.a.emit("".concat(E.BeforeRedo).concat(_.intelligentColor),{layer:o()(t),values:o()(e.new)})}}),{create:function(t){return J($().mark((function e(){var r,i,a;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||o()(m()),t&&(r.isDoEnhance=!0),w(r),i=r.data.url,e.next=6,it(r.id,i);case 6:return i=e.sent,e.next=9,n.enhanceGLBridge.from(i.canvas).create(Q,tt);case 9:return a=e.sent,r.renderGLCanvas=!0,O.setHslMode(1),v(r),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))()},destroy:function(){return J($().mark((function t(){var e;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o()(m()),n.maskSmearBridge.enableRenderToView(!1,!1),t.next=4,n.enhanceGLBridge.getManager();case 4:return t.sent.processRender(!0),t.next=8,function(){return st.apply(this,arguments)}(e);case 8:return v(e),t.next=11,O.reset();case 11:case"end":return t.stop()}}),t)})))()},reset:function(){return J($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.setHslMode(0),O.setSmearPenSize(W.g/2/p),O.stopSmear(),r();case 4:case"end":return t.stop()}}),t)})))()},initIntelligentColors:function(){return J($().mark((function e(){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.enhanceGLBridge.imageDetec();case 2:r=e.sent,t(Object(K.a)(r));case 4:case"end":return e.stop()}}),e)})))()},setHslMode:function(t){return J($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.enhanceGLBridge.setHSLMode(t),n.enhanceBridge.setHSLMode(t);case 2:case"end":return e.stop()}}),e)})))()},createMask:function(t){return J($().mark((function e(){var r,o,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.enhanceBridge.getManager();case 2:return r=e.sent,e.next=5,n.maskSmearBridge.setManager(r,!1).create();case 5:t&&(r=t.width,o=t.height,i=t.imagedata,n.maskSmearBridge.setMaskData(i,r,o));case 6:case"end":return e.stop()}}),e)})))()},applyEnhance:function(t,e){return J($().mark((function r(){var o,a,c,s;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.data.url,o=ct(e),r.next=4,it(t.id,a);case 4:return a=r.sent,c=a.canvas,r.next=8,n.enhanceBridge.from(c).doEnhance(Q,tt);case 8:if(O.setHslMode(1),e.maskCode)return r.next=12,O.doMask(e.maskCode);r.next=12;break;case 12:return n.enhanceBridge.setParams(o),r.next=15,n.enhanceBridge.getGLResult();case 15:c=r.sent,(s=c.canvas)&&(s=s.toDataURL(),t.data.url=u.a.getCode(s,Object(i.a)())),O.setHslMode(0),null!=t&&delete t.renderGLCanvas,null!=t&&delete t.isDoEnhance,n.maskSmearBridge.destroy(),v(t);case 24:case"end":return r.stop()}}),r)})))()},action:function(t){return J($().mark((function e(){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ct(t),e.next=3,n.enhanceGLBridge.setParams(r);case 3:case 4:case"end":return e.stop()}}),e)})))()},doGlMask:function(t){return J($().mark((function e(){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.enhanceGLBridge.getManager();case 3:if(r=e.sent,n.maskSmearBridge.getFilterInstance()){e.next=8;break}return e.next=8,n.maskSmearBridge.setManager(r,!1).create();case 8:return e.next=10,n.enhanceGLBridge.startSmear(n.maskSmearBridge.getFilterInstance());case 10:return O.setMaskColor(),O.setFilterMaskColor(),n.maskSmearBridge.enableRenderToView(!1,!1),r.processRender(!0),e.next=16,O.setMaskData(t||"");case 16:n.maskSmearBridge.enableRenderToView(!0,!0),r.processRender(!0);case 19:case"end":return e.stop()}}),e)})))()},doMask:function(t){return J($().mark((function e(){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.enhanceBridge.getManager();case 3:if(r=e.sent,n.maskSmearBridge.getFilterInstance()){e.next=8;break}return e.next=8,n.maskSmearBridge.setManager(r,!1).create();case 8:return e.next=10,n.enhanceBridge.startSmear(n.maskSmearBridge.getFilterInstance());case 10:return O.setMaskColor(),O.setFilterMaskColor(),n.maskSmearBridge.enableRenderToView(!1,!1),r.processRender(!0),e.next=16,O.setMaskData(t||"");case 16:r.processRender(!0);case 18:case"end":return e.stop()}}),e)})))()},startSmear:function(){return J($().mark((function t(){var e;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.enhanceGLBridge.getManager();case 2:e=t.sent,n.maskSmearBridge.setManager(e,!1).create().then((function(){n.enhanceGLBridge.startSmear(n.maskSmearBridge.getFilterInstance()),O.setMaskColor(),O.setSmearPenSize(W.g/2/p),O.setFilterMaskColor()}));case 4:case"end":return t.stop()}}),t)})))()},getMaskData:function(){return J($().mark((function t(){var e;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,n.maskSmearBridge.getMaskData();case 3:if(e=t.sent)return o=c=a=o=void 0,o=(r=e).width,i=r.height,r=r.imagedata,(a=document.createElement("canvas")).width=o,a.height=i,o=null==(c=a.getContext("2d"))?void 0:c.createImageData(o,i),r&&o&&(o.data.set(r),null!=c)&&c.putImageData(o,0,0),e=a.toDataURL(),t.next=8,u.a.getCode(e);t.next=11;break;case 8:return e=t.sent,t.abrupt("return",e);case 11:return t.abrupt("return","");case 12:case"end":return t.stop()}var r,o,i,a,c}),t)})))()},setMaskData:function(t){return J($().mark((function e(){var r,o,i,a,c,s;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.abrupt("return");case 3:if(t===lt.code)return r=(c=lt.imageData).data,o=c.width,c=c.height,e.next=8,n.maskSmearBridge.setMaskData(r,o,c);e.next=9;break;case 8:return e.abrupt("return");case 9:return e.next=11,u.a.getRemoteUrlAsync(t);case 11:return r=e.sent,e.next=14,Object(l.P)(r);case 14:return o=e.sent,i=o.width,a=o.height,c=o.img,s=(s=(s=Object(l.t)(i,a,c)).ctx).getImageData(0,0,i,a).data,e.next=22,n.maskSmearBridge.setMaskData(s,i,a);case 22:lt.imageData={data:s,width:i,height:a},lt.code=t;case 25:case"end":return e.stop()}}),e)})))()},setMaskColor:function(){return J($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.enhanceGLBridge.setMaskColor(nt);case 1:case"end":return t.stop()}}),t)})))()},setSmearPenSize:function(t){return J($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.enhanceGLBridge.setMaskPenSize(t);case 1:case"end":return e.stop()}}),e)})))()},setFilterMaskColor:function(){return J($().mark((function t(){var e,r,o,i;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=ot[0],r=ot[1],o=ot[2],i=ot[3],t.next=3,n.maskSmearBridge.setMaskColor(e,r,o,i);case 3:case"end":return t.stop()}}),t)})))()},setEraserType:function(){return J($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.maskSmearBridge.setMaskSmearMode(1);case 1:case"end":return t.stop()}}),t)})))()},setPenType:function(){return J($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.maskSmearBridge.setMaskSmearMode(0);case 1:case"end":return t.stop()}}),t)})))()},resetMask:function(){return J($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.maskSmearBridge.reset();case 1:case"end":return t.stop()}}),t)})))()},stopSmear:function(){return J($().mark((function t(){return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.setSmearPenSize(W.g/2/p),n.maskSmearBridge.destroy();case 2:case"end":return t.stop()}}),t)})))()},pushHistory:function(t){return J($().mark((function e(){var r,n;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o()(m()),(n=o()(r)).isDoEnhance=!0,v(n),b.push(et,{isIntelligent:!0,type:rt,oldLayer:r,newLayer:n,params:t});case 5:case"end":return e.stop()}}),e)})))()},applyEnhanceAndPushHistory:function(t,e){return J($().mark((function r(){return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O.action(o()(t));case 2:O.pushHistory(o()(e));case 3:case"end":return r.stop()}}),r)})))()},getHSLFromColors:function(t,e){return J($().mark((function r(){var o;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.enhanceGLBridge.getHSLFromColors(t.split(",").map((function(t){return+t/255})),e.split(",").map((function(t){return+t/255})));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},getColorPreviewData:function(t,e,r){var o=arguments;return J($().mark((function r(){var i,a;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=ct({pickColors:t,hslPickColors:e,isHslSelectAll:3<o.length&&void 0!==o[3]&&o[3],color:4<o.length&&void 0!==o[4]?o[4]:{}}),n.enhanceBridge.setParams(i),r.next=6,n.enhanceBridge.getGLResult();case 6:return i=r.sent,a=i.canvas,r.abrupt("return",(null==a?void 0:a.toDataURL())||"");case 9:case"end":return r.stop()}}),r)})))()},renderIntelligentPreview:function(t){return J($().mark((function r(){var o,i,a,c,u,s,l;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=1,o=[],(i=(i=m()).data).url){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,ut(i.url,216);case 9:return a=r.sent,r.next=12,n.enhanceBridge.from(a).doEnhance(Q,tt);case 12:n.enhanceBridge.setHSLMode(1),(c=n.maskSmearBridge.getFilterInstance())&&n.enhanceBridge.startSmear(c),n.maskSmearBridge.enableRenderToView(!1,!1),c=X(W.b),r.prev=17,c.s();case 19:if((u=c.n()).done){r.next=30;break}return u=u.value,r.next=23,O.getHSLFromColors(t,u);case 23:return s=r.sent,r.next=26,O.getColorPreviewData(t,s,a);case 26:l=r.sent,o.push({url:l,hslPickColors:s,pickColors:t,color:u,fuzziness:0});case 28:r.next=19;break;case 30:r.next=35;break;case 32:r.prev=32,r.t0=r.catch(17),c.e(r.t0);case 35:return r.prev=35,c.f(),r.finish(35);case 38:return o.unshift({url:a.toDataURL(),hslPickColors:[0,0,0],pickColors:"",color:"",fuzziness:0}),e(o),n.maskSmearBridge.enableRenderToView(!0,!1),r.next=43,n.enhanceBridge.stopSmear(n.maskSmearBridge.getFilterInstance());case 43:n.enhanceBridge.destroy(),r.next=50;break;case 47:r.prev=47,r.t1=r.catch(1);case 50:case"end":return r.stop()}}),r,null,[[1,47],[17,32,35,38]])})))()},renderAllIntelligentPreview:function(t){return J($().mark((function r(){var o,i,a,c,u,s,l,f;return $().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=1,o=[],(i=(i=m()).data).url){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,ut(i.url,216);case 9:return a=r.sent,r.next=12,n.enhanceBridge.from(a).doEnhance(Q,tt);case 12:if(n.enhanceBridge.setHSLMode(1),(u=n.maskSmearBridge.getFilterInstance())&&n.enhanceBridge.startSmear(u),t)return r.next=18,O.setMaskData(t);r.next=20;break;case 18:r.next=23;break;case 20:if(""===t)return r.next=23,O.resetMask();r.next=23;break;case 23:n.maskSmearBridge.enableRenderToView(!1,!1),c=X(W.a),r.prev=25,c.s();case 27:if((u=c.n()).done){r.next=37;break}return s=u.value,f=Object(K.b)(s),l=Object(K.c)(s),r.next=33,O.getColorPreviewData("",[],a,!0,f);case 33:f=r.sent,o.push({url:f,hslPickColors:l,pickColors:"",color:s});case 35:r.next=27;break;case 37:r.next=42;break;case 39:r.prev=39,r.t0=r.catch(25),c.e(r.t0);case 42:return r.prev=42,c.f(),r.finish(42);case 45:return o.unshift({url:a.toDataURL(),hslPickColors:[0,0,0],pickColors:"",color:""}),e(o),n.maskSmearBridge.enableRenderToView(!0,!1),r.next=50,n.enhanceBridge.stopSmear(n.maskSmearBridge.getFilterInstance());case 50:n.enhanceBridge.destroy(),r.next=56;break;case 53:r.prev=53,r.t1=r.catch(1);case 56:case 57:case"end":return r.stop()}}),r,null,[[1,53],[25,39,42,45]])})))()}});return O}},function(t,e,r){"use strict";r.d(e,"r",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"q",(function(){return s})),r.d(e,"j",(function(){return l})),r.d(e,"l",(function(){return f})),r.d(e,"f",(function(){return d})),r.d(e,"g",(function(){return h})),r.d(e,"k",(function(){return p})),r.d(e,"o",(function(){return m})),r.d(e,"p",(function(){return v})),r.d(e,"d",(function(){return b})),r.d(e,"e",(function(){return w})),r.d(e,"m",(function(){return O})),r.d(e,"n",(function(){return x})),r.d(e,"h",(function(){return j})),r.d(e,"i",(function(){return _})),r.d(e,"a",(function(){return E})),r.d(e,"b",(function(){return k}));var n=function(t){return/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t)},o=function(t){return t&&128<=(299*(t=E(t)).rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3?"#000":"#fff"};function i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?u(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=function(t){var e=t.r,r=t.g,n=t.b,o=(t=t.a,Math.max(e,r,n)),i=o-Math.min(e,r,n);return{h:60*((n=i?o===e?(r-n)/i:o===r?2+(n-e)/i:4+(e-r)/i:0)<0?6+n:n),s:o?i/o*100:0,v:o/255*100,a:t}},l=function(t){var e=(t=p(t)).h,r=t.s;t=t.l;return"hsl(".concat(e,", ").concat(Math.round(r),"%, ").concat(Math.round(t),"%)")},f=function(t){var e=(t=p(t)).h,r=t.s,n=t.l;t=t.a;return"hsla(".concat(e,", ").concat(r,"%, ").concat(n,"%, ").concat(t,")")},d=function(t){return(t=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t))?h({h:g(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},h=function(t){var e=t.h,r=t.s,n=t.l;return{h:e,s:0<(r*=(n<50?n:100-n)/100)?2*r/(n+r)*100:0,v:n+r,a:t.a}},p=function(t){var e=t.h,r=t.s,n=t.v,o=(200-r)*n/100;return{h:e,s:0<o&&o<200?r*n/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a}},y={grad:.9,turn:360,rad:360/(2*Math.PI)},g=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"deg";return Number(t)*(y[e]||1)},m=function(t){t=t.r<<16|t.g<<8|t.b;return"#".concat((t=t.toString(16),new Array(7-t.length).join("0")+t))},v=function(t){var e=t.r,r=t.g,n=t.b,o="number"==typeof(t=t.a)&&(255*t|256).toString(16).slice(1);return"".concat(m({r:e,g:r,b:n,a:t})).concat(o||"")},b=function(t){return s(w(t))},w=function(t){var e=t.replace("#",""),r=(e=(/^#?/.test(t)&&3===e.length&&(t="#".concat(e.charAt(0)).concat(e.charAt(0)).concat(e.charAt(1)).concat(e.charAt(1)).concat(e.charAt(2)).concat(e.charAt(2))),new RegExp("[A-Za-z0-9]{2}","g")),e=(t=c(t.match(e).map((function(t){return parseInt(t,16)})),4))[0],t[1]),n=t[2];return{r:e,g:r,b:void 0===n?0:n,a:(t=t[3])?t/255:1}},O=function(t){var e=t.h,r=t.s,n=t.v,o=(t=t.a,e=e/60,r=r/100,n/100),i=(n=Math.floor(e)%6,255*o*(1-r)),c=255*o*(1-r*(e=e-Math.floor(e))),u=255*o*(1-r*(1-e)),s=(o*=255,{});switch(n){case 0:s.r=o,s.g=u,s.b=i;break;case 1:s.r=c,s.g=o,s.b=i;break;case 2:s.r=i,s.g=o,s.b=u;break;case 3:s.r=i,s.g=c,s.b=o;break;case 4:s.r=u,s.g=i,s.b=o;break;case 5:s.r=o,s.g=i,s.b=c}return s.r=Math.round(s.r),s.g=Math.round(s.g),s.b=Math.round(s.b),a(a({},s),{},{a:t})},x=function(t){var e=(t=O(t)).r,r=t.g,n=t.b;t=t.a;return"rgba(".concat(e,", ").concat(r,", ").concat(n,", ").concat(t,")")},j=function(t){return m(O(t))},_=function(t){return v(O(t))},E=function(t){var e,r,o,i,a,u,l,f,d,h,y;return"string"==typeof t&&n(t)?(f=b(t),u=t):"string"==typeof t&&t.includes("rgb(")?(y=(d=c((null==(d=t.match(/\d{1,3}/g))?void 0:d.map((function(t){return Number(t)})))||[0,0,0],3))[0],h=d[1],d=d[2],f=s({r:y,g:h,b:d,a:1})):"string"!=typeof t&&(f=t),f&&(o={h:(y=f).h,s:y.s,v:y.v},a=p(f),i=O(f),l=v(i),u=j(f),r={h:(h=a).h,s:h.s,l:h.l},e={r:(d=i).r,g:d.g,b:d.b}),{rgb:e,hsl:r,hsv:o,rgba:i,hsla:a,hsva:f,hex:u,hexa:l}},k=function(t){var e,r,o,i;return"string"==typeof t?t?n(t)?t:(o=Number(((null==t?void 0:t.match(/((-)?\d+)deg/))||["","90"])[1]),t.includes("rgba")?{colors:(null==t||null==(i=t.match(/rgba.*?\%/g))||null==(i=i.map((function(t){var e=(t=c(t.match(/\d{1,3}/g).map(Number),5))[0],r=t[1],n=t[2],o=t[3];t=t[4];return{color:v({r:e,g:r,b:n,a:o}),value:t/100}})))?void 0:i.sort((function(t,e){return t.value-e.value})))||[],angle:o}:t.includes("#")?{colors:(null==t||null==(i=t.match(/#.*?%/g))?void 0:i.map((function(t){return{color:(t.match(/#\w{6,8}/g)||[""])[0],value:Number((t.match(/\s.*[%]$/)||["0%"])[0].replace("%",""))/100}})))||[],angle:o}:""):"":(e="",i=t.colors,r=void 0===i?[]:i,i=void 0===(o=t.angle)?90:o,null!=r&&r.sort((function(t,e){return t.value-e.value})).forEach((function(t,n){var o=t.color;t=t.value;e+="".concat(o," ").concat(100*t,"%").concat(n===r.length-1?"":",")})),"linear-gradient(".concat(i,"deg, ").concat(e,")"))}},,function(t,e,r){"use strict";var n=r(276),o=(r.d(e,"b",(function(){return n.a})),r.d(e,"c",(function(){return n.b})),r.d(e,"d",(function(){return n.c})),r.d(e,"e",(function(){return n.d})),r.d(e,"f",(function(){return n.e})),r.d(e,"g",(function(){return n.f})),r.d(e,"h",(function(){return n.g})),r.d(e,"i",(function(){return n.h})),r.d(e,"j",(function(){return n.i})),r.d(e,"k",(function(){return n.j})),r(203));r.d(e,"a",(function(){return o.c}))},,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return N})),r.d(e,"b",(function(){return E})),r.d(e,"c",(function(){return V}));e=r(186);var n=r.n(e),o=r(151),i=(e=r(200),r.n(e)),a=r(500);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,u){var s;if("throw"!==(o=l(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==c(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}));u(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return"string"!=typeof t?String(t):t}e="memoryDriver";var f=new Map;function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=l.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==d(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=p),a(p,"constructor",f),f.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,c,"next",t)}function c(t){p(i,n,o,a,c,"throw",t)}a(void 0)}))}}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.a.defineDriver({_driver:e,_support:!0,_initStorage:function(t){return Promise.resolve()},key:function(t,e){var r=this;return new Promise(function(){e=u().mark((function e(n,o){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.keys();case 2:i=e.sent,n(i[t]);case 4:case"end":return e.stop()}}),e)}));var e,n=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(t,e){return n.apply(this,arguments)}}())},keys:function(t){return new Promise((function(t,e){var r=[];f.forEach((function(t,e){r.push(e)})),t(r)}))},length:function(t){return new Promise((function(t,e){t(f.size)}))},getItem:function(t,e){return t=l(t),new Promise((function(e,r){f.has(t)?e(f.get(t)):e(null)}))},setItem:function(t,e,r){return t=l(t),new Promise((function(r,n){f.set(t,e),r(e)}))},removeItem:function(t,e){return t=l(t),new Promise((function(e,r){f.has(t)&&f.delete(t),e()}))},clear:function(t){return new Promise((function(t,e){f.clear(),t()}))},iterate:function(t,e){return new Promise((function(e,r){e(t)}))}});e=new(function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=void 0,this.initStore=!1}var e,r,n,o,c,u,s,l,f,d;return e=t,(r=[{key:"createStorage",value:function(t){return this.store=i.a.createInstance({name:a.name,storeName:t,driver:[i.a.INDEXEDDB,"memoryDriver"]}),this}},{key:"drop",value:function(t){return i.a.dropInstance({name:a.name,storeName:t}).then((function(){}))}},{key:"driver",value:function(){return this.store.driver()}},{key:"key",value:(d=y(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.store.key(e));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"keys",value:(f=y(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.store.keys());case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"length",value:(l=y(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.store.length());case 3:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getItem",value:(s=y(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.store.getItem(e));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"setItem",value:(u=y(h().mark((function t(e,r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.store.setItem(e,r));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"removeItem",value:(c=y(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:return t.abrupt("return",this.store.removeItem(e));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"clear",value:(o=y(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.store.clear());case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"init",value:(n=y(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initStore){t.next=4;break}return t.next=3,this.store.clear();case 3:this.initStore=!0;case 4:return t.abrupt("return",this.initStore);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}])&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());var m=new Date,v="".concat(m.getFullYear(),"/").concat(m.getMonth()+1,"/").concat(m.getDate()),b=(m="".concat(m.getHours(),":").concat(m.getMinutes(),":").concat(m.getSeconds(),".").concat(m.getMilliseconds()),window.location.pathname.replace(/\//g,""));v="".concat(v," ").concat(m,"-").concat(b);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(){O=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==w(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function x(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){x(i,n,o,a,c,"next",t)}function c(t){x(i,n,o,a,c,"throw",t)}a(void 0)}))}}var _=(m=(e.createStorage(v).clear(),{instance:e,localForageNameKey:"localForage-image-editor",localForageStoreName:v})).instance,E={setItemAsync:function(t,e){return j(O().mark((function r(){return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",_.setItem(t,e));case 1:case"end":return r.stop()}}),r)})))()},getItemAsync:function(t){return j(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.getItem(t));case 1:case"end":return e.stop()}}),e)})))()},getKeysAsync:function(){return j(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.keys();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},clearAsync:function(){return j(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.clear();case 2:case"end":return t.stop()}}),t)})))()}};function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(){S=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==k(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function L(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){L(i,n,o,a,c,"next",t)}function c(t){L(i,n,o,a,c,"throw",t)}a(void 0)}))}}function T(t){return/^https{0,1}:/i.test(t)}function M(t){return 32===t.length}var P=new Map,A=new Map,C=function(){var t=I(S().mark((function t(e,r){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.setItemAsync(e,r);case 2:return t.next=4,N.uploadImgAsync(e,r);case 4:A.delete(e);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),R=new Map,N={setFont:function(t,e,r){R.set(t,{base64:e,isWoff2:r})},getFont:function(t){return R.get(t)},getRemoteUrl:function(t){return T(t)?t:P.get(t)||""},getRemoteUrlAsync:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return new Promise((function(r){(T(t)?r:function t(n){var o=P.get(n);o?r(o):setTimeout((function(){t(n)}),e)})(t)}))},uploadImgAsync:function(t,e){return I(S().mark((function r(){var n;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",t);case 2:if(T(t))return r.abrupt("return",t);r.next=4;break;case 4:if(M(t)){r.next=6;break}return r.abrupt("return",t);case 6:if(P.get(t)){r.next=22;break}return r.prev=7,r.next=11,Object(o.c)(e);case 11:return n=r.sent,P.set(t,n.url),r.abrupt("return",n.url);case 17:r.prev=17,r.t0=r.catch(7);case 20:r.next=23;break;case 22:return r.abrupt("return",P.get(t));case 23:case"end":return r.stop()}}),r,null,[[7,17]])})))()},getCode:function(t,e){var r;return t&&(T(t)||M(t)?t:("",r=e?n.a.hashBinary(e):n.a.hashBinary(t),A.get(r)||P.get(r)||(A.set(r,t),C(r,t)),r))},saveCodeAsync:function(t,e){return I(S().mark((function r(){return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.setItemAsync(t,e);case 2:return r.abrupt("return",!0);case 3:case"end":return r.stop()}}),r)})))()},getLocalUrlAsync:function(t){return I(S().mark((function e(){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(t)){e.next=3;break}return e.abrupt("return",t);case 3:if(r=A.get(t))return e.abrupt("return",r);e.next=8;break;case 8:return e.next=12,E.getItemAsync(t);case 12:if(r=e.sent)return e.abrupt("return",r);e.next=16;break;case 16:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e)})))()}},D=r(0);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(){B=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==F(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function G(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var U=m.instance,z=m.localForageNameKey,W={localForageStoreName:m.localForageStoreName,getInvalidLocalForageStoreNames:function(){var t=window.localStorage.getItem(z),e=[];if(t)try{e=JSON.parse(t),Array.isArray(e)||(e=[])}catch(t){e=[]}return e},setLocalForageStoreNames:function(t){t.length?window.localStorage.setItem(z,JSON.stringify(t)):window.localStorage.removeItem(z)},dropTable:function(t){return e=B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.drop(t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){G(i,n,o,a,c,"next",t)}function c(t){G(i,n,o,a,c,"throw",t)}a(void 0)}))}();var e}};function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(){H=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==K(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var V=function(){function t(){var t=W.getInvalidLocalForageStoreNames();t.push(W.localForageStoreName),W.setLocalForageStoreNames(t)}var e=function(){t=H().mark((function t(){var e,r,n;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=W.getInvalidLocalForageStoreNames(),r=0;case 2:if(r<e.length)return n=e[r],t.next=6,W.dropTable(n);t.next=9;break;case 6:r++,t.next=2;break;case 9:W.setLocalForageStoreNames([]);case 10:case"end":return t.stop()}}),t)}));var t,e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Y(i,n,o,a,c,"next",t)}function c(t){Y(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(){return e.apply(this,arguments)}}();Object(D.useEffect)((function(){return window.addEventListener("load",e,!1),window.addEventListener("unload",t,!1),function(){window.removeEventListener("load",e,!1),window.removeEventListener("unload",t,!1)}}),[])}},,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return o})),(r=n=n||{}).undo="undo",r.redo="redo",r.delete="delete",r.cut="cut",r.copy="copy",r.paste="paste",r.left="left",r.right="right",r.up="up",r.down="down",r.makeGroup="makeGroup",r.brokeGroup="brokeGroup",r.selectAll="selectAll",r.select="select",r.lock="lock",r.sortUp="sortUp",r.sortDown="sortDown",r.sortTop="sortTop",r.sortBottom="sortBottom",r.save="save",r.saveRecord="saveRecord",r.move="move",r.scale="scale";var n,o=[{key:n.undo,name:"\u64a4\u9500",win:"Ctrl + Z",mac:"\u2318 + Z",press:["Ctrl+Z","Command+Z"],winMenu:"Ctrl Z",macMenu:"\u2318 Z"},{key:n.redo,name:"\u91cd\u505a",win:"Shift + Ctrl + Z",mac:"\u21e7 + \u2318 + Z",press:["Shift+Ctrl+Z","Shift+Command+Z","Ctrl+y","Command+y"],winMenu:"Shift Ctrl Z",macMenu:"\u21e7 \u2318 Z"},{name:"\u5220\u9664",win:"Delete/Backspace",mac:"Delete",key:n.delete,press:["Delete","Backspace"],winMenu:"DEL",macMenu:"DEL"},{name:"\u526a\u5207",win:"Ctrl + X",mac:"\u2318 + X",key:n.cut,press:["Ctrl+X","Command+X"],winMenu:"Ctrl X",macMenu:"\u2318 X"},{name:"\u590d\u5236",win:"Ctrl + C",mac:"\u2318 + C",key:n.copy,press:[],winMenu:"Ctrl C",macMenu:"\u2318 C"},{name:"\u7c98\u8d34",win:"Ctrl + V",mac:"\u2318 + V",key:n.paste,press:[],winMenu:"Ctrl V",macMenu:"\u2318 V"},{name:"\u5168\u9009",win:"Ctrl + A",mac:"\u2318 + A",key:n.selectAll,press:["Ctrl+A","Command+A"],winMenu:"Ctrl A",macMenu:"\u2318 A"},{name:"\u591a\u9009",win:"\u6309\u4e0b Ctrl/Alt\uff0c\u9f20\u6807\u70b9\u51fb\u56fe\u5c42",mac:"\u6309\u4e0b \u2318/\u2325\uff0c\u9f20\u6807\u70b9\u51fb\u56fe\u5c42",key:n.select,press:[],winMenu:"Ctrl/Alt",macMenu:"\u2318/\u2325"},{name:"\u6210\u7ec4",win:"Ctrl + G",mac:"\u2318 + G",key:n.makeGroup,press:["Ctrl+G","Command+G"],winMenu:"Ctrl G",macMenu:"\u2318 G"},{name:"\u89e3\u7ec4",win:"Shift + Ctrl + G",mac:"\u21e7 + \u2318 + G",key:n.brokeGroup,press:["Ctrl+Shift+G","Command+Shift+G"],winMenu:"Shift Ctrl G",macMenu:"\u21e7 \u2318 G"},{name:"\u89e3\u9501\u56fe\u5c42/\u9501\u5b9a\u56fe\u5c42",win:"Shift + Ctrl + L",mac:"\u21e7 + \u2318 + L",key:n.lock,press:["Command+Shift+L","Shift+Ctrl+L"],winMenu:"Shift Ctrl L",macMenu:"\u21e7 \u2318 L"},{name:"\u4fdd\u5b58\u8bb0\u5f55",win:"Shift + Ctrl + E",mac:"\u21e7 + \u2318 + E",key:n.saveRecord,press:["Command+Shift+E","Shift+Ctrl+E"],winMenu:"Shift Ctrl E",macMenu:"\u21e7 \u2318 E"},{name:"\u4fdd\u5b58/\u4e0b\u8f7d\u56fe\u7247",win:"Ctrl + S",mac:"\u2318 + S",key:n.save,press:["Ctrl+S","Command+S"],winMenu:"Ctrl S",macMenu:"\u2318 S"},{name:"\u79fb\u52a8 1 px",win:"\u65b9\u5411\u952e",mac:"\u65b9\u5411\u952e",key:n.move,press:["Up","Right","Down","Left"],winMenu:"\u65b9\u5411\u952e",macMenu:"\u65b9\u5411\u952e"},{name:"\u653e\u5927/\u7f29\u5c0f",win:"Ctrl + +/-",mac:"\u2318 + +/-",key:n.scale,press:["\u2318+-","Ctrl+-","\u2318++","Ctrl++"],winMenu:"\u65b9\u5411\u952e",macMenu:"\u65b9\u5411\u952e"},{name:"\u7f6e\u9876",win:"Shift + Ctrl + \u2191",mac:"\u21e7 + \u2318 + \u2191",key:n.sortTop,press:["Shift+Ctrl+Up","Shift+Command+Up"],winMenu:"Shift Ctrl \u2191",macMenu:"\u21e7 \u2318 \u2191"},{name:"\u7f6e\u5e95",win:"Shift + Ctrl + \u2193",mac:"\u21e7 + \u2318 + \u2193",key:n.sortBottom,press:["Shift+Ctrl+Down","Shift+Command+Down"],winMenu:"Shift Ctrl \u2193",macMenu:"\u21e7 \u2318 \u2193"},{name:"\u4e0a\u79fb\u4e00\u5c42",win:"Alt + Ctrl + \u2191",mac:"\u2325 + \u2318 + \u2191",key:n.sortUp,press:["Alt+Ctrl+Up","Option+Command+Up"],winMenu:"Alt Ctrl \u2191",macMenu:"\u2325 \u2318 \u2191"},{name:"\u4e0b\u79fb\u4e00\u5c42",win:"Alt + Ctrl + \u2193",mac:"\u2325 + \u2318 + \u2193",key:n.sortDown,press:["Alt+Ctrl+Down","Option+Command+Down"],winMenu:"Alt Ctrl \u2193",macMenu:"\u2325 \u2318 \u2193"}],i={};o.forEach((function(t){i[t.key]=t})),e.b=i},function(t,e,r){"use strict";r.d(e,"a",(function(){return g})),r.d(e,"m",(function(){return _})),r.d(e,"b",(function(){return z})),r.d(e,"j",(function(){return J})),r.d(e,"l",(function(){return at})),r.d(e,"n",(function(){return pt})),r.d(e,"o",(function(){return Et})),r.d(e,"f",(function(){return Nt})),r.d(e,"k",(function(){return Ce})),r.d(e,"s",(function(){return Re.b})),r.d(e,"t",(function(){return Re.d})),r.d(e,"w",(function(){return l.g})),r.d(e,"i",(function(){return l.b})),r.d(e,"r",(function(){return l.d})),r.d(e,"e",(function(){return l.a})),r.d(e,"y",(function(){return l.j})),r.d(e,"x",(function(){return l.h})),r.d(e,"I",(function(){return l.C})),r.d(e,"H",(function(){return l.B})),r.d(e,"J",(function(){return l.E})),r.d(e,"M",(function(){return l.J})),r.d(e,"N",(function(){return l.K})),r.d(e,"O",(function(){return l.L})),r.d(e,"G",(function(){return l.A})),r.d(e,"A",(function(){return l.n})),r.d(e,"D",(function(){return l.r})),r.d(e,"F",(function(){return l.y})),r.d(e,"B",(function(){return l.o})),r.d(e,"K",(function(){return l.F})),r.d(e,"C",(function(){return l.q})),r.d(e,"L",(function(){return l.H})),r.d(e,"E",(function(){return l.s})),r.d(e,"z",(function(){return l.m})),r.d(e,"h",(function(){return Lt.a})),r.d(e,"u",(function(){return Lt.e})),r.d(e,"v",(function(){return Lt.f})),r.d(e,"d",(function(){return qt})),r.d(e,"g",(function(){return ne})),r.d(e,"c",(function(){return ye})),r.d(e,"p",(function(){return de})),r.d(e,"q",(function(){return xe}));e=r(79);var n=r.n(e),o=(e=r(69),r.n(e)),i=(e=r(31),r.n(e)),a=r(34),c=r(2),u=r(7),s=r(210),l=r(26),f=r(20);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=l.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==d(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=p),a(p,"constructor",f),f.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,c,"next",t)}function c(t){p(i,n,o,a,c,"throw",t)}a(void 0)}))}}var g={onBeforeAddOrUpdate:function(t){(t=t.data).url=a.a.getCode(t.url)},onBeforeSaveAsync:function(t,e){return y(h().mark((function r(){var n,o,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.data,(o=Object(s.d)(t))&&Object(s.b)(t,o,!0),(o=Object(s.e)(t.id)).base64&&(n.url=a.a.getCode(o.base64,o.forceMd5)),f.maskSmearBridge.enableRenderToView(!1,!1),r.next=8,f.enhanceGLBridge.getManager();case 8:return(i=r.sent).processRender(!0),r.next=12,Object(l.e)(t);case 12:if(f.maskSmearBridge.enableRenderToView(!0,!1),i.processRender(!0),n.url){if(e)return r.next=18,a.a.getLocalUrlAsync(n.url);r.next=21}else r.next=24;break;case 18:n.url=r.sent,r.next=24;break;case 21:return r.next=23,a.a.getRemoteUrlAsync(n.url);case 23:n.url=r.sent;case 24:case"end":return r.stop()}}),r)})))()},getResultCanvasAsync:function(t,e){return y(h().mark((function e(){var r,s,l,f,d,p,y,g,m,v,b,w,O,x,j,_,E,k,S;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=t.width,b=t.height,w=t.left,O=t.top,r=t.opacity,s=t.rotate,p=t.data,l=p.url,m=p.imageTransform,f=m.flipH,d=m.flipV,m=m.scale,y=p.naturalHeight,p=p.naturalWidth,p=i()(p),y=i()(y),g=i()(p*m),m=i()(y*m),v=i()(v),b=i()(b),w={x:g/2+w,y:m/2+O},e.next=11,a.a.getRemoteUrlAsync(l);case 11:if(O=document.getElementById("".concat(c.e).concat(t.id)),"false"===(x=O).getAttribute("ready"))return e.next=16,Object(u.zb)(l);e.next=17;break;case 16:x=e.sent;case 17:return e.next=19,Object(u.x)(p,y,f,d,r);case 19:return k=e.sent,S=k.canvas,k.ctx.drawImage(x,0,0,x.width,x.height,0,0,p,y),k=Object(u.t)(g,m),j=k.canvas,k.ctx.drawImage(S,0,0,p,y,0,0,g,m),k={x:g/2,y:m/2},S=[Object(u.Jb)({x:0,y:0},k,s),Object(u.Jb)({x:g,y:0},k,s),Object(u.Jb)({x:0,y:m},k,s),Object(u.Jb)({x:g,y:m},k,s)],k=o()(S,(function(t){return t.x})),E=n()(S,(function(t){return t.x})),_=o()(S,(function(t){return t.y})),S=n()(S,(function(t){return t.y})),E=i()(E.x-k.x),k=i()(S.y-_.y),S=Object(u.t)(E,k),_=S.canvas,(E=S.ctx).translate(w.x,w.y),E.rotate(Math.PI/180*s),E.drawImage(j,0,0,g,m,-g/2,-m/2,g,m),k=Object(u.t)(v,b),S=k.canvas,k.ctx.drawImage(_,0,0,v,b,0,0,v,b),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e)})))()},checkDisableHide:function(){return!0},isMainLayer:function(){return!0}},m=r(0),v=r.n(m),b=r(42);function w(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?j(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _=v.a.memo((function(t){var e=t.layer,r=t.isLinkOperate,n=t.isNavigator,o=(t=t.overflowStageHidden,Object(m.useRef)(null)),a=e.data,s=(_=e.data).naturalHeight,l=_.naturalWidth,d=(_=_.imageTransform).widthRatio,h=_.heightRatio,p=_.flipH,y=_.flipV,g=_.offsetX,w=_.offsetY,j=_.scale,_=_.rotate,E=(L=x(Object(m.useState)(!1),2))[0],k=L[1],S=e.renderGLCanvas,L=(Object(m.useEffect)((function(){var t,e;if(!n&&S)return(t=f.imageKit.getGLCanvas())&&null!=(e=document.getElementById("GLContainer"))&&e.appendChild(t),null!=(e=o.current)&&e.setAttribute("ready","false"),void k(!0);a.filterPreview||(null!=(t=o.current)&&t.setAttribute("ready","false"),Object(u.zb)(a.url).then((function(t){var e=a.naturalWidth,r=a.naturalHeight,n=null==(n=o.current)?void 0:n.getContext("2d");null!=n&&n.clearRect(0,0,e,r),null!=n&&n.drawImage(t,0,0,e,r),null!=(n=o.current)&&n.setAttribute("ready","true"),k(!1)})))}),[a,a.url,S]),l*j),I=s*j;g=i()(g*d*L*j),d=i()(w*h*I*j),L={width:"".concat(l,"px"),height:"".concat(s,"px"),transform:"translate(".concat(g,"px, ").concat(d,"px) rotate(").concat(_,"deg) scale(").concat(+j.toFixed(3),")"),transformOrigin:"center center"},w={pointerEvents:"none"},p&&(w.transform="rotateY(180deg) "),y&&(h="rotateX(180deg)",w.transform=w.transform?w.transform+h:h),I=O(O({},e),{},{width:l*j,height:s*j});return v.a.createElement(b.a,{disableEvents:!0,isLinkOperate:r,layer:I,overflowStageHidden:t},v.a.createElement("div",{style:O({},{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",display:"flex"})},v.a.createElement("div",{style:w},v.a.createElement("div",{style:L},v.a.createElement("div",{id:"GLContainer",style:{display:E?"block":"none"}}),v.a.createElement("div",{style:{opacity:E?0:1}},v.a.createElement("canvas",{id:"".concat(c.e).concat(I.id),ref:o,width:l,height:s}))))))})),E=(e=r(15),r.n(e)),k=r(19),S=r(47),L=r(13),I=(e=r(414),r.n(e)),T=v.a.memo((function(t){var e=t.onClick;return v.a.createElement("div",{className:I.a.item},v.a.createElement(L.a,{onClick:function(){null!=e&&e()},block:!0,icon:v.a.createElement(L.d,{name:"arrowCounterclockwise",fontSize:20})},"\u91cd\u7f6e"))})),M=(e=r(330),r.n(e)),P=(e=(r(963),r(964),r(9)),r.n(e)),A=v.a.memo((function(t){var e=t.background,r=t.wrapBackground,n=void 0===(n=t.title)?"":n,o=void 0===(o=t.minVal)?0:o,i=void 0===(i=t.maxVal)?100:i,a=void 0===(a=t.value)?0:a,c=t.onChange,u=t.onAfterChange,s=void 0===(s=t.step)?1:s,l=void 0===(l=t.marks)?{}:l,f=(t=void 0===(t=t.tooltipPlacement)?"top":t,{});return f.opacity=Math.abs(0+a/100),v.a.createElement("div",{className:"enhance-slider-input"},v.a.createElement("div",{className:"row-slider"},v.a.createElement("div",{className:"row-slider__up",style:{}},e.useStyle?v.a.createElement("div",{className:P()(e.classname),style:{width:"100%",height:"100%"}}):v.a.createElement("img",{src:(null==e?void 0:e.default)||e,alt:""})),v.a.createElement("div",{className:"row-slider__under",style:f},r.useStyle?v.a.createElement("div",{className:P()(r.classname),style:{width:"100%",height:"100%"}}):v.a.createElement("img",{src:(null==r?void 0:r.default)||r,alt:""})),v.a.createElement(L.p,{className:"row-slider__main",max:i,min:o,value:a,style:{display:"flex",alignItems:"center",height:24,width:170,margin:0},tooltipPlacement:t,onAfterChange:function(t){null!=u&&u(t)},onChange:c,marks:l,step:s}),n?v.a.createElement("div",{className:"row-slider__title"},n):null),v.a.createElement(L.f,{width:40,height:24,max:i,min:o,onChange:function(t){M()(t)||(c(t),null!=u&&u(t))},value:+a.toFixed(0),showStepBtn:!1}))})),C=r(117);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(){N=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==R(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function D(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function B(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function G(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){B(i,n,o,a,c,"next",t)}function c(t){B(i,n,o,a,c,"throw",t)}a(void 0)}))}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var z=function(t){var e=t.theme,n=t.onReset,o=t.onBeforeEnhance,i=t.onEnhance,a=t.onAfterEnhance,c=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?U(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(m.useState)([]),2),t[0]),u=t[1],s=Object(l.f)(),f=Object(l.B)(),d=Object(l.j)(),h=Object(m.useRef)(),p=Object(m.useRef)(s);return Object(m.useEffect)((function(){u(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C.AppTheme.white;return[{name:"\u9971\u548c\u5ea6",keyName:"saturation",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_2",lightWrapBackgroundClass:"lsb_1",darkBackgroundClass:"dsb_2",darkWrapBackgroundClass:"dsb_1"},{name:"\u8272\u6e29",keyName:"temperature",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_6",lightWrapBackgroundClass:"lsb_5",darkBackgroundClass:"dsb_6",darkWrapBackgroundClass:"dsb_5"},{name:"\u8272\u8c03",keyName:"tinge",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_8",lightWrapBackgroundClass:"lsb_7",darkBackgroundClass:"dsb_8",darkWrapBackgroundClass:"dsb_7"}].map((function(e){return e.background="dark"===t?e.darkBackgroundClass?{useStyle:!0,classname:e.darkBackgroundClass}:r(371)("./".concat(t,"/").concat(e.background||"".concat(e.keyName,".jpg"))):e.lightBackgroundClass?{useStyle:!0,classname:e.lightBackgroundClass}:r(371)("./".concat(t,"/").concat(e.background||"".concat(e.keyName,".jpg"))),e.wrapBackground="dark"===t?e.darkWrapBackgroundClass?{useStyle:!0,classname:e.darkWrapBackgroundClass}:r(371)("./".concat(t,"/").concat(e.wrapBackground||"".concat(e.keyName,"-bg.jpg"))):e.lightWrapBackgroundClass?{useStyle:!0,classname:e.lightWrapBackgroundClass}:r(371)("./".concat(t,"/").concat(e.wrapBackground||"".concat(e.keyName,"-bg.jpg"))),e}))}(e))}),[e]),Object(m.useEffect)((function(){function t(t){t=t.values,p.current=t}return k.a.on("".concat(l.a.BeforeRedo).concat(l.b.color),t),k.a.on("".concat(l.a.BeforeUndo).concat(l.b.color),t),function(){k.a.off("".concat(l.a.BeforeRedo).concat(l.b.color),t),k.a.off("".concat(l.a.BeforeUndo).concat(l.b.color),t)}}),[]),v.a.createElement(v.a.Fragment,null,v.a.createElement("div",null,c.map((function(t,e){return v.a.createElement(A,{key:e,maxVal:t.maxVal,minVal:t.minVal,value:s[t.keyName],title:t.name,onChange:(n=G(N().mark((function e(r){var n,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.current,(a=E()(s))[t.keyName]=r,f(a),null!=o&&o(t.keyName,r),h.current={extraData:{old:n,new:a,oldArgs:{color:F({},n)},newArgs:{color:F({},a)}},args:{color:F({},a)}},e.next=8,d.action(h.current);case 8:null!=i&&i(t.keyName,r);case 9:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)}),onAfterChange:(r=G(N().mark((function e(r){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a&&a(t.keyName,r),h.current)return e.next=4,d.pushHistory(l.b.color,h.current);e.next=5;break;case 4:p.current=E()(h.current.extraData.new);case 5:case"end":return e.stop()}}),e)}))),function(t){return r.apply(this,arguments)}),background:t.background,wrapBackground:t.wrapBackground});var r,n}))),v.a.createElement(T,{onClick:function(){var t=E()(s),e=E()(S.i);d.reset(l.b.color,{extraData:{old:t,new:e,oldArgs:{color:F({},t)},newArgs:{color:F({},e)}},args:{color:F({},e)}}),null!=n&&n()}}))},W=(r(977),[{key:"red",value:"#F04C59"},{key:"orange",value:"#F3943F"},{key:"yellow",value:"#EADE3E"},{key:"green",value:"#70D65C"},{key:"blue",value:"#5A84F2"},{key:"purple",value:"#B663E8"}]),K=function(t){var e=t.index,r=t.onSelectIndex;return v.a.createElement("div",{className:"m-select-color"},v.a.createElement("div",{className:"m-select-color__title"},"\u989c\u8272"),v.a.createElement("ul",{className:"m-select-color__list"},W.map((function(t,n){var o={border:"2px solid ".concat(t.value),background:e===n?"".concat(t.value):""},i=e===n;return v.a.createElement("li",{key:n,className:i?"active":"",onClick:function(){return r(n,t.key)},style:o},i?v.a.createElement("span",null):null)}))))};function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(){X=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==H(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function q(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){q(i,n,o,a,c,"next",t)}function c(t){q(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var J=function(t){function e(t){return{color:{hsl_hue:t.hsl_hue,hsl_saturation:t.hsl_saturation,hsl_light:t.hsl_light}}}function r(){var t=E()(p),r=E()(S.k);g.reset(l.b.hsl,{extraData:{old:t,new:r,oldArgs:e(t),newArgs:e(r)},args:e(r)}),null!=o&&o()}var n=t.theme,o=t.onReset,i=t.onBeforeEnhance,a=t.onEnhance,c=t.onAfterEnhance,u=t.onSelect,s=t.isVipMaterial,f=Object(m.useRef)(),d=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Z(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(m.useState)([]),2),t[0]),h=t[1],p=Object(l.k)(),y=Object(l.E)(),g=Object(l.j)(),b=Object(m.useRef)(),w=Object(m.useRef)(p),O=(Object(m.useEffect)((function(){f.current=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C.AppTheme.white,e=[];return W.forEach((function(r){var n=[{name:"\u8272\u76f8",keyName:"hsl_hue",maxVal:100,minVal:-100,options:{blue:{lightBackgroundClass:"lsb_44",lightWrapBackgroundClass:"lsb_43",darkBackgroundClass:"dsb_44",darkWrapBackgroundClass:"dsb_43"},green:{lightBackgroundClass:"lsb_38",lightWrapBackgroundClass:"lsb_37",darkBackgroundClass:"dsb_38",darkWrapBackgroundClass:"dsb_37"},orange:{lightBackgroundClass:"lsb_32",lightWrapBackgroundClass:"lsb_31",darkBackgroundClass:"dsb_32",darkWrapBackgroundClass:"dsb_31"},purple:{lightBackgroundClass:"lsb_50",lightWrapBackgroundClass:"lsb_49",darkBackgroundClass:"dsb_50",darkWrapBackgroundClass:"dsb_49"},red:{lightBackgroundClass:"lsb_20",lightWrapBackgroundClass:"lsb_19",darkBackgroundClass:"dsb_20",darkWrapBackgroundClass:"dsb_19"},yellow:{lightBackgroundClass:"lsb_26",lightWrapBackgroundClass:"lsb_25",darkBackgroundClass:"dsb_26",darkWrapBackgroundClass:"dsb_25"}}},{name:"\u9971\u548c\u5ea6",keyName:"hsl_saturation",maxVal:100,minVal:-100,options:{blue:{lightBackgroundClass:"lsb_46",lightWrapBackgroundClass:"lsb_45",darkBackgroundClass:"dsb_46",darkWrapBackgroundClass:"dsb_45"},green:{lightBackgroundClass:"lsb_40",lightWrapBackgroundClass:"lsb_39",darkBackgroundClass:"dsb_40",darkWrapBackgroundClass:"dsb_39"},orange:{lightBackgroundClass:"lsb_34",lightWrapBackgroundClass:"lsb_33",darkBackgroundClass:"dsb_34",darkWrapBackgroundClass:"dsb_33"},purple:{lightBackgroundClass:"lsb_55",lightWrapBackgroundClass:"lsb_53",darkBackgroundClass:"dsb_55",darkWrapBackgroundClass:"dsb_53"},red:{lightBackgroundClass:"lsb_22",lightWrapBackgroundClass:"lsb_21",darkBackgroundClass:"dsb_22",darkWrapBackgroundClass:"dsb_21"},yellow:{lightBackgroundClass:"lsb_28",lightWrapBackgroundClass:"lsb_27",darkBackgroundClass:"dsb_28",darkWrapBackgroundClass:"dsb_27"}}},{name:"\u660e\u5ea6",keyName:"hsl_light",maxVal:100,minVal:-100,options:{blue:{lightBackgroundClass:"lsb_48",lightWrapBackgroundClass:"lsb_47",darkBackgroundClass:"dsb_48",darkWrapBackgroundClass:"dsb_47"},green:{lightBackgroundClass:"lsb_42",lightWrapBackgroundClass:"lsb_41",darkBackgroundClass:"dsb_42",darkWrapBackgroundClass:"dsb_41"},orange:{lightBackgroundClass:"lsb_36",lightWrapBackgroundClass:"lsb_35",darkBackgroundClass:"dsb_36",darkWrapBackgroundClass:"dsb_35"},purple:{lightBackgroundClass:"lsb_59",lightWrapBackgroundClass:"lsb_57",darkBackgroundClass:"dsb_59",darkWrapBackgroundClass:"dsb_57"},red:{lightBackgroundClass:"lsb_24",lightWrapBackgroundClass:"lsb_23",darkBackgroundClass:"dsb_24",darkWrapBackgroundClass:"dsb_23"},yellow:{lightBackgroundClass:"lsb_30",lightWrapBackgroundClass:"lsb_29",darkBackgroundClass:"dsb_30",darkWrapBackgroundClass:"dsb_29"}}}].map((function(e){var n;return"dark"==t?(e.background={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].darkBackgroundClass},e.wrapBackground={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].darkWrapBackgroundClass}):(e.background={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].lightBackgroundClass},e.wrapBackground={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].lightWrapBackgroundClass}),e}));e.push(n)})),e}(n),h(f.current[p.selectIndex])}),[n,p.selectIndex]),Object(m.useEffect)((function(){function t(t){t=t.values,w.current=t}return k.a.on("".concat(l.a.BeforeRedo).concat(l.b.hsl),t),k.a.on("".concat(l.a.BeforeUndo).concat(l.b.hsl),t),function(){k.a.off("".concat(l.a.BeforeRedo).concat(l.b.hsl),t),k.a.off("".concat(l.a.BeforeUndo).concat(l.b.hsl),t)}}),[]),function(){var t=$(X().mark((function t(e,r){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=c&&c(e,r),b.current)return t.next=4,g.pushHistory(l.b.hsl,b.current);t.next=5;break;case 4:w.current=E()(b.current.extraData.new);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",null,v.a.createElement(K,{index:p.selectIndex,onSelectIndex:function(t){y(V(V({},p),{},{selectIndex:t})),null!=u&&u(t)}}),d.map((function(t,n){return v.a.createElement(A,{key:n,maxVal:t.maxVal,minVal:t.minVal,value:p[t.keyName][p.selectIndex],title:t.name,onChange:(c=$(X().mark((function r(n){var o,c;return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=w.current,(c=E()(p))[t.keyName][p.selectIndex]=n,y(c),null!=i&&i(t.keyName,n),b.current={extraData:{old:o,new:c,oldArgs:e(o),newArgs:e(c)},args:e(c)},r.next=8,g.action(b.current);case 8:null!=a&&a(t.keyName,n);case 9:case"end":return r.stop()}}),r)}))),function(t){return c.apply(this,arguments)}),onAfterChange:(o=$(X().mark((function e(n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s?s((function(){O(t.keyName,n)}),r,t.keyName):O(t.keyName,n);case 1:case"end":return e.stop()}}),e)}))),function(t){return o.apply(this,arguments)}),background:t.background,wrapBackground:t.wrapBackground});var o,c}))),v.a.createElement(T,{onClick:r}))};function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(){tt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==Q(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function et(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?et(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ot(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nt(i,n,o,a,c,"next",t)}function c(t){nt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var at=function(t){var e=t.theme,n=t.onReset,o=t.onBeforeEnhance,i=t.onEnhance,a=t.onAfterEnhance,c=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?it(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(m.useState)([]),2),t[0]),u=t[1],s=Object(l.t)(),f=Object(l.J)(),d=Object(l.j)(),h=Object(m.useRef)(),p=Object(m.useRef)(s);return Object(m.useEffect)((function(){u(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C.AppTheme.white;return[{name:"\u667a\u80fd\u8865\u5149",keyName:"smartLightAlpha",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_64",lightWrapBackgroundClass:"lsb_63",darkBackgroundClass:"dsb_64",darkWrapBackgroundClass:"dsb_63"},{name:"\u4eae\u5ea6",keyName:"brightness",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_64",lightWrapBackgroundClass:"lsb_63",darkBackgroundClass:"dsb_64",darkWrapBackgroundClass:"dsb_63"},{name:"\u5bf9\u6bd4\u5ea6",keyName:"contrast",maxVal:100,minVal:-100},{name:"\u9ad8\u5149\u8c03\u8282",keyName:"highlight",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_10 ",lightWrapBackgroundClass:"lsb_9",darkBackgroundClass:"dsb_10",darkWrapBackgroundClass:"dsb_9"},{name:"\u6697\u90e8\u6539\u5584",keyName:"shadow",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_12",lightWrapBackgroundClass:"lsb_11",darkBackgroundClass:"dsb_12",darkWrapBackgroundClass:"dsb_11"},{name:"\u892a\u8272",keyName:"fade",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_4 ",lightWrapBackgroundClass:"lsb_3",darkBackgroundClass:"dsb_4",darkWrapBackgroundClass:"dsb_3"}].map((function(e){return e.background="dark"==t?e.darkBackgroundClass?{useStyle:!0,classname:e.darkBackgroundClass}:r(372)("./".concat(t,"/").concat(e.background||"".concat(e.keyName,".jpg"))):e.lightBackgroundClass?{useStyle:!0,classname:e.lightBackgroundClass}:r(372)("./".concat(t,"/").concat(e.background||"".concat(e.keyName,".jpg"))),e.wrapBackground="dark"==t?e.darkWrapBackgroundClass?{useStyle:!0,classname:e.darkWrapBackgroundClass}:r(372)("./".concat(t,"/").concat(e.wrapBackground||"".concat(e.keyName,"-bg.jpg"))):e.lightWrapBackgroundClass?{useStyle:!0,classname:e.lightWrapBackgroundClass}:r(372)("./".concat(t,"/").concat(e.wrapBackground||"".concat(e.keyName,"-bg.jpg"))),e}))}(e))}),[e]),Object(m.useEffect)((function(){function t(t){t=t.values,p.current=t}return k.a.on("".concat(l.a.BeforeRedo).concat(l.b.light),t),k.a.on("".concat(l.a.BeforeUndo).concat(l.b.light),t),function(){k.a.off("".concat(l.a.BeforeRedo).concat(l.b.light),t),k.a.off("".concat(l.a.BeforeUndo).concat(l.b.light),t)}}),[]),v.a.createElement(v.a.Fragment,null,v.a.createElement("div",null,c.map((function(t,e){return v.a.createElement(A,{key:e,maxVal:t.maxVal,minVal:t.minVal,value:s[t.keyName],title:t.name,onChange:(n=ot(tt().mark((function e(r){var n,a;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.current,(a=E()(s))[t.keyName]=r,f(a),null!=o&&o(t.keyName,r),h.current={extraData:{old:n,new:a,oldArgs:{light:rt({},n)},newArgs:{light:rt({},a)}},args:{light:rt({},a)}},e.next=8,d.action(h.current);case 8:null!=i&&i(t.keyName,r);case 9:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)}),onAfterChange:(r=ot(tt().mark((function e(r){return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a&&a(t.keyName,r),h.current)return e.next=4,d.pushHistory(l.b.light,h.current);e.next=5;break;case 4:p.current=E()(h.current.extraData.new);case 5:case"end":return e.stop()}}),e)}))),function(t){return r.apply(this,arguments)}),step:t.step,marks:t.marks,background:t.background,wrapBackground:t.wrapBackground});var r,n}))),v.a.createElement(T,{onClick:function(){var t=E()(s),e=E()(S.n);d.reset(l.b.light,{extraData:{old:t,new:e,oldArgs:{light:rt({},t)},newArgs:{light:rt({},e)}},args:{light:rt({},e)}}),null!=n&&n()}}))};function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(){ut=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==ct(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function st(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){st(i,n,o,a,c,"next",t)}function c(t){st(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ft(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pt=function(t){function e(){var t=E()(d),e=E()(S.o);p.reset(l.b.particulars,{extraData:{old:t,new:e,oldArgs:{particulars:dt({},t)},newArgs:{particulars:dt({},e)}},args:{particulars:dt({},e)}}),null!=o&&o()}var n=t.theme,o=t.onReset,i=t.onBeforeEnhance,a=t.onEnhance,c=t.onAfterEnhance,u=t.isVipMaterial,s=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?ht(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(m.useState)([]),2),t[0]),f=t[1],d=Object(l.u)(),h=Object(l.K)(),p=Object(l.j)(),y=Object(m.useRef)(),g=Object(m.useRef)(d),b=(Object(m.useEffect)((function(){f(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C.AppTheme.white;return[{name:"\u9510\u5316",keyName:"sharpen",maxVal:100,minVal:0,lightBackgroundClass:"lsb_64",lightWrapBackgroundClass:"lsb_63",darkBackgroundClass:"dsb_64",darkWrapBackgroundClass:"dsb_63"},{name:"\u6e05\u6670\u5ea6",keyName:"structure",maxVal:100,minVal:-100},{name:"\u6697\u89d2",keyName:"vignette",maxVal:100,minVal:-100,lightBackgroundClass:"lsb_14",lightWrapBackgroundClass:"lsb_13",darkBackgroundClass:"dsb_14",darkWrapBackgroundClass:"dsb_13"},{name:"\u9897\u7c92",keyName:"particle",maxVal:100,minVal:0},{name:"\u8272\u6563",keyName:"dispersion",maxVal:100,minVal:0,lightBackgroundClass:"lsb_18",lightWrapBackgroundClass:"lsb_17",darkBackgroundClass:"dsb_18",darkWrapBackgroundClass:"dsb_17"}].map((function(e){return e.background="dark"===t?e.darkBackgroundClass?{useStyle:!0,classname:e.darkBackgroundClass}:r(373)("./".concat(t,"/").concat(e.background||"".concat(e.keyName,".jpg"))):e.lightBackgroundClass?{useStyle:!0,classname:e.lightBackgroundClass}:r(373)("./".concat(t,"/").concat(e.background||"".concat(e.keyName,".jpg"))),e.wrapBackground="dark"===t?e.darkWrapBackgroundClass?{useStyle:!0,classname:e.darkWrapBackgroundClass}:r(373)("./".concat(t,"/").concat(e.wrapBackground||"".concat(e.keyName,"-bg.jpg"))):e.lightWrapBackgroundClass?{useStyle:!0,classname:e.lightWrapBackgroundClass}:r(373)("./".concat(t,"/").concat(e.wrapBackground||"".concat(e.keyName,"-bg.jpg"))),e}))}(n))}),[n]),Object(m.useEffect)((function(){function t(t){t=t.values,g.current=t}return k.a.on("".concat(l.a.BeforeRedo).concat(l.b.particulars),t),k.a.on("".concat(l.a.BeforeUndo).concat(l.b.particulars),t),function(){k.a.off("".concat(l.a.BeforeRedo).concat(l.b.particulars),t),k.a.off("".concat(l.a.BeforeUndo).concat(l.b.particulars),t)}}),[]),function(){var t=lt(ut().mark((function t(e,r){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=c&&c(e,r),y.current)return t.next=4,p.pushHistory(l.b.particulars,y.current);t.next=5;break;case 4:g.current=E()(y.current.extraData.new);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",null,s.map((function(t,r){return v.a.createElement(A,{key:r,maxVal:t.maxVal,minVal:t.minVal,value:d[t.keyName],title:t.name,onChange:(o=lt(ut().mark((function e(r){var n,o;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.current,(o=E()(d))[t.keyName]=r,h(o),null!=i&&i(t.keyName,r),y.current={extraData:{old:n,new:o,oldArgs:{particulars:dt({},n)},newArgs:{particulars:dt({},o)}},args:{particulars:dt({},o)}},e.next=8,p.action(y.current);case 8:null!=a&&a(t.keyName,r);case 9:case"end":return e.stop()}}),e)}))),function(t){return o.apply(this,arguments)}),onAfterChange:(n=lt(ut().mark((function r(n){return ut().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u?u((function(){b(t.keyName,n)}),e,t.keyName):b(t.keyName,n);case 1:case"end":return r.stop()}}),r)}))),function(t){return n.apply(this,arguments)}),background:t.background,wrapBackground:t.wrapBackground});var n,o}))),v.a.createElement(T,{onClick:e}))},yt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C.AppTheme.white,e=[];return W.forEach((function(r){var n=[{name:"\u9971\u548c\u5ea6",keyName:"posterize_light",maxVal:100,minVal:0,options:{blue:{lightBackgroundClass:"lsb_46",lightWrapBackgroundClass:"lsb_45",darkBackgroundClass:"dsb_46",darkWrapBackgroundClass:"dsb_45"},green:{lightBackgroundClass:"lsb_40",lightWrapBackgroundClass:"lsb_39",darkBackgroundClass:"dsb_40",darkWrapBackgroundClass:"dsb_39"},orange:{lightBackgroundClass:"lsb_34",lightWrapBackgroundClass:"lsb_33",darkBackgroundClass:"dsb_34",darkWrapBackgroundClass:"dsb_33"},purple:{lightBackgroundClass:"lsb_55",lightWrapBackgroundClass:"lsb_53",darkBackgroundClass:"dsb_55",darkWrapBackgroundClass:"dsb_53"},red:{lightBackgroundClass:"lsb_22",lightWrapBackgroundClass:"lsb_21",darkBackgroundClass:"dsb_22",darkWrapBackgroundClass:"dsb_21"},yellow:{lightBackgroundClass:"lsb_28",lightWrapBackgroundClass:"lsb_27",darkBackgroundClass:"dsb_28",darkWrapBackgroundClass:"dsb_27"}}}].map((function(e){var n;return"dark"==t?(e.background={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].darkBackgroundClass},e.wrapBackground={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].darkWrapBackgroundClass}):(e.background={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].lightBackgroundClass},e.wrapBackground={useStyle:!0,classname:null==(n=e.options)?void 0:n[r.key].lightWrapBackgroundClass}),e}));e.push(n)})),e};function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(){mt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==gt(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function vt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vt(i,n,o,a,c,"next",t)}function c(t){vt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Ot(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xt(t){var e=t.theme,r=t.type,n=t.preData,o=t.onBeforeEnhance,i=t.onEnhance,a=t.onAfterEnhance,c=t.onSelect,u=Object(m.useRef)(),s=(t=wt(Object(m.useState)([]),2))[0],f=t[1],d=Object(l.v)(),h=Object(l.L)(),p=Object(l.j)(),y=(t=wt(Object(m.useState)(d.posterize_light_color),2))[0],g=t[1],b=(t=wt(Object(m.useState)(d.posterize_shadow_color),2))[0],w=t[1],O=Object(m.useRef)(),x="posterize_".concat(r),j="".concat(x,"_color"),_=(Object(m.useEffect)((function(){g(d.posterize_light_color),w(d.posterize_shadow_color)}),[d.renderTabIndex]),Object(m.useEffect)((function(){function t(t){t=t.values,n.current=t}return k.a.on("".concat(l.a.BeforeRedo).concat(l.b.posterize),t),k.a.on("".concat(l.a.BeforeUndo).concat(l.b.posterize),t),function(){k.a.off("".concat(l.a.BeforeRedo).concat(l.b.posterize),t),k.a.off("".concat(l.a.BeforeUndo).concat(l.b.posterize),t)}}),[]),Object(m.useEffect)((function(){g(d.posterize_light_color)}),[d.posterize_light_color]),Object(m.useEffect)((function(){w(d.posterize_shadow_color)}),[d.posterize_shadow_color]),Object(m.useEffect)((function(){u.current=yt(e),r===jt.LIGHT?f(u.current[y]):f(u.current[b])}),[e,r,y,b]),r===jt.LIGHT?y:b);return v.a.createElement("div",{style:{paddingTop:12}},v.a.createElement(K,{index:_,onSelectIndex:function(t){(r===jt.LIGHT?g:w)(t),null!=c&&c(t,r)}}),s.map((function(t,e){return v.a.createElement(A,{key:e,maxVal:t.maxVal,minVal:t.minVal,value:d[x][_],title:t.name,onChange:(c=bt(mt().mark((function e(r){var a,c;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.current,(c=E()(d))[x]=[0,0,0,0,0,0],c[x][_]=r,c[j]=_,h(c),null!=o&&o(t.keyName,r),O.current={extraData:{old:a,new:c,oldArgs:_t(a),newArgs:_t(c)},args:_t(c)},e.next=10,p.action(O.current);case 10:null!=i&&i(t.keyName,r);case 11:case"end":return e.stop()}}),e)}))),function(t){return c.apply(this,arguments)}),onAfterChange:(r=bt(mt().mark((function e(r){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a&&a(t.keyName,r),O.current)return e.next=4,p.pushHistory(l.b.posterize,O.current);e.next=5;break;case 4:n.current=E()(O.current.extraData.new);case 5:case"end":return e.stop()}}),e)}))),function(t){return r.apply(this,arguments)}),background:t.background,wrapBackground:t.wrapBackground});var r,c})))}var jt,_t=function(t){return{color:{posterize_light:t.posterize_light[t.posterize_light_color],posterize_light_color:t.posterize_light_color,posterize_shadow:t.posterize_shadow[t.posterize_shadow_color],posterize_shadow_color:t.posterize_shadow_color}}},Et=((e=jt=jt||{}).LIGHT="light",e.SHADOW="shadow",function(t){var e=t.theme,r=t.onReset,n=t.onBeforeEnhance,o=t.onEnhance,i=t.onSelect,a=t.onTab,c=Object(l.v)(),u=Object(l.L)(),s=Object(l.j)();t=Object(m.useRef)(c),n=[{name:"\u9ad8\u5149",tabKey:jt.LIGHT,content:v.a.createElement(xt,{onReset:r,onBeforeEnhance:n,onEnhance:o,onSelect:i,theme:e,type:jt.LIGHT,preData:t})},{name:"\u9634\u5f71",tabKey:jt.SHADOW,content:v.a.createElement(xt,{onReset:r,onBeforeEnhance:n,onEnhance:o,onSelect:i,theme:e,type:jt.SHADOW,preData:t})}];return v.a.createElement(v.a.Fragment,null,v.a.createElement(L.u,{data:n,activeIndex:c.renderTabIndex,tabsWidth:"228px",tabsHeight:"26px",handleTabClick:function(t){var e=E()(c);e.renderTabIndex=t===jt.LIGHT?1:2,u(e),null!=a&&a(t)}}),v.a.createElement(T,{onClick:function(){var t=E()(c),e=E()(S.p);s.reset(l.b.posterize,{extraData:{old:t,new:e,oldArgs:_t(t),newArgs:_t(e)},args:_t(e)}),null!=r&&r()}}))}),kt=(e=v.a.memo((function(t){var e=t.onChange,r=(t=t.disabled,Object(l.i)()),n=Object(l.D)();return v.a.createElement("div",{className:I.a.item},v.a.createElement(L.q,{disabled:t,title:"\u753b\u7b14\u5927\u5c0f",value:+r.toFixed(0),max:100,min:1,onChange:function(t){n(t)},onAfterChange:function(t){null!=e&&e(t)}}))})),v.a.memo(e)),St=v.a.memo((function(t){var e=t.onClick,r=Object(l.g)();t=Object(m.useCallback)((function(t){r.reset(),null!=e&&e(t)}),[]);return v.a.createElement(T,{onClick:t})})),Lt=r(52);function It(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}function Tt(t){var e=t.activeTabKey,r=t.onChange;t=Pt.findIndex((function(t){return t.tabKey===e}));return v.a.createElement(L.u,{data:Pt,showContent:!1,handleTabClick:function(t){t!==e&&r(t)},activeIndex:-1<t?t+1:1})}function Mt(t){var e=t.active,r=t.onSelect;return v.a.createElement("div",{className:"pen-type"},At.map((function(t){var n=t.type===e?"pen-type__item pen-type__item--active":"pen-type__item";return v.a.createElement("div",{className:n,key:t.type,onClick:function(){var n;(n=t.type)!==e&&r(n)}},v.a.createElement(L.d,{name:t.icon,fontSize:32}),v.a.createElement("span",{className:"pen-type__name"},t.name))})))}r(1018),It(e={},Lt.a.LEGACY,"\u624b\u52a8\u6d88\u9664"),It(e,Lt.a.AI,"AI \u6d88\u9664");var Pt=[{name:e[Lt.a.LEGACY],tabKey:Lt.a.LEGACY,headerContent:v.a.createElement("div",{className:"eliminate-tab"},v.a.createElement("span",null,e[Lt.a.LEGACY]))},{name:e[Lt.a.AI],tabKey:Lt.a.AI,headerContent:v.a.createElement("div",{className:"eliminate-tab"},v.a.createElement("span",null,e[Lt.a.AI]),v.a.createElement("img",{className:"eliminate-tab__icon-vip",src:"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/vip-icon.png",alt:""}))}],At=[{type:Lt.b.DAUB,name:"\u6d82\u62b9",icon:"manual"},{type:Lt.b.RECT,name:"\u6846\u9009",icon:"selectionBox"},{type:Lt.b.PATH,name:"\u5708\u9009",icon:"selectionLasso"}];function Ct(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(1019);var Nt=function(t){var e=t.onPenSizeChange,r=t.onReset,n=t.onTabChange,o=t.onPenTypeChange,i=Object(l.h)(),a=Object(l.C)();return v.a.createElement(v.a.Fragment,null,v.a.createElement(Tt,{activeTabKey:i.type,onChange:function(t){a(Rt(Rt({},i),{},{type:t})),null!=n&&n(t)}}),i.type===Lt.a.AI?v.a.createElement("div",{style:{paddingTop:"16px"}},v.a.createElement(Mt,{active:i.penType,onSelect:function(t){a(Rt(Rt({},i),{},{penType:t})),null!=o&&o(t)}})):null,v.a.createElement(kt,{disabled:i.type===Lt.a.AI&&i.penType!==Lt.b.DAUB,onChange:e}),v.a.createElement(St,{onClick:r}))},Dt=(e=(r(583),r(129)),r.n(e)),Ft=r(22),Bt=r(29),Gt=r(45),Ut=r(10),zt=r(111);function Wt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Kt(t,e){for(var r=0;r<t.length;r++){var n=t[r];0===r&&e.moveTo(n.x,n.y),e.lineTo(n.x,n.y)}}function Ht(t,e){var r=t.left,n=t.top,o=t.rotate,i=(t=t.data).naturalWidth,a=t.naturalHeight,c=(t=t.imageTransform).scale,s=t.flipH,l=t.flipV;return e.map((function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t);return(e=Object(u.Ib)({x:t.x-r-i*c/2,y:-(t.y-n-a*c/2)},o)).y=-e.y,l&&(e.y=-e.y),s&&(e.x=-e.x),Object(u.Eb)({x:e.x+i*c/2,y:e.y+a*c/2},1/c)}))}function Yt(t,e,r,n,o){var i=4<arguments.length&&void 0!==o&&o;switch(t){case Lt.b.PATH:return function(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=10/e;return[{path:t=Vt(t,r),stroke:"rgba(0, 0, 0, 1)",strokeWidth:e=2/e,strokeDashArray:[n,n],fill:r?"rgba(108, 142, 229, 0.3)":void 0},{path:t,stroke:"rgba(255, 255, 255, 1)",strokeWidth:e,strokeDashArray:[n,n],strokeDashOffset:n}]}(e,n,i);case Lt.b.RECT:return[{path:Vt(e),fill:"rgba(108, 142, 229, 0.3)"}];default:var a=r;return a/=n,[{path:Vt(e),stroke:"rgba(248, 37, 114, .5)",strokeWidth:a,strokeLineCap:"round"}]}}function Vt(t,e){e=1<arguments.length&&void 0!==e&&e;var r="";return t.forEach((function(t,e){r=(0===e?"".concat(r," M").concat(t.x," ").concat(t.y,"  L "):"".concat(r," L ")).concat(t.x," ").concat(t.y)})),e&&(r+="z"),r}function Xt(t){var e=void 0===(e=t.penType)?S.f.DAUB:e,r=t.penSize,n=void 0===(n=t.penOpacity)?1:n,o=t.mousePosition,i=t.pathInfos,a=(t=void 0!==(t=t.disablePen)&&t,(c=Object(Ut.A)()).width),c=c.height,u=e===S.f.DAUB;return v.a.createElement("div",{className:"m-draw-pen-mask",style:{cursor:u?"none":""}},t?null:v.a.createElement("div",{style:{width:r,height:r,transform:u?"translate(-50%, -50%)":"",left:o.x,top:o.y,opacity:n},className:"m-draw-pen-cursor"},v.a.createElement("img",{src:$t.get(e+"-pen"),style:{display:"block"},height:"100%",width:"100%",alt:""})),v.a.createElement("svg",{"data-type":"draw-pen",width:a,height:c,style:{pointerEvents:t?"none":"all"}},i.map((function(t,e){var r=t.strokeWidth,n=t.path,o=t.stroke,i=t.fill,a=t.strokeDashArray,c=t.strokeDashOffset;t=t.strokeLineCap;return v.a.createElement("path",{style:{pointerEvents:"none"},key:e,d:n,stroke:o,strokeWidth:r,fill:i||"none",strokeLinecap:t,strokeLinejoin:"round",strokeDasharray:null==a?void 0:a.join(" "),strokeDashoffset:c})}))))}r(1020);e=(e=r(1021)).keys().map(e);var qt,$t=new Map;function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(){Jt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==Zt(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Qt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function te(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qt(i,n,o,a,c,"next",t)}function c(t){Qt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?re(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.forEach((function(t){t.__esModule&&(t=t.default);var e=/.*\/(.*)\.svg$/.exec(t);e&&e[1]&&(e=e[1].split(".")[0],$t.set(e,t))})),(qt=qt||{}).drawEnd="eliminate_pen_draw_end";var ne=v.a.memo((function(){var t,e=Object(Ut.x)().hide,r=(t=Object(Ut.C)()).hide,n=t.show,o=Object(Ut.f)().delActiveLayer,i=Object(Bt.i)(),a=Object(Ut.A)(),c=(t=Object(zt.d)()).penSize,s=t.penType,f=t.type,d=Object(Gt.d)(),h=Object(l.g)(),p=Object(Gt.c)().isShowLoading,y=Object(Ut.p)().getLayers,g=(t=ee(Object(m.useState)(1),2))[0],b=t[1],w=Object(m.useRef)(!1),O=Object(m.useRef)([]),x=(t=ee(Object(m.useState)([]),2))[0],j=t[1],_=(t=ee(Object(m.useState)({x:-1e4,y:0}),2))[0],E=t[1],I=f===S.e.LEGACY?S.f.DAUB:s,T=(I===S.f.DAUB?c:32)/i;return Object(m.useEffect)((function(){return setTimeout((function(){e(),o();var t=y(),n=(r(),y());t.length!==n.length&&L.i.info("\u5f53\u524d\u529f\u80fd\u4ec5\u5bf9\u539f\u56fe\u5143\u7d20\u751f\u6548\uff0c\u5df2\u81ea\u52a8\u9690\u85cf\u65e0\u6cd5\u64cd\u4f5c\u7684\u5185\u5bb9~")}),0),function(){n(),h.destroy()}}),[]),Object(m.useEffect)((function(){function t(t){var e,r;Object(u.ub)(t)&&!p&&(e="draw-pen"===(null==(e=t.target)?void 0:e.getAttribute("data-type")),r=Object(u.gb)(t,i),t=Object(u.j)(t)&&e,(w.current=t)&&O.current.push({x:r.x,y:r.y}),I!==S.f.RECT)&&j(Yt(I,O.current,c,i))}function e(t){t=Object(u.gb)(t,i),E(t),p||w.current&&(I===S.f.RECT?O.current=[O.current[0],{x:O.current[0].x,y:t.y},{x:t.x,y:t.y},{x:t.x,y:O.current[0].y}]:O.current.push({x:t.x,y:t.y}),j(Yt(I,O.current,c,i)))}function r(t){var e;w.current=!1,p||O.current.length&&(d.show("\u6548\u679c\u5904\u7406\u4e2d..."),b(0),j(Yt(I,O.current,c,i,!0)),e=function(t){var e=t.mainLayer,r=t.points,n=t.penSize,o=t.penType,i=void 0===(t=t.penColor)?"rgb(255,255,255)":t,a=(t=e.data).naturalWidth,c=(t=t.naturalHeight,t=(a=Object(u.t)(a,t)).canvas,a.ctx),s=Ht(e,r);switch(o){case Lt.b.DAUB:c.strokeStyle=i,c.lineJoin="round",c.lineCap="round",c.lineWidth=n,c.beginPath(),Kt(s,c),c.stroke(),c.closePath();break;case Lt.b.RECT:case Lt.b.PATH:c.fillStyle=i,c.beginPath(),Kt(s,c),c.closePath(),c.fill()}return t}({mainLayer:a,points:O.current,penType:I,penSize:T}),k.a.emit(qt.drawEnd),n(e),O.current=[])}var n=function(){var t=te(Jt().mark((function t(e){return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(te(Jt().mark((function t(){return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.action(e,f);case 3:t.next=10;break;case 5:throw t.prev=5,t.t0=t.catch(0),L.i.error("\u6e05\u9664\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),t.t0;case 10:return t.prev=10,d.hide(),b(1),j([]),t.finish(10);case 15:case"end":return t.stop()}}),t,null,[[0,5,10,15]])}))),30);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return document.addEventListener("mousemove",e),document.addEventListener("mousedown",t),document.addEventListener("mouseup",r),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mousedown",t),document.removeEventListener("mouseup",r)}}),[p,c,i,I,f]),v.a.createElement(Xt,{penSize:T,penType:I,penOpacity:g,mousePosition:_,pathInfos:x})}));function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ce(){ce=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==oe(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function ue(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ue(i,n,o,a,c,"next",t)}function c(t){ue(i,n,o,a,c,"throw",t)}a(void 0)}))}}function le(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?fe(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1026);var de,he=null,pe="\u53d6\u8272\u4e2a\u6570\u5df2\u5230\u8fbe\u4e0a\u9650~",ye=v.a.memo((function(){var t,e=Object(Bt.i)(),r=(Object(Gt.d)(),Object(Gt.c)().isShowLoading),n=(i=le(Object(m.useState)({x:-1e4,y:0}),2))[0],o=i[1],i=Object(l.p)(),a=Object(l.w)(),c=Object(l.m)().renderIntelligentPreview,s=Object(l.n)(),d=Object(l.M)(),h=Object(l.c)(),p=15/e,y=(t=le(Object(m.useState)("0,0,0,1"),2))[0],g=t[1],b=(t=le(Object(m.useState)(!1),2))[0],w=t[1];return Object(m.useEffect)((function(){var t=function(){var t=se(ce().mark((function t(e){var r,n;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(he){t.next=6;break}return t.next=3,f.enhanceGLBridge.getGLResult();case 3:r=(r=t.sent).canvas,he=r;case 6:if(he&&(r=he.getContext("2d"),null!=(n=null==r?void 0:r.getImageData(e.x,e.y,1,1))&&n.data))return n=Array.from(null==n?void 0:n.data).join(","),t.abrupt("return",n);t.next=12;break;case 12:return t.abrupt("return","");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var n=se(ce().mark((function n(o){var i,l,f,p;return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Object(u.ub)(o)){n.next=2;break}return n.abrupt("return");case 2:if(r)return n.abrupt("return");n.next=4;break;case 4:if(i=Object(u.gb)(o,e),Object(u.j)(o)){if(20<=s.length-2)return h(!1),n.abrupt("return",L.i.info(pe));n.next=10}else n.next=21;break;case 10:return n.next=12,t(i);case 12:l=n.sent,g(l),f={type:Lt.e.COLOR,color:l},p=s.map((function(t){return t.color})),-1<(p=p.findIndex((function(t){return t===l})))?d(ae({index:p},s[p])):a(f),h(!1),c(l),he=null;case 21:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),i=function(){var r=se(ce().mark((function r(n){var i,a,c;return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=Object(u.gb)(n,e),a=Object(u.j)(n),o(i),a){r.next=5;break}return r.abrupt("return",w(!1));case 5:if(a)return r.next=8,t(i);r.next=11;break;case 8:c=r.sent,g(c),w(!0);case 11:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}();return document.addEventListener("mousemove",i),document.addEventListener("mousedown",n),function(){document.removeEventListener("mousemove",i),document.removeEventListener("mousedown",n)}}),[r,p,e,s]),b?v.a.createElement("div",{style:{width:i,height:i,transform:"translate(-50%, -50%)",left:n.x,top:n.y},className:"m-color-pick-pen"},v.a.createElement("div",{className:"m-color-pick-pen__color",style:{borderColor:"rgba(".concat(y,")")}})):null}));function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(){me=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==ge(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function ve(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function be(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ve(i,n,o,a,c,"next",t)}function c(t){ve(i,n,o,a,c,"throw",t)}a(void 0)}))}}function we(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Oe(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oe(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1027),(de=de||{}).drawEnd="smart_mask_pen_draw_end";var xe=v.a.memo((function(){var t=Object(Bt.i)(),e=Object(l.p)(),r=Object(Gt.c)().isShowLoading,n=(i=we(Object(m.useState)({x:-1e4,y:0}),2))[0],o=i[1],i=(Object(l.w)(),Object(Ft.k)()),a=Object(l.A)(),c=Object(Ut.p)().getLayers(),s=(w=Object(l.m)()).renderIntelligentPreview,d=w.renderAllIntelligentPreview,h=w.getMaskData,p=w.pushHistory,y=Object(l.H)(),g=Object(l.q)(),b=Object(l.O)(),w=a.type,O=a.color,x=w===Lt.e.All,j=(a=e/t,e=(w=we(Object(m.useState)(!1),2))[0],w[1]),_=(w=we(Object(m.useState)(!1),2))[0],S=w[1],L=Object(Gt.d)();return Object(m.useEffect)((function(){var t,e=function(){var t=be(me().mark((function t(e){var r,n;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,L.show(),r=E()(g),t.next=7,h();case 7:if((n=t.sent)&&(r.maskCode=n),x)return t.next=12,d();t.next=14;break;case 12:t.next=16;break;case 14:return t.next=16,s(O);case 16:n={old:E()(g),new:E()(r)},p(n),y(E()(r)),k.a.emit(de.drawEnd,b),S(!1),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(2),L.hide();case 26:return t.prev=26,L.hide(),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[2,23,26,29]])})));return function(e){return t.apply(this,arguments)}}(),r=f.imageKit.getGLCanvas();return null!=r&&r.addEventListener("mousedown",(function(){S(!0)})),null!=(t=document)&&t.documentElement.addEventListener("mouseup",e),function(){var t;null!=r&&r.removeEventListener("mousedown",(function(){S(!1)})),null!=(t=document)&&t.documentElement.removeEventListener("mouseup",e)}}),[x,O,b,g,_]),Object(m.useEffect)((function(){var t,e=f.imageKit.getGLCanvas();return e&&null!=(t=document.getElementById("J_smartMaskPen"))&&t.appendChild(e),function(){var t;e&&null!=(t=document.getElementById("GLContainer"))&&t.appendChild(e)}}),[c]),Object(m.useEffect)((function(){var e=function(){var e=be(me().mark((function e(r){var n,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(u.gb)(r,t),i=Object(u.j)(r),o(n),i){e.next=5;break}return e.abrupt("return",j(!1));case 5:i&&j(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[r,a,t]),v.a.createElement("div",{className:"m-smart-mask-pen",id:"J_smartMaskPen"},e&&i?v.a.createElement("div",{style:{position:"absolute",width:a,height:a,transform:"translate(-50%, -50%)",left:n.x,top:n.y},className:"m-draw-pen"},v.a.createElement("img",{src:$t.get("pen"),style:{display:"block"},height:"100%",width:"100%",alt:"pen"})):null)}));function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _e(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ee(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ke=v.a.memo((function(t){var e=t.onChange,r=Object(l.n)(),n=Object(l.z)(),o=Object(l.M)(),i=(t=(Object(l.A)(),Object(l.m)())).renderIntelligentPreview,a=t.renderAllIntelligentPreview,c=Object(l.x)(),u=Object(l.c)(),s=Object(l.s)(),f=Object(Ft.k)(),d=Object(Ut.x)().hide,h=(t=Object(Ut.C)()).hide,p=t.show,y=Object(Ut.f)().delActiveLayer,g=Object(Ut.p)().getLayers,b=(Object(m.useEffect)((function(){d(),y();var t=g(),e=(h(),g());return t.length!==e.length&&L.i.info("\u5f53\u524d\u529f\u80fd\u4ec5\u5bf9\u539f\u56fe\u5143\u7d20\u751f\u6548\uff0c\u5df2\u81ea\u52a8\u9690\u85cf\u65e0\u6cd5\u64cd\u4f5c\u7684\u5185\u5bb9~"),function(){p()}}),[]),Dt()((function(t,n){if(t.type===Lt.e.COLOR_PICKER){if(f||20<r.length-2){if(f)return void L.i.info("\u8bf7\u5148\u6e05\u7a7a\u4fdd\u62a4\u533a\u57df\u540e\u4f7f\u7528\u53d6\u8272\u7b14~");if(20<r.length-2)return void L.i.info(pe)}s||(u(!0),o(Ee(Ee({},t),{},{index:n})),null!=e&&e({area_type:"contents",func_detail:"pen",type:"pen"}))}else u(!1),t.type!==Lt.e.All&&!Lt.e.COLOR||(o(Ee(Ee({},t),{},{index:n})),c(),t.type===Lt.e.All?(a(),null!=e&&e({area_type:"contents",func_detail:"color_0",type:"color"})):(i(t.color),null!=e&&e({area_type:"contents",func_detail:"color_".concat(n-1),type:"color"})))}),200));return v.a.createElement("div",{className:"c-intelligent"},v.a.createElement("div",{className:"c-intelligent__title"},"\u8bf7\u9009\u62e9\u539f\u56fe\u4e0a\u7684\u989c\u8272"),r.map((function(t,e){var r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?je(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?je(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.color.split(","),4),o=r[0],i=r[1],a=r[2];r=r[3];return v.a.createElement("div",{key:e,className:P()("c-intelligent__color-wrap",{active:n===e}),onClick:function(){return b(t,e)}},v.a.createElement("div",{className:P()("c-intelligent__color",{"all-color":0===e,"picker-color":!!t.icon}),style:{background:"rgba(".concat(o,",").concat(i,",").concat(a,",").concat(r,")")}},t.icon?v.a.createElement(L.d,{fontSize:18,name:t.icon}):null,v.a.createElement("span",{className:"c-intelligent__text"},t.txt||"")))})))}));function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(){Le=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==Se(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Ie(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Te(t){var e=t.onChange,r=(t=Object(l.p)(),Object(l.G)()),n=Object(Ft.w)(),o=Object(Ft.k)(),i=Object(l.s)(),a=Object(l.N)(),c=Object(Bt.i)(),u=Object(l.H)(),s=Object(l.q)(),f=Object(l.m)(),d=f.startSmear,h=f.setEraserType,p=f.setPenType,y=f.stopSmear,g=f.setSmearPenSize,m=f.getMaskData,b=f.pushHistory,w=f.resetMask,O=f.renderAllIntelligentPreview,x=f.renderIntelligentPreview,j=(f=Object(l.A)()).type,_=f.color,k=j===Lt.e.All,S=function(){t=Le().mark((function t(o){var a,c;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i)return L.i.info("\u8bf7\u5148\u9000\u51fa\u53d6\u8272\u7b14~"),t.abrupt("return");t.next=3;break;case 3:if(n(o),o)return t.next=7,d();t.next=9;break;case 7:t.next=23;break;case 9:return w(),a=E()(s),t.next=13,m();case 13:return c=t.sent,k?O():x(_),c&&(a.maskCode=c),c={old:E()(s),new:E()(a)},b(c),u(E()(a)),r(Lt.c),p(),t.next=23,y();case 23:null!=e&&e({area_type:"button",func_detail:o?"change":"clean",type:"protect"});case 24:case"end":return t.stop()}}),t)}));var t,o=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ie(i,n,o,a,c,"next",t)}function c(t){Ie(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(t){return o.apply(this,arguments)}}();return v.a.createElement("div",{onClick:function(t){t.stopPropagation()}},o?v.a.createElement("div",{className:"c-intelligent__protect"},v.a.createElement("div",{className:"c-intelligent__protect-title"},"\u8bf7\u5728\u53f3\u4fa7\u56fe\u4e2d\u6d82\u62b9\u4fdd\u62a4\u533a\u57df"),v.a.createElement("div",{className:"c-intelligent__protect-tab"},v.a.createElement(L.u,{data:Me,tabsWidth:"228px",tabsHeight:"26px",showContent:!1,handleTabClick:function(t){t===Lt.d.ERASER?(h(),a(Lt.d.ERASER)):(p(),a(Lt.d.PEN)),null!=e&&e({area_type:"button",func_detail:t===Lt.d.ERASER?"eraser":"brush",type:"protect"})}})),v.a.createElement("div",null,v.a.createElement(L.q,{title:"\u753b\u7b14\u5927\u5c0f",value:t,max:100,min:1,onChange:function(t){r(t),g(t/2/c)},onAfterChange:function(t){null!=e&&e({area_type:"contents",func_detail:"pen_size",type:"pen_size"})}})),v.a.createElement("div",null,v.a.createElement(L.a,{onClick:function(){S(!1)},block:!0,icon:v.a.createElement(L.d,{name:"arrowCounterclockwise",fontSize:20})},"\u6e05\u7a7a\u4fdd\u62a4\u533a\u57df"))):v.a.createElement("div",{style:{marginTop:4}},v.a.createElement(L.a,{onClick:function(){S(!0)},block:!0,icon:v.a.createElement(L.d,{name:"protect",fontSize:20})},"\u5f00\u542f\u4fdd\u62a4\u533a\u57df")))}var Me=[{name:"\u753b\u7b14",tabKey:Lt.d.PEN},{name:"\u6a61\u76ae\u64e6",tabKey:Lt.d.ERASER}];function Pe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ce=v.a.memo((function(t){var e=t.onChange;return t.onClick,v.a.createElement(v.a.Fragment,null,v.a.createElement(ke,{onChange:function(t){null!=e&&e(Ae({func:"color"},t))}}),v.a.createElement(Te,{onChange:function(t){null!=e&&e(Ae({func:"retain_area"},t))}}))})),Re=r(297)},function(t,e,r){"use strict";function n(){var t=Object(p.x)().getId,e=Object(p.p)(),r=e.getLayer,n=e.getCollisionLayers,o=Object(l.useRef)(null);return{getPickId:function(e,i){var a;return i.isStart&&(i=Object(m.cb)(i.startPoint),(a=t())?(a=r(a))&&(o.current=Object(m.M)(e,a.children,i,!0)):o.current=Object(m.M)(e,n(!1),i,!1)),o.current},resetPickId:function(){o.current=null}}}function o(t){t=Object(m.eb)(t);var e=w()(t,(function(t){return t.x})),r=O()(t,(function(t){return t.x})),n=w()(t,(function(t){return t.y}));t=O()(t,(function(t){return t.y}));return{left:~~(null==e?void 0:e.x),top:~~(null==n?void 0:n.y),width:~~(((null==r?void 0:r.x)||0)-((null==e?void 0:e.x)||0)),height:~~(((null==t?void 0:t.y)||0)-((null==n?void 0:n.y)||0))}}function i(t){var e=t.left,r=t.top,n=t.width,o=~~(n/2),i=~~((t=t.height)/2);return{lt:{x:e,y:r},lb:{x:e,y:r+t},rt:{x:e+n,y:r},rb:{x:e+n,y:r+t},tc:{x:e+o,y:r},bc:{x:e+o,y:r+t},lc:{x:e,y:r+i},rc:{x:e+n,y:r+i}}}function a(t,e,r){for(var n=0,o=t.length;n<o;n++){var i=t[n];i.id!==e.id&&i.layerType!==g.h.BACKGROUND_LAYER&&i.layerType!==g.h.MAIN_LAYER&&(i.children&&i.children.length?(i.layerType!==g.h.GROUP_LAYER&&r(i),a(i.children,e,r)):r(i))}}r.d(e,"c",(function(){return u.c})),r.d(e,"d",(function(){return D})),r.d(e,"h",(function(){return U})),r.d(e,"m",(function(){return Y})),r.d(e,"l",(function(){return X})),r.d(e,"n",(function(){return Z})),r.d(e,"p",(function(){return Q})),r.d(e,"r",(function(){return rt})),r.d(e,"s",(function(){return ot})),r.d(e,"j",(function(){return lt})),r.d(e,"k",(function(){return ft})),r.d(e,"i",(function(){return dt})),r.d(e,"o",(function(){return ht})),r.d(e,"q",(function(){return pt.a})),r.d(e,"g",(function(){return mt})),r.d(e,"f",(function(){return xt})),r.d(e,"a",(function(){return jt})),r.d(e,"b",(function(){return Wt})),r.d(e,"e",(function(){return Vt}));var c,u=r(62),s=(e=r(9),r.n(e)),l=r(0),f=r.n(l),d=r(29),h=r(46),p=r(10),y=r(22),g=r(2),m=r(7),v=(e=r(127),r.n(e)),b=(e=r(451),r.n(e)),w=(e=r(69),r.n(e)),O=(e=r(79),r.n(e));function x(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?j(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e=c=c||{}).left="left",e.right="right",e.up="up",e.down="down";var E=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.leftBlocks=void 0,this.rightBlocks=void 0,this.upBlocks=void 0,this.downBlocks=void 0,this.id=void 0,this.size=void 0,this.position=void 0,this.id=e,this.leftBlocks=new Map,this.rightBlocks=new Map,this.upBlocks=new Map,this.downBlocks=new Map,this.position={left:0,top:0},this.size={width:0,height:0}}var e,r;return e=t,(r=[{key:"collectBlocks",value:function(t,e,r,n){var c=this,u=o(t),s=i(u),l=u.width,f=u.height,d=u.left,h=u.top;return this.size={width:l,height:f},this.position={left:d,top:h},a(e,r,(function(e){var r;t.id!==e.id&&(r=i(r=o(e)),e=e.id,c.pushLeftBlock(e,s,r),c.pushRightBlock(e,s,r),c.pushUpBlock(e,s,r),c.pushDownBlock(e,s,r))})),this.pushContainer("container",u,n),this}},{key:"getNearest",value:function(t,e,r){var n,i,a;if(e)return n=o(t),i=[],a=[],e.forEach((function(t){t.leftBlocks.forEach((function(t,e){t.forEach((function(t){var r=(t=t.layerBlock).size;t=t.position,r=n.left-t.left-r.width-e,i.push({x:r,y:n.left-r}),r=~~((t.left-n.width)/2);i.push({x:r-n.left,y:r})}))})),t.rightBlocks.forEach((function(t,e){t.forEach((function(t){var o=(t=t.layerBlock).size,a=(t=t.position).left-n.left-n.width-e;i.push({x:a,y:n.left+a}),a=t.left+o.width,t=~~((r.width-a-n.width)/2)+a-n.left;i.push({x:t,y:n.left+t})}))})),t.upBlocks.forEach((function(t,e){t.forEach((function(t){var r=(t=t.layerBlock).size;t=t.position,r=n.top-t.top-r.height-e,a.push({x:r,y:n.top-r}),r=~~((t.top-n.height)/2);a.push({x:r-n.top,y:r})}))})),t.downBlocks.forEach((function(t,e){t.forEach((function(t){var o=(t=t.layerBlock).size,i=(t=t.position).top-n.top-n.height-e;a.push({x:i,y:n.top+i}),i=t.top+o.height,t=~~((r.height-i-n.height)/2)+i-n.top;a.push({x:t,y:n.top+t})}))}))})),i.length?{left:v()(i,(function(t){return Math.abs(t.x)}))[0],top:v()(a,(function(t){return Math.abs(t.x)}))[0]}:null}},{key:"getBlocks",value:function(t){var e;return t?(e=this.getRenderBlocks(this.getHorizontalSpacings(),c.left,c.right,t),t=this.getRenderBlocks(this.getVerticalSpacings(),c.up,c.down,t),e.concat(t)):[]}},{key:"getBlocksWithSpacing",value:function(t,e){return e===c.left?this.leftBlocks.get(t)||[]:e===c.right?this.rightBlocks.get(t)||[]:e===c.up?this.upBlocks.get(t)||[]:e===c.down&&this.downBlocks.get(t)||[]}},{key:"getRelationBlocks",value:function(t,e,r){var n=[],o=this.getBlocksWithSpacing(t,e);return n.push.apply(n,x(o)),o.forEach((function(o){(o=r.getBlocks(o.id,t,e))&&n.push.apply(n,x(o))})),n}},{key:"getRenderBlocks",value:function(t,e,r,n){for(var o=0,i=t.length;o<i;o++)for(var a=[t[o],t[o]-1,t[o]+1],u=0;u<a.length;u++)for(var s=a[u],l=0;l<a.length;l++){var f=a[l],d=this.getRelationBlocks(s,e,n);f=this.getRelationBlocks(f,r,n),d=b()(d.concat(f),(function(t){return"".concat(t.left,"-").concat(t.width,"-").concat(t.top,"-").concat(t.height)})),f=void 0;if(2<(f=e===c.left?b()(d,(function(t){return"".concat(t.left,"-").concat(t.width)})):b()(d,(function(t){return"".concat(t.top,"-").concat(t.height)}))).length||2==f.length&&f[0].id!==f[1].id)return d}return[]}},{key:"getVerticalSpacings",value:function(){var t=Array.from(this.upBlocks.keys()),e=Array.from(this.downBlocks.keys());return v()(t.concat(e))}},{key:"getHorizontalSpacings",value:function(){var t=Array.from(this.leftBlocks.keys()),e=Array.from(this.rightBlocks.keys());return v()(t.concat(e))}},{key:"pushDownBlock",value:function(t,e,r){var n,o=r.lt.y-e.lb.y;o<3||r.rt.x<e.lb.x||r.lt.x>e.rb.x||(n=(r=v()([e.lb,e.rb,r.lt,r.rt],(function(t){return t.x})))[2].x-r[1].x)<3||this.pushDown({id:t,left:r[1].x,top:e.lb.y,width:n,height:o,isHorizontal:!1,direction:c.down,layerBlock:this})}},{key:"pushUpBlock",value:function(t,e,r){var n,o=e.lt.y-r.lb.y;o<3||r.rb.x<e.lt.x||r.lb.x>e.rt.x||(n=(e=v()([e.lt,e.rt,r.lb,r.rb],(function(t){return t.x})))[2].x-e[1].x)<3||this.pushUp({id:t,left:e[1].x,top:r.lb.y,width:n,height:o,isHorizontal:!1,direction:c.up,layerBlock:this})}},{key:"pushLeftBlock",value:function(t,e,r){var n,o=e.lt.x-r.rt.x;o<3||r.rb.y<e.lt.y||r.rt.y>e.lb.y||(n=(e=v()([e.lt,e.lb,r.rt,r.rb],(function(t){return t.y})))[2].y-e[1].y)<3||this.pushLeft({id:t,left:r.rt.x,top:e[1].y,width:o,height:n,isHorizontal:!0,direction:c.left,layerBlock:this})}},{key:"pushRightBlock",value:function(t,e,r){var n,o=r.lt.x-e.rt.x;o<3||r.lb.y<e.rt.y||r.lt.y>e.rb.y||(n=(r=v()([e.rt,e.rb,r.lt,r.lb],(function(t){return t.y})))[2].y-r[1].y)<3||this.pushRight({id:t,left:e.rt.x,top:r[1].y,width:o,height:n,isHorizontal:!0,direction:c.right,layerBlock:this})}},{key:"pushContainer",value:function(t,e,r){this.pushLeft({id:t,left:0,top:e.top,width:e.left,height:e.height,isHorizontal:!0,direction:c.left,layerBlock:this}),this.pushRight({id:t,left:e.left+e.width,top:e.top,width:r.width-(e.left+e.width),height:e.height,isHorizontal:!0,direction:c.right,layerBlock:this}),this.pushUp({id:t,left:e.left,top:0,width:e.width,height:e.top,isHorizontal:!1,direction:c.up,layerBlock:this}),this.pushDown({id:t,left:e.left,top:e.top+e.height,width:e.width,height:r.height-(e.top+e.height),isHorizontal:!1,direction:c.down,layerBlock:this})}},{key:"pushUp",value:function(t){var e=this;[t.height].forEach((function(r){var n;e.upBlocks.has(r)?null!=(n=e.upBlocks.get(r))&&n.push(t):e.upBlocks.set(r,[t])}))}},{key:"pushDown",value:function(t){var e=this;[t.height].forEach((function(r){var n;e.downBlocks.has(r)?null!=(n=e.downBlocks.get(r))&&n.push(t):e.downBlocks.set(r,[t])}))}},{key:"pushLeft",value:function(t){var e=this;[t.width].forEach((function(r){var n;e.leftBlocks.has(r)?null!=(n=e.leftBlocks.get(r))&&n.push(t):e.leftBlocks.set(r,[t])}))}},{key:"pushRight",value:function(t){var e=this;[t.width].forEach((function(r){var n;e.rightBlocks.has(r)?null!=(n=e.rightBlocks.get(r))&&n.push(t):e.rightBlocks.set(r,[t])}))}}])&&_(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var L=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.data=void 0,this.data=new Map}var e,r;return e=t,(r=[{key:"push",value:function(t,e,r,n){t=new E(t.id).collectBlocks(t,e,r,n),this.data.set(t.id,t)}},{key:"getBlocks",value:function(t,e,r){var n=this,o=[];return function t(i){(i=n.data.get(i))&&(i=i.getBlocksWithSpacing(e,r))&&(o.push.apply(o,function(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?k(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i)),i.forEach((function(e){t(e.id)})))}(t),o}},{key:"forEach",value:function(t){this.data.forEach((function(e){t(e)}))}}])&&S(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(918);var T=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.data=void 0,this.data=[]}var e,r;return e=t,(r=[{key:"push",value:function(t){t=o(t),this.data.push(t)}},{key:"getNearest",value:function(t){var e=o(t),r=i(e),n=[],a=[];return this.data.forEach((function(t){var o=i(t);[r.lt,r.tc,r.rt].forEach((function(t,r){[o.lt,o.tc,o.rt].forEach((function(o){n.push({x:t.x-o.x,y:o.x-~~(0===r?0:e.width/(3-r))})}))})),[r.lt,r.lc,r.lb].forEach((function(t,r){[o.lt,o.lc,o.lb].forEach((function(n){a.push({x:t.y-n.y,y:n.y-~~(0===r?0:e.height/(3-r))})}))}))})),n.length&&a.length?{left:v()(n,(function(t){return Math.abs(t.x)}))[0],top:v()(a,(function(t){return Math.abs(t.x)}))[0]}:null}},{key:"getLines",value:function(t){var e=this,r=i(t=o(t)),n=[];return this.data.forEach((function(t){var o;t=i(t);(o=((o=((o=((o=((o=((o=e.collectLeftLine(r,t))&&n.push(o),e.collectVerticalLine(r,t)))&&n.push(o),e.collectRightLine(r,t)))&&n.push(o),e.collectTopLine(r,t)))&&n.push(o),e.collectHorizontalLine(r,t)))&&n.push(o),e.collectBottomLine(r,t)))&&n.push(o)})),n}},{key:"collectLeftLine",value:function(t,e){var r=[t.lt,t.lb];if(this.equalCoord(t.lt.x,e.lt.x)&&(r.push(e.lt),r.push(e.lb)),this.equalCoord(t.lt.x,e.tc.x)&&(r.push(e.tc),r.push(e.bc)),this.equalCoord(t.lt.x,e.rt.x)&&(r.push(e.rt),r.push(e.rb)),2<r.length)return t=w()(r,(function(t){return t.y})),e=O()(r,(function(t){return t.y})),{left:t.x-1,top:t.y,width:1,height:e.y-t.y,isHorizontal:!1}}},{key:"collectVerticalLine",value:function(t,e){var r=[t.tc,t.bc];if(this.equalCoord(t.tc.x,e.lt.x)&&(r.push(e.lt),r.push(e.lb)),this.equalCoord(t.tc.x,e.tc.x)&&(r.push(e.tc),r.push(e.bc)),this.equalCoord(t.tc.x,e.rt.x)&&(r.push(e.rt),r.push(e.rb)),2<r.length)return t=w()(r,(function(t){return t.y})),e=O()(r,(function(t){return t.y})),{left:t.x-.5,top:t.y,width:1,height:e.y-t.y,isHorizontal:!1}}},{key:"collectRightLine",value:function(t,e){var r=[t.rt,t.rb];if(this.equalCoord(t.rt.x,e.lt.x)&&(r.push(e.lt),r.push(e.lb)),this.equalCoord(t.rt.x,e.tc.x)&&(r.push(e.tc),r.push(e.bc)),this.equalCoord(t.rt.x,e.rt.x)&&(r.push(e.rt),r.push(e.rb)),2<r.length)return t=w()(r,(function(t){return t.y})),e=O()(r,(function(t){return t.y})),{left:t.x,top:t.y,width:1,height:e.y-t.y,isHorizontal:!1}}},{key:"collectTopLine",value:function(t,e){var r=[t.lt,t.rt];if(this.equalCoord(t.lt.y,e.lt.y)&&(r.push(e.lt),r.push(e.rt)),this.equalCoord(t.lt.y,e.lc.y)&&(r.push(e.lc),r.push(e.rc)),this.equalCoord(t.lt.y,e.lb.y)&&(r.push(e.lb),r.push(e.rb)),2<r.length)return t=w()(r,(function(t){return t.x})),e=O()(r,(function(t){return t.x})),{left:t.x,top:t.y-1,width:e.x-t.x,height:1,isHorizontal:!0}}},{key:"collectHorizontalLine",value:function(t,e){var r=[t.lc,t.rc];if(this.equalCoord(t.lc.y,e.lt.y)&&(r.push(e.lt),r.push(e.rt)),this.equalCoord(t.lc.y,e.lc.y)&&(r.push(e.lc),r.push(e.rc)),this.equalCoord(t.lc.y,e.lb.y)&&(r.push(e.lb),r.push(e.rb)),2<r.length)return t=w()(r,(function(t){return t.x})),e=O()(r,(function(t){return t.x})),{left:t.x,top:t.y-.5,width:e.x-t.x,height:1,isHorizontal:!0}}},{key:"collectBottomLine",value:function(t,e){var r=[t.lb,t.rb];if(this.equalCoord(t.lb.y,e.lt.y)&&(r.push(e.lt),r.push(e.rt)),this.equalCoord(t.lb.y,e.lc.y)&&(r.push(e.lc),r.push(e.rc)),this.equalCoord(t.lb.y,e.lb.y)&&(r.push(e.lb),r.push(e.rb)),2<r.length)return t=w()(r,(function(t){return t.x})),e=O()(r,(function(t){return t.x})),{left:t.x,top:t.y,width:e.x-t.x,height:1,isHorizontal:!0}}},{key:"equalCoord",value:function(t,e){return t===e||t+1===e||t-1===e}}])&&I(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?C(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R(t,e){return t<=e[0]||t>=e[1]}function N(t){var e=Y();e.preCopyId===t&&e.setDistance(0)}var D=f.a.memo((function(t){var e=t.width,r=t.height,i=void 0===(t=t.adsorbDistance)?5:t,c={width:e,height:r},u=Object(d.i)(),v=Object(p.L)().moveActiveLayer,b=(0,Object(p.n)().getActiveLayer)(),w=Object(p.f)().getActiveInfo,O=(t=n()).getPickId,x=t.resetPickId,j=Object(p.p)().getLayers,_=Object(l.useRef)(),k=Object(l.useRef)(),S=(t=A(Object(l.useState)([]),2))[0],I=t[1],M=(t=A(Object(l.useState)([]),2))[0],C=t[1],N=Object(l.useRef)(!1),D=Object(l.useRef)([0,0]),F=Object(l.useRef)(!1),B=Object(l.useRef)([0,0]),G=Object(l.useRef)({x:0,y:0}),U=Object(l.useRef)(!1),z=Object(l.useRef)(!1),W=Object(y.l)(),K=Object(y.e)();return Object(h.e)((function(t){if(b&&!b.lock){if(Object(m.ib)(t.target)){if(Object(m.m)(t.target,[g.a.MOVE,g.a.LAYER]))return}else{if(W||K)return;var n=O(u,t);if(!n)return;if(![null==(H=w())?void 0:H.id,null==(H=w())?void 0:H.pickId].includes(n))return}t.isEnd&&x();var s,l,f,d,h,p,y,S,M,P,A,H=w();H&&(n=_.current,s=k.current,l=j(),t.isStart&&(f=new T,d=new L,f.push({width:e,height:r,left:0,top:0,rotate:0}),a(l,b,(function(t){f.push(t),d.push(t,l,b,c)})),_.current=n=f,k.current=s=d),h=t.displacementX/u,p=t.displacementY/u,P=null==(P=n)?void 0:P.getNearest(b),S=(y=new E(b.id)).getNearest(b,s,c),M=i/u,H=o(H),P||S?(P&&(U.current||(A=P.left.y-H.left,Math.abs(P.left.x)<M&&(N.current||(G.current.x=A,D.current=[A-M,A+M],N.current=!0)),N.current?R(h,D.current)&&(N.current=!1,G.current.x=h):G.current.x=h),z.current||(A=P.top.y-H.top,Math.abs(P.top.x)<M&&(F.current||(G.current.y=A,B.current=[A-M,A+M],F.current=!0)),F.current?R(p,B.current)&&(F.current=!1,G.current.y=p):G.current.y=p)),S&&(N.current||(P=S.left.y-H.left,Math.abs(S.left.x)<M&&(U.current||(G.current.x=P,D.current=[P-M,P+M],U.current=!0)),U.current?R(h,D.current)&&(U.current=!1,G.current.x=h):G.current.x=h),F.current||(A=S.top.y-H.top,Math.abs(S.top.x)<M&&(z.current||(G.current.y=A,B.current=[A-M,A+M],z.current=!0)),z.current?R(p,B.current)&&(z.current=!1,G.current.y=p):G.current.y=p))):(G.current.x=h,G.current.y=p),v(G.current.x,G.current.y),(H=null==(P=n)?void 0:P.getLines(b))&&C(H),y.collectBlocks(b,l,b,c),I(y.getBlocks(s)),t.isEnd)&&(C([]),I([]),_.current=void 0,k.current=void 0,N.current=!1,F.current=!1,U.current=!1,z.current=!1)}})),b?f.a.createElement("div",{className:"l-guides"},f.a.createElement("div",null,M.map((function(t,e){return f.a.createElement("div",{key:e,className:"l-guides__line",style:P(P({},t),{},{height:t.isHorizontal?t.height/u:t.height,width:t.isHorizontal?t.width:t.width/u})})})),S.map((function(t,e){return f.a.createElement("div",{key:e,className:s()("l-guides__block",{horizontal:t.isHorizontal,vertical:!t.isHorizontal}),style:{left:t.left,top:t.top,width:t.width,height:t.height}},f.a.createElement("div",{className:"l-guides__block-flag",style:{width:t.isHorizontal?"100%":1/u,height:t.isHorizontal?1/u:"100%"}},f.a.createElement("div",{className:"l-guides__block-flag-before",style:{top:(t.isHorizontal?-2:0)/u,left:(t.isHorizontal?0:-2)/u,width:(t.isHorizontal?1:5)/u,height:(t.isHorizontal?5:1)/u}}),f.a.createElement("div",{className:"l-guides__block-flag-after",style:{top:t.isHorizontal?-2/u:"auto",right:t.isHorizontal?0:"auto",bottom:t.isHorizontal?"auto":0,left:t.isHorizontal?"auto":-2/u,width:(t.isHorizontal?1:5)/u,height:(t.isHorizontal?5:1)/u}})))})))):null})),F=r(19),B=r(24),G=Symbol("addAction"),U=function(){var t=Object(p.w)(),e=t.cloneLayer,r=t.delLayer,n=t.addOrUpdate,o=Object(p.f)().getActiveInfo,i=Object(p.r)().brokeGroupLayer,a=Object(p.h)().setActiveLayer,c=Object(B.e)(),s=Object(p.f)().delActiveLayer;return Object(B.i)(G,{undo:function(t){var e=t.oldActiveId;t=t.newInfo;i(),e?a(e):s(),r(t)},redo:function(t){var e=t.activeNewLayer;t=t.newInfo;i(),n(t),e?a(t.id):s()}}),{pushHistory:function(t,e){c.push(G,{oldActiveId:e,newInfo:t,activeNewLayer:!0})},action:function(t){var r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],l=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],f=o();return r&&(r=e(t),c.push(G,{oldActiveId:null==f?void 0:f.id,newInfo:r,activeNewLayer:l})),i(),n(t),l?a(t.id):s(),F.a.emit(u.c.add,t.id),null==f?void 0:f.id}}},z=r(139),W=null,K=0,H="",Y=(F.b.onInit((function(){W=null,K=0,H=""})),function(){return{get copyInfo(){return W},get copyDistance(){return K},get preCopyId(){return H},setCopyInfo:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:g.b;W=t,K=e},setPreCopyId:function(t){H=t},setDistance:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:g.b;K=t}}}),V=(F.a.on(u.c.move,N),F.a.on(u.c.delete,N),Symbol("copyAction")),X=function(){var t=Object(B.e)(),e=Object(p.p)().getLayer,r=Object(p.w)(),n=r.cloneLayer,o=r.delLayer,i=r.addOrUpdate,a=Object(p.f)().getActiveInfo,c=Object(p.r)().brokeGroupLayer,s=Object(p.h)().setActiveLayer,l=Y();return Object(B.i)(V,{undo:function(t){var e=t.oldInfo;t=t.newInfo;o(t),e&&(i(e),s(e.id))},redo:function(t){(t=t.newInfo)&&(i(t),s(t.id))}}),{action:function(r,o){var f,d=r,h=a();if(!d)if(r)d=e(r.id);else{if(!h)return;d=e(h.id)}if(d&&!d.lock&&!d.parentId&&(d=n(d)))return h&&(f=n(h.id)),c(),function t(e,n){e.id=Object(z.a)();var o=r?l.copyDistance:g.b;e.left=e.left+o,e.top=e.top+o,n&&(e.parentId=n),(e.children||[]).forEach((function(r){t(r,e.id)}))}(d),o&&Object(m.gc)(d,o),i(d),t.push(V,{newInfo:d,oldInfo:f}),o||!r&&!l.copyInfo||(l.setPreCopyId(d.id),l.setCopyInfo(d,g.b)),s(d.id),F.a.emit(u.c.copy,d.id),!0}}},q=r(328),$=Symbol("deleteAction"),Z=function(){var t,e=Object(B.e)(),r=Object(p.x)().getId,n=(t=Object(p.u)()).destroy,o=t.getHoverId,i=Object(p.p)().getLayer,a=(t=Object(p.w)()).cloneLayer,c=t.delLayer,s=t.addOrUpdate,l=Object(p.v)().getLayerIndexMap,f=(t=Object(p.f)()).getActiveInfo,d=t.delActiveLayer,h=Object(p.h)().setActiveLayer,m=Object(y.t)();return Object(B.i)($,{undo:function(t){var e=t.delInfo;t=t.delIndexMap;s({layer:e,insertIds:t}),e.parentId||h(e.id)},redo:function(t){t=t.delInfo,c(t),d()}}),{action:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s=1<arguments.length?arguments[1]:void 0,h=void 0;if(s)h=s;else{if(!(s=f()))return;if(r())return;(s=s.id)===o()&&n(),h=i(s)}if(h&&!h.lock){if(s=h.id,t&&(t=Object(q.b)(h.id),null!=(p=(y=q.c.getEvents()).del)&&p.call(y,t),t.isPreventDefault))return;h.layerType===g.h.TEXT_LAYER&&m(!1);var p=a(h),y=l(s).layerIndexMap;return d(),c(h),e.push($,{delInfo:p,delIndexMap:y}),F.a.emit(u.c.delete,h.id,h),h}}}},J=(Symbol("hiddenAction"),Symbol("lockAction")),Q=function(){var t,e=Object(p.p)().getLayer,r=(t=Object(p.w)()).cloneLayer,n=t.addOrUpdate,o=(t=Object(p.r)()).brokeGroupLayer,i=t.setGroupPickId,a=Object(y.t)(),c=Object(B.e)();return Object(B.i)(J,{redo:function(t,e){var r=t.isLockExtraGroup;t=t.newInfo;r?null!=t&&t.forEach((function(t){n(t)})):e({newInfo:t})}}),{action:function(t){var s,l,f,d,h=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];(t=e(t))&&((l=(s=t.layerType===g.h.GROUP_LAYER)&&t.data.isExtraGroup)?(d=r(t),f=[],(t.children||[]).forEach((function(t){t.lock=!0,t.parentId=void 0,f.push(t),n(t)})),o(),c.push(J,{oldInfo:d,newInfo:f,isLockExtraGroup:!0})):(d=r(t),t.lock=h,t.layerType===g.h.TEXT_LAYER&&a(!1),n(t),i(""),c.push(J,{oldInfo:d,newInfo:t})),F.a.emit(u.c.lock,t.id,s,l,h))}}},tt=(e=r(91),r.n(e)),et=Symbol("opacityAction"),rt=function(){var t=Object(p.M)(),e=Object(B.e)(),r=Object(p.h)().setActiveLayer;return Object(B.i)(et,{undo:function(e){var n=e.id;e=e.originOpacity;t({payload:{id:n,opacity:e},callback:function(){}}),r(n)},redo:function(e){var n=e.id;e=e.opacity;t({payload:{id:n,opacity:e},callback:function(){}}),r(n)}}),{action:function(r,n,o){t({payload:{id:r,opacity:n},callback:function(){}}),tt()(o)&&(e.push(et,{id:r,originOpacity:o,opacity:n}),F.a.emit(u.c.opacity,r))}}},nt=Symbol("toolRotateAction"),ot=function(){var t=Object(p.N)(),e=Object(B.e)(),r=Object(p.h)().setActiveLayer;return Object(B.i)(nt,{undo:function(e){var n=e.id;e=e.originRotate;t({payload:{id:n,rotate:e},callback:function(){}}),r(n)},redo:function(e){var n=e.id;e=e.rotate;t({payload:{id:n,rotate:e},callback:function(){}}),r(n)}}),{action:function(r,n,o){t({payload:{id:r,rotate:n},callback:function(t){}}),tt()(o)&&(e.push(nt,{id:r,originRotate:o,rotate:n}),F.a.emit(u.c.rotate,r))}}},it=(e=r(180),r.n(e));function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?ct(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ut(){var t=Object(p.h)().setActiveLayer,e=Object(p.p)().getLayer,r=Object(p.w)().addOrUpdate,n=Object(p.j)(),o=Object(p.G)(),i=Object(B.e)();return Object(B.i)(st,{undo:function(e){var n=e.oldMap;e=e.layer;r(e),o(n),t(e.id)},redo:function(e){var n=e.newMap;e=e.layer;r(e),o(n),t(e.id)}}),{action:function(t,e,r){var o=new Map;return n({toId:t,type:e,originMap:r,callback:function(t){o=t}}),o},pushHistory:function(t,r,n){var o=e(t);i.push(st,{layer:o,oldMap:r,newMap:n}),F.a.emit(u.c.sort,t)}}}var st=Symbol("sortAction"),lt=function(){var t=Object(p.p)().getLayer,e=Object(p.v)().getLayerIndexSortList,r=ut();return{getSortData:function(n){var o,i,a,c,u,s,l,f,d,h,p=it()(n)?t(n):n;return!p||p.lock?{disableBottom:!0,disableTop:!0,disableUp:!0,disableDown:!0}:(o=p.id,n=!1,null!=(u=p.data)&&u.isExtraGroup&&(n=!0),u=e(o,n,[g.h.BACKGROUND_LAYER,g.h.MAIN_LAYER]),i=u.sortList,a=u.sortIndex,c=u.originLayerSortMap,u=(n=i.length)<2,h=function(t){t=i[t],t=r.action(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"origin",c),r.pushHistory(o,c,t)},{disableBottom:s=0===a||u,disableTop:l=a===n-1||u,disableUp:f=a===n-1,disableDown:d=0===a,setTop:function(){var t;l||null!=(t=p)&&t.lock||h(i.length-1,"up")},setBottom:function(){var t;s||null!=(t=p)&&t.lock||h(0,"down")},setDown:function(){var t;d||null!=(t=p)&&t.lock||h(a-1,"down")},setUp:function(){var t;f||null!=(t=p)&&t.lock||h(a+1,"up")}})}}},ft=function(t,e,r){var n=(_=at(Object(l.useState)(!0),2))[0],o=_[1],i=(_=at(Object(l.useState)(!0),2))[0],a=_[1],c=(_=at(Object(l.useState)(0),2))[0],u=_[1],s=(_=at(Object(l.useState)(0),2))[0],f=_[1],d=(_=at(Object(l.useState)([]),2))[0],h=_[1],y=(_=at(Object(l.useState)(0),2))[0],m=_[1],v=(_=at(Object(l.useState)(new Map),2))[0],b=_[1],w=Object(l.useRef)(new Map),O=Object(l.useRef)(new Map),x=ut(),j=Object(p.v)().getLayerIndexSortList,_=Object(B.g)();return Object(l.useEffect)((function(){var t,n,o;e&&(t=(o=j(e,r,[g.h.BACKGROUND_LAYER,g.h.MAIN_LAYER])).sortList,n=o.sortIndex,o=o.originLayerSortMap,u(n),f(n),h(t),m(n),b(o),w.current=o)}),[t,_]),Object(l.useEffect)((function(){var t=d.length,e=t<2;o(0===c||e),a(c===t-1||e)}),[c,d]),{changeIndex:function(t){var e=d[t],r="origin";t<y?r="down":y<t&&(r="up"),e=x.action(e,r,v);O.current=e,u(t)},changeIndexAfter:function(t){s!==t&&(x.pushHistory(e,w.current,O.current),w.current=O.current),f(t)},disableDown:n,disableRise:i,renderList:d,curIndex:c}},dt=function(t,e){function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;(t.children||[]).forEach((function(t){t.left=t.left+e,t.top=t.top+n,r(t,e,n)}))}function n(t,e,n){var s,d=(h=function(t){return(t=c(t))?{layer:t,oldInfo:l(t)}:{layer:t}}(t)).layer,h=h.oldInfo;d&&h&&(s=(n=n(o(d))).x,n=n.y,d.left+=s,d.top+=n,r(d,s,n),f(d),a(t),i.action(h,d),F.a.emit(u.c.align,t,e))}var i=Object(B.h)(),a=Object(p.h)().setActiveLayer,c=Object(p.p)().getLayer,s=Object(p.w)(),l=s.cloneLayer,f=s.addOrUpdate;return{left:function(t){n(t,"left",(function(t){return{x:-t.left,y:0}}))},horizontalCenter:function(t){n(t,"horizontalCenter",(function(t){return{x:0,y:~~(e-t.height)/2-t.top}}))},right:function(e){n(e,"right",(function(e){return{x:t-e.width-e.left,y:0}}))},top:function(t){n(t,"top",(function(t){return{x:0,y:-t.top}}))},verticalCenter:function(e){n(e,"verticalCenter",(function(e){return{x:~~(t-e.width)/2-e.left,y:0}}))},bottom:function(t){n(t,"bottom",(function(t){return{x:0,y:e-t.height-t.top}}))}}},ht=function(){var t=Object(p.p)().getLayer,e=Object(p.w)(),r=e.cloneLayer,n=e.addOrUpdate,o=Object(B.h)();return{flip:function(e,i,a){var c,s;(e=t(e))&&(c=r(e),e.layerType===g.h.TEXT_LAYER?(s=e.data,i&&(s.flipH=!s.flipH),a&&(s.flipV=!s.flipV)):e.layerType!==g.h.BACKGROUND_LAYER&&e.layerType!==g.h.IMAGE_LAYER&&e.layerType!==g.h.MAIN_LAYER||(s=e.data.imageTransform,i&&(s.flipH=!s.flipH),a&&(s.flipV=!s.flipV)),n(e),o.action(c,e),F.a.emit(u.c.flip,i,a))}}},pt=r(156),yt=!1,gt=new Set,mt={duration:3600,getShine:function(){return yt},checkIgnore:function(t){return gt.has(t)},setIgnoreTypes:function(t){gt.clear(),t.forEach((function(t){gt.add(t)}))},disableLayerShine:function(){yt=!1},enableLayerShine:function(){yt=!0}};function vt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wt(t){var e=t.layer,r=t.children,n=(t=t.isOverflowHidden,e.id),o=e.width,i=e.height,a=e.shine,c=e.layerType,u=(e=e.lock,a&&mt.getShine()&&!mt.checkIgnore(c)),s=Object(l.useRef)(null);return Object(l.useEffect)((function(){var t;return u&&s.current&&(s.current.classList.add(Ot),t=setTimeout((function(){var t;null!=(t=s.current)&&t.classList.remove(Ot)}),mt.duration)),function(){clearTimeout(t)}}),[]),f.a.createElement("div",{id:n,"data-lock":e,"data-layer-type":c,"data-type":"layer",className:"l-base__layer",style:{width:"".concat(o,"px"),height:"".concat(i,"px")},ref:s},f.a.createElement("div",{style:{pointerEvents:"none",width:"".concat(o,"px"),height:"".concat(i,"px"),overflow:t?"hidden":"inherit"}},r))}r(486);var Ot="l-base__shine",xt={shine:function(t){var e=document.getElementById(t);e&&!e.classList.contains(Ot)&&(e.classList.add(Ot),setTimeout((function(){e.classList.remove(Ot)}),mt.duration))}},jt=function(t){var e=t.layer,r=void 0!==(r=t.isOverflowHidden)&&r,n=t.overflowStageHidden,o=t.isLinkOperate,i=void 0===(i=t.baseLayerType)?g.a.LAYER:i,a=void 0!==(a=t.disableEvents)&&a,c=(t=t.children,e.width),u=e.height,l=e.left,d=e.top,h=e.rotate,p=e.hidden,y=e.parentId;o=(void 0===o||!o)&&y||p?"none":"all",y={};return void 0===n||n||(y.overflow="unset"),f.a.createElement("div",{"data-move-make-up":"true",style:bt(bt({visibility:p?"hidden":"visible",pointerEvents:a?"none":o},y),{},{backfaceVisibility:"hidden"}),className:s()("l-base","l-base-".concat(i))},f.a.createElement("div",{style:{transform:"translate(".concat(l+c/2,"px, ").concat(d+u/2,"px)")},className:s()("l-base__position","l-base__position-".concat(i))},f.a.createElement("div",{style:{transform:"rotate(".concat(h,"deg)")},className:"l-base__rotate"},i===g.a.LAYER?f.a.createElement(wt,{layer:e,isOverflowHidden:r},t):f.a.createElement(f.a.Fragment,null," ",t))))},_t=r(13),Et=(r(920),f.a.memo((function(t){var e=t.id,r=t.layerType,o=t.enableGuides,i=Object(pt.a)(),a=Object(d.i)(),c=(t=n()).getPickId,u=t.resetPickId,l=Object(y.h)(),v=Object(y.t)(),b=Object(y.z)(),w=Object(y.l)(),O=Object(y.e)(),x=Object(p.f)().getActiveInfo;return Object(h.e)((function(t){if(Object(m.ib)(t.target)){if(Object(m.m)(t.target,[g.a.MOVE,g.a.LAYER]))return}else{var r;if(w||O)return;var n=c(a,t);if(!n)return;if(![null==(r=x())?void 0:r.id,null==(r=x())?void 0:r.pickId].includes(n))return}t.isEnd&&u(),i.move(e,t,o)})),f.a.createElement("div",{className:s()("l-operate__move",{"l-operate__none-event":l}),"data-type":g.a.MOVE,onDoubleClick:function(t){t.preventDefault(),t.stopPropagation(),r!==g.h.TEXT_LAYER||l||v(!0),b()}})}))),kt=r(160),St=(e=r(80),r.n(e));function Lt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function It(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(r),!0).forEach((function(e){Tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(921);var Pt=f.a.memo((function(t){function e(t,e){return{opacity:t&&t!==e?0:1}}var r=t.id,n=t.rotate,o=t.layerType,i=t.writingMode,a=(t=t.hiddenOperate,(p=Object(h.b)()).opacity),c=p.show,u=p.hide,d=Object(pt.b)(),p=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Mt(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mt(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(l.useState)(null),2),y=p[0],v=p[1];p=Object(kt.a)(n);return Object(h.e)((function(t){var e;Object(m.ib)(t.target)?(Object(m.l)(t.target,g.a.RESIZE)?(e=t.target.getAttribute("data-operate"),v(e),d.resize(r,n,e,t)):u(),t.isEnd&&(c(),v(null))):(u(),t.isEnd&&c())})),o===g.h.GROUP_LAYER?null:f.a.createElement("div",{className:s()("l-operate__resize"),style:{opacity:a}},f.a.createElement("div",{className:s()(Tt({},St.a.hidden,o===g.h.TEXT_LAYER&&i===g.A.HORIZONTAL_TB||o===g.h.TEXT_MATERIAL_LAYER))},f.a.createElement("span",{className:s()("resize",g.r.TC,p.TC,Tt({},St.a.hidden,t&&y!==g.r.TC)),"data-type":g.a.RESIZE,"data-operate":g.r.TC,style:It({},e(y,g.r.TC))}),f.a.createElement("span",{className:s()("resize",g.r.BC,p.BC,Tt({},St.a.hidden,!1)),"data-type":g.a.RESIZE,"data-operate":g.r.BC,style:It({},e(y,g.r.BC))})),f.a.createElement("div",{className:s()(Tt({},St.a.hidden,o===g.h.TEXT_LAYER&&i!==g.A.HORIZONTAL_TB||o===g.h.TEXT_MATERIAL_LAYER))},f.a.createElement("span",{className:s()("resize",g.r.LC,p.LC,Tt({},St.a.hidden,t&&y!==g.r.LC)),"data-type":g.a.RESIZE,"data-operate":g.r.LC,style:It({},e(y,g.r.LC))}),f.a.createElement("span",{className:s()("resize",g.r.RC,p.RC,Tt({},St.a.hidden,!1)),"data-type":g.a.RESIZE,"data-operate":g.r.RC,style:It({},e(y,g.r.RC))})))})),At=(r(922),f.a.memo((function(t){var e=t.id,r=(t=t.rotate,(i=Object(h.b)()).opacity),n=i.show,o=i.hide,i=Object(kt.b)(t),a=Object(pt.c)();return Object(h.e)((function(t){Object(m.ib)(t.target)&&Object(m.l)(t.target,g.a.ROTATE)?a.rotate(e,t):o(),t.isEnd&&n()})),f.a.createElement("div",{className:s()("l-operate__rotate",i),style:{opacity:r},"data-type":g.a.ROTATE},f.a.createElement("div",{className:"l-operate__none-event rotate-icon"},f.a.createElement(_t.d,{fontSize:20,name:"arrow2Circles"})))})));function Ct(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(r),!0).forEach((function(e){Nt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Nt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(923);var Ft=f.a.memo((function(t){function e(t,e){return{opacity:t&&t!==e?0:1}}var r=t.id,n=t.hiddenOperate,o=t.rotate,i=(t=Object(kt.c)(o),(d=Object(h.b)()).opacity),a=d.show,c=d.hide,u=Object(pt.d)(),d=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Dt(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dt(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(l.useState)(null),2),p=d[0],y=d[1];return Object(h.e)((function(t){var e;Object(m.ib)(t.target)?(Object(m.l)(t.target,g.a.SCALE)?(e=t.target.getAttribute("data-operate"),y(e),u.scale(r,o,t)):c(),t.isEnd&&(a(),y(null))):(c(),t.isEnd&&a())})),f.a.createElement("div",{className:s()("l-operate__scale"),style:{opacity:i}},f.a.createElement("span",{className:s()("vertex",g.t.LT,t.LT,Nt({},St.a.hidden,n&&p!==g.t.LT)),"data-type":g.a.SCALE,"data-operate":g.t.LT,style:Rt({},e(p,g.t.LT))}),f.a.createElement("span",{className:s()("vertex",g.t.RB,t.RB,Nt({},St.a.hidden,!1)),"data-type":g.a.SCALE,"data-operate":g.t.RB,style:Rt({},e(p,g.t.RB))}),f.a.createElement("span",{className:s()("vertex",g.t.LB,t.LB,Nt({},St.a.hidden,n&&p!==g.t.LB)),"data-type":g.a.SCALE,"data-operate":g.t.LB,style:Rt({},e(p,g.t.LB))}),f.a.createElement("span",{className:s()("vertex",g.t.RT,t.RT,Nt({},St.a.hidden,n&&p!==g.t.RT)),"data-type":g.a.SCALE,"data-operate":g.t.RT,style:Rt({},e(p,g.t.RT))}))}));function Bt(t){var e=t.layer,r=(t=t.isHover,Object(p.q)().getLayer),n=Object(d.i)(),o=Object(p.g)(),i=e.children,a=[];if(((c=e.layerType)===g.h.GROUP_LAYER||c===g.h.TEXT_MATERIAL_LAYER)&&!t){var c,u=i||[];if(null!=(c=e.data)&&c.isExtraGroup)for(var l=0;l<u.length;l++){var h=y(u[l]);a.push(h)}else o&&o.pickId&&(t=r(o.pickId))&&(i=y(t),a.push(i))}function y(t){var e=t.id,r=t.width,o=t.height,i=t.lock;return f.a.createElement(jt,{key:e,layer:t,baseLayerType:g.a.OPERATE},f.a.createElement("div",{style:{width:"".concat(r*n,"px"),height:"".concat(o*n,"px"),transform:"translate(-50%, -50%) scale(".concat(1/n,")"),pointerEvents:"none"},className:s()("l-operate__border",St.a.border,(e={},t=St.a.locked,r=i,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))}))}return a.length?f.a.createElement("div",{className:"l-operate__make-up-child"},a):null}function Gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(924);var Ut,zt=f.a.memo((function(t){var e=t.id,r=Q();return f.a.createElement("div",{style:{width:"100%",height:"100%"},"data-type":g.a.LOCK},f.a.createElement(_t.x,{placement:"bottom",title:"\u89e3\u9501\u56fe\u5c42"},f.a.createElement("div",{className:"l-operate__lock",style:{transform:"translate(50%, 50%) scale(1)"},"data-type":g.a.LOCK_ICON,onClick:function(){r.action(e,!1)}},f.a.createElement("div",{className:"l-operate__none-event"},f.a.createElement(_t.d,{fontSize:20,name:"lockFill"})))))})),Wt=function(t){var e,r,n,o,i,a,c,l,h=t.id,m=t.isHover,v=t.isMakeup,b=void 0!==(b=t.enableGuides)&&b,w=(t=t.children,Object(y.n)()),O=Object(d.i)(),x=Object(p.w)().checkLayerInRender,j=Object(p.q)().getLayer,_=Object(p.o)().getActivePickLayer,E=Object(y.d)(),k=Object(y.f)();return x(h)&&(x=j(h))&&!k?(j=x.lock,k=x.width,e=x.height,r=x.rotate,n=x.layerType,o=(x.data||{}).writingMode,i=(x.data||{}).stretchOption===g.u.none,a=k<=u.b||e<=u.a,l=c=!1,n===g.h.GROUP_LAYER?c=!0:n===g.h.TEXT_MATERIAL_LAYER?c=!w:n===g.h.SVG_LAYER&&(l=(w=x.data.name)===g.w.line||w===g.w.arrow),w=_(),f.a.createElement("div",{className:"l-operate"},E?null:f.a.createElement(Bt,{layer:x,isHover:m}),f.a.createElement(jt,{disableEvents:m,layer:x,baseLayerType:g.a.OPERATE},f.a.createElement("div",{style:{width:"".concat(k*O,"px"),height:"".concat(e*O,"px"),transform:"translate(-50%, -50%) scale(".concat(1/O,")")},className:s()("l-operate__border",St.a.border,(Gt(_={},St.a.group,c),Gt(_,St.a.hovered,m),Gt(_,St.a.locked,j),Gt(_,St.a.moving,E),_))},j||m||v?null:f.a.createElement(f.a.Fragment,null,l?f.a.createElement(f.a.Fragment,null,f.a.createElement(Et,{id:h,enableGuides:b,layerType:null==w?void 0:w.layerType}),f.a.createElement("span",{className:s()(St.a.content,Gt({},St.a.move,E))},t)):f.a.createElement(f.a.Fragment,null,f.a.createElement(Et,{id:h,enableGuides:b,layerType:null==w?void 0:w.layerType}),i?null:f.a.createElement(Ft,{id:h,hiddenOperate:a,rotate:r}),f.a.createElement(At,{id:h,rotate:r}),i?null:f.a.createElement(Pt,{id:h,rotate:r,hiddenOperate:a,layerType:n,writingMode:o}),f.a.createElement("span",{className:s()(St.a.content,Gt({},St.a.move,E))},t))),j&&!m?f.a.createElement(zt,{id:h}):null)))):null},Kt=r(71),Ht=(r(925),null);function Yt(t){var e=t.id,r=t.left,n=t.top;t=t.txt;if(e!==Ut)return Ut=e,Yt.destroy(),Ht||((Ht=document.createElement("div")).style.pointerEvents="none",Ht.style.top="0",Ht.style.position="absolute",Ht.style.left="0",Ht.style.bottom="0",Ht.style.right="0",Ht.style.overflow="hidden",null!=(e=document.querySelector(".p-editor__stage"))&&e.append(Ht)),Kt.render(f.a.createElement("div",{className:"c-editor-tip",style:{left:r,top:n}},t),Ht)}Yt.destroy=function(){var t;Ht&&(Kt.unmountComponentAtNode(Ht)&&null!=(t=document.querySelector(".p-editor__stage"))&&t.removeChild(Ht),Ut=Ht=null)};var Vt=f.a.memo((function(t){var e=t.tipTxtMap,r=Object(p.p)().getLayer,n=Object(p.s)(),o=Object(p.g)(),i=Object(d.c)().left,a=Object(y.e)();return Object(l.useEffect)((function(){if(!a&&n&&(null==o?void 0:o.id)!==n&&(u=r(n))){var t,c=u.lock,u=u.layerType;if(!c&&e[u])if(c=document.getElementById(n))return(t=(c=c.getBoundingClientRect()).y-d.a-40)<0&&(t=c.y-d.a+c.height+5),Yt({id:n,left:c.x-2-i,top:t,txt:e[u]})}Yt.destroy()}),[n,o,i,a]),null}))},,function(t,e,r){"use strict";r.d(e,"b",(function(){return p}));var n,o,i=r(13),a=r(495),c=r.n(a);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=l(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==u(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function d(){var t,e;return n||((n=c.a.create(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},o))).interceptors.response.use(function(){t=s().mark((function t(e){var r,n,a,u,l,f;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(r=e.config).hideErrorToast,f=null==(f=o.config)?void 0:f.adaptor,l=e.data||{},l=f?f(l):l,f=(null==(f=o.config)?void 0:f.unauthorizedCodes)||[],n=(null==(n=o.config)?void 0:n.loginHandler)||function(){return Promise.resolve()},a=(null==(a=o.config)?void 0:a.successCode)||0,u=l.error_code,l=l.msg,f.includes(u)){if(h)return t.next=14,h;t.next=17}else t.next=27;break;case 14:t.t0=t.sent,t.next=20;break;case 17:return t.next=19,h=n();case 19:t.t0=t.sent;case 20:if(f=t.t0,h=null,f)return e.config.headers.access_token=f,t.abrupt("return",c.a.request(e.config));t.next=25;break;case 25:t.next=28;break;case 27:!u||u===a||r||i.i.error(l||"\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 28:return t.abrupt("return",e);case 29:case"end":return t.stop()}}),t)}));var t,e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(t){return e.apply(this,arguments)}}(),(function(t){var e=null==(e=o.config)?void 0:e.errorHandler,r=(null==(r=o.config)?void 0:r.errorMessage)||"\u60a8\u7684\u7f51\u7edc\u53d1\u751f\u5f02\u5e38\uff0c\u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668";return i.i.error(r),e&&e(t),Promise.reject(r)})),t=o.requestInterceptors||[],e=o.responseInterceptors||[],t.map((function(t){n.interceptors.request.use(t)})),e.map((function(t){n.interceptors.response.use(t)}))),n}var h=null,p=function(t){o=t};e.a=function(t,e){return d()(t,e)}},function(t,e,r){"use strict";r.d(e,"e",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return y}));e=r(12);var n={isMask:!1,setIsMask:Object(e.b)((function(t,e){t.isMask=e})),isLoading:!1,showLoadingMask:!1,setIsLoading:Object(e.b)((function(t,e){var r=e.loading;e=e.mask;t.isLoading=r,t.showLoadingMask=e})),tips:"\u52a0\u8f7d\u4e2d...",setTips:Object(e.b)((function(t,e){t.tips=e}))},o=(e=Object(e.f)()).useStoreState,i=e.useStoreActions,a=(e.useStoreDispatch,function(){var t=i((function(t){return t.globalMaskModel.setIsMask}));return{show:function(){t(!0)},hide:function(){t(!1)}}}),c=function(){var t=i((function(t){return t.globalMaskModel.setIsLoading})),e=i((function(t){return t.globalMaskModel.setTips}));return{show:function(r){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e(r||"\u52a0\u8f7d\u4e2d..."),t({loading:!0,mask:n})},hide:function(){t({loading:!1,mask:!1})}}},u=function(){return{isShowMask:o((function(t){return t.globalMaskModel.isMask})),isShowLoading:o((function(t){return t.globalMaskModel.isLoading}))}},s=r(13),l=(e=r(9),r.n(e)),f=(e=r(0),r.n(e));function d(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t){return f.a.createElement(s.h,{style:{width:"auto",minWidth:100,height:100},tip:t})}r(926);var y=f.a.memo((function(t){var e=t.isStage,r=void 0===(r=t.background)?"":r,n=void 0===(n=t.left)?0:n,i=void 0===(i=t.top)?0:i,a=void 0===(a=t.right)?0:a,c=(t=void 0===(t=t.bottom)?0:t,o((function(t){return t.globalMaskModel.isLoading}))),u=o((function(t){return t.globalMaskModel.showLoadingMask})),s=o((function(t){return t.globalMaskModel.isMask})),d=o((function(t){return t.globalMaskModel.tips})),y={};return r&&(y.background=r),!c&&!s||s&&e?null:(r={left:n,top:i,right:a,bottom:t},f.a.createElement("div",{className:l()("b-global-mask",{"not-allowed":s,"loading-mask":u&&e}),style:h(h({},s?r:{}),y)},c&&e?p(d):null))}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return l.b})),r.d(e,"e",(function(){return d})),r.d(e,"f",(function(){return y})),r.d(e,"g",(function(){return g.a}));var n=r(0),o=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=Object(n.useRef)({fn:t,timer:null}).current;return Object(n.useEffect)((function(){o.fn=t}),[t]),Object(n.useCallback)((function(){for(var t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];o.timer&&window.clearTimeout(o.timer),o.timer=window.setTimeout((function(){var e;(e=o.fn).call.apply(e,[t].concat(n))}),e)}),r)};function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c=function(){var t,e=(t=i(Object(n.useState)(!1),2))[0],r=t[1],o=(t=i(Object(n.useState)(),2))[0],a=t[1];return Object(n.useEffect)((function(){var t=window.setTimeout((function(){r(!1)}),100);return a(t),function(){window.clearTimeout(t)}}),[]),{hide:function(){o&&(window.clearTimeout(o),a(void 0)),r(!0)},show:function(){r(!1)},opacity:e?0:1}},u=r(449),s=function(t,e){var r=Object(n.useRef)(e);Object(n.useEffect)((function(){r.current=e}),[e]),Object(n.useEffect)((function(){if(r.current)return Object(u.a)(t.join(","),(function(t,e){t.preventDefault(),r.current(u.a,t,e)})),function(){u.a.unbind(t.join(","))}}),[t])},l=r(520),f=r(7),d=function(t){var e=Object(n.useRef)(t);Object(n.useEffect)((function(){e.current=t}),[t]),Object(n.useEffect)((function(){var t;if(e.current)return(t=new f.c).on(f.d.Move,(function(t){e.current(t)})),function(){t.off(f.d.Move)}}),[])},h=r(13);function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var y=function(){var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?p(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(n.useState)(!0),2),e=t[0],r=t[1];return Object(n.useEffect)((function(){function t(){navigator.onLine?(h.i.success("\u7f51\u7edc\u5df2\u91cd\u65b0\u8fde\u63a5"),r(!0)):(r(!1),h.i.error("\u7f51\u7edc\u9519\u8bef\uff1a\u8bf7\u91cd\u8bd5\u6216\u68c0\u67e5\u60a8\u7684\u7f51\u7edc\u72b6\u6001"))}return window.addEventListener("online",t),window.addEventListener("offline",t),function(){window.removeEventListener("online",t),window.removeEventListener("offline",t)}}),[]),e},g=r(328);r(280),r(450),r(895)},function(t,e,r){"use strict";r.d(e,"j",(function(){return c})),r.d(e,"e",(function(){return n})),r.d(e,"f",(function(){return o})),r.d(e,"l",(function(){return i})),r.d(e,"m",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"g",(function(){return f})),r.d(e,"h",(function(){return a})),r.d(e,"c",(function(){return d})),r.d(e,"d",(function(){return h})),r.d(e,"i",(function(){return p})),r.d(e,"k",(function(){return y})),r.d(e,"n",(function(){return g})),r.d(e,"o",(function(){return m})),r.d(e,"p",(function(){return v}));var n,o,i,a,c=25,u=((r=n=n||{}).LEGACY="legacy",r.AI="ai",(e=o=o||{}).DAUB="daub",e.RECT="rect",e.PATH="path",(r=i=i||{}).All="allSelect",r.COLOR="color",r.COLOR_PICKER="colorPicker",[{color:"",txt:"\u6574\u56fe",type:i.All},{color:"#",icon:"colorPicker",txt:"\u53d6\u8272",type:i.COLOR_PICKER}]),s=["255,55,55,255","255,155,55,255","244,242,25,255","43,132,41,255","70,128,128,255","38,40,178,255","162,46,126,255","225,155,200,255","0,0,0,255","255,255,255,255","128,128,128,255"],l=["-180","-150","-120","-90","-60","-30","30","60","90","120","150"],f=25,d=((e=a=a||{}).PEN="brush",e.ERASER="eraser",{hsl_hue:[],hsl_saturation:[],hsl_light:[]}),h={isHslSelectAll:!0,pickColors:"",color:"",hslPickColors:[0,0,0]},p={saturation:0,temperature:0,tinge:0},y={selectIndex:0,hsl_hue:[0,0,0,0,0,0,0],hsl_saturation:[0,0,0,0,0,0,0],hsl_light:[0,0,0,0,0,0,0]},g={smartLightAlpha:0,brightness:0,contrast:0,highlight:0,shadow:0,fade:0},m={sharpen:0,structure:0,particle:0,dispersion:0,vignette:0},v={renderTabIndex:1,posterize_light:[0,0,0,0,0,0],posterize_light_color:0,posterize_shadow:[0,0,0,0,0,0],posterize_shadow_color:0}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"b",(function(){return f}));e=r(12);var n=r(15),o=r.n(n),i=r(7),a=r(47);function c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var s={destroy:Object(e.b)((function(t){t.currentCanvas=null,t.resultCanvas=null,t.originLayer=null})),selectedIndex:0,selectedInfo:o()(a.m[0]),intelligentColors:[],selectedHSLIndex:-1,intelligentHSLSelectInfo:null,intelligentPreviewList:[],intelligentPreData:o()(a.d),isOpenIntelligentPickColor:!1,smartPenType:a.h.PEN,setSmartPenType:Object(e.b)((function(t,e){t.smartPenType=e})),setIsOpenIntelligentPickColor:Object(e.b)((function(t,e){t.isOpenIntelligentPickColor=e})),setIntelligentPreData:Object(e.b)((function(t,e){t.intelligentPreData=o()(e)})),resetIntelligentHSLSelectInfo:Object(e.b)((function(t){t.selectedHSLIndex=-1,t.intelligentHSLSelectInfo=null})),setSelectedHSLIndex:Object(e.b)((function(t,e){t.selectedHSLIndex=e})),setIntelligentHSLSelectInfo:Object(e.b)((function(t,e){var r=e.info;e=void 0===(e=e.index)?-1:e;t.intelligentHSLSelectInfo=o()(r),t.selectedHSLIndex=e})),setSelectedData:Object(e.b)((function(t,e){t.selectedIndex=e.index,t.selectedInfo=o()(e)})),initIntelligentColors:Object(e.b)((function(t,e){var r=o()(a.m);e.forEach((function(t){r.push({color:t,type:a.l.COLOR})})),t.intelligentColors=r,t.selectedIndex=0,t.selectedInfo=o()(a.m[0])})),pushIntelligentColor:Object(e.b)((function(t,e){t.intelligentColors.splice(2,0,e),t.selectedIndex=2,t.selectedInfo=o()(e)})),changeSelectedColor:Object(e.b)((function(t,e){})),setIntelligentPreviewList:Object(e.b)((function(t,e){t.intelligentPreviewList=o()(e)})),intelligentDestroy:Object(e.b)((function(t){t.intelligentPreviewList=[],t.selectedHSLIndex=-1,t.selectedIndex=0,t.selectedInfo=o()(a.m[0]),t.intelligentHSLSelectInfo=null,t.intelligentPenSize=a.g,t.intelligentPreData=o()(a.d)})),protectMask:null,setProtectMask:Object(e.b)((function(t,e){t.protectMask=e})),intelligentPenSize:a.g,setIntelligentPenSize:Object(e.b)((function(t,e){t.intelligentPenSize=e})),resetEnhance:Object(e.b)((function(t){t.colorEnhance=o()(a.i),t.hslEnhance=o()(a.k),t.lightEnhance=o()(a.n),t.particularsEnhance=o()(a.o),t.posterizeEnhance=o()(a.p)})),originLayer:null,setOriginLayer:Object(e.b)((function(t,e){t.originLayer=e})),getOriginLayer:Object(e.b)((function(t,e){e(Object(i.q)(t.originLayer))})),posterizeEnhance:o()(a.p),setPosterizeEnhance:Object(e.b)((function(t,e){t.posterizeEnhance=u({},e)})),lightEnhance:o()(a.n),setLightEnhance:Object(e.b)((function(t,e){t.lightEnhance=u({},e)})),particularsEnhance:o()(a.o),setParticularsEnhance:Object(e.b)((function(t,e){t.particularsEnhance=u({},e)})),hslEnhance:o()(a.k),setHslEnhance:Object(e.b)((function(t,e){t.hslEnhance=u({},e)})),colorEnhance:o()(a.i),setColorEnhance:Object(e.b)((function(t,e){t.colorEnhance=u({},e)})),resultCanvas:null,setResultCanvas:Object(e.b)((function(t,e){t.resultCanvas=e})),getResultCanvas:Object(e.b)((function(t,e){e(t.resultCanvas)})),currentCanvas:null,setCurrentCanvas:Object(e.b)((function(t,e){t.currentCanvas=e})),getCurrentCanvas:Object(e.b)((function(t,e){e(t.currentCanvas)})),eliminateConf:{type:a.e.LEGACY,penSize:a.j,penType:a.f.RECT},setEliminateConf:Object(e.b)((function(t,e){t.eliminateConf=u(u({},t.eliminateConf),e)})),setEliminatePenSize:Object(e.b)((function(t,e){t.eliminateConf.penSize=e}))},l=(n=Object(e.f)()).useStoreState,f=n.useStoreActions;n.useStoreDispatch},,function(t,e,r){"use strict";var n=r(47),o=(r.d(e,"a",(function(){return n.e})),r.d(e,"b",(function(){return n.f})),r.d(e,"c",(function(){return n.g})),r.d(e,"d",(function(){return n.h})),r.d(e,"e",(function(){return n.l})),r(50));r.d(e,"f",(function(){return o.a}))},,,,,,,,,,function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i})),(r=n=n||{}).add="LBE_add",r.align="LBE_align",r.copy="LBE_copy",r.delete="LBE_delete",r.flip="LBE_flip",r.hidden="LBE_hidden",r.lock="LBE_lock",r.opacity="LBE_opacity",r.rotate="LBE_rotate",r.sort="LBE_sort",r.drag="LBE_drag",r.move="LBE_move",r.resize="LBE_resize",r.scale="LBE_scale";var n,o=25,i=25},,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i}));var n={};function o(t){Object.keys(t).forEach((function(e){n[e]=t[e]}))}function i(t){return n[t]}},,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return a}));var n={ordered:[{name:"1.\u2014\u2014\u2014 2.\u2014\u2014\u2014",key:"decimal"},{name:"a.\u2014\u2014\u2014 b.\u2014\u2014\u2014",key:"lower-latin"},{name:"\u2160.\u2014\u2014\u2014 \u2161.\u2014\u2014\u2014",key:"upper-roman"}],unordered:[{name:"\xb7\u2014\u2014\u2014 \xb7\u2014\u2014\u2014",key:"disc"},{name:"\u25cb\u2014\u2014\u2014 \u25cb\u2014\u2014\u2014",key:"circle"},{name:"\u25a0\u2014\u2014\u2014 \u25a0\u2014\u2014\u2014",key:"square"}]},o={unordered:"\u65e0\u5e8f\u5217\u8868",ordered:"\u6709\u5e8f\u5217\u8868"},i=1.3,a=1.8},,function(t,e,r){t.exports={border:"border--9OOKC",moving:"moving--dprQo",editing:"editing--Lfr5L",hovered:"hovered--Fmnik",locked:"locked--+HplE",group:"group--K8xR1",hidden:"hidden--2Sflb",content:"content---qLMv",move:"move--jcFfi"}},,,,,function(t,e,r){"use strict";r.d(e,"f",(function(){return a})),r.d(e,"e",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return s})),r.d(e,"g",(function(){return l})),r.d(e,"i",(function(){return f})),r.d(e,"h",(function(){return d})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return p}));e=r(91);var n=r.n(e),o=(e=r(237),r.n(e)),i=r(2),a=function(t,e){var r,n=t.width;t=t.height;return e<3?"":(e=y(512,521,521,e),r="",e.forEach((function(t,e){r=(0===e?"".concat(r," M").concat(t.x," ").concat(t.y," L "):"".concat(r," L ")).concat(t.x," ").concat(t.y)})),r="".concat(r," Z"),r=o()(r).scale(n/1024,t/1024).toString())},c=function(t,e){return"M 0 ".concat(e/2," L ").concat(t," ").concat(e/2)},u=function(t,e){var r=t.height,n=(t=t.width,(e=s(e)).offset),o=e.arrowShadow,i=(e=e.borderOffset,n=(t=t-n)-o,(r=r/2)-o);o=r+o;return"M ".concat(0," ").concat(r," L ").concat(t," ").concat(r," M ").concat(n," ").concat(i," L ").concat(t+e," ").concat(r+e,"M ").concat(n," ").concat(o,"L ").concat(t," ").concat(r,"Z")},s=function(t){var e=Math.sqrt(Math.pow(t/.2,2)/2),r=(e=Math.sqrt(Math.pow(e,2)/2),Math.sqrt(2*Math.pow(t/2,2)));return{offset:r,borderOffset:t=Math.sqrt(Math.pow(t/2,2)/2),arrowShadow:e,minWidth:e+t+2*r,height:~~(2*e+r)}},l=function(t,e){var r,o=t.data,i=o.strokeWidth,a=(c=s(i)).minWidth,c=c.height;n()(e)&&(e=s(e).height,t.width<a&&(r=a-t.width,t.width=a,t.left-=~~(r/2)),a=(t.height=c)-e,t.top-=~~(a/2)),o.path=u(t,i)},f=function(t,e){var r=t.data,o=r.strokeWidth;r.path=c(t.width,o),n()(e)&&(r=o-e,t.height=o,t.top-=r/2)},d=function(t,e){var r=t.data;e=r.strokeWidth-e;r.path=o()(r.path).translate(e/2,e/2).toString(),t.width+=e,t.height+=e,t.left-=e/2,t.top-=e/2},h=function(t){var e="";return t.forEach((function(r,n){e=(0===n?"".concat(e," M").concat(r.x," ").concat(r.y,"  L "):n===t.length-1?"".concat(e," Q ").concat(r.x," ").concat(r.y,","):"".concat(e," L ")).concat(r.x," ").concat(r.y)})),e},p=function(t,e){var r=t.width,n=(t=t.height,e===i.w.star?"M102.54242002781642 18.208623152816415l24.425591033553548 49.176634083796934a3.2628651555980523 3.2628651555980523 0 0 0 2.4450627173157162 1.7858136952364394l55.24339353703059 8.678720379867872c2.695410226877608 0.41724611004867873 3.7385257953755215 3.755215577190542 1.7357441542072323 5.641168354485396l-39.97218371870654 37.694019406293464a3.2712099487134907 3.2712099487134907 0 0 0-0.984700843184979 2.9624479094228096l9.663421418636997 55.76077892472183a3.2878999261126554 3.2878999261126554 0 0 1-4.82336591620306 3.446453342315716l-49.06815020862308-27.012517385257297a3.2878999261126554 3.2878999261126554 0 0 0-3.1710708666550764 0l-49.076495197322664 27.012517385257297a3.2878999261126554 3.2878999261126554 0 0 1-4.823365720618915-3.446453342315716l9.663421418636997-55.76077892472183a3.3379694671418636 3.3379694671418636 0 0 0-0.9763560500695411-2.9624479094228096l-40.0222530641516-37.719054176808065a3.2878999261126554 3.2878999261126554 0 0 1 1.7524339360222534-5.632823365785813l55.235048548331015-8.678720379867872c1.0598053503129345-0.16689840490264254 1.9610570888386647-0.851182197496523 2.4367177286161334-1.7858136952364394l24.433936022253125-49.15994430198192a3.2795549374130744 3.2795549374130744 0 0 1 5.883171070931849 0z":"M99.79851635204315 36.0335286674881c-32.7073567275238-46.0120442924881-100.89388022998808-18.293945377464297-99.78515624999999 34.9248046875 0.5543618925476075 36.5878905600357 27.718098915023802 60.9798177299881 56.54492181003571 83.1542969399643 26.0550130424881 20.511393142547607 34.9248046875 24.391927169952393 43.2402344399643 32.70735672752381 8.315429752464295-8.315429752464294 17.185221397476198-12.750325477523806 43.79459633251191-32.15299483497619 23.837565082511905-17.739583290023802 55.9905599174881-44.348958419952396 55.9905599174881-84.26302091995238 0-52.11002608497619-65.9690755424881-79.2737631074524-99.78515625-34.37044260005951z");return o()(n).scale(r/200,t/200).toString()},y=function(t,e,r,n){var o=2*Math.PI/n,i=Math.PI/2+o/2,a=[];if(4===n)a=[{x:512,y:0},{x:1024,y:512},{x:512,y:1024},{x:0,y:512}];else for(var c=0;c<n;c++){var u=t+r*Math.cos(i),s=e+r*Math.sin(i);a.push({x:u,y:s}),i+=o}return a}},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"e",(function(){return a})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"f",(function(){return s}));var n=r(17),o=function(){return Object(n.d)((function(t){return t.sdk.fontManagerModel.defaultFont}))},i=function(){return Object(n.d)((function(t){return t.sdk.fontManagerModel.fontList}))},a=function(){return Object(n.b)((function(t){return t.sdk.fontManagerModel.setFontList}))},c=function(){return Object(n.d)((function(t){return t.sdk.fontManagerModel.fontListMap}))},u=function(){return Object(n.d)((function(t){return t.sdk.fontManagerModel.isLoadingFont}))},s=function(){return Object(n.b)((function(t){return t.sdk.fontManagerModel.setIsLoadingFont}))}},,function(t,e,r){"use strict";var n,o,i,a,c,u;r.d(e,"f",(function(){return n})),r.d(e,"e",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return u})),(r=n=n||{}).path="path",r.line="line",r.ellipse="ellipse",r.rect="rect",r.arrow="arrow",(e=o=o||{}).arrow="arrow",e.line="line",e.curve="curve",e.circle="circle",e.square="square",e.polygon="polygon",e.heart="heart",e.star="star",(r=i=i||{}).BACKGROUND="background-material",r.FILTER="filter-material",r.MASK="mask-material",r.IMAGE_MATERIAL="img-material",r.TEXT_MATERIAL="text-material",r.FONT_FAMILY="font-family",r.IMAGE_EFFECT="imageEffect-material",r.WATERMARK="watermark-material",r.TEXT_EFFECT="text-effect",r.ADVANCED_TEXT_MATERIAL="advanced-text-material",r.FUNC_LIST="func-list",(e=a=a||{})[e.none=0]="none",e[e.imgContainer=1]="imgContainer",(r=c=c||{})[r.none=0]="none",r[r.masterImg=1]="masterImg",r[r.bgImg=2]="bgImg",r[r.qrCode=3]="qrCode",(e=u=u||{}).TEXT_LAYER="text",e.TEXT_MATERIAL_LAYER="textMaterial",e.IMAGE_LAYER="img",e.GROUP_LAYER="group",e.BACKGROUND_LAYER="bg",e.MAIN_LAYER="mainImg",e.SVG_LAYER="svg",e.WATERMARK="watermark",e.ADVANCED_TEXT="advanced_text"},function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return z}));e=r(12);var n={userInfo:null,setUserInfo:Object(e.b)((function(t,e){t.userInfo=e})),destroy:Object(e.b)((function(t){t.userInfo=null}))},o=(e=Object(e.f)()).useStoreState,i=e.useStoreActions,a=(e.useStoreDispatch,function(){var t=i((function(t){return t.userInfoModel.setUserInfo})),e=i((function(t){return t.userInfoModel.destroy})),r=o((function(t){return t.userInfoModel.userInfo}))||void 0;return{showUserInfo:function(){return r},onSetUserInfo:function(e){t(e)},onDestroy:function(){e()},setUserInfo:t,destroy:e,userInfo:r}}),c=(r(40),r(0)),u=r.n(c),s=r(299),l=function(t){return t.SETTING="setting",t.FEEDBACK="feedBack",t.BUSINESS="business",t.DOWNLOAD="download",t}({}),f=new(r(620).EventEmitter),d=(e=r(9),r.n(e));function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r(1057);var p=["className","name","color","fontSize","style"];function y(){return(y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function g(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){(e=function(t){return t=function(t,e){if("object"!==h(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==h(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===h(t)?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}function b(t){var e=void 0===(e=t.className)?"":e,r=t.name,n=t.color,o=void 0===(o=t.fontSize)?12:o,i=void 0===(i=t.style)?{}:i;t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,p);return u.a.createElement("div",y({},t,{className:d()("iconfont",(v(t={},"icon-".concat(r),!0),v(t,e,!0),t)),style:m(m(m({},i),{}),{},{color:n,width:o,height:o,fontSize:o})}))}function w(t){function e(t){var e=document.querySelector(".xdesign-modal__body"),r=document.querySelector(".xdesign-modal__mask");null!=e&&e.contains(t.target)||null==r||!r.contains(t.target)||null!=s&&s()}var r=t.width,n=t.title,o=t.center,i=t.children,a=t.className,s=t.onCancel;return Object(c.useEffect)((function(){return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}})),u.a.createElement("div",{className:d()("xdesign-modal",a,o?"xdesign-modal--center":"")},u.a.createElement("div",{className:"xdesign-modal__mask"}),u.a.createElement("div",{className:"xdesign-modal__content",style:{width:r}},u.a.createElement("div",{className:"xdesign-modal__title"},n),u.a.createElement("div",{className:"xdesign-modal__body"},u.a.createElement("div",{className:"xdesign-modal__close",onClick:function(){null!=s&&s()}},u.a.createElement(b,{name:"CrossBold"})),i)))}function O(t){var e=t.theme,r=t.onCancel,n=t.onChangeTheme;return u.a.createElement(w,{className:"xdesign-theme-modal",width:370,onCancel:function(){return r()},title:"\u8bbe\u7f6e"},u.a.createElement("div",{className:"xdesign-theme-modal__body"},u.a.createElement("div",{className:"xdesign-theme-modal__theme"},[{key:"light",icon:"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/light-icon.png",text:"\u767d\u8272\u4e3b\u9898"},{key:"dark",icon:"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/dark-icon.png",text:"\u9ed1\u8272\u4e3b\u9898"}].map((function(t,o){return u.a.createElement("div",{className:d()("xdesign-theme-modal__theme-item",e===t.key&&"xdesign-theme-modal__theme-item--active"),key:o,onClick:function(){n&&n(t.key),r()}},u.a.createElement("img",{className:"xdesign-theme-modal__theme-img",src:t.icon,alt:""}),u.a.createElement("div",{className:"xdesign-theme-modal__theme-text"},t.text))})))))}var x=r(619),j=(e=r(191),r.n(e));function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||T(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o=(p="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=p.asyncIterator||"@@asyncIterator",a=p.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(e){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i,a,c,u;e=e&&e.prototype instanceof f?e:f,e=Object.create(e.prototype),o=new O(o||[]);return n(e,"_invoke",{value:(i=t,a=r,c=o,u="suspendedStart",function(t,e){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===t)throw e;return{value:void 0,done:!0}}for(c.method=t,c.arg=e;;){var r=c.delegate;if(r&&(r=function t(e,r){var n=r.method,o=e.iterator[n];return void 0===o?(r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),l):"throw"===(n=s(o,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,l):(o=n.arg)?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,l):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}(r,c),r)){if(r===l)continue;return r}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===u)throw u="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);if(u="executing","normal"===(r=s(i,a,c)).type){if(u=c.done?"completed":"suspendedYield",r.arg===l)continue;return{value:r.arg,done:c.done}}"throw"===r.type&&(u="completed",c.method="throw",c.arg=r.arg)}})}),e}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function h(){}var p,y,g=((y=(y=(c(p={},o,(function(){return this})),Object.getPrototypeOf))&&y(y(x([]))))&&y!==e&&r.call(y,o)&&(p=y),h.prototype=f.prototype=Object.create(p));function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u;if("throw"!==(o=s(t[o],t,i)).type)return(i=(u=o.arg).value)&&"object"==_(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function x(t){if(t){var e,n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(n=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=n}return{next:j}}function j(){return{value:void 0,done:!0}}return n(g,"constructor",{value:d.prototype=h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(v.prototype),c(v.prototype,i,(function(){return this})),t.AsyncIterator=v,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new v(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),c(g,a,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=Object(t),n=[];for(e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},t.values=x,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,w(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function S(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function L(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){S(i,n,o,a,c,"next",t)}function c(t){S(i,n,o,a,c,"throw",t)}a(void 0)}))}}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||T(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){var r;if(t)return"string"==typeof t?M(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t){function e(){return"beta"===P?"beta":"release"===P?"":"pre"}var n=t.userInfo,o=t.callback,i=void 0===(i=t.list)?[]:i,a=void 0===(a=t.listKeys)?[]:a,h=void 0===(h=t.avatarSize)?40:h,p=void 0!==(p=t.hideVipIno)&&p,y=t.unLoginBtn,g=t.onLogout,m=t.onLogin,v=t.onOpenVipModal,w=t.onChangeTheme,_=t.onJump2Center,S=t.onListItemClick,T=(t=Object(s.b)()).client_id,M=t.theme,P=t.env,A=(t=I(Object(c.useState)(!1),2))[0],C=t[1],R=(t=I(Object(c.useState)(!1),2))[0],N=t[1],D=(t=function(){var t=L(k().mark((function t(){var n,i,a;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e(),t.next=3,Promise.resolve().then(r.t.bind(null,63,7));case 3:(i=(i=t.sent.default).parse(window.location.search)).pathname=window.location.pathname,i="".concat(window.location.protocol,"//").concat(n,"account.meitu.com/#!/logout?client_id=").concat(T,"&client_params=").concat(JSON.stringify(i),"&client_callback=").concat(o),(a=document.createElement("iframe")).src=i,a.style.display="none",document.body.appendChild(a),a.onload=function(){setTimeout((function(){document.body.removeChild(a)}),5e3)},window.localStorage.removeItem("access_token"),window.localStorage.removeItem("uid"),g&&g();case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),function(){var t=L(k().mark((function t(){var i,a,c,u,s,l;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n&&n.id){t.next=3;break}return m&&m(),t.abrupt("return");case 3:return i=e(),c=o.replace(/\?refresh=0$/,""),i="".concat(window.location.protocol,"//").concat(i,"account.meitu.com/#!/?client_id=").concat(T,"&client_callback=").concat(c),t.next=8,Promise.resolve().then(r.t.bind(null,63,7));case 8:return a=t.sent.default,t.next=11,Promise.resolve().then(r.t.bind(null,625,7));case 11:if(c=t.sent,u=c.clientInfo,s=c.bridge,l=a.parse(window.location.search),u.isClient||"pc"===l.platform)return t.abrupt("return",s.openBrowser(i));t.next=17;break;case 17:window.open(i),_&&_();case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());a=[{key:l.BUSINESS,label:"\u5728\u7ebf\u54a8\u8be2",visible:a.includes(l.BUSINESS),callback:function(){f.emit("xdesign-businessMessenger")}},{key:l.FEEDBACK,label:"\u610f\u89c1\u53cd\u9988",visible:a.includes(l.FEEDBACK),callback:function(){f.emit("xdesign-feedBack")}},{key:l.DOWNLOAD,label:"\u4e0b\u8f7d\u5ba2\u6237\u7aef",visible:a.includes(l.DOWNLOAD),callback:function(){window.open("https://pc.meitu.com/download")}},{key:l.SETTING,label:"\u8bbe\u7f6e",visible:a.includes(l.SETTING),callback:function(){C(!0)}}],a=[].concat(E(a.filter((function(t){return t.visible}))),E(i));return u.a.createElement("div",{className:"xdesign-user-info"},!y||null!=n&&n.id?u.a.createElement("div",{className:"xdesign-user-info__avatar",style:{width:h,height:h}},null!=n&&n.avatar?u.a.createElement("img",{src:n.avatar,className:"xdesign-user-info__avatar-img",alt:""}):u.a.createElement(b,{name:"UserBold",fontSize:20}),null!=n&&n.id&&0!==(null==n?void 0:n.vip_days)?u.a.createElement("img",{className:"xdesign-user-info__vip-icon",src:n.is_vip?"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/vip-icon.png":"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/not-vip-icon.png",alt:""}):null):u.a.createElement(u.a.Fragment,null,y),u.a.createElement("div",{className:d()("xdesign-user-info-panel",(null==n?void 0:n.id)&&"xdesign-user-info-panel--initial"),style:{top:h}},u.a.createElement("div",{className:"xdesign-user-info-panel__inner"},u.a.createElement("div",{className:"xdesign-user-info-panel__header",onClick:D},u.a.createElement("div",{className:d()("xdesign-user-info__avatar","xdesign-user-info-panel__avatar")},null!=n&&n.avatar?u.a.createElement("img",{src:n.avatar,className:"xdesign-user-info__avatar-img",alt:""}):u.a.createElement(b,{name:"UserBold",fontSize:20}),null!=n&&n.id&&0!==(null==n?void 0:n.vip_days)?u.a.createElement("img",{className:"xdesign-user-info__vip-icon",src:n.is_vip?"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/vip-icon.png":"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/not-vip-icon.png",alt:""}):null),u.a.createElement("div",{className:"xdesign-user-info-panel__info"},u.a.createElement("div",{className:"xdesign-user-info-panel__username"},null!=n&&n.id?n.screen_name:"\u7acb\u5373\u767b\u5f55"),u.a.createElement("div",{className:"xdesign-user-info-panel__uid"},null!=n&&n.id?u.a.createElement("div",{style:{display:"flex",alignItems:"center"}},"uid\uff1a",n.id,R?u.a.createElement("span",{className:"xdesign-user-info-panel__copy"},u.a.createElement("img",{className:"xdesign-user-info-panel__copy-icon",src:"https://public.static.meitudata.com/xiuxiu-pc/xdesign-widgets/images/userInfo/has-copy-icon.png",alt:""})):u.a.createElement("span",{className:"xdesign-user-info-panel__copy",onClick:function(t){t.stopPropagation(),x.a("".concat((null==n?void 0:n.id)||"")).then((function(){N(!0),setTimeout((function(){N(!1)}),5e3)})).catch((function(t){}))}},"\u590d\u5236")):"\u60a8\u8fd8\u672a\u5f00\u901a\u4f1a\u5458")),null!=n&&n.id?u.a.createElement(b,{name:"ChevronRightBlack",fontSize:12,className:"xdesign-user-info-panel__arrow"}):null),p?null:u.a.createElement("div",{className:"xdesign-user-info-panel__vip-info"},u.a.createElement("div",{className:"xdesign-user-info-panel__vip-date"},null!=n&&n.is_vip?"SVIP\u5230\u671f: ".concat(j()(1e3*((null==n?void 0:n.vip_end_time)||0)).format("YYYY-MM-DD")):"\u5f00\u901a\u4f1a\u5458SVIP\u4eab\u6d77\u91cf\u7248\u6743\u7d20\u6750\u548c\u529f\u80fd\u6743\u76ca"),u.a.createElement("div",{className:"xdesign-user-info-panel__vip-btn",onClick:function(){null!=n&&n.id?v&&v():m&&m()}},u.a.createElement(b,{name:"VipBoldFill",fontSize:16}),u.a.createElement("span",{className:"xdesign-user-info-panel__vip-btn__text"},null!=n&&n.is_vip?"\u7eed\u8d39":"\u7acb\u5373\u5f00\u901a")),u.a.createElement("div",{className:"xdesign-user-info-panel__tips"},"\u4f1a\u5458\u671f\u95f4\u4eab\u4f5c\u54c1\u5546\u7528\u7248\u6743\u65e0\u5fe7")),null!=a&&a.length?u.a.createElement("div",{className:"xdesign-user-info-panel__list"},null==a?void 0:a.map((function(t,e){return u.a.createElement("div",{key:e,className:"xdesign-user-info-panel__item",onClick:function(){var e;null!=(e=t.callback)&&e.call(t),null!=S&&S(t.key)}},u.a.createElement("span",{className:"xdesign-user-info-panel__item-label"},t.label),u.a.createElement(b,{name:"ChevronRightBlack",fontSize:12,className:"xdesign-user-info-panel__arrow"}))}))):null,null!=n&&n.id?u.a.createElement("div",{className:"xdesign-user-info-panel__footer",onClick:t},u.a.createElement("div",{className:"xdesign-user-info-panel__footer-inner"},"\u9000\u51fa\u767b\u5f55")):null)),A?u.a.createElement(O,{theme:M,onCancel:function(){return C(!1)},onChangeTheme:w}):null)}r(1060),r(1059),r(1058);var A,C=r(431),R=r(101),N=r(320),D=r(415);function F(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?U(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}(e=A=A||{}).VIP="vip",e.SERVICE="service",e.OPINION="opinion",e.DOWNLOAD="download",e.SET="set",e.EXIT="exit",r(1056);var z=function(t){var e=(n=G(Object(c.useState)(""),2))[0],r=n[1],n=void 0===(n=t.userInfo)?void 0:n,o=t.onHandleUserInfo,i=t.onJumpToLogin,a=t.onHandleOpenVipModal,s=t.onHandleLogout,f=t.onCustomClick,d=t.onPayFailCallback,h=t.onPaySuccessCallback,p=t.feedBackSrc,y=void 0===(y=t.showContactMessage)||y,g=void 0===(g=t.showDownloadClient)||g,m=void 0===(m=t.showFeedBack)||m,v=void 0===(v=t.showKeyboardKeymap)||v,b=t.showSetting,w=void 0===(w=t.businessMessengerConfig)?{}:w,O=t.onTrack,x=t.onDownloadClick,j=(t=t.accountCallbackUrl,[]),_=(b=((void 0===b||b)&&j.push(l.SETTING),y&&j.push(l.BUSINESS),m&&j.push(l.FEEDBACK),g&&j.push(l.DOWNLOAD),[]),v&&b.push({key:"KeyboardKeymap",label:"\u5feb\u6377\u952e",callback:function(){r("KeyboardKeymap")}}),Object(R.a)());return u.a.createElement("div",{onClick:function(){setTimeout((function(){f&&f()}),0)},className:"c-header"},u.a.createElement(P,{userInfo:n?{id:n.id,avatar:n.avatar,screen_name:n.screen_name,is_vip:!!n.is_vip,vip_end_time:n.vip_end_time||0,vip_days:n.vip_days||0}:void 0,list:b,listKeys:j,callback:t,avatarSize:32,hideVipIno:!1,onLogin:function(){return i&&i()},onLogout:function(){s&&s(),null!=O&&O(A.EXIT)},onOpenVipModal:function(){a&&a(),null!=O&&O(A.VIP)},onChangeTheme:function(t){"dark"===t?_.setDarkTheme():_.setWhiteTheme()},onListItemClick:function(t){t===l.BUSINESS?(r("ContactMessage"),null!=O&&O(A.SERVICE)):t===l.FEEDBACK?(r("FeedBack"),null!=O&&O(A.OPINION)):t===l.SETTING?null!=O&&O(A.SET):t===l.DOWNLOAD&&(null!=O&&O(A.DOWNLOAD),null!=x)&&x()},onJump2Center:function(){return o&&o()}}),"ContactMessage"===e?u.a.createElement(D.a,B(B({},w),{},{setMode:r})):"KeyboardKeymap"===e?u.a.createElement(N.b,{setMode:r}):"FeedBack"===e?u.a.createElement(N.a,{setMode:r,feedBackSrc:p}):null,u.a.createElement(C.a,{onPayFailCallback:d,onPaySuccessCallback:h}))}},,,,,,,,,function(t,e,r){"use strict";r.d(e,"c",(function(){return Mt})),r.d(e,"a",(function(){return ar})),r.d(e,"b",(function(){return dr})),r.d(e,"g",(function(){return i.q})),r.d(e,"f",(function(){return i.p})),r.d(e,"d",(function(){return i.a})),r.d(e,"e",(function(){return i.b}));var n=r(0),o=r.n(n),i=r(27);function a(t){var e=Object(n.useRef)(t);return Object(n.useEffect)((function(){e.current=t})),Object(n.useCallback)((function(t,r){return e.current&&e.current(t,r)}),[])}function c(t){return"touches"in t}function u(t){!c(t)&&t.preventDefault&&t.preventDefault()}function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return r<t?r:t<e?e:t}function l(t,e){return t=t.getBoundingClientRect(),{left:s(((e=c(e)?e.touches[0]:e).pageX-(t.left+window.pageXOffset))/t.width),top:s((e.pageY-(t.top+window.pageYOffset))/t.height),width:t.width,height:t.height,x:e.pageX-(t.left+window.pageXOffset),y:e.pageY-(t.top+window.pageYOffset)}}var f=r(1),d=["prefixCls","className","onMove","onDown"];function h(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?g(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t){var e=t.className,r=t.prefixCls,n=t.left;t={position:"absolute",left:n,top:t.top};return Object(f.jsx)("div",{className:"".concat(r,"-pointer ").concat(e||""),style:t,children:Object(f.jsx)("div",{className:"".concat(r,"-fill"),style:{width:18,height:18,transform:n?"translate(-9px, -1px)":"translate(-1px, -9px)",boxShadow:"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:"50%",backgroundColor:"rgb(248, 248, 248)"}})})}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-interactive":r,o=t.className,i=t.onMove,s=t.onDown,h=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,d),Object(n.useRef)(null)),g=Object(n.useRef)(!1),m=(_=y(Object(n.useState)(!1),2))[0],v=_[1],b=a(i),w=a(s),O=Object(n.useCallback)((function(t){t.stopPropagation(),u(t),(c(t)?0<t.touches.length:0<t.buttons)&&h.current?b&&b(l(h.current,t),t):v(!1)}),[b]),x=Object(n.useCallback)((function(){return v(!1)}),[]),j=Object(n.useCallback)((function(t){(t=t?window.addEventListener:window.removeEventListener)(g.current?"touchmove":"mousemove",O,!0),t(g.current?"touchend":"mouseup",x,!0)}),[]),_=(Object(n.useEffect)((function(){return j(m),function(){m&&j(!1)}}),[m,j]),Object(n.useCallback)((function(t){t.stopPropagation();var e,r=c(t.nativeEvent)?t.nativeEvent.touches[0]:t.nativeEvent;u(t.nativeEvent),e=t.nativeEvent,g.current&&!c(e)||(g.current=c(e),0)||(w&&w(p(p({},l(h.current,t.nativeEvent)),{},{originX:r.pageX,originY:r.pageY}),t.nativeEvent),v(!0))}),[w]));return Object(f.jsx)("div",p(p({},t),{},{className:[r,o||""].filter(Boolean).join(" "),style:p(p({},t.style),{},{touchAction:"none",minWidth:"calc(100% - 10px)",minHeight:"100%"}),ref:h,tabIndex:0,onMouseDown:_,onTouchStart:_}))}));var v=(e.displayName="Interactive",e),b=["prefixCls","className","hsva","background","bgProps","innerProps","radius","width","height","direction","style","onChange","pointer"];function w(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==",j=(e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-alpha":r,a=t.className,c=t.hsva,u=t.background,s=void 0===(s=t.bgProps)?{}:s,l=void 0===(l=t.innerProps)?{}:l,d=void 0===(d=t.radius)?0:d,h=t.width,p=void 0===(p=t.height)?16:p,y=void 0===(g=t.direction)?"horizontal":g,g=t.style,w=t.onChange,j=t.pointer,_=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,b),Object(n.useCallback)((function(t){w&&w(O(O({},c),{},{a:"horizontal"===y?t.left:t.top}),t)}),[c])),E=Object(i.l)(Object.assign({},c,{a:1})),k=(E="linear-gradient(to ".concat("horizontal"===y?"right":"bottom",", rgba(244, 67, 54, 0) 0%, ").concat(E," 100%)"),{});return"horizontal"===y?k.left="".concat(100*c.a,"%"):k.top="".concat(100*c.a,"%"),Object(f.jsxs)("div",O(O({},t),{},{className:[r,"".concat(r,"-").concat(y),a||""].filter(Boolean).join(" "),style:O(O({borderRadius:d,background:"url(".concat(x,") left center"),backgroundSize:"8px",backgroundColor:"#fff"},g),{},{position:"relative"},{width:h,height:p}),ref:e,children:[Object(f.jsx)("div",O(O({},s),{},{style:O({inset:0,position:"absolute",background:u||E,borderRadius:d,height:8,minWidth:"100%"},s.style)})),Object(f.jsx)(v,O(O({},l),{},{style:O(O({},l.style),{},{inset:0,zIndex:1,position:"absolute"}),onMove:_,onDown:_,children:o.a.createElement(j||m,O({prefixCls:r},k))}))]}))})),e.displayName="Aplha",e),_=["prefixCls","className","onChange","direction","hsva"];function E(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-hue":r,n=t.className,o=t.onChange,i=void 0===(c=t.direction)?"horizontal":c,a=t.hsva,c=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,_);return Object(f.jsx)(j,k(k({ref:e,className:"".concat(r," ").concat(n||"")},c),{},{direction:i,background:"linear-gradient(to ".concat("horizontal"===i?"right":"bottom",", #FF0000 0%, #FFD500 26.04%, #00FFAA 45.83%, #00FFF0 54.69%, #330BFF 72.92%, #FF00E5 85.42%, #FF0000 100%"),hsva:{h:a.h,s:100,v:100,a:a.h/360},onChange:function(t,e){o&&o(k(k({},a),{},{h:"horizontal"===i?360*e.left:360*e.top}))}}))}));var S=(e.displayName="Hue",e),L=["prefixCls","placement","dragLabel","dragMax","label","value","className","style","labelStyle","inputStyle","onChange","onMoveChange","onBlur"];function I(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-editable-input":r,o=void 0===(o=t.placement)?"bottom":o,i=void 0!==(i=t.dragLabel)&&i,a=void 0===(c=t.dragMax)?255:c,c=t.label,u=t.value,s=t.className,l=t.style,d=t.labelStyle,h=t.inputStyle,p=t.onChange,y=t.onMoveChange,g=t.onBlur,m=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,L),b=(u=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?M(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(n.useState)(u),2),u[0]),w=u[1],O=Object(n.useRef)(!1),x=Object(n.useRef)(0);function j(t){var e;t.originX&&(x.current=0),O.current&&(O.current=!1),x.current!==t.originX&&(0<=(e=b+t.x-x.current)&&e<=a&&y&&y(e),x.current=t.x)}return Object(n.useEffect)((function(){t.value===b||O.current||w(t.value)}),[t.value]),u={},"bottom"===o&&(u.flexDirection="column"),"top"===o&&(u.flexDirection="column-reverse"),"left"===o&&(u.flexDirection="row-reverse"),Object(f.jsxs)("div",{className:[r,s||""].filter(Boolean).join(" "),style:T(T({position:"relative",alignItems:"center",display:"flex",fontSize:11},u),l),children:[Object(f.jsx)("input",T(T({ref:e,value:b,onChange:function(t,e){e=e||t.target.value;var r=(!/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(e)||p&&p(t,e),Number(String(e).replace(/%/g,"")));isNaN(r)||p&&p(t,r),w(e)},onBlur:function(e){O.current=!1,w(t.value),g&&g(e)},autoComplete:"off",onFocus:function(){return O.current=!0}},m),{},{style:T({width:"100%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,fontSize:11,boxSizing:"border-box",border:"none",boxShadow:"rgb(204 204 204) 0px 0px 0px 1px inset"},h)})),c?i?Object(f.jsx)(v,{onMove:j,onDown:j,children:Object(f.jsx)("label",{style:T(T({color:"rgb(153, 153, 153)",textTransform:"capitalize"},d),{},{cursor:"ew-resize"}),children:c})}):Object(f.jsx)("label",{style:T({color:"rgb(153, 153, 153)",textTransform:"capitalize"},d),children:c}):null]})}));var P=(e.displayName="EditableInput",e),A=["prefixCls","hsva","placement","dragLabel","rProps","gProps","bProps","aProps","className","style","onChange"];function C(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-editable-input-rgba":r,n=t.hsva,o=void 0===(o=t.placement)?"bottom":o,a=void 0!==(a=t.dragLabel)&&a,c=void 0===(c=t.rProps)?{}:c,u=void 0===(u=t.gProps)?{}:u,s=void 0===(s=t.bProps)?{}:s,l=void 0===(l=t.aProps)?{}:l,d=t.className,h=t.style,p=t.onChange,y=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,A),n?Object(i.m)(n):{});function g(t){var e=Number(t.target.value);e&&255<e&&(t.target.value="255"),e&&e<0&&(t.target.value="0")}function m(t,e,r){"number"==typeof t&&("a"===e&&(100<(t=t<0?0:t)&&(t=100),p)&&p(Object(i.a)(Object(i.q)(R(R({},y),{},{a:t/100})))),255<t&&(t=255,r)&&(r.target.value="255"),t<0&&(t=0,r)&&(r.target.value="0"),"r"===e&&p&&p(Object(i.a)(Object(i.q)(R(R({},y),{},{r:t})))),"g"===e&&p&&p(Object(i.a)(Object(i.q)(R(R({},y),{},{g:t})))),"b"===e)&&p&&p(Object(i.a)(Object(i.q)(R(R({},y),{},{b:t}))))}return Object(f.jsxs)("div",R(R({ref:e,className:[r,d||""].filter(Boolean).join(" ")},t),{},{style:R({fontSize:11,display:"flex"},h),children:[Object(f.jsx)(P,R(R({label:"R",dragLabel:a,value:y.r||0,onBlur:g,placement:o,onMoveChange:function(t){return m(t,"r")},onChange:function(t,e){return m(e,"r",t)}},c),{},{style:R({},c.style)})),Object(f.jsx)(P,R(R({label:"G",dragLabel:a,value:y.g||0,onBlur:g,placement:o,onMoveChange:function(t){return m(t,"g")},onChange:function(t,e){return m(e,"g",t)}},u),{},{style:R({marginLeft:5},c.style)})),Object(f.jsx)(P,R(R({label:"B",dragLabel:a,value:y.b||0,onBlur:g,placement:o,onMoveChange:function(t){return m(t,"b")},onChange:function(t,e){return m(e,"b",t)}},s),{},{style:R({marginLeft:5},s.style)})),l&&Object(f.jsx)(P,R(R({label:"A",dragLabel:a,value:y.a?parseInt(String(100*y.a),10):0,onBlur:g,placement:o,onMoveChange:function(t){return m(t,"a")},dragMax:100,onChange:function(t,e){return m(e,"a",t)}},l),{},{style:R({marginLeft:5},l.style)}))]}))}));var N=(e.displayName="EditableInputRGBA",e),D=["prefixCls","hsva","hProps","sProps","lProps","aProps","className","onChange"];function F(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G(t){var e=t.className,r=t.color,n=t.left,o=t.top;t=t.prefixCls,o={position:"absolute",top:o,left:n};return Object(f.jsx)("div",{className:"".concat(t,"-pointer ").concat(e||""),style:o,children:Object(f.jsx)("div",{className:"".concat(t,"-fill"),style:{width:6,height:6,transform:"translate(-3px, -3px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 2px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:r}})})}e=o.a.forwardRef((function(t,e){function r(t,e,r){"number"==typeof t&&("h"===e&&(360<(t=t<0?0:t)&&(t=360),d)&&d(Object(i.a)(Object(i.g)(B(B({},h),{},{h:t})))),"s"===e&&(100<(t=t<0?0:t)&&(t=100),d)&&d(Object(i.a)(Object(i.g)(B(B({},h),{},{s:t})))),"l"===e&&(100<(t=t<0?0:t)&&(t=100),d)&&d(Object(i.a)(Object(i.g)(B(B({},h),{},{l:t})))),"a"===e)&&(1<(t=t<0?0:t)&&(t=1),d)&&d(Object(i.a)(Object(i.g)(B(B({},h),{},{a:t}))))}var n=void 0===(n=t.prefixCls)?"c-color-editable-input-hsla":n,o=t.hsva,a=void 0===(a=t.hProps)?{}:a,c=void 0===(c=t.sProps)?{}:c,u=void 0===(u=t.lProps)?{}:u,s=void 0===(s=t.aProps)?{}:s,l=t.className,d=t.onChange,h=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,D),o?Object(i.k)(o):{h:0,s:0,l:0,a:0});return Object(f.jsx)(N,B({ref:e,hsva:o,rProps:B(B({label:"H",value:Math.round(h.h),dragLabel:!1},a),{},{onChange:function(t,e){return r(e,"h")}}),gProps:B(B({label:"S",value:"".concat(Math.round(h.s),"%"),dragLabel:!1},c),{},{onChange:function(t,e){return r(e,"s")}}),bProps:B(B({label:"L",value:"".concat(Math.round(h.l),"%"),dragLabel:!1},u),{},{onChange:function(t,e){return r(e,"l")}}),aProps:B(B({label:"A",value:Math.round(100*h.a)/100,dragLabel:!1},s),{},{onChange:function(t,e){return r(e,"a")}}),className:[n,l||""].filter(Boolean).join(" ")},t))}));var U=(e.displayName="EditableInputHSLA",e),z=["prefixCls","radius","pointer","className","style","hsva","onChange"];function W(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function K(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){function r(t,e){d&&d({h:l.h,s:100*t.left,v:100*(1-t.top),a:l.a})}var n=void 0===(n=t.prefixCls)?"c-color-saturation":n,a=void 0===(a=t.radius)?0:a,c=t.pointer,u=t.className,s=t.style,l=t.hsva,d=t.onChange;t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,z),a=K(K({width:200,height:200,borderRadius:a},s),{},{position:"relative"}),s={top:"".concat(100-l.v,"%"),left:"".concat(l.s,"%"),color:Object(i.l)(l)};return Object(f.jsx)(v,K(K({className:[n,u||""].filter(Boolean).join(" ")},t),{},{style:K({position:"absolute",inset:0,cursor:"pointer",backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsl(".concat(l.h,", 100%, 50%))")},a),ref:e,onMove:r,onDown:r,children:o.a.createElement(c||G,K({prefixCls:n},s))}))}));var H=(e.displayName="Saturation",e),Y=["prefixCls","className","onChange","direction","hsva"];function V(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-saturation":r,n=t.className,o=t.onChange,a=void 0===(c=t.direction)?"horizontal":c,c=t.hsva,u=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,Y),Object(i.l)(Object.assign({},c,{a:1,s:100,v:100})));return Object(f.jsx)(j,X(X({ref:e},t),{},{className:"".concat(r," ").concat(n||""),hsva:{h:c.h,s:100,v:c.v,a:1-c.v/100},direction:a,background:"linear-gradient(to ".concat("horizontal"===a?"right":"bottom",", ").concat(u,", rgb(0, 0, 0))"),onChange:function(t,e){o&&o({v:"horizontal"===a?100-100*e.left:100-100*e.top,s:100})}}))}));var q=(e.displayName="ShadeSlider",["prefixCls","className","style","onChange","color","lightness"]);function $(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-slider-picker":r,n=t.className,o=t.style,a=t.onChange,c=t.color,u=void 0===(s=t.lightness)?[80,65,50,35,20]:s,s=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,q),l="string"==typeof c&&Object(i.r)(c)?Object(i.d)(c):c||{};return Object(f.jsx)("div",Z(Z({ref:e,style:Z({display:"flex"},o),className:[r,n||""].filter(Boolean).join(" ")},s),{},{children:u.map((function(t,e){var r=Object(i.k)(l),n="hsl(".concat(r.h,", 50%, ").concat(t,"%)");r=n===Object(i.j)(l);return Object(f.jsx)("div",{style:{paddingLeft:1,width:"".concat(100/u.length,"%"),boxSizing:"border-box"},children:Object(f.jsx)("div",{onClick:function(t){var e;e=n,a&&a(Object(i.a)(Object(i.f)(e)),t)},style:Z({backgroundColor:n,height:12,cursor:"pointer"},r?{borderRadius:2,transform:"scale(1, 1.5)"}:{})})},e)}))}))}));var J=(e.displayName="SliderPicker",["prefixCls","className","color","colors","style","rectProps","onChange","addonAfter","addonBefore","rectRender"]);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){function r(t){d&&d(Object(i.d)(t))}var n=void 0===(n=t.prefixCls)?"c-color-swatch":n,a=t.className,c=t.color,u=void 0===(u=t.colors)?[]:u,s=t.style,l=void 0===(h=t.rectProps)?{}:h,d=t.onChange,h=t.addonAfter,p=t.addonBefore,y=t.rectRender,g=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,J),et({background:"rgb(144, 19, 254)",height:15,width:15,marginRight:5,marginBottom:5,cursor:"pointer",position:"relative",outline:"none",borderRadius:2},l.style));return Object(f.jsxs)("div",et(et({ref:e},t),{},{className:[n,a||""].filter(Boolean).join(" "),style:et({display:"flex",flexWrap:"wrap",position:"relative"},s),children:[p&&o.a.isValidElement(p)&&p,u&&Array.isArray(u)&&u.map((function(t,e){var n="",i="";"string"==typeof t&&(i=n=t),"object"===Q(t)&&t.color&&(n=t.title||t.color,i=t.color),t=c&&c.toLocaleLowerCase()===i.toLocaleLowerCase();return y?y({key:e,title:n,color:i,checked:!!t,style:et(et({},g),{},{background:i}),onClick:function(){return r(i)}}):(t=l.children&&o.a.isValidElement(l.children)?o.a.cloneElement(l.children,{color:i,checked:t}):null,Object(f.jsx)("div",et(et({tabIndex:0,title:n,onClick:function(){return r(i)}},l),{},{children:t,style:et(et({},g),{},{background:i})}),e))})),h&&o.a.isValidElement(h)&&h]}))}));var rt=(e.displayName="Swatch",e);function nt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t){var e=t.className,r=t.left,o=t.top,i=t.angle,a=t.style,c=t.prefixCls,u=ot(ot({},a),{},{position:"absolute",top:o,left:r});return Object(n.useMemo)((function(){return Object(f.jsx)("div",{className:"".concat(c,"-pointer ").concat(e||""),style:u,children:Object(f.jsx)("div",{className:"".concat(c,"-fill"),style:{width:8,height:8,transform:"translate(-4px, -4px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.4)"}})})}),[o,r,i,e,c])}function at(t,e){if(e)try{var r=ct(e.clientWidth),n=t.clientX,o=t.clientY,i=e.getClientRects()[0],a=i.x,c=i.y,u=a+r.x,s=c+r.y,l=n-u,f=o-s,d=Math.atan2(f,l);return(d=Math.round(180*d/Math.PI))<0?360+d:d}catch(t){}}function ct(t,e){return{x:t/2-(e=1<arguments.length&&void 0!==e?e:1),y:t/2-e}}var ut=["prefixCls","pointer","className","style","width","height","angle","onChange"];function st(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-angle":r,i=t.pointer,a=t.className,c=t.style,u=void 0===(u=t.width)?32:u,s=void 0===(s=t.height)?32:s,l=void 0===(l=t.angle)?0:l,d=t.onChange,h=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,ut),Object(n.useRef)(null)),p=function(t,e){var r=ct(e);return e=function(t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return{x:t-(1<arguments.length&&void 0!==arguments[1]?arguments[1]:8)/2-2*e,y:t/2-e}}(e),t=t*Math.PI/180,{x:Math.round(Math.cos(t)*(e.x-r.x)-Math.sin(t)*(e.y-r.y)+r.x),y:Math.round(Math.sin(t)*(e.x-r.x)+Math.cos(t)*(e.y-r.y)+r.y)}}(l,u);function y(t){t.preventDefault(),"number"==typeof(t=at(t,h.current))&&d&&d(t)}function g(t){t.preventDefault(),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",g),"number"==typeof(t=at(t,h.current))&&d&&d(t)}return Object(f.jsx)("div",lt(lt({ref:h,className:[r,a].filter(Boolean).join(" "),style:lt({width:u,height:s,borderRadius:"50%",background:"rgb(255, 255, 255)",border:"1px solid #ccc",position:"relative"},c)},t),{},{onMouseDown:function(t){"number"==typeof(t=at(t,h.current))&&(d&&d(t),document.addEventListener("mousemove",y),document.addEventListener("mouseup",g))},children:o.a.createElement(i||it,lt({prefixCls:r,angle:l,style:{zIndex:1,transform:"translate(".concat(p.x,"px, ").concat(p.y,"px)")}},{top:"0",left:"0"}))}))}));var ft=(e.displayName="Angle",e),dt=["style","color"],ht=["prefixCls","className","onChange","color","style","disableAlpha"];function pt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gt(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}function mt(t){var e=t.style,r=t.color;t=gt(t,dt);return Object(f.jsx)("div",yt(yt({},t),{},{style:yt({height:28,width:28,position:"absolute",transform:"translate(-14px, -4px)",boxShadow:"0 2px 4px rgb(0 0 0 / 20%)",borderRadius:"50%",background:"url(".concat(x,")"),backgroundColor:"#fff",border:"2px solid #fff",zIndex:1},e),children:Object(f.jsx)("div",{style:{backgroundColor:r,borderRadius:"50%",height:" 100%",width:"100%"}})}))}function vt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=Object(n.useRef)({fn:t,timer:null}).current;return Object(n.useEffect)((function(){o.fn=t}),[t]),Object(n.useCallback)((function(){for(var t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];o.timer&&window.clearTimeout(o.timer),o.timer=window.setTimeout((function(){var e;(e=o.fn).call.apply(e,[t].concat(n))}),e)}),r)}e=o.a.forwardRef((function(t,e){function r(t){return a&&a(Object(i.a)(t))}var n=void 0===(n=t.prefixCls)?"c-color-colorful-picker":n,o=t.className,a=t.onChange,c=t.color,u=t.style,s=t.disableAlpha,l=(t=gt(t,ht),"string"==typeof c&&Object(i.r)(c)?Object(i.d)(c):c||{});return Object(f.jsxs)("div",yt(yt({ref:e,style:yt({width:200,position:"relative"},u)},t),{},{className:"".concat(n," ").concat(o||""),children:[Object(f.jsx)(H,{hsva:l,className:n,radius:"8px 8px 0 0",style:{width:"auto",height:150,minWidth:120,borderBottom:"12px solid #000"},pointer:function(t){var e=t.left,r=t.top;return t.color,Object(f.jsx)(mt,{style:{left:e,top:r,transform:"translate(-16px, -16px)"},color:Object(i.h)(l)})},onChange:function(t){return r(yt(yt({},l),t))}}),Object(f.jsx)(S,{hsva:l,height:24,radius:s?"0 0 8px 8px":0,className:n,onChange:function(t){return r(yt(yt({},l),t))},pointer:function(t){return t=t.left,Object(f.jsx)(mt,{style:{left:t},color:"hsl(".concat(l.h||0,"deg 100% 50%)")})}}),!s&&Object(f.jsx)(j,{hsva:l,height:24,className:n,radius:"0 0 8px 8px",pointer:function(t){return t=t.left,Object(f.jsx)(mt,{style:{left:t},color:Object(i.n)(l)})},onChange:function(t){return r(yt(yt({},l),t))}})]}))}));var bt=(e.displayName="ColorfulPicker",r(959),r(13)),wt=["prefixCls","className","onChange","onChangeComplete","width","presetColors","color","editableDisable","style","transparent","beforeDraw"];function Ot(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function xt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jt(){jt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==kt(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function _t(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Et(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_t(i,n,o,a,c,"next",t)}function c(t){_t(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Lt(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lt(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function It(t){return Object(f.jsx)("div",{style:{boxShadow:"rgb(0 0 0 / 60%) 0px 0px 2px",width:10,height:10,top:-1,left:t.left,borderRadius:"50%",position:"absolute",backgroundColor:"#fff"}})}bt.v.AppTheme;var Tt=["#FFFFFF","#000000","#FF2525","#FF6200","#FCCA00","#27B148","#00C7FF","#7AB8FB","#A411D1","#8CA2AA","#505559","#FF7272","#FF9959","#FEDD59","#52CC6F","#59DBFF","#7AB8FB","#C465E2","#C1CDD1","#C2C7CC","#FFB3B3","#FFC9A6","#FEEDA6","#7EE697","#A6ECFF","#B8D9FD","#E0ACEF","#EDF1F2","#E1E3E6","#FFE9E9","#FFEFE5","#FFFAE5","#DDFAE4","#E5FAFF","#EBF4FF","#F6E7FB"],Mt=(e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-sketch-picker":r,o=t.className,a=t.onChange,c=t.onChangeComplete,u=void 0===(u=t.width)?264:u,s=void 0===(s=t.presetColors)?Tt:s,l=t.color,d=(t.editableDisable,t.style),h=t.transparent,p=t.beforeDraw,y=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,wt),(O=St(Object(n.useState)({h:209,s:36,v:90,a:1}),2))[0]),g=O[1],m=(O=St(Object(n.useState)(""),2))[0],v=O[1],b=(O=St(Object(n.useState)(0),2))[0],w=O[1],O=!(!p&&!("EyeDropper"in window)),x=vt(c||function(){},1e3),_=(Object(n.useEffect)((function(){var t,e,r=null;"string"==typeof l&&Object(i.r)(l)&&(r=Object(i.d)(l)),"object"===kt(l)&&(r=Object(i.q)(l)),l&&r&&(r.a=h?0:null==(e=r)?void 0:e.a,t=(e=Object(i.a)(r)).hex,e=e.hsva.a,v(t.slice(1,7)),g(r),w(Math.ceil(100*e)))}),[]),Object(n.useCallback)((function(t){var e=(n=Object(i.a)(t)).hex,r=n.hexa,n=n.hsva.a;v(e.slice(1,7)),w(Math.ceil(100*n)),g(t),a&&a({color:r,transparent:0===n}),c&&x({color:r,transparent:0===n})}),[y,a])),E=function(){var t=Et(jt().mark((function t(){var e,r,n;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=new window.EyeDropper,t.next=4,e.open();case 4:e=t.sent,n=e.sRGBHex,n=Object(i.a)(n),r=n.hex,n=n.hsva,v(r.slice(1,7)),g(n),_(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",xt(xt({},t),{},{className:"".concat(r," ").concat(o||""),ref:e,style:xt({background:"rgb(255, 255, 255)",borderRadius:4,boxShadow:"rgb(0 0 0 / 15%) 0px 0px 0px 1px, rgb(0 0 0 / 15%) 0px 8px 16px",width:u},d),children:[Object(f.jsx)(H,{hsva:y,style:{width:"auto",height:140,borderRadius:"4px"},onChange:function(t){_(xt(xt(xt({},y),t),{},{a:1}))}}),Object(f.jsxs)("div",{className:"c-color-sketch-picker__tool",children:[Object(f.jsx)("div",{className:"c-color-sketch-picker__tool--preview",children:Object(f.jsx)("div",{style:{background:Object(i.i)(y)}})}),Object(f.jsxs)("div",{className:"c-color-sketch-picker__tool--setting",children:[Object(f.jsx)(S,{width:"auto",height:8,hsva:y,pointer:It,innerProps:{style:{marginLeft:0,marginRight:10}},radius:4,onChange:function(t){return _(xt(xt({},y),t))}}),Object(f.jsx)(j,{width:"auto",height:8,hsva:y,pointer:It,style:{marginTop:8},innerProps:{style:{marginLeft:0,marginRight:10}},radius:4,onChange:function(t){_(xt(xt({},y),{a:t.a}))}})]})]}),Object(f.jsxs)("div",{className:"c-color-sketch-picker__menu",children:[O?Object(f.jsx)("div",{className:"c-color-sketch-picker__menu--eyeDropper",onClick:Et(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E();case 1:case"end":return t.stop()}}),t)}))),children:Object(f.jsx)(bt.d,{name:"colorPicker",fontSize:19})}):null,Object(f.jsx)("div",{className:"c-color-sketch-picker__menu--input ".concat(O?"":"w110"),children:Object(f.jsx)(bt.e,{prefix:"#",value:m,onChange:function(t){t=t.target.value,v(t)},onBlur:function(){var t=Object(i.a)(m);t.hex?(v(t.hex.slice(1,7)),g(t.hsva),_(t.hsva)):v(Object(i.h)(y).slice(1,7))}})}),Object(f.jsx)("div",{className:"c-color-sketch-picker__menu--input ".concat(O?"":"w110"),children:Object(f.jsx)(bt.e,{suffix:"%",value:b,onChange:function(t){t=+t.target.value,w(0===(t=(t=100<t?100:t)<0?0:t)?0:t||b)},onBlur:function(){_(xt(xt({},y),{},{a:b/100}))}})})]}),Object(f.jsxs)("div",{className:"c-color-sketch-picker__expand",children:[Object(f.jsx)("div",{className:"c-color-sketch-picker__expand--title",children:"\u7eaf\u8272\u9884\u8bbe"}),Object(f.jsx)("div",{className:"c-color-sketch-picker__expand--list",children:s.map((function(t,e){return Object(f.jsx)("div",{style:{background:t},onClick:function(){var e=Object(i.a)(t);v(e.hex.slice(1,7)),g(e.hsva),_(e.hsva)}},e)}))})]})]}))})),e.displayName="SketchPicker",o.a.memo(e)),Pt=["prefixCls","className","style","color","colors","onChange"];function At(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?At(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Rt=["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"];e=o.a.forwardRef((function(t,e){function r(t,e){"string"==typeof t&&Object(i.r)(t)&&/(3|6)/.test(String(t.replace(/^#/,"").length))&&s&&s(Object(i.a)(Object(i.d)(t)))}var n=void 0===(n=t.prefixCls)?"c-color-block-picker":n,o=t.className,a=t.style,c=t.color,u=void 0===(u=t.colors)?Rt:u,s=t.onChange,l=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,Pt),"string"==typeof c&&Object(i.r)(c)?Object(i.d)(c):c);c=c?Object(i.h)(l):"";return Object(f.jsxs)("div",Ct(Ct({ref:e,className:[n,o].filter(Boolean).join(" "),style:Ct({width:170,borderRadius:6,background:"rgb(255, 255, 255)",boxShadow:"rgb(0 0 0 / 10%) 0 1px",position:"relative"},a)},t),{},{children:[Object(f.jsx)("div",{style:{width:0,height:0,borderStyle:"solid",borderWidth:"0 10px 10px",borderColor:"transparent transparent ".concat(c),position:"absolute",top:-10,left:"50%",marginLeft:-10}}),Object(f.jsx)("div",{title:c,style:{backgroundColor:"".concat(c),color:Object(i.c)(c),height:110,fontSize:18,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center"},children:c.toLocaleUpperCase()}),Object(f.jsx)(rt,{colors:u,color:c,style:{paddingLeft:10,paddingTop:10},rectProps:{style:{marginRight:10,marginBottom:10,borderRadius:4,height:22,width:22}},onChange:function(t){s&&s(Object(i.a)(t))}}),Object(f.jsx)(P,{value:c.toLocaleUpperCase(),onChange:function(t,e){return r(e)},onBlur:function(t){var e=t.target.value;t.target.value=e.slice(0,7),r(e.slice(0,7))},inputStyle:{height:22,outline:0,borderRadius:3,color:"#666",padding:"0 7px"},style:{padding:10,paddingTop:0,borderRadius:"0 0 6px 6px"}})]}))}));function Nt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ft(t){var e=t.style,r=t.title,o=t.checked,i=t.color,a=t.onClick,c=(t=t.rectProps,Object(n.useRef)(null)),u=Object(n.useCallback)((function(t){c.current.style.transform="scale(1.2)"}),[]),s=Object(n.useCallback)((function(t){c.current.style.transform="scale(1)"}),[]);return Object(f.jsx)("div",{ref:c,onClick:a,onMouseEnter:u,onMouseLeave:s,title:r,style:Dt(Dt({},e),{},{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,padding:3,borderRadius:"50%",marginRight:12,marginBottom:12,boxSizing:"border-box",transform:"scale(1)",boxShadow:"".concat(i," 0px 0px ").concat(o?5:0,"px"),transition:"transform 100ms ease 0s, box-shadow 100ms ease 0s"}),children:Object(f.jsx)("div",Dt(Dt({},t),{},{style:Dt({height:o?"100%":0,width:o?"100%":0,borderRadius:"50%",backgroundColor:"#fff",boxSizing:"border-box",transition:"height 100ms ease 0s, width 100ms ease 0s"},t.style)}))})}e.displayName="BlockPicker";var Bt=["prefixCls","className","color","colors","rectProps","onChange"];function Gt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-circle-picker":r,n=t.className,o=t.color,a=void 0===(a=t.colors)?[]:a,c=void 0===(s=t.rectProps)?{}:s,u=t.onChange,s=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,Bt);t="string"==typeof o&&Object(i.r)(o)?Object(i.d)(o):o||{},o=o?Object(i.h)(t):"";return Object(f.jsx)(rt,Ut(Ut({ref:e,colors:a,color:o},s),{},{className:[r,n].filter(Boolean).join(" "),rectRender:function(t){return t=Object.assign({},t),Object(f.jsx)(Ft,Ut(Ut({},t),{},{rectProps:c}))},onChange:function(t){u&&u(Object(i.a)(t))}}))}));var zt=(e.displayName="CirclePicker",["prefixCls","className","style","onChange","color","colors"]);function Wt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ht=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];function Yt(t){return t.checked?Object(f.jsx)("div",{style:{height:5,width:5,borderRadius:"50%",backgroundColor:Object(i.c)(t.color)}}):null}function Vt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Xt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qt(t){var e=t.className,r=t.color,o=t.left,i=t.top,a=t.style,c=t.prefixCls,u=Xt(Xt({},a),{},{position:"absolute",top:i,left:o});return Object(n.useMemo)((function(){return Object(f.jsx)("div",{className:"".concat(c,"-pointer ").concat(e||""),style:u,children:Object(f.jsx)("div",{className:"".concat(c,"-fill"),style:{width:10,height:10,transform:"translate(-5px, -5px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 2px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:"#fff"},children:Object(f.jsx)("div",{style:{inset:0,borderRadius:"50%",position:"absolute",backgroundColor:r}})})})}),[i,o,r,e,c])}e=o.a.forwardRef((function(t,e){function r(t){return c&&c(Object(i.a)(t))}var n=void 0===(n=t.prefixCls)?"c-color-compact-piker":n,o=t.className,a=t.style,c=t.onChange,u=t.color,s=void 0===(s=t.colors)?Ht:s,l=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,zt),"string"==typeof u&&Object(i.r)(u)?Object(i.d)(u):u),d=u?Object(i.h)(l).replace(/^#/,""):"",h={style:{alignItems:"baseline"},inputStyle:{boxShadow:"none",backgroundColor:"transparent",outline:0}};return Object(f.jsxs)("div",Kt(Kt({ref:e,style:Kt({background:"#f6f6f6",borderRadius:3,display:"flex",width:240,flexWrap:"wrap",paddingTop:5,paddingLeft:5},a),className:[n,o||""].filter(Boolean).join(" ")},t),{},{children:[Object(f.jsx)(rt,{colors:s,color:u?Object(i.h)(l):void 0,rectProps:{children:Object(f.jsx)(Yt,{}),style:{display:"flex",alignItems:"center",justifyContent:"center"}},onChange:r}),Object(f.jsxs)("div",{style:{display:"flex",margin:"0 4px 3px 0"},children:[Object(f.jsx)(P,{onChange:function(t,e){"string"==typeof e&&Object(i.r)(e)&&/(3|6)/.test(String(e.length))&&r(Object(i.d)(e))},labelStyle:{paddingRight:5,marginTop:-1},value:d.toLocaleUpperCase(),label:Object(f.jsx)("div",{style:{width:8,height:8,backgroundColor:"#".concat(d)}}),inputStyle:{outline:"none",boxShadow:"initial",background:"transparent"},style:{flexDirection:"row-reverse",flex:"1 1 0%",minWidth:80}}),Object(f.jsx)(N,{hsva:l,dragLabel:!0,placement:"left",onChange:function(t){return r(t.hsva)},aProps:!1,rProps:h,gProps:h,bProps:h})]})]}))})),e.displayName="CompactPicker";var $t=2*Math.PI;function Zt(t){var e=(t=void 0===(t=t.width)?0:t)/2;return{width:t,radius:e,cx:e,cy:e}}function Jt(t){return(void 0===(t=t.width)?0:t)/2}function Qt(t,e,r){var n=t.angle||0;t=t.direction;return r&&"clockwise"===t?e=n+e:"clockwise"===t?e=360-n+e:r&&"anticlockwise"===t?e=n+180-e:"anticlockwise"===t&&(e=n-e),function(t,e){return(t%e+e)%e}(e,360)}var te=["prefixCls","radius","pointer","className","style","width","height","direction","angle","color","onChange"];function ee(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ne(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function oe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ie(t){var e=t.style,r=t.title,o=t.checked,i=(t.color,t.onClick),a=(t=t.rectProps,Object(n.useRef)(null)),c=Object(n.useCallback)((function(){a.current.style.zIndex="2",a.current.style.outline="#fff solid 2px",a.current.style.boxShadow="rgb(0 0 0 / 25%) 0 0 5px 2px"}),[]),u=Object(n.useCallback)((function(){o||(a.current.style.zIndex="0",a.current.style.outline="initial",a.current.style.boxShadow="initial")}),[o]);return Object(f.jsx)("div",oe(oe({ref:a,title:r},t),{},{onClick:i,onMouseEnter:c,onMouseLeave:u,style:oe(oe(oe({},e),{},{marginRight:0,marginBottom:0,borderRadius:0,boxSizing:"border-box",height:25,width:25},o?{zIndex:1,outline:"#fff solid 2px",boxShadow:"rgb(0 0 0 / 25%) 0 0 5px 2px"}:{zIndex:0}),t.style)}))}e=o.a.forwardRef((function(t,e){function r(t,e){a={width:p},c=p-t.x,t=y-t.y,r=(n=Zt(a)).cx,n=n.cy,o=Jt(a),c=r-c,t=n-t,r=Qt(a,Math.atan2(-t,-c)*(360/$t)),n=Math.min(function(t,e){return Math.sqrt(t*t+e*e)}(c,t),o);var r,n,o,a={h:Math.round(r),s:Math.round(100/o*n)},c={h:a.h,s:a.s,v:O.v,a:O.a};w&&w(Object(i.a)(c))}var n,a,c,u,s=void 0===(s=t.prefixCls)?"c-color-wheel-picker":s,l=(t.radius,t.pointer),d=t.className,h=t.style,p=void 0===(g=t.width)?200:g,y=void 0===(g=t.height)?200:g,g=void 0===(g=t.direction)?"anticlockwise":g,m=void 0===(m=t.angle)?180:m,b=t.color,w=t.onChange,O=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,te),"string"==typeof b&&Object(i.r)(b)?Object(i.d)(b):b||{}),x=(b=b?Object(i.h)(O):"",n=O,j=(a=Zt(x={width:p})).cx,a=a.cy,c=Jt(x),u=(180+Qt(x,n.h,!0))*($t/360),n=n.s/100*c,c="clockwise"===x.direction?-1:1,{x:j+n*Math.cos(u)*c,y:a+n*Math.sin(u)*c}),j={top:"0",left:"0",color:b};return Object(f.jsxs)(v,re(re({className:[s,d||""].filter(Boolean).join(" ")},t),{},{style:re(re({},h),{},{position:"relative",width:p,height:y}),ref:e,onMove:r,onDown:r,children:[o.a.createElement(l||qt,re({prefixCls:s,style:{zIndex:1,transform:"translate(".concat(x.x,"px, ").concat(x.y,"px)")}},j)),Object(f.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"anticlockwise"===g?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)",transform:"rotateZ(".concat(m+90,"deg)"),inset:0}}),Object(f.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"radial-gradient(circle closest-side, #fff, transparent)",inset:0}}),Object(f.jsx)("div",{style:{borderRadius:"50%",position:"absolute",inset:0,opacity:"number"==typeof O.v?1-O.v/100:0}})]}))})),e.displayName="WheelPicker";var ae=["prefixCls","placement","className","style","color","colors","rectProps","onChange"],ce=["key"];function ue(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function le(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}var fe,de=["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],he=(e=((e=fe=fe||{}).Left="L",e.LeftTop="LT",e.LeftBotton="LB",e.Right="R",e.RightTop="RT",e.RightBotton="RB",e.Top="T",e.TopRight="TR",e.TopLeft="TL",e.Botton="B",e.BottonLeft="BL",e.BottonRight="BR",o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-github-picker":r,o=void 0===(o=t.placement)?fe.TopRight:o,a=t.className,c=t.style,u=t.color,s=void 0===(s=t.colors)?de:s,l=void 0===(h=t.rectProps)?{}:h,d=t.onChange,h=le(t,ae),p=(t="string"==typeof u&&Object(i.r)(u)?Object(i.d)(u):u,u=u?Object(i.h)(t):"",se({},t={borderStyle:"solid",position:"absolute"}));t=se({},t);return/^T/.test(o)&&(p.borderWidth="0 8px 8px",p.borderColor="transparent transparent rgba(0, 0, 0, 0.15)",t.borderWidth="0 7px 7px",t.borderColor="transparent transparent #fff"),o===fe.TopRight&&(p.top=-8,t.top=-7),o===fe.Top&&(p.top=-8,t.top=-7),o===fe.TopLeft&&(p.top=-8,t.top=-7),/^B/.test(o)&&(p.borderWidth="8px 8px 0 ",p.borderColor="rgba(0, 0, 0, 0.15) transparent transparent",t.borderWidth="7px 7px 0px",t.borderColor="#fff transparent transparent",o===fe.BottonRight&&(p.top="100%",t.top="100%"),o===fe.Botton&&(p.top="100%",t.top="100%"),o===fe.BottonLeft)&&(p.top="100%",t.top="100%"),/^(B|T)/.test(o)&&(o!==fe.Top&&o!==fe.Botton||(p.left="50%",p.marginLeft=-8,t.left="50%",t.marginLeft=-7),o!==fe.TopRight&&o!==fe.BottonRight||(p.right=10,t.right=11),o!==fe.TopLeft&&o!==fe.BottonLeft||(p.left=7,t.left=8)),/^L/.test(o)&&(p.borderWidth="8px 8px 8px 0px",p.borderColor="transparent rgba(0, 0, 0, 0.15) transparent transparent",t.borderWidth="7px 7px 7px 0px",t.borderColor="transparent #fff transparent transparent",p.left=-8,t.left=-7),/^R/.test(o)&&(p.borderWidth="8px 0px 8px 8px",p.borderColor="transparent transparent transparent rgba(0, 0, 0, 0.15)",t.borderWidth="7px 0px 7px 7px",t.borderColor="transparent transparent transparent #fff",p.right=-8,t.right=-7),/^(L|R)/.test(o)&&(o!==fe.RightTop&&o!==fe.LeftTop||(p.top=5,t.top=6),o!==fe.Left&&o!==fe.Right||(p.top="50%",t.top="50%",p.marginTop=-8,t.marginTop=-7),o!==fe.LeftBotton&&o!==fe.RightBotton||(p.top="100%",t.top="100%",p.marginTop=-21,t.marginTop=-20)),Object(f.jsx)(rt,se(se({ref:e,className:[r,a].filter(Boolean).join(" "),colors:s,color:u,rectRender:function(t){var e=t.key;t=le(t,ce);return Object(f.jsx)(ie,se(se({},t),{},{rectProps:l}),e)}},h),{},{onChange:function(t){return d&&d(Object(i.a)(t))},style:se({width:200,borderRadius:4,background:"#fff",boxShadow:"rgb(0 0 0 / 15%) 0px 3px 12px",border:"1px solid rgba(0, 0, 0, 0.2)",position:"relative",padding:5},c),rectProps:{style:{marginRight:0,marginBottom:0,borderRadius:0,height:25,width:25}},addonBefore:Object(f.jsxs)(n.Fragment,{children:[Object(f.jsx)("div",{style:p}),Object(f.jsx)("div",{style:t})]})}))}))),e.displayName="GithubPicker",e),pe=["prefixCls","className","style","color","onChange"];function ye(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function ge(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var me={boxShadow:"initial",borderWidth:"0 0 1px 0",borderBottomColor:"#eee",borderBottomStyle:"solid",height:30,outline:0,fontSize:15,padding:0},ve=(e=o.a.forwardRef((function(t,e){function r(t,e){"string"==typeof t&&Object(i.r)(t)&&/(3|6)/.test(String(t.length))&&u&&u(Object(i.a)(Object(i.d)(t)))}var n=void 0===(n=t.prefixCls)?"c-color-material-picker":n,o=t.className,a=t.style,c=t.color,u=t.onChange,s=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,pe),"string"==typeof c&&Object(i.r)(c)?Object(i.d)(c):c);c=c?Object(i.h)(s).replace(/^#/,""):"";return Object(f.jsxs)("div",ge(ge({ref:e,className:[n,o||""].filter(Boolean).join(" "),style:ge({padding:16,width:98,fontFamily:"Roboto",backgroundColor:"#fff"},a)},t),{},{children:[Object(f.jsx)(P,{label:"Hex",value:c.toLocaleUpperCase(),onChange:function(t,e){return r(e)},onBlur:function(t){var e=t.target.value;t.target.value=e.slice(0,6),r(e.slice(0,6))},inputStyle:{outline:0,border:0,height:30,fontSize:15,padding:0,boxShadow:"initial",borderWidth:"0 0 2px 0",borderBottomColor:c?"#".concat(c):"#eee",borderBottomStyle:"solid"},style:{flexDirection:"column-reverse",alignItems:"flex-start"}}),Object(f.jsx)(N,{hsva:s,dragLabel:!0,placement:"top",style:{marginTop:11},rProps:{style:{alignItems:"flex-start"},inputStyle:ge({},me)},gProps:{style:{alignItems:"flex-start"},inputStyle:ge({},me)},bProps:{style:{alignItems:"flex-start"},inputStyle:ge({},me)},aProps:!1,onChange:function(t){t=t.hsva,u&&u(Object(i.a)(t))}})]}))})),e.displayName="MaterialPicker",["style"]);function be(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function we(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Oe(t){var e=t.style,r=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,ve),Object(n.useRef)(null)),o=Object(n.useCallback)((function(t){r.current.style.backgroundColor="#e8e8e8"}),[]),i=Object(n.useCallback)((function(t){r.current.style.backgroundColor="transparent"}),[]);return Object(f.jsx)("div",we(we({ref:r,style:we({marginLeft:5,cursor:"pointer",transition:"background-color .3s",borderRadius:2},e)},t),{},{onMouseEnter:o,onMouseLeave:i,children:Object(f.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",style:{display:"block"},children:Object(f.jsx)("path",{d:"M373.888 576h276.224c9.322667 0 14.293333 11.178667 9.173333 18.773333l-1.258666 1.557334-138.112 146.858666a10.709333 10.709333 0 0 1-14.293334 1.365334l-1.536-1.365334-138.112-146.858666c-6.592-6.997333-2.666667-18.645333 5.973334-20.16l1.941333-0.170667h276.224-276.224z m146.026667-295.189333l138.112 146.858666c7.04 7.509333 2.069333 20.330667-7.914667 20.330667H373.888c-9.984 0-14.976-12.821333-7.914667-20.330667l138.112-146.858666a10.730667 10.730667 0 0 1 15.829334 0z",fill:"#333"})})}))}var xe,je=["prefixCls","className","style","color","inputType","rectProps","onChange"];function _e(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ee(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}(e=xe=xe||{}).HEXA="hexa",e.RGBA="rgba",e.HSLA="hsla";e=o.a.forwardRef((function(t,e){function r(t){return l&&l(Object(i.a)(t))}var o=void 0===(o=t.prefixCls)?"c-color-chrome-picker":o,a=t.className,c=t.style,u=t.color,s=void 0===(s=t.inputType)?xe.RGBA:s,l=(t.rectProps,t.onChange),d=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,je),"string"==typeof u&&Object(i.r)(u)?Object(i.d)(u):u||{h:0,s:0,l:0,a:0}),h=(u=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?ke(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(n.useState)(s),2),u[0]),p=u[1];s={paddingTop:6},u={textAlign:"center",paddingTop:4,paddingBottom:4};return Object(f.jsx)(he,Ee(Ee({ref:e,color:d,style:Ee({borderRadius:0,flexDirection:"column",width:230,padding:0},c),colors:void 0,className:[o,a].filter(Boolean).join(" "),placement:fe.TopLeft},t),{},{addonAfter:Object(f.jsxs)(n.Fragment,{children:[Object(f.jsx)(H,{hsva:d,style:{width:"100%",height:130},onChange:function(t){r(Ee(Ee(Ee({},d),t),{},{a:d.a}))}}),Object(f.jsxs)("div",{style:{padding:15,display:"flex",alignItems:"center"},children:[Object(f.jsx)(j,{width:24,height:24,hsva:d,radius:2,style:{marginRight:15,borderRadius:"50%"},bgProps:{style:{background:"transparent"}},innerProps:{style:{borderRadius:"50%",background:Object(i.n)(d),boxShadow:"rgb(0 0 0 / 25%) 0px 0px 1px inset"}},pointer:function(){return Object(f.jsx)(n.Fragment,{})}}),Object(f.jsxs)("div",{style:{flex:1},children:[Object(f.jsx)(S,{hsva:d,style:{width:"100%"},bgProps:{style:{borderRadius:2}},onChange:function(t){r(Ee(Ee({},d),t))}}),Object(f.jsx)(j,{hsva:d,style:{marginTop:10},bgProps:{style:{borderRadius:2}},onChange:function(t){r(Ee(Ee({},d),t))}})]})]}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",padding:"0 15px 15px 15px",userSelect:"none"},children:[Object(f.jsxs)("div",{style:{flex:1},children:[h==xe.RGBA&&Object(f.jsx)(N,{hsva:d,rProps:{labelStyle:s,inputStyle:u},gProps:{labelStyle:s,inputStyle:u},bProps:{labelStyle:s,inputStyle:u},aProps:{labelStyle:s,inputStyle:u},onChange:function(t){return r(t.hsva)}}),h===xe.HEXA&&Object(f.jsx)(P,{label:"HEX",labelStyle:s,inputStyle:u,value:(0<d.a&&d.a<1?Object(i.i):Object(i.h))(d).toLocaleUpperCase(),onChange:function(t,e){"string"==typeof e&&r(Object(i.d)(/^#/.test(e)?e:"#".concat(e)))}}),h===xe.HSLA&&Object(f.jsx)(U,{hsva:d,hProps:{labelStyle:s,inputStyle:u},sProps:{labelStyle:s,inputStyle:u},lProps:{labelStyle:s,inputStyle:u},aProps:{labelStyle:s,inputStyle:u},onChange:function(t){return r(t.hsva)}})]}),Object(f.jsx)(Oe,{onClick:function(){h===xe.RGBA&&p(xe.HSLA),h===xe.HSLA&&p(xe.HEXA),h===xe.HEXA&&p(xe.RGBA)}})]})]}),rectRender:function(t){return t=t.key,Object(f.jsx)(n.Fragment,{},t)}}))}));var Se=(e.displayName="ChromePicker",["prefixCls","className","onMove","onDown"]);function Le(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Me(t){var e=t.className,r=t.prefixCls,n=t.left,o=(t.top,t.id),i=t.active,a=(t=t.color,{position:"absolute",left:n});return Object(f.jsx)("div",{id:o||"",className:"".concat(r,"-pointer ").concat(e||""),style:a,children:Object(f.jsx)("div",{className:"".concat(r,"-fill gradient-pointer ").concat(i?"active":""),style:{width:15,height:15,transform:n?"translate(-6px, -2.5px)":"translate(-1px, -9px)",backgroundColor:t}})})}e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-interactive":r,o=t.className,i=t.onMove,s=t.onDown,d=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,Se),Object(n.useRef)(null)),h=Object(n.useRef)(!1),p=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Te(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(n.useState)(!1),2),y=p[0],g=p[1],m=a(i),v=a(s),b=Object(n.useCallback)((function(t){u(t),(c(t)?0<t.touches.length:0<t.buttons)&&d.current?m&&m(l(d.current,t),t):g(!1)}),[m]),w=Object(n.useCallback)((function(){return g(!1)}),[]),O=Object(n.useCallback)((function(t){(t=t?window.addEventListener:window.removeEventListener)(h.current?"touchmove":"mousemove",b),t(h.current?"touchend":"mouseup",w)}),[]);Object(n.useEffect)((function(){return O(y),function(){y&&O(!1)}}),[y,O]),p=Object(n.useCallback)((function(t){var e,r=c(t.nativeEvent)?t.nativeEvent.touches[0]:t.nativeEvent;u(t.nativeEvent),e=t.nativeEvent,h.current&&!c(e)||(h.current=c(e),0)||(v&&v(Ie(Ie({},l(d.current,t.nativeEvent)),{},{originX:r.pageX,originY:r.pageY}),t.nativeEvent),g(!0))}),[v]);return Object(f.jsx)("div",Ie(Ie({},t),{},{className:[r,o||""].filter(Boolean).join(" "),style:Ie(Ie({},t.style),{},{width:148,height:10,touchAction:"none"}),ref:d,tabIndex:0,onMouseDown:p}))}));var Pe=(e.displayName="Interactive",e),Ae=(r(960),r(139)),Ce=["prefixCls","className","background","bgProps","innerProps","radius","width","height","direction","style","pointer","colors","setColors","active","setActive"];function Re(t){return function(t){if(Array.isArray(t))return Ne(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?Ne(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function De(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Fe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?De(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e=o.a.forwardRef((function(t,e){var r=void 0===(a=t.prefixCls)?"c-color-alpha":a,a=t.className,c=t.background,u=void 0===(u=t.bgProps)?{}:u,s=void 0===(s=t.innerProps)?{}:s,l=void 0===(l=t.radius)?2.5:l,d=t.width,h=void 0===(h=t.height)?12:h,p=void 0===(p=t.direction)?"horizontal":p,y=t.style,g=t.pointer,m=t.colors,v=t.setColors,b=t.active,w=t.setActive,O=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,Ce),Object(n.useRef)(null)),x=Object(n.useRef)(!1),j=Object(n.useCallback)((function(t){var e,r,n,o=t.x>t.width?t.width:t.x<0?0:t.x;O.current?x.current&&v((function(e){var r=e.findIndex((function(t){return t.id===(null==(t=O.current)?void 0:t.id)}));return e[r]=Fe(Fe({},e[r]),{},{x:o,value:t.left,left:100*t.left+"%"}),O.current=e[r],Re(e)})):(m.forEach((function(e){var r=t.x-12,n=t.x+12;e.x>=r&&e.x<=n&&(O.current=Fe({},e),w(e.id))})),O.current||x.current||(r=e=null,m.forEach((function(n){n.value<t.left?e=e&&e.value>n.value?e:n:r=r&&r.value<n.value?r:n})),e=e||{color:"#ffffff",x:0,value:0,left:"0%",top:"0%",id:Object(Ae.a)()},r=r||{color:"#ffffff",x:Number(d),value:Number(d),left:"100%",top:"0%",id:Object(Ae.a)()},n=function(t,e){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,n=Object(i.e)(t),o=((t=Object(i.e)(e)).r-n.r)/r,a=(t.g-n.g)/r,c=(t.g-n.g)/r,u=[],s=0;s<r;s++)u.push(Object(i.o)({r:Math.round(o*s+n.r),g:Math.round(a*s+n.g),b:Math.round(c*s+n.b),a:1}));return u}(e.color,r.color,100)[Math.round((t.left-e.value)/(r.value-e.value)*100)],O.current={color:Object(i.r)(n)?n:e.color,x:o,value:t.left,left:100*t.left+"%",top:"",id:Object(Ae.a)()},v([].concat(Re(m),[O.current])),w(O.current.id)))}),[m,O.current,x.current]),_=(Object(n.useEffect)((function(){function t(t){t=t.key;["Delete","Backspace"].includes(t)&&2<m.length&&(t=m.findIndex((function(t){return t.id===(null==(t=O.current)?void 0:t.id)})),m.splice(t,1),O.current=m[0],v(Re(m)),w(m[0].id))}return!O.current&&m.length&&(O.current=m[0],w(m[0].id)),document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[m]),"");return null!=m&&m.sort((function(t,e){return t.value-e.value})).forEach((function(t,e){var r=t.color;t=t.left;_+="".concat(r," ").concat(t).concat(e===m.length-1?"":",")})),Object(f.jsxs)("div",Fe(Fe({},t),{},{className:[r,"".concat(r,"-").concat(p),a||""].filter(Boolean).join(" "),style:Fe(Fe(Fe({borderRadius:l,backgroundColor:"#fff"},y),{},{position:"relative"},{width:d,height:h}),{},{border:"1px solid rgba(0, 0, 0, 0.05)"}),ref:e,children:[Object(f.jsx)("div",Fe(Fe({},u),{},{style:Fe({inset:0,position:"absolute",background:c||"",borderRadius:l},u.style)})),Object(f.jsx)(Pe,Fe(Fe({},s),{},{style:Fe(Fe({},s.style),{},{inset:0,zIndex:1,position:"absolute",borderRadius:"2px",backgroundImage:"linear-gradient(90deg, ".concat(_,")")}),onMove:function(t){x.current=!0,j(t)},onDown:function(t){O.current=null,x.current=!1,j(t)},children:m&&m.map((function(t){return o.a.createElement(g||Me,Fe(Fe({prefixCls:r},t),{},{active:b===t.id,activePointer:O}))}))}))]}))}));var Be=(e.displayName="Aplha",e),Ge=(r(961),r(962),r(114));function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ze=["prefixCls","className","onChange","onChangeComplete","width","presetColors","editableDisable","style","gradient"];function We(){We=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==Ue(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function Ke(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function He(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ke(i,n,o,a,c,"next",t)}function c(t){Ke(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ye(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||qe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(t,e){var r;if(t)return"string"==typeof t?$e(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$e(t,e):void 0}function $e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ze(t){return Object(f.jsx)("div",{style:{boxShadow:"rgb(0 0 0 / 60%) 0px 0px 2px",width:10,height:10,top:-1,left:t.left,borderRadius:"50%",position:"absolute",backgroundColor:"#fff"}})}bt.v.AppTheme;var Je,Qe=["linear-gradient(90deg, #ff6e7fff 0%, #bfe9ffff 100%)","linear-gradient(90deg, #e65c00ff 0%, #f9d423ff 100%)","linear-gradient(90deg, #ec008cff 0%, #fc6767ff 100%)","linear-gradient(90deg, #00467fff 0%, #a5cc82ff 100%)","linear-gradient(90deg, #076585ff 0%, #ffffffff 100%)","linear-gradient(90deg, #9796f0ff 0%, #fbc7d4ff 100%)","linear-gradient(90deg, #5433ffff 0%, #20bdffff 50%,#a5fecbff 100%)","linear-gradient(90deg, #00416aff 0%, #799f0cff 50%,#ffe000ff 100%)","linear-gradient(90deg, #f7f8f8ff 0%, #acbb78ff 100%)","linear-gradient(90deg, #ffe000ff 0%, #799f0cff 100%)","linear-gradient(90deg, #bdc3c7ff 0%, #2c3e50ff 100%)","linear-gradient(90deg, #ee9ca7ff 0%, #ffdde1ff 100%)","linear-gradient(90deg, #c6ffddff 0%, #fbd786ff 50%,#f7797dff 100%)","linear-gradient(90deg, #12c2e9ff 0%, #c471edff 50%,#f64f59ff 100%)","linear-gradient(90deg, #1f4037ff 0%, #99f2c8ff 100%)","linear-gradient(90deg, #c31432ff 0%, #240b36ff 100%)","linear-gradient(90deg, #659999ff 0%, #f4791fff 100%)","linear-gradient(90deg, #dd3e54ff 0%, #6be585ff 100%)","linear-gradient(90deg, #8a2387ff 0%, #e94057ff 50%,#f27121ff 100%)","linear-gradient(90deg, #1e9600ff 0%, #fff200ff 50%,#ff0000ff 100%)","linear-gradient(90deg, #59c173ff 0%, #a17fe0ff 50%,#5d26c1ff 100%)","linear-gradient(90deg, #40e0d0ff 0%, #ff8c00ff 50%,#ff0080ff 100%)","linear-gradient(90deg, #00f260ff 0%, #0575e6ff 100%)","linear-gradient(90deg, #03001eff 0%, #7303c0ff 33%,#ec38bcff 66%,#fdeff9ff 100%)","linear-gradient(90deg, #ada996ff 0%, #f2f2f2ff 33%,#dbdbdbff 66%,#eaeaeaff 100%)","linear-gradient(90deg, #1a2a6cff 0%, #b21f1fff 50%,#fdbb2dff 100%)","linear-gradient(90deg, #ef3b36ff 0%, #ffffffff 100%)","linear-gradient(90deg, #20002cff 0%, #cbb4d4ff 100%)","linear-gradient(90deg, #e8cbc0ff 0%, #636fa4ff 100%)","linear-gradient(90deg, #a770efff 0%, #cf8bf3ff 50%,#fdb99bff 100%)","linear-gradient(90deg, #fffc00ff 0%, #ffffffff 100%)","linear-gradient(90deg, #a80077ff 0%, #66ff00ff 100%)","linear-gradient(90deg, #f7ff00ff 0%, #db36a4ff 100%)","linear-gradient(90deg, #bbd2c5ff 0%, #536976ff 50%,#292e49ff 100%)","linear-gradient(90deg, #f0c27bff 0%, #4b1248ff 100%)","linear-gradient(90deg, #000046ff 0%, #1cb5e0ff 100%)"],tr=(e=o.a.forwardRef((function(t,e){function r(t){var e=[],r=(t.includes("rgba")?e=(null==t||null==(r=t.match(/rgba.*?\%/g))?void 0:r.map((function(t){var e=(t=Xe(t.match(/\d{1,3}/g),5))[0],r=t[1],n=t[2],o=t[3];t=t[4];return{color:"rgba(".concat(e,", ").concat(r,", ").concat(n,", ").concat(o,")"),value:Number(t)/100,left:t+"%",top:"0",x:150*Number(t)/100,id:Object(Ae.a)()}})))||[]:t.includes("#")&&(e=(null==t||null==(r=t.match(/#.*?%/g))?void 0:r.map((function(t){var e=(t.match(/#\w{6,8}/g)||[""])[0];t=Number((t.match(/\s.*[%]$/)||["0%"])[0].replace("%",""));return{color:e,value:Number(t)/100,left:t+"%",top:"0",x:150*Number(t)/100,id:Object(Ae.a)()}})))||[]),90<=(r=Number(((null==t?void 0:t.match(/(-?\d+)deg/))||["","90"])[1]))?-(r-90):r<=0?Math.abs(r)+90:90-r);I(r.toString()),k(r<0?Math.abs(r):360-r),b(e),O(e[0].id)}var o=void 0===(o=t.prefixCls)?"c-color-gradient":o,a=t.className,c=t.onChange,u=t.onChangeComplete,s=void 0===(s=t.width)?264:s,l=void 0===(l=t.presetColors)?Qe:l,d=(t.editableDisable,t.style),h=t.gradient,p=(t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,ze),(T=Xe(Object(n.useState)({h:209,s:36,v:90,a:1}),2))[0]),y=T[1],g=(T=Xe(Object(n.useState)(""),2))[0],m=T[1],v=(T=Xe(Object(n.useState)([]),2))[0],b=T[1],w=(T=Xe(Object(n.useState)(""),2))[0],O=T[1],x=(T=Xe(Object(n.useState)(0),2))[0],_=T[1],E=(T=Xe(Object(n.useState)(0),2))[0],k=T[1],L=(T=Xe(Object(n.useState)("0"),2))[0],I=T[1],T="EyeDropper"in window,M=vt(u||function(){},1e3),P=(Object(n.useEffect)((function(){h&&r(h)}),[]),Object(n.useEffect)((function(){var t,e,r,n,o;w&&((t=v.find((function(t){return t.id===w})).color).includes("rgba")?(o=(n=Xe(t.match(/\d+(\.\d+)?/g).map(Number),4))[0],r=n[1],e=n[2],n=void 0===(n=n[3])?1:n,o=Object(i.q)({r:o,g:r,b:e,a:n}),r=Object(i.a)(o).hex,m(r.slice(1,7)),_(Math.ceil(100*n)),y(o)):(r=(e=Object(i.a)(t)).hex,n=e.hsva.a,o=e.hsva,m(r.slice(1,7)),/00$/gi.test(t)?(_(0),o.a=0):_(Math.ceil(100*n)),y(o)))}),[w]),Object(n.useCallback)((function(t){var e=(o=Object(i.a)(t)).hex,r=o.hexa,n=o.hsva.a,o=(o.rgba,m(e.slice(1,7)),_(Math.ceil(100*n)),y(t),v.findIndex((function(t){return t.id===w})));v[o]=Ve(Ve({},v[o]),{},{color:r}),b(function(t){return function(t){if(Array.isArray(t))return $e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(v))}),[p,v]));return Object(n.useEffect)((function(){var t="",e=(null!=v&&v.sort((function(t,e){return t.value-e.value})).forEach((function(e,r){var n=e.color;e=e.left;t+="".concat(n," ").concat(e).concat(r===v.length-1?"":",")})),"linear-gradient(".concat(E<=180?90+E:-270+E,"deg, ").concat(t,")"));h!==e&&0<v.length&&c&&u&&(c(e),M(e))}),[v,E]),Object(f.jsxs)("div",Ve(Ve({},t),{},{className:"".concat(o," ").concat(a||""),ref:e,style:Ve({background:"rgb(255, 255, 255)",borderRadius:4,width:s},d),children:[Object(f.jsxs)("div",{className:"color-gradient-select",children:[Object(f.jsx)(Be,{colors:v,setColors:b,active:w,setActive:O,width:150}),Object(f.jsx)(bt.k,{zIndex:2001,placement:"bottom",content:function(){return Object(f.jsx)(ft,{angle:E,onChange:function(t){k(t),I((0<=t&&t<=180?-t:360-t).toString())}})},children:Object(f.jsx)(bt.e,{value:L,onChange:function(t){I(t.target.value)},onBlur:function(t){t=Number((t.target.value.match(/-?\d+/)||["0"])[0]),I((t=180<t||t<-180?0:t).toString()),k(t<0?Math.abs(t):360-t)}})})]}),Object(f.jsx)(H,{hsva:p,style:{width:"auto",height:140,borderRadius:"4px"},onChange:function(t){P(Ve(Ve(Ve({},p),t),{},{a:1}))}}),Object(f.jsxs)("div",{className:"c-color-sketch-picker__tool",children:[Object(f.jsx)("div",{className:"c-color-sketch-picker__tool--preview",children:Object(f.jsx)("div",{style:{background:Object(i.i)(p)}})}),Object(f.jsxs)("div",{className:"c-color-sketch-picker__tool--setting",children:[Object(f.jsx)(S,{width:"auto",height:8,hsva:p,pointer:Ze,innerProps:{style:{marginLeft:0,marginRight:10}},radius:4,onChange:function(t){return P(Ve(Ve({},p),t))}}),Object(f.jsx)(j,{width:"auto",height:8,hsva:p,pointer:Ze,style:{marginTop:8},innerProps:{style:{marginLeft:0,marginRight:10}},radius:4,onChange:function(t){P(Ve(Ve({},p),{a:t.a}))}})]})]}),Object(f.jsxs)("div",{className:"c-color-sketch-picker__menu",children:[T?Object(f.jsx)("div",{className:"c-color-sketch-picker__menu--eyeDropper",onClick:He(We().mark((function t(){var e,r,n;return We().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=new window.EyeDropper,t.next=4,e.open();case 4:e=t.sent,n=e.sRGBHex,n=Object(i.a)(n),r=n.hex,n=n.hsva,m(r.slice(1,7)),y(n),P(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),children:Object(f.jsx)(bt.d,{name:"colorPicker",fontSize:19})}):null,Object(f.jsx)("div",{className:"c-color-sketch-picker__menu--input ".concat(T?"":"w110"),children:Object(f.jsx)(bt.e,{prefix:"#",value:g,onChange:function(t){t=t.target.value,m(t)},onBlur:function(){var t=Object(i.a)(g);t.hex?(m(t.hex.slice(1,7)),y(t.hsva),P(t.hsva)):m(Object(i.h)(p).slice(1,7))}})}),Object(f.jsx)("div",{className:"c-color-sketch-picker__menu--input ".concat(T?"":"w110"),children:Object(f.jsx)(bt.e,{suffix:"%",value:x,onChange:function(t){t=+t.target.value,_(0===(t=(t=100<t?100:t)<0?0:t)?0:t||x)},onBlur:function(){P(Ve(Ve({},p),{},{a:x/100}))}})})]}),Object(f.jsxs)("div",{className:"c-color-gradient-picker__expand",children:[Object(f.jsx)("div",{className:"c-color-gradient-picker__expand--title",children:"\u6e10\u53d8\u9884\u8bbe"}),Object(f.jsx)("div",{className:"c-color-gradient-picker__expand--list",children:Object(f.jsx)(Ge.Scrollbars,{children:l.map((function(t,e){return Object(f.jsx)("div",{className:"c-color-gradient-picker__expand--item",style:{backgroundImage:t,border:"none"},onClick:function(){r(t)}},e)}))})})]})]}))})),e.displayName="gradient",o.a.memo(e)),er=["prefixCls","className","onChange","onChangeComplete","width","color","editableDisable","style","transparent"];function rr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function nr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?ir(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}(r=Je=Je||{})[r.PURE_COLOR=1]="PURE_COLOR",r[r.GRADIENT=2]="GRADIENT";e=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-gradient-picker":r,o=t.className,i=t.onChange,a=void 0===(a=(t.onChangeComplete,t.width))?264:a,c=t.color,u=(t.editableDisable,t.style),s=void 0!==(l=t.transparent)&&l,l=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,er),d=(t=or(Object(n.useState)({color:"",transparent:!1}),2))[0],h=t[1],p=(t=or(Object(n.useState)(""),2))[0],y=t[1],g=(t=or(Object(n.useState)(Je.PURE_COLOR),2))[0],m=t[1];return Object(n.useEffect)((function(){"string"==typeof c&&c.includes("linear-gradient")?(y(c),m(Je.GRADIENT)):(h({color:c||"",transparent:s}),m(Je.PURE_COLOR))}),[]),Object(n.useEffect)((function(){g===Je.PURE_COLOR?d.color&&i&&i(d):c!==p&&i&&i({color:p,transparent:!1})}),[g]),Object(f.jsxs)("div",nr(nr({},l),{},{className:"".concat(r," ").concat(o||""),ref:e,style:nr({background:"rgb(255, 255, 255)",borderRadius:4,boxShadow:"rgb(0 0 0 / 15%) 0px 0px 0px 1px, rgb(0 0 0 / 15%) 0px 8px 16px",width:a},u),children:[Object(f.jsx)(bt.u,{data:[{name:"\u7eaf\u8272",tabKey:"color"},{name:"\u6e10\u53d8",tabKey:"gradient"}],activeIndex:g,tabsWidth:"232px",tabsHeight:"26px",handleTabClick:function(t){"color"===t?(d.color||h({color:"#ffffff",transparent:s}),m(Je.PURE_COLOR)):(p||y("linear-gradient(90deg, #ffffff 0%,#ff6261 100%)"),m(Je.GRADIENT))}}),g===Je.PURE_COLOR?d.color?Object(f.jsx)(Mt,{color:d.color,transparent:d.transparent,onChange:function(t){h(t),i&&i(t)},onChangeComplete:function(t){}}):null:Object(f.jsx)(tr,{gradient:p,onChange:function(t){y(t),i&&i({color:t,transparent:!1})},onChangeComplete:function(t){}})]}))}));var ar=(e.displayName="GradientPicker",e),cr=["prefixCls","className","onChange","direction","hsva","value","type","maxValue","ratio"];function ur(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function sr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ur(Object(r),!0).forEach((function(e){lr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r=o.a.forwardRef((function(t,e){var r=void 0===(r=t.prefixCls)?"c-color-hue":r,o=t.className,a=t.onChange,c=void 0===(c=t.direction)?"horizontal":c,u=t.hsva,s=t.value,l=t.type,d=t.maxValue,h=void 0===(p=t.ratio)?1:p,p=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,cr),y=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?fr(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fr(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(n.useState)(""),2),t[0]),g=t[1];return Object(n.useEffect)((function(){var t=[-.5,-.34,-.16,0,.16,.34,.5].map((function(t){var e=d*h;t=e<(t=t*e+u[l])?t-e:t<0?t+e:t;return Object(i.h)(sr(sr({},u),lr({},l,t)))}));g("".concat(t[0]," 0%, ").concat(t[1]," 26.04%, ").concat(t[2]," 45.83%, ").concat(t[3]," 54.69%, ").concat(t[4]," 72.92%, ").concat(t[5]," 85.42%, ").concat(t[6]," 100%"))}),[u]),Object(f.jsx)(j,sr(sr({ref:e,className:"".concat(r," ").concat(o||"")},p),{},{direction:c,background:"linear-gradient(to right, ".concat(y),hsva:{h:s,s:100,v:100,a:s/d},onChange:function(t,e){a&&a({value:d*e.left})}}))}));var dr=(r.displayName="HueV2",r);function hr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function pr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hr(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}pr(pr({},{aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"}),{},{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",oldlace:"#fdf5e6",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellowgreen:"#9acd32"})},,function(t,e,r){t.exports={"angle-0":"angle-0--KCJxR",angle0:"angle-0--KCJxR","angle-1":"angle-1--7FA3G",angle1:"angle-1--7FA3G","angle-2":"angle-2--F8FpC",angle2:"angle-2--F8FpC","angle-3":"angle-3--2PDHj",angle3:"angle-3--2PDHj","angle-4":"angle-4--dQsZL",angle4:"angle-4--dQsZL","angle-5":"angle-5--15b8f",angle5:"angle-5--15b8f","angle-6":"angle-6--Hxn1+",angle6:"angle-6--Hxn1+","angle-7":"angle-7--kYNEq",angle7:"angle-7--kYNEq","scale-0":"scale-0--cOGeR",scale0:"scale-0--cOGeR","scale-1":"scale-1--JrkdF",scale1:"scale-1--JrkdF","scale-2":"scale-2--yTa89",scale2:"scale-2--yTa89","scale-3":"scale-3--uCdE0",scale3:"scale-3--uCdE0"}},function(t,e,r){"use strict";var n=r(354);r.d(e,"a",(function(){return n.a}))},,,,,,,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"f",(function(){return f})),r.d(e,"e",(function(){return d}));e=r(31);var n=r.n(e),o=r(17),i=r(7),a=r(214),c=function(){var t=Object(a.d)();return{getLayer:function(e){return(e=t.get(e))&&function e(r){var n=[];(r.children||[]).forEach((function(r){var o=t.get(r.id);o&&n.push(o),e(r)})),r.children=n}(e),e}}},u=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.checkLayerInRender})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.delLayer})),r=Object(o.b)((function(t){return t.sdk.layersManagerModel.cloneLayer})),a=Object(o.b)((function(t){return t.sdk.layersManagerModel.addOrUpdateLayer}));return{delLayer:function(t){e(t)},checkLayerInRender:function(e){var r=!1;return t({payload:e,callback:function(t){r=t}}),r},cloneLayer:function(t){var e;return r({payload:{layer:t,withParentLayer:1<arguments.length&&void 0!==arguments[1]&&arguments[1]},callback:function(t){e=t}}),e||void 0},addOrUpdate:function(t){a(t)},adjustCropLayer:function(t){var e=t.data.imageTransform,r=e.widthRatio,o=e.scale,a=e.heightRatio,c=e.rotate,u=e.offsetX,s=e.offsetY,l=t.width;a=a*(t=t.height)*o,o=u*(r=r*l*o),u=s*a,s={mainLayerSize:{width:l,height:t},adjustLayerSize:{width:r,height:a},adjustLayerRotate:c,adjustLayerRelativePosition:Object(i.Ib)({x:-n()(o),y:n()(u)},c)},t=(l=Object(i.f)(s)).movePoint;1!==(c=l.scale)?(e.scale=e.scale*c,e.offsetX=o/(r*c),e.offsetY=u/(a*c)):(e.offsetX=(o+t.x)/r,e.offsetY=(u-t.y)/a)}}},s=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.getLayerById})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.getMainLayer})),r=Object(o.b)((function(t){return t.sdk.layersManagerModel.getBackgroundLayer})),n=Object(o.b)((function(t){return t.sdk.layersManagerModel.getLayerParentId})),i=Object(o.b)((function(t){return t.sdk.layersManagerModel.getCollisionLayers})),a=Object(o.b)((function(t){return t.sdk.layersManagerModel.getLayers}));return{getResultLayers:function(){var t=[];return a({payload:{isRenderLayers:!0,isResult:!0},callback:function(e){t=e}}),t},getLayers:function(){var t=[];return a({payload:{isRenderLayers:!1},callback:function(e){t=e}}),t},getRenderLayers:function(){var t=[];return a({payload:{isRenderLayers:!0},callback:function(e){t=e}}),t},getLayer:function(e){var r;return t({payload:{id:e,withClone:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]},callback:function(t){r=t}}),r||void 0},getMainLayer:function(){var t;return e((function(e){t=e})),t},getBackgroundLayer:function(){var t;return r((function(e){t=e})),t},getLayerParentId:function(t){var e="";return n({payload:{id:t,extraGroupIsWrap:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]},callback:function(t){e=t}}),e},getCollisionLayers:function(){var t=[];return i({payload:{ignoreLockLayer:!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},callback:function(e){t=e}}),t}}},l=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.getLayerIndex})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.getLayerIndexMap})),r=Object(o.b)((function(t){return t.sdk.layersManagerModel.getLayerIndexSortList}));return{getLayerIndex:function(e){var r=-1;return t({payload:e,callback:function(t){r=t}}),r},getLayerIndexMap:function(t){var r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n={id:"",layerIndexMap:new Map};return e({payload:{id:t,withSelf:r},callback:function(t){n=t}}),n},getLayerIndexSortList:function(t,e,n){var o={sortList:[],sortIndex:-1,sortId:"",originLayerSortMap:new Map};return r({payload:{id:t,isExtraGroup:e,ignore:n},callback:function(t){o=t}}),o}}},f=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.updateGroupLayer})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.updateActiveLayerPosition})),r=Object(o.b)((function(t){return t.sdk.layersManagerModel.updateActiveLayerResize})),n=Object(o.b)((function(t){return t.sdk.layersManagerModel.updateActiveLayerRotate})),i=Object(o.b)((function(t){return t.sdk.layersManagerModel.updateActiveLayerScale}));return{updateGroup:function(e){t(e)},moveActiveLayer:function(t,r){var n=0,o=0;return e({x:t,y:r,callback:function(t,e){n=t,o=e}}),{left:n,top:o}},resizeActiveLayer:function(t,e,n,o){var i=0,a=0,c=!1;return r({offset:t,direction:e,isChangeHeight:n,reverse:o,callback:function(t,e,r){i=t,a=e,c=r}}),{width:i,height:a,isMin:c}},rotateActiveLayer:function(t){var e=0;return n({angle:t,callback:function(t){e=t}}),e},scaleActiveLayer:function(t,e,r){var n=0,o=0,a=!1;return i({offset:t,direction:e,reverse:r,callback:function(t,e,r){n=t,o=e,a=r}}),{width:n,height:o,isMin:a}}}},d=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.setStageSize})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.getStageSize}));return{setSize:function(e){t(e)},getSize:function(){var t={width:0,height:0};return e((function(e){t=e})),t}}}},function(t,e,r){"use strict";r.d(e,"H",(function(){return o})),r.d(e,"f",(function(){return i})),r.d(e,"e",(function(){return a})),r.d(e,"A",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"z",(function(){return s})),r.d(e,"b",(function(){return l})),r.d(e,"y",(function(){return f})),r.d(e,"g",(function(){return d})),r.d(e,"B",(function(){return h})),r.d(e,"p",(function(){return p})),r.d(e,"G",(function(){return y})),r.d(e,"q",(function(){return g})),r.d(e,"I",(function(){return m})),r.d(e,"r",(function(){return v})),r.d(e,"J",(function(){return b})),r.d(e,"c",(function(){return w})),r.d(e,"t",(function(){return O})),r.d(e,"l",(function(){return x})),r.d(e,"D",(function(){return j})),r.d(e,"w",(function(){return _})),r.d(e,"x",(function(){return E})),r.d(e,"i",(function(){return k})),r.d(e,"K",(function(){return S})),r.d(e,"h",(function(){return L})),r.d(e,"s",(function(){return I})),r.d(e,"n",(function(){return T})),r.d(e,"F",(function(){return M})),r.d(e,"v",(function(){return P})),r.d(e,"k",(function(){return A})),r.d(e,"C",(function(){return C})),r.d(e,"u",(function(){return R})),r.d(e,"j",(function(){return N})),r.d(e,"m",(function(){return D})),r.d(e,"E",(function(){return F})),r.d(e,"a",(function(){return B})),r.d(e,"o",(function(){return G})),r.d(e,"L",(function(){return U})),r.d(e,"M",(function(){return z}));var n=r(50),o=function(){return Object(n.b)((function(t){return t.mainLayerModel.setOriginLayer}))},i=function(){return Object(n.b)((function(t){return t.mainLayerModel.getOriginLayer}))},a=function(){return Object(n.c)((function(t){return t.mainLayerModel.eliminateConf.penSize}))},c=function(){return Object(n.b)((function(t){return t.mainLayerModel.setEliminatePenSize}))},u=function(){return Object(n.c)((function(t){return t.mainLayerModel.eliminateConf}))},s=function(){return Object(n.b)((function(t){return t.mainLayerModel.setEliminateConf}))},l=function(){return Object(n.c)((function(t){return t.mainLayerModel.colorEnhance}))},f=function(){return Object(n.b)((function(t){return t.mainLayerModel.setColorEnhance}))},d=function(){return Object(n.c)((function(t){return t.mainLayerModel.hslEnhance}))},h=function(){return Object(n.b)((function(t){return t.mainLayerModel.setHslEnhance}))},p=function(){return Object(n.c)((function(t){return t.mainLayerModel.lightEnhance}))},y=function(){return Object(n.b)((function(t){return t.mainLayerModel.setLightEnhance}))},g=function(){return Object(n.c)((function(t){return t.mainLayerModel.particularsEnhance}))},m=function(){return Object(n.b)((function(t){return t.mainLayerModel.setParticularsEnhance}))},v=function(){return Object(n.c)((function(t){return t.mainLayerModel.posterizeEnhance}))},b=function(){return Object(n.b)((function(t){return t.mainLayerModel.setPosterizeEnhance}))},w=function(){return Object(n.b)((function(t){return t.mainLayerModel.destroy}))},O=function(){return Object(n.b)((function(t){return t.mainLayerModel.resetEnhance}))},x=function(){return Object(n.c)((function(t){return t.mainLayerModel.intelligentPenSize}))},j=function(){return Object(n.b)((function(t){return t.mainLayerModel.setIntelligentPenSize}))},_=function(){return Object(n.c)((function(t){return t.mainLayerModel.selectedIndex}))},E=function(){return Object(n.c)((function(t){return t.mainLayerModel.selectedInfo}))},k=function(){return Object(n.c)((function(t){return t.mainLayerModel.intelligentColors}))},S=function(){return Object(n.b)((function(t){return t.mainLayerModel.setSelectedData}))},L=function(){return Object(n.b)((function(t){return t.mainLayerModel.initIntelligentColors}))},I=function(){return Object(n.b)((function(t){return t.mainLayerModel.pushIntelligentColor}))},T=function(){return Object(n.c)((function(t){return t.mainLayerModel.intelligentPreviewList}))},M=function(){return Object(n.b)((function(t){return t.mainLayerModel.setIntelligentPreviewList}))},P=function(){return Object(n.c)((function(t){return t.mainLayerModel.selectedHSLIndex}))},A=function(){return Object(n.c)((function(t){return t.mainLayerModel.intelligentHSLSelectInfo}))},C=function(){return Object(n.b)((function(t){return t.mainLayerModel.setIntelligentHSLSelectInfo}))},R=function(){return Object(n.b)((function(t){return t.mainLayerModel.resetIntelligentHSLSelectInfo}))},N=function(){return Object(n.b)((function(t){return t.mainLayerModel.intelligentDestroy}))},D=function(){return Object(n.c)((function(t){return t.mainLayerModel.intelligentPreData}))},F=function(){return Object(n.b)((function(t){return t.mainLayerModel.setIntelligentPreData}))},B=function(){return Object(n.b)((function(t){return t.mainLayerModel.setIsOpenIntelligentPickColor}))},G=function(){return Object(n.c)((function(t){return t.mainLayerModel.isOpenIntelligentPickColor}))},U=function(){return Object(n.b)((function(t){return t.mainLayerModel.setSmartPenType}))},z=function(){return Object(n.c)((function(t){return t.mainLayerModel.smartPenType}))}},,,,function(t,e,r){t.exports={item:"item--o7nFb"}},,function(t,e,r){"use strict";r.r(e),r.d(e,"AppTheme",(function(){return n})),r.d(e,"Helper",(function(){return o})),(r=n=n||{}).white="light",r.dark="dark";var n,o={setTheme:function(t){var e=document.documentElement;return e.className=t,e.getAttribute("data-prefers-color")&&e.setAttribute("data-prefers-color",t),window.localStorage.setItem("theme",t),t},getTheme:function(){return window.localStorage.getItem("theme")===n.dark?n.dark:n.white}}},,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"e",(function(){return v.a})),r.d(e,"c",(function(){return F})),r.d(e,"d",(function(){return m})),r.d(e,"b",(function(){return z}));e=r(31);var n=r.n(e),o=r(210),i=r(34),a=r(2),c=r(7);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=l(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==u(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}var d={onBeforeAddOrUpdate:function(t){(t=t.data).url=i.a.getCode(t.url)},onBeforeSaveAsync:function(t,e){return f(s().mark((function r(){var n,a;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.data,(a=Object(o.d)(t))&&Object(o.b)(t,a,!0),(a=Object(o.e)(t.id)).base64&&(n.url=i.a.getCode(a.base64,a.forceMd5)),n.url){if(e)return r.next=9,i.a.getLocalUrlAsync(n.url);r.next=12}else r.next=15;break;case 9:n.url=r.sent,r.next=15;break;case 12:return r.next=14,i.a.getRemoteUrlAsync(n.url);case 14:n.url=r.sent;case 15:case"end":return r.stop()}}),r)})))()},getResultCanvasAsync:function(t,e){return f(s().mark((function r(){var o,u,l,d,h,p,y,g,m,v,b,w,O,x,j,_,E,k,S,L,I,T,M,P,A,C,R,N,D,F,B,G,U,z,W,K,H,Y,V,X;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=document.getElementById("".concat(a.e).concat(t.id))){r.next=4;break}return r.abrupt("return");case 4:return u=t.width,l=t.height,d=t.left,h=t.top,p=t.opacity,y=t.rotate,I=t.data,g=I.url,m=I.maskURL,v=I.cutoutMaskURL,k=I.imageTransform,b=k.flipH,w=k.flipV,O=k.scale,x=k.rotate,j=k.widthRatio,_=k.heightRatio,E=k.offsetX,k=k.offsetY,S=I.shadow,L=I.naturalHeight,I=I.naturalWidth,r.next=8,i.a.getRemoteUrlAsync(g);case 8:if("false"===(T=o).getAttribute("ready"))return r.next=12,Object(c.zb)(g);r.next=13;break;case 12:T=r.sent;case 13:if(M=e.width,P=e.height,A=n()(u),C=n()(l),R={x:A/2+d,y:C/2+h},N={x:-A/2,y:-C/2},U=n()(E*j*u*O),z=n()(k*_*l*O),D=n()(u*j),F=n()(l*_),B=A/2,G=C/2,b?B-=U:B+=U,w?G-=z:G+=z,U=function(){var t=f(s().mark((function t(e){var r,n,o,i,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(c.t)(A,C),r=n.canvas,n=n.ctx,m)return t.next=4,Object(c.zb)(m);t.next=9;break;case 4:o=t.sent,i=Object(c.L)(o.width,o.height,A,C),n.drawImage(o,i.dx,i.dy,i.dw,i.dh),n.globalCompositeOperation="source-in",n.drawImage(e,0,0);case 9:return o=Object(c.t)(M,P),i=o.canvas,(a=o.ctx).translate(R.x,R.y),a.rotate(Math.PI/180*y),a.globalAlpha=p,a.drawImage(m?r:e,0,0,A,C,N.x,N.y,A,C),t.abrupt("return",i);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=f(s().mark((function t(){var e,r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(c.t)(A,C),e=r.canvas,(r=r.ctx).translate(B,G),n=x,b&&(n=-n),w&&(n=-n),r.rotate(n*Math.PI/180),r.scale(O*(b?-1:1),O*(w?-1:1)),S)return t.abrupt("return",e);t.next=11;break;case 11:return r.drawImage(W||T,-D/2,-F/2,D,F),t.abrupt("return",e);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),W=null,v)return H=Object(c.t)(A,C),K=H.canvas,H=H.ctx,r.next=33,Object(c.zb)(v);r.next=40;break;case 33:V=r.sent,X=Object(c.L)(V.width,V.height,A,C),Y=Object(c.L)(I,L,A,C),H.drawImage(V,X.dx,X.dy,X.dw,X.dh),H.globalCompositeOperation="source-in",H.drawImage(T,Y.dx,Y.dy,Y.dw,Y.dh),W=K;case 40:return r.next=42,z();case 42:return V=r.sent,X=U(V),r.abrupt("return",X);case 46:case"end":return r.stop()}}),r)})))()},getActiveBaseInfo:function(t){var e=(t=t.data).naturalHeight;t=t.naturalWidth;return{cutWidth:Math.min(t,a.l),cutHeight:Math.min(e,a.l)}},getScaleMinRatio:function(t,e){var r=t.width,n=t.height,o=t.cutHeight,i=(t=t.cutWidth,(e=e.data).naturalWidth);e=e.naturalHeight;return Math.floor(i/e*1e10)<=Math.floor(r/n*1e10)?(r-r*((n-o)/n))/r:(r-(r-t))/r},getScaleIsNeedLimitSize:function(){return!0},onBeforeResizeUpdate:function(t,e){var r,n=t.data,o=n.imageTransform,i=n.naturalWidth,c=n.naturalHeight;n.stretchOption===a.u.cover&&(n=i/t.width,r=c/t.height,o.widthRatio=i/(i=n<r?n:r)/t.width,o.heightRatio=c/i/t.height)}},h=(r(198),r(13)),p=(e=r(15),r.n(e)),y=r(24),g=r(10),m=(r(88),function(t){var e=t.imgWidth,r=t.imgHeight,n=t.stageHeigh,o=e/r,i=(t=t.stageWidth)/n,a=1,c=1;return o<i?c=+(t/e*r/n).toFixed(4):i<o&&(a=+(n/r*e/t).toFixed(4)),{widthRatio:a,heightRatio:c}});Symbol("imgTagChange");var v=r(383),b=(e=r(9),r.n(e)),w=r(0),O=r.n(w),x=r(29),j=r(46);function _(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?S(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?M(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?R(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?D(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(936);var F=O.a.memo((function(t){t=t.id;var e,r,o,i,u,s,l,f,d,m,v,_,S,L,M=Object(w.useRef)(null),P=Object(g.w)().checkLayerInRender,R=(e=t,R=Object(g.q)().getLayer,r=p()(R(e)),R=Object(g.w)(),o=R.cloneLayer,i=R.addOrUpdate,u=R.adjustCropLayer,s=R.checkLayerInRender,R=T(Object(w.useState)({x:0,y:0}),2),l=R[0],f=R[1],R=T(Object(w.useState)(0),2),d=R[0],m=R[1],R=T(Object(w.useState)(),2),v=R[0],_=R[1],F=(R=T(Object(w.useState)(null),2))[0],S=R[1],L=Object(y.h)(),Object(j.e)((function(t){var h,p,y,g,b;return s(e)&&r&&(null==r?void 0:r.layerType)===a.h.IMAGE_LAYER?(p=(h=t.target).getAttribute("data-type"),void(Object(c.ib)(h)&&"imgRotate"===p&&(h={x:t.x,y:t.y},b=(p=r.data.imageTransform).rotate,y=p.flipH,g=p.flipV,t.isStart?(_(o(e)),m(b),f(h)):(b=Object(c.H)(r.id),b=Object(c.db)(Object(c.fc)(b,l),Object(c.fc)(b,h)),y&&(b*=-1),g&&(b*=-1),p.rotate=(d+b)%360,S(h),t.isEnd&&(p.rotate=n()(p.rotate),u(r),L.action(v,o(e)),f({x:0,y:0}),S(null)),i(I({},r)))))):null})),{rotateMovePoint:F,layer:r}),D=R.rotateMovePoint,F=R.layer;B=t,R=Object(g.q)().getLayer,G=p()(R(B)),R=C(Object(w.useState)(0),2),U=R[0],z=R[1],R=C(Object(w.useState)(),2),W=R[0],K=R[1],lt=(R=C(Object(w.useState)(0),2))[0],H=R[1],Y=Object(y.h)(),R=Object(g.w)(),V=R.cloneLayer,X=R.addOrUpdate,q=R.adjustCropLayer,$=R.checkLayerInRender,Object(j.e)((function(t){var e,r,n;return $(B)&&G&&(null==G?void 0:G.layerType)===a.h.IMAGE_LAYER?(n=(e=t.target).getAttribute("data-type"),void(Object(c.ib)(e)&&"imgScale"===n&&(n=(e=G.data.imageTransform).scale,t.isStart?(K(V(B)),z(n)):(n=1,(n=0<(r=t.displacementX)?U+r*((3-U)/50):U+r*(U/25))<1?n=1:3<n&&(n=3),e.scale=n,H(r),t.isEnd&&(q(G),Y.action(W,V(B)),H(0)),X(A({},G)))))):null}));var B,G,U,z,W,K,H,Y,V,X,q,$,Z,J,Q,tt,et,rt,nt,ot,it,at,ct;R={moveX:lt,layer:G}.moveX;Z=t,lt=Object(g.q)().getLayer,J=p()(lt(Z)),lt=Object(g.w)(),Q=lt.cloneLayer,tt=lt.addOrUpdate,et=lt.adjustCropLayer,rt=lt.checkLayerInRender,lt=k(Object(w.useState)(),2),nt=lt[0],ot=lt[1],(lt=k(Object(w.useState)(null),2))[0],it=lt[1],at=Object(y.h)(),ct=Object(x.i)(),Object(j.e)((function(t){var e,r,n,o,i,u,s,l,f,d,h;return rt(Z)&&J&&(null==J?void 0:J.layerType)===a.h.IMAGE_LAYER?(r=(e=t.target).getAttribute("data-type"),void(Object(c.ib)(e)&&"imgMove"===r&&(t.isStart?ot(Q(Z)):nt&&(e=nt.width,r=nt.height,h=nt.data,d=nt.rotate,n=(h=h.imageTransform).offsetX,o=h.offsetY,i=h.widthRatio,u=h.heightRatio,s=h.scale,l=h.flipH,h=h.flipV,f=J.data.imageTransform,d=Object(c.bc)(Object(c.Ib)(Object(c.bc)({x:t.displacementX/ct,y:t.displacementY/ct}),d)),h=h?-1:1,f.offsetX=n+d.x*(l?-1:1)/(i*e*s),f.offsetY=o+d.y*h/(u*r*s),t.isEnd&&(et(J),at.action(nt,Q(Z)),it(null)),tt(E({},J)))))):null}));var ut,st,lt=N(Object(w.useState)({}),2),ft=lt[0],dt=lt[1];return Object(w.useEffect)((function(){var t=null==(t=M.current)?void 0:t.getBoundingClientRect(),e=t&&D?Object(c.Fb)({x:t.x,y:t.y},D):50;dt({width:D?"".concat(e,"px"):"50px",left:D?0:"23px"})}),[D]),P(t)&&(null==F?void 0:F.layerType)===a.h.IMAGE_LAYER&&(P=(lt=F.data).maskURL,F=(t=lt.imageTransform).rotate,lt=t.flipH,t=t.flipV,P)?(P=lt&&t||!t&&!lt?F:-F,t=(t=50+2*R)<0?0:150<t?150:t,lt={width:"".concat(R?t:50,"px"),height:"".concat(R?t:50,"px")},F=b()({"img-move-wrap":!0,hidden:!1,"hidden-img-move-inner":!1}),t=b()({bg:!0,hidden:!1}),ut=b()({"img-scale-wrap":!0,hidden:!1}),st=b()({"img-rotate-wrap":!0,hidden:!1}),R={right:"".concat(-(R<-25?-25:50<R?50:R),"px")},O.a.createElement("div",{className:"l-layer-img-operate",style:lt},O.a.createElement("div",{className:t}),O.a.createElement("div",{"data-type":"imgMove",className:F},O.a.createElement("div",{ref:M,className:"point-event-none img-move"}),O.a.createElement("div",{className:"point-event-none img-move"},O.a.createElement(h.d,{fontSize:28,name:"moveFill"}))),O.a.createElement("div",{className:st,style:{transform:"rotate(".concat(P,"deg)")}},O.a.createElement("div",{className:"img-rotate-inner",style:ft},O.a.createElement("div",{className:"img-rotate","data-type":"imgRotate"}))),O.a.createElement("div",{className:ut},O.a.createElement("div",{className:"img-scale-inner"},O.a.createElement("div",{style:R,className:"img-scale","data-type":"imgScale"}))))):null})),B=r(42);function G(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var z=O.a.memo((function(t){var e=t.layer,r=t.isCropImage,o=t.isLinkOperate,i=(t=t.overflowStageHidden,Object(w.useRef)(null)),u=e.opacity,s=e.width,l=e.height,f=e.id,d=((j=e.data).url,j.maskURL),h=(j.naturalWidth,j.naturalHeight,j.cutoutMaskURL),p=(j=j.imageTransform).widthRatio,y=j.heightRatio,g=j.flipH,m=j.flipV,v=j.offsetX,b=j.offsetY,x=j.scale,j=j.rotate,_=e.data,E=(s=n()(s*p),l=n()(l*y),v=n()(v*s*x),b=n()(b*l*x),Object(w.useEffect)((function(){var t;_.filterPreview||(null!=(t=i.current)&&t.setAttribute("ready","false"),Object(c.zb)(_.url).then((function(t){var e=t.width,r=t.height,n=(i.current&&(i.current.width=e,i.current.height=r),null==(n=i.current)?void 0:n.getContext("2d"));null!=n&&n.clearRect(0,0,e,r),null!=n&&n.drawImage(t,0,0,e,r),null!=(n=i.current)&&n.setAttribute("ready","true")})))}),[_,_.url]),{width:"".concat(s,"px"),height:"".concat(l,"px"),pointerEvents:"none",display:"block"});h&&(E=U(U({},E),{},{WebkitMaskImage:"url(".concat(h,")"),WebkitMaskSize:"100% 100%",WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"})),h={pointerEvents:"none"},s={width:"".concat(s,"px"),height:"".concat(l,"px"),transform:"translate(".concat(v,"px, ").concat(b,"px) rotate(").concat(j,"deg) scale(").concat(+x.toFixed(3),")"),transformOrigin:"center center"},g&&(h.transform="rotateY(180deg) "),m&&(l="rotateX(180deg)",h.transform=h.transform?h.transform+l:l),v={width:"100%",height:"100%",alignItems:"center",justifyContent:"center",display:"flex"};return d&&(v.WebkitMaskImage="url(".concat(d,")"),v.WebkitMaskSize="contain",v.WebkitMaskRepeat="no-repeat",v.WebkitMaskPosition="center",v.transform="scale(1)",s.WebkitMaskClip="content-box",v.overflow="hidden",1===p&&1===x||(v.borderLeft="3px solid transparent",v.borderRight="3px solid transparent"),1===y&&1===x||(v.borderTop="3px solid transparent",v.borderBottom="3px solid transparent")),O.a.createElement(B.a,{layer:e,isLinkOperate:o,isOverflowHidden:!r,overflowStageHidden:t},O.a.createElement("div",{style:U(U({},v),{},{opacity:u})},O.a.createElement("div",{style:h},O.a.createElement("div",{style:s},O.a.createElement("canvas",{style:E,id:"".concat(a.e).concat(f),ref:i})))))}))},function(t,e,r){"use strict";r(847);var n=r(171),o=r(0),i=(o=r.n(o),r(173));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==a(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===a(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(849),r(850);var s=n.b.error,l=(r=n.b.warning,n.b.warn),f=n.b.info,d=n.b.success,h=n.b.loading,p=n.b.config,y=n.b.destroy,g=(n=n.b.open,o.a.createElement(i.a,{fontSize:24,name:"exclamationmarkTriangleFill"})),m=o.a.createElement(i.a,{fontSize:24,name:"infoCircleFill"});o={error:function(t){return s("string"==typeof t?{content:t,icon:g}:u(u({},t),{},{icon:g}))},info:function(t){return f("string"==typeof t?{content:t,icon:m}:u(u({},t),{},{icon:m}))},warning:r,warn:l,success:d,loading:h,config:p,destroy:y,open:n};o.config({maxCount:1}),e.a=o},,,,,,,,,function(t,e,r){"use strict";r.d(e,"h",(function(){return h})),r.d(e,"e",(function(){return p})),r.d(e,"z",(function(){return y})),r.d(e,"A",(function(){return v})),r.d(e,"o",(function(){return b})),r.d(e,"c",(function(){return w})),r.d(e,"b",(function(){return O})),r.d(e,"v",(function(){return x})),r.d(e,"d",(function(){return j})),r.d(e,"j",(function(){return _})),r.d(e,"i",(function(){return E})),r.d(e,"l",(function(){return k})),r.d(e,"u",(function(){return S})),r.d(e,"t",(function(){return L})),r.d(e,"k",(function(){return I})),r.d(e,"m",(function(){return M})),r.d(e,"y",(function(){return P})),r.d(e,"x",(function(){return A})),r.d(e,"n",(function(){return C})),r.d(e,"w",(function(){return R})),r.d(e,"r",(function(){return N})),r.d(e,"g",(function(){return D})),r.d(e,"f",(function(){return F})),r.d(e,"q",(function(){return B})),r.d(e,"p",(function(){return G})),r.d(e,"a",(function(){return U})),r.d(e,"s",(function(){return z}));e=r(316);var n=r.n(e),o=(e=r(201),r.n(e)),i=(e=r(31),r.n(e)),a=r(139),c=r(7),u=r(2),s=r(388),l=r(181);function f(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h=function(t){var e=(t=document.getElementById("".concat(u.e).concat(t)))||{width:0,height:0};return{width:e.width,height:e.height,canvas:t,ctx:null==t?void 0:t.getContext("2d")}},p=function(t){var e=(t=h(t)).canvas,r=t.width;t=t.height;return Object(c.t)(r,t,e).canvas};function y(t,e,r){var n=t.left,o=t.top,i=e-n,a=r-o;t.left=e,t.top=r,(t.children||[]).forEach((function(t){return g(t,i,a)}))}function g(t,e,r){var n=t.left,o=t.top;t.left=n+e,t.top=o+r,(t.children||[]).forEach((function(t){return g(t,e,r)}))}function m(t,e){return{id:t.id,left:t.left*e,top:t.top*e,width:(t.width||1)*e,height:(t.height||1)*e,rotate:t.rotate}}var v=function(t,e){var r=e.x-t.width/2;e=e.y-t.height/2;g(t,r-t.left,e-t.top)},b=function(t){return t||document.getElementById("scaleLayer")},w=function(t,e){return e=null==(e=b(e))?void 0:e.getBoundingClientRect(),{x:t.x-((null==e?void 0:e.left)||0),y:t.y-((null==e?void 0:e.top)||0)}},O=function(t){var e=t.x,r=(t=t.y,b(null).getBoundingClientRect());return e>=r.left&&t>=r.top&&e<=r.width+r.left&&t<=r.top+r.height},x=function(t,e){var r=t.x;t=t.y;return{x:(r=w({x:r,y:t})).x/e,y:r.y/e}},j=function(t,e){return{x:t.x/e,y:t.y/e}},_=function(t,e){e=(t=e=e?d(d({},t),e):t).left;var r=t.top;return{x:e+t.width/2,y:r+t.height/2}},E=function(t){return(t=t?null==(t=document.getElementById(t))?void 0:t.getBoundingClientRect():b().getBoundingClientRect())?{x:t.width/2+t.left,y:t.height/2+t.top}:{x:0,y:0}},k=function(t,e,r,n){return e=I(e,t,!0===n),t=Object(s.b)(r,e),"string"==typeof n&&o()(t,n),t.length?t[0]:""},S=function(t){var e=t.x,r=t.y;t=w(t),e=w({x:e+1,y:r+1});return L(t,e)},L=function(t,e){return{width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y),left:n()([t.x,e.x])||0,top:n()([t.y,e.y])||0,rotate:0}},I=function(t,e,r){var n=Array();return function t(r,o){for(var i=r.length-1;0<=i;i--){var a,c=r[i];o?(c.layerType!==u.h.GROUP_LAYER&&c.layerType!==u.h.TEXT_MATERIAL_LAYER&&(a=m(c,e),n.push(a)),t(c.children||[],o)):(a=m(c,e),n.push(a))}}(t,r),n};function T(t){return Object.assign({id:Object(a.a)(),layerType:u.h.GROUP_LAYER,width:0,height:0,left:0,top:0,rotate:0,opacity:1,title:"",data:{isExtraGroup:!0},lock:!1,children:[],shine:!1,hidden:!1,category:0},t)}function M(t){return Object.assign(T(t),{layerType:u.h.GROUP_LAYER})}function P(t){return Object.assign(T(t),{layerType:u.h.TEXT_MATERIAL_LAYER})}function A(t){return Object.assign(T(t),{layerType:u.h.TEXT_LAYER})}function C(t){return Object.assign(T(t),{layerType:u.h.IMAGE_LAYER})}function R(t){return Object.assign(T(t),{layerType:u.h.SVG_LAYER})}function N(t){return Object.assign(T(t),{layerType:u.h.MAIN_LAYER})}function D(t){return Object.assign(T(t),{layerType:u.h.BACKGROUND_LAYER})}function F(t){if(t.activeInfo){var e=t.activeInfo.id;if(t=t.flatLayersMap.get(e))return t}}function B(t){var e={};return t.forEach((function(t){Object(l.a)(t,(function(t){e[t.id]=t}))})),e}function G(t){var e=[];return t.forEach((function(t){Object(l.a)(t,(function(t){e.push(t)}))})),e}function U(t){var e=t.mainLayerSize,r=t.adjustLayerSize,n=t.adjustLayerRotate,o=(t=t.adjustLayerRelativePosition,e.width),a=(e=e.height,r.width),u=(r=r.height,t.x),s=(t=t.y,Object(c.Ob)(Object(c.Zb)(Object(c.Yb)({x:-o/2,y:e/2},n),u,t))),l=Object(c.Ob)(Object(c.Zb)(Object(c.Yb)({x:o/2,y:e/2},n),u,t)),f=Object(c.Ob)(Object(c.Zb)(Object(c.Yb)({x:-o/2,y:-e/2},n),u,t)),d=(o=Object(c.Ob)(Object(c.Zb)(Object(c.Yb)({x:o/2,y:-e/2},n),u,t)),-(e=a/2)),h=e,p=-(u=r/2),y=u,g={max:(t=[s,l,f,o])[0].x-h,min:t[0].x-d},m={max:t[0].y-y,min:t[0].y-p};t.forEach((function(t){var e=t.x,r=(t=t.y,e-h),n=(e=e-d,t-y);t-=p;g.max=g.max<r?r:g.max,g.min=e<g.min?e:g.min,m.max=m.max<n?n:m.max,m.min=t<m.min?t:m.min})),e=1,u=1,o={x:0,y:0};return 1===(f=((0<g.max&&g.min<0||0<g.max&&0<g.max-g.min||g.min<0&&g.min-g.max<0)&&((s=0)<g.max&&g.min<0?s=Math.max(g.max,Math.abs(g.min)):0<g.max&&0<g.max-g.min?s=g.max-g.min:g.min<0&&g.min-g.max<0&&(s=Math.abs(g.max-g.min)),e=1+2*i()(s)/a),(0<m.max&&m.min<0||0<m.max&&0<m.max-m.min||m.min<0&&m.min-m.max<0)&&((l=0)<m.max&&m.min<0?l=Math.max(m.max,Math.abs(m.min)):0<m.max&&0<m.max-m.min?l=m.max-m.min:m.min<0&&m.min-m.max<0&&(l=Math.abs(m.min-m.max)),u=1+2*i()(l)/r),u<e?e:u))&&(0<g.max?o.x=g.max:g.min<0&&(o.x=g.min),0<m.max?o.y=m.max:m.min<0&&(o.y=m.min)),{scale:f,movePoint:o=Object(c.Yb)(o,-n)}}var z=function(t,e){var r=[];return e=e||[],"[object Map]"===Object.prototype.toString.call(t)&&t.forEach((function(t,n){e.includes(n)||(r=r.concat(t))})),r}},,,function(t,e,r){"use strict";r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return d})),r.d(e,"a",(function(){return h})),r.d(e,"d",(function(){return p}));e=r(614);var n=r.n(e),o=(e=r(256),r.n(e)),i=r(615),a=(e=r(186),r.n(e)),c=r(2);function u(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t){return{r:+(t=(t=(t=(t=null!=t&&t.includes("#")?n()(t):t).replace(/rgba\(/g,"")).replace(/\)/g,"")).split(","))[0],g:+t[1],b:+t[2],a:+t[3]}}var f=function(t,e){var r="";if(t===c.A.HORIZONTAL_TB)switch(e){case 1:r=c.z.LEFT;break;case 2:case 34:r=c.z.CENTER;break;case 4:r=c.z.RIGHT}else if(t===c.A.VERTICAL_RL)switch(e){case 16:r=c.z.LEFT;break;case 32:case 34:r=c.z.CENTER;break;case 64:r=c.z.RIGHT}return r},d=function(t){var e,r,n;return null!=t&&t.includes("#")?t:(t=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),e=parseFloat(t[3]||1),r=parseFloat(t[0]),n=parseFloat(t[1]),t=parseFloat(t[2]),"#".concat(Object(i.a)(r,n,t,e)))},h=function(t){var e=(n=t.data).textShadow,r=n.color,n=n.textStroke,o=t.opacity;return(r=l(r)).a=r.a*o,Object.assign({},t,{data:s(s({},t.data),{},{color:d("rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")")),textShadow:e.map((function(t){var e=l((t=s({},t)).color);return e.a=e.a*o,t.color=d("rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")),t})),textStroke:n.map((function(t){var e=l((t=s({},t)).color);return e.a=e.a*o,t.color=d("rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")),t}))})})},p=function(t,e){var r,n,i;if(t.layerType===c.h.TEXT_MATERIAL_LAYER||t.layerType===c.h.TEXT_LAYER)return r="",e&&(null==e?void 0:e.layerType)===c.h.TEXT_MATERIAL_LAYER||t.layerType===c.h.TEXT_MATERIAL_LAYER?t.layerType===c.h.TEXT_MATERIAL_LAYER?(i=t.children.map((function(t){var e=(t=h(t)).data;return null!=e&&e.textStroke.forEach((function(t){delete t.id})),null!=e&&e.textShadow.forEach((function(t){delete t.id})),null!=e&&e.textGlow.forEach((function(t){delete t.id})),"".concat(t.opacity,"_").concat(JSON.stringify(o()(t.data,"fontSize")))})),r="".concat(t.data.materialId,"_").concat(JSON.stringify(i))):e&&(n=t.textIndex,i=e.children.map((function(e,r){return r=h(e=n===r?t:e),null!=(e=r.data)&&e.textStroke.forEach((function(t){delete t.id})),null!=e&&e.textShadow.forEach((function(t){delete t.id})),null!=e&&e.textGlow.forEach((function(t){delete t.id})),"".concat(r.opacity,"_").concat(JSON.stringify(o()(r.data,"fontSize")))})),r="".concat(e.data.materialId,"_").concat(JSON.stringify(i))):(e=h(t),r="".concat(e.width,"_").concat(e.height,"_").concat(e.opacity,"_").concat(JSON.stringify(e.data))),a.a.hashBinary(r)}},,function(t,e,r){"use strict";function n(t){t=t.theme;var e=Object(p.f)(),r=Object(p.b)(),n=Object(l.useRef)(null);return f.a.createElement("div",{className:h()("p-editor__aside-btn",{active:e}),ref:n},f.a.createElement("div",{className:"p-editor__aside-btn-bg"},f.a.createElement(d.s,{width:39,height:620,name:"collapse-btn-".concat(t)})),f.a.createElement("div",{onClick:function(){e?r.close():r.open()},className:h()("p-editor__aside-btn-icon")},f.a.createElement("div",{className:h()("p-editor__aside-btn-icon-pos",{rotate:e})},f.a.createElement(d.d,{type:"button",name:"chevronRightBold",fontSize:12}))))}function o(t){t=t.children;var e=Object(p.f)();return f.a.createElement("div",{className:h()("p-editor__aside-collapse",{active:e})},t)}function i(t){return t=t.children,f.a.createElement("div",{className:"p-editor__header"},f.a.createElement(y.a,{right:60,left:327}),t)}function a(t){return t=t.children,f.a.createElement("div",{className:"p-editor__aside-menu"},f.a.createElement(y.a,null),t)}function c(t){return t=t.children,Object(p.g)()?f.a.createElement("div",{className:"p-editor__panel",id:"p-editor__panel"},f.a.createElement(y.a,null),t):null}function u(t){var e=t.theme;t=t.children;return f.a.createElement("div",{className:"p-editor__stage"},f.a.createElement(n,{theme:e}),f.a.createElement(y.a,{isStage:!0}),f.a.createElement("div",{className:"p-editor__stage-content"},t))}r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return g})),r.d(e,"a",(function(){return m}));var s,l=r(0),f=r.n(l),d=r(13),h=(e=r(9),r.n(e)),p=r(29),y=r(45),g=(r(942),(e=s=s||{})[e.extra=1]="extra",e[e.header=2]="header",e[e.menu=3]="menu",e[e.collapse=4]="collapse",e[e.panel=5]="panel",e[e.stage=6]="stage",function(t){var e=t.type,r=t.theme,n=t.children;switch(e){case s.header:return f.a.createElement(i,{key:1},n);case s.menu:return f.a.createElement(a,{key:2},n);case s.collapse:return f.a.createElement(o,{key:2},n);case s.panel:return f.a.createElement(c,{key:3},n);case s.stage:return f.a.createElement(u,{key:4,theme:r},n)}return f.a.createElement(f.a.Fragment,null,n)}),m=function(t){for(var e=t.children,r=(t=function(t){t.preventDefault()},[]),n=0;n<6;n++){var o=null==e?void 0:e[n];o&&r.push(o)}function i(t){return r.filter((function(e){return(null==e?void 0:e.props.type)===t}))}return f.a.createElement("div",{className:"p-editor",onDragOver:t,onDrop:t},i(s.extra),i(s.header),f.a.createElement("div",{className:"p-editor__container"},f.a.createElement("div",{className:"p-editor__aside",id:"p-editor__aside"},i(s.menu),i(s.collapse)),i(s.stage),i(s.panel)))}},,,,,,,,function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),(r=n=n||{}).linkLayerId="linkLayerId",r.isEditingText="isEditingText",r.isCropImage="isCropImage",r.isBasicOperation="isBasicOperation",r.isEliminatePen="isEliminatePen",r.isShapePen="isShapePen",r.isCropStageOperating="isCropStageOperating",r.isStageAutoCrop="isStageAutoCrop",r.isContextMenu="isContextMenu",r.isIntelligent="isIntelligent"},,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return d})),(e=n=n||{}).Release="Release",e.Test="Test";var n,o={env:n.Release,type:"posters"},i=function(t){Object.assign(o,t)},a=r(511);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,u){var s;if("throw"!==(o=l(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==c(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}));u(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}var f=function(){var t=l(u().mark((function t(e,r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),d=function(){var t=l(u().mark((function t(e,r){var n,i,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.env,c=o.type,i="jpg",i="string"==typeof e?-1!=e.indexOf("data:image/png;")?"png":"jpg":"image/png"==e.type?"png":"jpg",n=new a.b({debug:!1,env:a.a[n]}),i={app:"xiuxiu-pro",count:1,suffix:i,type:c,version:"20220701"},r&&(i.prefix=r,i.headers=(l=r,(s="File-Key")in(u={})?Object.defineProperty(u,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[s]=l,u)),t.next=8,n.upload(e,i);case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}var u,s,l}),t)})));return function(e,r){return t.apply(this,arguments)}}()},,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return l})),r.d(e,"f",(function(){return w})),r.d(e,"g",(function(){return j})),r.d(e,"d",(function(){return N})),r.d(e,"c",(function(){return D})),r.d(e,"e",(function(){return V})),r.d(e,"b",(function(){return X}));e=r(505);var n=r.n(e);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=y.asyncIterator||"@@asyncIterator",a=y.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(e){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(u(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(i,a){function c(){return new e((function(n,c){!function n(i,a,c,u){var s;if("throw"!==(i=l(t[i],t,a)).type)return(a=(s=i.arg).value)&&"object"==o(a)&&r.call(a,"__await")?e.resolve(a.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):e.resolve(a).then((function(t){s.value=t,c(s)}),(function(t){return n("throw",t,c,u)}));u(i.arg)}(i,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return u(m,"constructor",h.prototype=p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),u(m,a,"Generator"),u(m,n,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function u(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}var l={getResultCanvasAsync:function(t,e){return s(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 1:case"end":return t.stop()}}),t)})))()},onBeforeAddOrUpdate:function(t){var e;(n()(t.data)||n()(null==(e=t.data)?void 0:e.isExtraGroup))&&(t.data=a(a({},t.data),{},{isExtraGroup:!1}))},onBeforeSaveAsync:function(t,e){return s(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete t.data.isExtraGroup,delete t.data.isVip;case 2:case"end":return e.stop()}}),e)})))()}},f=(e=r(346),r.n(e)),d=(e=r(79),r.n(e)),h=(e=r(69),r.n(e)),p=(e=r(127),r.n(e)),y=r(24),g=r(10),m=r(7);function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?b(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var w=function(){function t(t){return(t=i(t))?{layer:t,oldInfo:c(t)}:{layer:t}}function e(t,e){var r,n,i;if(e.length)return r=h()(e,(function(t){return t.x})),n=d()(e,(function(t){return t.x})),i=h()(e,(function(t){return t.y})),e=d()(e,(function(t){return t.y})),t.left=r.x,t.top=i.y,t.width=n.x-r.x,t.height=e.y-i.y,t.rotate=0,u(t),o(t.id),t}function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;(t.children||[]).forEach((function(t){t.left=t.left+e,t.top=t.top+n,r(t,e,n)}))}var n=Object(y.h)(),o=Object(g.h)().setActiveLayer,i=Object(g.p)().getLayer,a=Object(g.w)(),c=a.cloneLayer,u=a.addOrUpdate;return{left:function(o){var i,a,c,u,s=(o=t(o)).layer;o=o.oldInfo;s&&o&&(i=[],a=new Map,(s.children||[]).forEach((function(t){var e=Object(m.eb)(t);i.push.apply(i,v(e)),a.set(t.id,e)})),i.length)&&(c=h()(i,(function(t){return t.x})),u=[],a.forEach((function(t,e){var n,o,i;e===c.id?u.push.apply(u,v(t)):(n=h()(t,(function(t){return t.x})).x-c.x,t=t.map((function(t){return{x:t.x-n,y:t.y}})),u.push.apply(u,v(t)),o=(t=f()(s.children,(function(t){return t.id===e}))).left,r(t,(i=t.left-n)-o),t.left=i)})),e(s,u))&&n.action(o,s)},right:function(o){var i,a,c,u,s=(o=t(o)).layer;o=o.oldInfo;s&&o&&(i=[],a=new Map,(s.children||[]).forEach((function(t){var e=Object(m.eb)(t);i.push.apply(i,v(e)),a.set(t.id,e)})),i.length)&&(c=d()(i,(function(t){return t.x})),u=[],a.forEach((function(t,e){var n,o,i;e===c.id?u.push.apply(u,v(t)):(n=d()(t,(function(t){return t.x})).x-c.x,t=t.map((function(t){return{x:t.x-n,y:t.y}})),u.push.apply(u,v(t)),o=(t=f()(s.children,(function(t){return t.id===e}))).left,r(t,(i=t.left-n)-o),t.left=i)})),e(s,u))&&n.action(o,s)},top:function(o){var i,a,c,u,s=(o=t(o)).layer;o=o.oldInfo;s&&o&&(i=[],a=new Map,(s.children||[]).forEach((function(t){var e=Object(m.eb)(t);i.push.apply(i,v(e)),a.set(t.id,e)})),i.length)&&(c=h()(i,(function(t){return t.y})),u=[],a.forEach((function(t,e){var n,o,i;e===c.id?u.push.apply(u,v(t)):(n=h()(t,(function(t){return t.y})).y-c.y,t=t.map((function(t){return{x:t.x,y:t.y-n}})),u.push.apply(u,v(t)),o=(t=f()(s.children,(function(t){return t.id===e}))).top,r(t,0,(i=t.top-n)-o),t.top=i)})),e(s,u))&&n.action(o,s)},bottom:function(o){var i,a,c,u,s=(o=t(o)).layer;o=o.oldInfo;s&&o&&(i=[],a=new Map,(s.children||[]).forEach((function(t){var e=Object(m.eb)(t);i.push.apply(i,v(e)),a.set(t.id,e)})),i.length)&&(c=d()(i,(function(t){return t.y})),u=[],a.forEach((function(t,e){var n,o,i;e===c.id?u.push.apply(u,v(t)):(n=d()(t,(function(t){return t.y})).y-c.y,t=t.map((function(t){return{x:t.x,y:t.y-n}})),u.push.apply(u,v(t)),o=(t=f()(s.children,(function(t){return t.id===e}))).top,r(t,0,(i=t.top-n)-o),t.top=i)})),e(s,u))&&n.action(o,s)},verticalCenter:function(o){var i,a,c,u,s,l,f=(o=t(o)).layer;o=o.oldInfo;f&&o&&(i=[],u=f.left,c=f.top,a={x:f.width/2+u,y:f.height/2+c},(f.children||[]).forEach((function(t,e){var r=t.left,n=t.top;r={x:t.width/2+r,y:t.height/2+n};i.push({x:Object(m.Fb)(r,a),y:e})})),i.length)&&(u=h()(i,(function(t){return t.x})))&&((c=f.children[u.y]).left,u=c.top,c.width,s=c.height/2+u,l=[],(f.children||[]).forEach((function(t){var e=s-t.height/2;r(t,0,e-t.top),t.top=e,l.push.apply(l,v(Object(m.eb)(t)))})),e(f,l))&&n.action(o,f)},horizontalCenter:function(o){var i,a,c,u,s,l,f,d=(o=t(o)).layer;o=o.oldInfo;d&&o&&(i=[],u=d.left,c=d.top,a={x:d.width/2+u,y:d.height/2+c},(d.children||[]).forEach((function(t,e){var r=t.left,n=t.top;r={x:t.width/2+r,y:t.height/2+n};i.push({x:Object(m.Fb)(r,a),y:e})})),i.length)&&(u=h()(i,(function(t){return t.x})))&&(u=(c=d.children[u.y]).left,c.top,s=c.width,c.height,l=s/2+u,f=[],(d.children||[]).forEach((function(t){var e=l-t.width/2;r(t,e-t.left),t.left=e,f.push.apply(f,v(Object(m.eb)(t)))})),e(d,f))&&n.action(o,d)},horizontalDistribution:function(o){var i,a,c,u,s,l,f=(o=t(o)).layer;o=o.oldInfo;f&&o&&((i=f.children||[]).length<=2||(a=[],(f.children||[]).forEach((function(t,e){var r=Object(m.eb)(t);r=h()(r,(function(t){return t.x}));a.push({x:r.x,y:e,id:t.id})})),c=p()(a,(function(t){return t.x})),u=(c[c.length-1].x-c[0].x)/(c.length-1),s=c[0].x,c.forEach((function(t,e){var n=i[t.y];r(n,e=s+e*u-t.x),n.left=n.left+e})),l=[],(f.children||[]).forEach((function(t,e){t=Object(m.eb)(t),l.push.apply(l,v(t))})),e(f,l)&&n.action(o,f)))},verticalDistribution:function(o){var i,a,c,u,s,l,f=(o=t(o)).layer;o=o.oldInfo;f&&o&&((i=f.children||[]).length<=2||(a=[],(f.children||[]).forEach((function(t,e){var r=Object(m.eb)(t);r=h()(r,(function(t){return t.y}));a.push({x:r.y,y:e,id:t.id})})),c=p()(a,(function(t){return t.x})),u=(c[c.length-1].x-c[0].x)/(c.length-1),s=c[0].x,c.forEach((function(t,e){var n=i[t.y];r(n,0,e=s+e*u-t.x),n.top=n.top+e})),l=[],(f.children||[]).forEach((function(t,e){t=Object(m.eb)(t),l.push.apply(l,v(t))})),e(f,l)&&n.action(o,f)))}}},O=r(2),x=Symbol("makeUpAction"),j=function(){var t=Object(y.e)(),e=Object(g.w)(),r=e.cloneLayer,n=e.addOrUpdate,o=Object(g.v)().getLayerIndexMap,i=Object(g.h)().setActiveLayer,a=Object(g.r)().setGroupPickId,c=Object(g.f)().getActiveInfo,u=Object(g.p)().getLayer;return Object(y.i)(x,{undo:function(t){var e=t.oldInfo,r=t.ids;t=t.layerIndexMap;n({layer:e,deleteIds:r,insertIds:t}),i(e.id)},redo:function(t){var e=t.newInfo,r=t.ids;t=t.layerIndexMap;n({layer:e,deleteIds:r,insertIds:t}),i(e.id)}}),{action:function(e){if(i=c()){var i=i.id,s=u(i);if((null==s?void 0:s.layerType)===O.h.GROUP_LAYER){var l,f,d,h=s.data;if((!h.isVip||!h.isTextMaterial)&&h.isExtraGroup!==e)return l=r(s),f=o(i).layerIndexMap,d=[i],(s.children||[]).forEach((function(t){t.lock=!1,d.push(t.id)})),h.isExtraGroup=e,s.lock=!1,e&&a(""),t.push(x,{oldInfo:l,newInfo:s,ids:d,layerIndexMap:f}),n(s),!0}}}}},_=r(13),E=(e=r(9),r.n(e)),k=r(0),S=r.n(k),L=r(42),I=r(156),T=r(29),M=r(46),P=r(22);function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?C(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R(){var t=Object(P.b)().getStateByName;return{get canMoveMakeUp(){var e=t(P.a.isBasicOperation),r=t(P.a.isEliminatePen),n=t(P.a.isShapePen),o=t(P.a.isContextMenu),i=t(P.a.isIntelligent);return!(e||r||n||o||i)},get canPickMakeUp(){var e=t(P.a.isBasicOperation),r=t(P.a.isEliminatePen),n=t(P.a.isIntelligent);return!e&&!r&&!n}}}r(1130);var N=S.a.memo((function(t){var e=t.id,r=(t=t.show,Object(M.b)()),n=r.opacity,o=r.show,i=r.hide,a=Object(g.x)().show;return Object(M.e)((function(t){Object(m.ib)(t.target)&&(Object(m.l)(t.target,O.a.LINK)||i(),t.isEnd)&&o()})),t?S.a.createElement(_.x,{placement:"bottom",title:"\u89e3\u9501\u7ec4\u5185\u79fb\u52a8"},S.a.createElement("div",{className:E()("l-operate__link-icon"),style:{opacity:n},"data-type":O.a.LINK_ICON,onClick:function(){a(e)}},S.a.createElement("div",{className:"l-operate__none-event link-icon"},S.a.createElement(_.d,{fontSize:20,name:"link"})))):null})),D=S.a.memo((function(t){var e=t.id,r=(t=A(Object(k.useState)(),2))[0],n=t[1],o=(t=A(Object(k.useState)(!1),2))[0],i=t[1],a=Object(I.a)(),c=Object(g.h)().setActiveLayer,u=Object(g.p)().getLayer,s=(t=Object(g.y)(),Object(P.d)()),l=Object(T.i)(),f=Object(g.g)(),d=Object(k.useRef)("");return Object(k.useEffect)((function(){var t;e&&(t=u(e))&&n(t)}),[t,o]),Object(M.e)((function(t){Object(m.ib)(t.target)===O.a.LINK&&e&&(t.isStart&&(f&&(d.current=f.id),c(e)),a.move(e,t),i(!o),t.isEnd)&&d.current&&(c(d.current),d.current="")})),r?S.a.createElement("div",{className:"l-operate"},S.a.createElement(L.a,{layer:r,baseLayerType:O.a.OPERATE},S.a.createElement("div",{className:"l-operate__link",style:{width:"".concat(r.width*l,"px"),height:"".concat(r.height*l,"px"),transform:"translate(-50%, -50%) scale(".concat(1/l,")"),pointerEvents:"none"}},s?null:S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{"data-type":O.a.LINK,className:E()("l-operate__link-left")}),S.a.createElement("div",{"data-type":O.a.LINK,className:E()("l-operate__link-right")}),S.a.createElement("div",{"data-type":O.a.LINK,className:E()("l-operate__link-top")}),S.a.createElement("div",{"data-type":O.a.LINK,className:E()("l-operate__link-bottom")}))))):null})),F=(e=(r(1131),r(632)),r.n(e)),B=r(139);function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?U(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z(t){t=t.children;var e=Object(T.i)(),r=R(),n=Object(g.p)().getCollisionLayers,o=Object(g.h)().setActiveLayer,i=Object(g.f)().delActiveLayer,a=Object(g.B)(),c=Object(g.x)().getId,u=Object(k.useRef)(null),s=Object(k.useRef)(!0),l=Object(k.useRef)(Object(B.a)()),f=Object(k.useRef)([]),d=Object(k.useRef)([]),h=Object(k.useRef)(!1),p=G(Object(k.useState)({left:0,top:0,width:0,height:0,rotate:0}),2),y=p[0],v=p[1];return Object(M.e)((function(t){if(r.canMoveMakeUp){var p,y=Object(m.cb)(t.startPoint),g=t.target;if(Object(m.vb)(g))i();else{if(Object(m.M)(e,n(),y,!1))return;if(!Object(m.k)(g))return;if(Object(m.bb)(g))return}t.isEnd&&(s.current=!0),s.current&&(y=Object(m.sb)(),g=c(),t.isStart&&y&&g?s.current=!1:(g=d.current,t.isStart&&(p=Object(m.K)(n(),e),g=d.current=p),p=f.current,t.isStart&&y&&(y=a.getActivePickIds())&&(1===(y=y.pickIds).length&&i(),p=f.current=y),h.current=!t.isEnd,y=Object(m.ab)(Object(m.o)(t.startPoint,u.current),Object(m.o)(t.currentPoint,u.current)),v(y),y=Object(m.ab)(Object(m.o)(t.startPoint),Object(m.o)(t.currentPoint)),y=Object(m.J)(y,g),g=F()(y.concat(p)),a.setPickLayer(g),t.isEnd&&(s.current=!0,f.current=[],g.length)&&(1===g.length?(o(g[0]),setTimeout((function(){a.clearPickLayer()}),0)):(a.createExtraGroup(l.current),l.current=Object(B.a)()))))}})),S.a.createElement("div",{ref:u,className:"l-mouse-event__make-up"},h.current?S.a.createElement("div",{className:"l-mouse-event__move-make-up"},S.a.createElement("div",{className:"l-mouse-event__move-make-up-rect",style:{left:"".concat(y.left,"px"),top:"".concat(y.top,"px"),width:"".concat(y.width,"px"),height:"".concat(y.height,"px")}})):null,t)}e=r(201);var W=r.n(e);function K(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?H(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Y(t){function e(t,e){var r,n,o=h.getActivePickIds(!1);o&&(e=e||function(){},r=o.pickIds,o=o.layerId,1===r.length&&(o=a.current),n=r,"function"==typeof t?e=t:n=[t].concat(r),e(r)||(h.setPickLayer(n),h.createExtraGroup(o),a.current=Object(B.a)()))}t=t.children;var r=K(Object(k.useState)(!1),2),n=r[0],o=r[1],i=Object(k.useRef)(""),a=Object(k.useRef)(Object(B.a)()),c=Object(k.useRef)(""),u=Object(k.useRef)(""),s=Object(k.useRef)(""),l=Object(k.useRef)(""),f=Object(k.useRef)(!1),d=Object(k.useRef)({x:0,y:0}),h=Object(g.B)(),p=Object(g.u)(),y=Object(T.i)(),v=Object(g.x)().getId,b=(r=Object(g.p)()).getLayer,w=r.getLayerParentId,x=r.getCollisionLayers,j=Object(g.w)().addOrUpdate,_=(r=Object(g.r)()).brokeGroupLayer,E=r.setGroupPickId,L=Object(g.h)().setActiveLayer,I=Object(g.f)().getActiveInfo,M=R();return Object(k.useEffect)((function(){var t,e;f.current||(c.current?(t=w(c.current),(e=v())!==t?(_(t),L(t,c.current)):e&&e===t&&L(c.current),p.destroy(),c.current=""):u.current?(e=w(u.current),_(e),L(e,e)):-1===[O.a.ROTATE,O.a.SCALE,O.a.LINK].indexOf(i.current)&&(E(""),i.current=""))}),[n]),S.a.createElement("div",{onMouseUp:function(t){Object(m.ub)(t)&&(t={x:t.pageX,y:t.pageY},1<Object(m.Fb)(d.current,t)||(l.current&&e((function(t){W()(t,l.current);var e=b(l.current);if(e&&(e.parentId=void 0,j(e)),1===t.length)return _(),L(t[0]),!0})),s.current&&(e(s.current),setTimeout((function(){p.destroy()}),0)),o(!n),s.current="",l.current=""))},onMouseDown:function(t){var e,r=Object(m.sb)();f.current=r,Object(m.ub)(t)&&(e=t.target,e=Object(m.ib)(e),[O.a.LINK,O.a.LINK_ICON,O.a.LOCK_ICON].includes(e)||(d.current={x:t.pageX,y:t.pageY},r?M.canPickMakeUp&&function(t){var e=t.target,r=I(),n=v();if(!r||n)n=Object(m.S)(e),L(n);else if(Object(m.wb)(e)){if((null==(n=b(r.id))?void 0:n.layerType)===O.h.GROUP_LAYER){if(!n.data.isExtraGroup)return;var o=Object(m.cb)({x:t.pageX,y:t.pageY}),i=Object(m.M)(y,n.children,o);if(i)return l.current=i;(i=Object(m.M)(y,x(),o,n.id))&&(s.current=i)}}else{if(!(o=Object(m.S)(e))&&(n=Object(m.cb)({x:t.pageX,y:t.pageY}),!(o=Object(m.M)(y,x(),n,!1))))return;if(null==(i=b(o))||!i.lock){if(null!=r&&r.id&&null!=(e=b(null==r?void 0:r.id))&&e.lock)return;(null==i?void 0:i.layerType)!==O.h.WATERMARK&&r.layerType!==O.h.WATERMARK&&(s.current=o)}}}(t):function(t){var e=t.target,r=(i.current=Object(m.ib)(e),""),n=!1,o=I();if(o?r=o.id:(r=Object(m.S)(e))&&(L(r),n=!0),r){if(o=Object(m.cb)({x:t.pageX,y:t.pageY}),(null==(e=b(r))?void 0:e.layerType)===O.h.GROUP_LAYER||(null==e?void 0:e.layerType)===O.h.TEXT_MATERIAL_LAYER)return(t=Object(m.M)(y,x(!1),o,!0))!==e.id?c.current=t:e.lock||(r=Object(m.M)(y,e.children,o,!0),(c.current=r)||(t=Object(m.M)(y,e.children,o,!1),u.current=t));n||(r=Object(m.M)(y,x(!1),o,!0),c.current=r)}}(t)))},className:"l-mouse-event__pick-make-up","data-move-make-up":"true"},t)}var V=function(t){return t=t.children,S.a.createElement(z,null,S.a.createElement(Y,null,t))},X=S.a.memo((function(t){var e=t.layer;t=t.isLinkOperate;return S.a.createElement(S.a.Fragment,null,S.a.createElement(L.a,{isLinkOperate:t,layer:e},S.a.createElement("div",null)))}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return y})),r.d(e,"d",(function(){return g}));var n=r(0),o=r(159),i=r(29),a=r(19),c=r(24),u=r(10),s=r(22),l=r(62),f=function(){var t=Object(n.useRef)(),e=Object(c.h)(),r=Object(o.c)(),f=Object(u.w)().cloneLayer,d=Object(u.p)().getLayer,h=Object(u.L)(),p=h.updateGroup,y=h.moveActiveLayer,g=Object(u.h)().setActiveLayer,m=Object(s.p)(),v=Object(u.f)().getActiveInfo,b=Object(i.i)();return{move:function(n,o){var i,c,u,s=2<arguments.length&&void 0!==arguments[2]&&arguments[2],h=d(n);null!=h&&h.lock||(m(!0),(c=o)&&void 0!==c.isStart?(c.isStart&&(t.current=h),s||(i=c.displacementX/b,u=c.displacementY/b,u=(i=y(i,u)).left,i=i.top,r.showMoveTip(c.x,c.y,u,i)),c.isEnd&&(s||r.hideTip(),a.a.emit(l.c.drag,n),(null==(u=v())?void 0:u.id)===n&&(null!=(i=t.current)&&i.parentId&&p(t.current.parentId),c=f(n),e.action(t.current,c),g(n)),m(!1),a.a.emit(l.c.move,n))):(s=h,y(o.x/b,o.y/b),null!=s&&s.parentId&&p(s.parentId),u=f(n),e.action(s,u),g(n),m(!1),a.a.emit(l.c.move,n)))}}},d=r(2),h=r(7),p=function(){var t=Object(n.useRef)(),e=Object(c.h)(),r=Object(o.c)(),f=Object(u.w)().cloneLayer,p=Object(u.L)(),y=p.updateGroup,g=p.resizeActiveLayer,m=Object(u.h)().setActiveLayer,v=Object(s.q)(),b=Object(u.I)(),w=Object(i.i)();return{resize:function(n,o,i,c){v(!0);var u=i===d.r.TC||i===d.r.BC,s=i===d.r.LC||i===d.r.TC?d.d.OPPOSITE:d.d.POSITIVE,p=i===d.r.LC,O=(i=(u&&(p=i===d.r.TC),Object(h.Yb)(c.startPoint,-o)),o=Object(h.Yb)(c.currentPoint,-o),0);i=(o=(O=u?(o.y-i.y)/w*s:(o.x-i.x)/w*s,c.isStart&&(t.current=f(n),b(d.q.RESIZE)),g(O,s,u,p))).width,O=o.height,s=o.isMin;r.showSizeTip(c.x,c.y,i,O,s),c.isEnd&&(r.hideTip(),null!=(u=t.current)&&u.parentId&&y(null==(p=t.current)?void 0:p.parentId),o=f(n),e.action(t.current,o),m(n),v(!1),a.a.emit(l.c.resize,n))}}},y=function(){var t=Object(n.useRef)(),e=Object(c.h)(),r=Object(o.c)(),i=Object(u.w)().cloneLayer,f=Object(u.L)(),d=f.updateGroup,p=f.rotateActiveLayer,y=Object(u.h)().setActiveLayer,g=Object(s.q)();return{rotate:function(n,o){g(!0);var c=Object(h.H)(n);c=Object(h.w)(o.startPoint,o.currentPoint,c)/Math.PI*180,o.isStart&&(t.current=i(n)),c=p(c);r.showRotateTip(o.x,o.y,c),o.isEnd&&(r.hideTip(),null!=(c=t.current)&&c.parentId&&d(t.current.parentId),o=i(n),e.action(t.current,o),y(n),g(!1),a.a.emit(l.c.rotate,n))}}},g=function(){var t=Object(n.useRef)(),e=Object(c.h)(),r=Object(o.c)(),f=Object(u.w)().cloneLayer,p=Object(u.L)(),y=p.updateGroup,g=p.scaleActiveLayer,m=Object(u.h)().setActiveLayer,v=Object(s.q)(),b=Object(u.I)(),w=Object(i.i)();return{scale:function(n,o,i){v(!0);var c=(u=i.target.getAttribute("data-operate"))===d.t.RB||u===d.t.RT?d.d.POSITIVE:d.d.OPPOSITE,u=u===d.t.RT||u===d.t.LB,s=Object(h.Yb)(i.startPoint,-o);o=(Object(h.Yb)(i.currentPoint,-o).x-s.x)/w*c,o=(s=(i.isStart&&(t.current=f(n),b(d.q.SCALE)),g(o,c,u))).width,c=s.height,u=s.isMin;r.showSizeTip(i.x,i.y,o,c,u),i.isEnd&&(r.hideTip(),null!=(s=t.current)&&s.parentId&&y(t.current.parentId),o=f(n),e.action(t.current,o),m(n),v(!1),a.a.emit(l.c.scale,n))}}}},,,function(t,e,r){"use strict";r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return s}));e=r(12);var n,o={info:null,showTip:Object(e.b)((function(t,e){t.info=e})),hideTip:Object(e.b)((function(t){t.info=null}))},i=(e=Object(e.f)()).useStoreState,a=e.useStoreActions,c=(e.useStoreDispatch,(e=n=n||{}).ROTATE="rotate",e.MOVE="move",e.SCALE="scale",e.CUSTOM="custom",function(){var t=a((function(t){return t.displacementModel.showTip})),e=a((function(t){return t.displacementModel.hideTip}));return{showMoveTip:function(e,r,o,i){t({tipType:n.MOVE,x:e,y:r,left:o,top:i})},showSizeTip:function(e,r,o,i,a){t({tipType:n.SCALE,x:e,y:r,width:o,height:i,isMin:a})},showRotateTip:function(e,r,o){t({tipType:n.ROTATE,x:e,y:r,rotate:o})},showCustom:function(e,r,o){t({tipType:n.CUSTOM,x:e,y:r,txt:o})},hideTip:function(){e()}}}),u=(e=r(0),r.n(e)),s=(r(919),function(){var t,e,r,o=i((function(t){return t.displacementModel.info}));return o?(t={left:"".concat(o.x+20+(window.scrollX||0),"px"),top:"".concat(o.y+(window.scrollY||0),"px")},o.tipType===n.MOVE?(r=o.left,e=o.top,u.a.createElement("div",{className:"c-displacement-tip",style:t},0<r?"\u53f3\u79fb":"\u5de6\u79fb","\uff1a",Math.abs(~~r),u.a.createElement("br",null),0<e?"\u4e0b\u79fb":"\u4e0a\u79fb","\uff1a",Math.abs(~~e))):o.tipType===n.ROTATE?(r=o.rotate,u.a.createElement("div",{className:"c-displacement-tip",style:t},"\u89d2\u5ea6\uff1a","".concat(function(t){return(t=(t+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0))%360)<0&&(t+=360),~~(t<=180?t:-(360-t))}(r)),"\xb0")):o.tipType===n.CUSTOM?u.a.createElement("div",{className:"c-displacement-tip",style:t},o.txt):o.tipType===n.SCALE?(e=o.width,r=o.height,o.isMin?u.a.createElement("div",{className:"c-displacement-tip",style:t},"\u5df2\u8fbe\u6700\u5c0f\u503c"):u.a.createElement("div",{className:"c-displacement-tip",style:t},"\u5bbd\u5ea6\uff1a",~~e,u.a.createElement("br",null),"\u9ad8\u5ea6\uff1a",~~r)):null):null})},function(t,e,r){"use strict";function n(t,e){return t=Object(i.D)(t,22.5),e?~~(t/45)%e:~~(t/45)}r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return u}));e=r(100);var o=r.n(e),i=r(7),a=function(t){t=n(t,4);var e=[o.a["scale-0"],o.a["scale-1"],o.a["scale-2"],o.a["scale-3"]],r=[e[2],e[3],e[0],e[1]];return{LC:r[t],RC:r[t],BC:e[t],TC:e[t]}},c=function(t){return t=n(t),[o.a["angle-0"],o.a["angle-1"],o.a["angle-2"],o.a["angle-3"],o.a["angle-4"],o.a["angle-5"],o.a["angle-6"],o.a["angle-7"]][t]},u=function(t){var e=[(r=[o.a["scale-0"],o.a["scale-1"],o.a["scale-2"],o.a["scale-3"]])[3],r[0],r[1],r[2]],r=[r[1],r[2],r[3],r[0]];return{LT:e[t=n(t,4)],RB:e[t],LB:r[t],RT:r[t]}}},,function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"o",(function(){return a})),r.d(e,"h",(function(){return c})),r.d(e,"a",(function(){return u})),r.d(e,"g",(function(){return s})),r.d(e,"e",(function(){return l})),r.d(e,"x",(function(){return f})),r.d(e,"w",(function(){return d})),r.d(e,"m",(function(){return h})),r.d(e,"l",(function(){return p})),r.d(e,"t",(function(){return y})),r.d(e,"d",(function(){return g})),r.d(e,"k",(function(){return m})),r.d(e,"c",(function(){return v})),r.d(e,"f",(function(){return b})),r.d(e,"r",(function(){return w})),r.d(e,"v",(function(){return O})),r.d(e,"s",(function(){return x})),r.d(e,"p",(function(){return j})),r.d(e,"u",(function(){return _})),r.d(e,"i",(function(){return E})),r.d(e,"j",(function(){return k})),r.d(e,"n",(function(){return S})),r.d(e,"q",(function(){return L}));e=r(315);var n=r.n(e),o=(e=r(31),r.n(e)),i=function(t){return Math.PI/180*t};function a(t){return+t.toFixed(1<arguments.length&&void 0!==arguments[1]?arguments[1]:2)}var c=function(t,e){if(e.size)for(var r,n=t.length,o=(t.length=n+e.size,[]),i=0;i<t.length;i++)e.has(i)?(void 0!==(r=t[i])&&o.push(r),t[i]=e.get(i)):o.length&&(void 0!==(r=t[i])&&o.push(r),t[i]=o.shift())},u=function(t,e){return{x:t.x+e.x,y:t.y+e.y}};function s(t,e){e=e/360*2*Math.PI;var r=Math.cos(e),n=-t.y;t=[t.x*r,t.x*Math.cos(e-.5*Math.PI)],e=[n*Math.cos(.5*Math.PI+e),n*r];return{x:t[0]+e[0],y:-(t[1]+e[1])}}function l(t){var e=t.leftTop,r=t.width,n=t.height,o=(t=t.rotate,Math.sqrt(r*r+n*n)/2);n=Math.atan(n/r)/Math.PI*180;return u(e,(r=t+n,{x:(e=o)*Math.cos(r/180*Math.PI),y:e*Math.sin(r/180*Math.PI)}))}var f=function(t,e){return{x:e.x-t.x,y:e.y-t.y}},d=function(t){return{x:t.x,y:-t.y}},h=function(t,e,r){var n=t.x,o=(t=t.y,e.x);e=e.y,r=r*Math.PI/180;return{x:(n-o)*Math.cos(r)-(t-e)*Math.sin(r)+o,y:(n-o)*Math.sin(r)+(t-e)*Math.cos(r)+e}},p=function(t,e){var r=t.x,n=(t=t.y,Math.sin(e*Math.PI/180));return{x:r*(e=Math.cos(e*Math.PI/180))-t*n,y:r*n+t*e}},y=p,g=function(t){return(t=(t+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0))%360)<0&&(t+=360),t},m=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},v=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},n=t.x-r.x,o=(t=t.y-r.y,e.x-r.x);r=(n*o+t*(e=e.y-r.y))/(Math.sqrt(n*n+t*t)*Math.sqrt(o*o+e*e)),n=n*e-t*o,e=Math.acos(r)||0;return n<0?-e:e},b=function(t,e){var r,n=t.x,o=(t=t.y,e.x);e=e.y;return n*n+t*t==0||o*o+e*e==0?0:(r=(n*o+t*e)/(Math.sqrt(n*n+t*t)*Math.sqrt(o*o+e*e)),n=n*e-t*o,e=Math.acos(r),180*(e=n<0?-e:e)/Math.PI)},w=function(t,e){return{x:e*Math.cos(t*Math.PI/180),y:-e*Math.sin(t*Math.PI/180)}},O=function(t,e){return 180*Math.atan2(-e,t)/Math.PI},x=function(t,e){return Math.sqrt(t*t+e*e)},j=function(t){return{x:o()(t.x),y:o()(t.y)}},_=function(t){return{x:t.x+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),y:t.y+(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)}},E=function(t,e){return{x:e.x-t.x,y:e.y-t.y}},k=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return{x:t.x*e,y:t.y*e}},S=function(t){return n()(t,2)},L=function(t){return n()(t,0)}},function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i}));e=r(12);var n={showWaterMark:!1,openWaterMarkBridge:!1,bridgeState:!1,curFilter:"",setCurFilter:Object(e.b)((function(t,e){t.curFilter=e})),setBridgeState:Object(e.b)((function(t,e){t.bridgeState=e})),setOpenWaterMarkBridge:Object(e.b)((function(t,e){t.openWaterMarkBridge=e})),waterMarkMap:new Map,setWaterMarkMap:Object(e.b)((function(t,e){t.waterMarkMap=e})),setShowWaterMark:Object(e.b)((function(t,e){t.showWaterMark=e})),destroy:Object(e.b)((function(t){t.showWaterMark=!1,t.openWaterMarkBridge=!1,t.bridgeState=!1}))},o=(r=Object(e.f)()).useStoreState,i=r.useStoreActions;r.useStoreDispatch},,,,,,,function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return c})),r.d(e,"f",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"e",(function(){return l})),r.d(e,"d",(function(){return f}));var n=r(2),o=r(7),i=r(73);function a(t){var e=new Map;return function t(r){a={id:a=(o=r).id,left:c=o.left,top:u=o.top,rotate:s=o.rotate,width:f=o.width,height:o.height,layerType:l=o.layerType},s=null==(c=Object(i.a)(l))||null==(u=c.getActiveBaseInfo)?void 0:u.call(c,o);var o,a,c,u,s,l,f=Object.assign(a,{pickId:"",fontSize:void 0,cutWidth:n.l,cutHeight:n.l},s);e.set(f.id,f),(r.children||[]).forEach(t)}(t),e}function c(t,e,r,n,i){var a=Object(o.I)(e);!function t(e,c,u){(e.children||[]).forEach((function(e){var i,c=r.get(e.id);c&&(i=Object(o.I)(c),i=Object(o.Jb)(i,a,n),t(e,c,i))}));var s=c.rotate,l=c.width;c=c.height;e.rotate=Object(o.D)(s+n),u&&(e.left=u.x-l/2,e.top=u.y-c/2),null!=i&&i(e)}(t,e)}function u(t,e,r){var o,i=e.get(t.id);i&&(e.delete(t.id),o=new Map,function t(e){o.set(e.id,e),(e.children||[]).forEach(t)}(t),s(t,l(o,i,e,r),i,e,n.d.POSITIVE,!1))}function s(t,e,r,o,a,c,u){var s=1,l=1,d=0,h=0,p=0,y=0,g=0,m=0,v=0,b=0;!function t(r,w,O){var x,j,_,E,k,S,L,I,T,M,P,A,C,R,N,D=r.layerType,F=r.children,B=w.width,G=w.height,U=w.left,z=w.top,W=0,K=0,H=0,Y=0;O?(W=Math.ceil(s*B),K=Math.ceil(l*G),(x=null==(O=Object(i.a)(D))||null==(x=O.correctLayerMinSize)?void 0:x.call(O,W,K,s,w))&&(W=x.width,K=x.height),H=(U-y)/d*g+v,Y=(z-p)/h*m+b):(A=(O=w).cutWidth,C=O.cutHeight,R=O.layerType,N=null==(R=Object(i.a)(R))||null==(N=R.getLayerMinSize)?void 0:N.call(R,O),O=R=Object.assign({width:A,height:C},N),j=e,_=(A=w).width,E=A.height,k=A.layerType,S=O.width,L=O.height,I=null==(A=Object(i.a)(k))||null==(O=A.getScaleIsNeedLimitSize)?void 0:O.call(A),T=1,P=M=0,W=(C=function(){var t;return M=_+j.offset,I&&(M=Math.max(M,S)),P=E*(T=M/_),I&&(P=Math.max(P,L)),j.isMin||k===n.h.GROUP_LAYER||(j.isMin=M<=S||P<=L),j.isMin&&(t=(P-E)/E,j.offset=t*_,M=_+j.offset),{ratio:T,width:Math.ceil(M),height:Math.ceil(P)}}()).width,K=C.height,(x=null==(N=Object(i.a)(D))||null==(R=N.correctLayerMinSize)?void 0:R.call(N,W,K,C.ratio,w))&&(W=x.width,K=x.height,e.isMin=x.isMin),H=(O=f(w,{width:W,height:K},c,a)).x-W/2,Y=O.y-K/2,s=W/B,l=K/G,v=H,b=Y,g=W,m=K,d=B,h=G,y=U,p=z),r.width=W,r.height=K,r.top=Y,r.left=H,null!=(A=Object(i.a)(D))&&null!=(R=A.onBeforeScaleUpdate)&&R.call(A,r,x),(F||[]).forEach((function(e){var r=o.get(e.id);r&&t(e,r,!0)})),null!=u&&u(r)}(t,r)}function l(t,e,r,n){var o,a=!1;return n<0&&(o=[],r.size)&&(r.forEach((function(e){var r,n,a=t.get(e.id);a&&void 0!==(n=null==(r=Object(i.a)(e.layerType))||null==(n=r.getScaleMinRatio)?void 0:n.call(r,e,a))&&o.push(n)})),o.length)&&(r=e.width,a=(e=Math.max.apply(Math,o)*r-r)===(n=Math.max(e,n))),{offset:n,isMin:a}}var f=function(t,e,r,n){var i=t.rotate,a=t.width,c=t.height,u=(u=e.width)-a;c=(e=e.height)-c,t=Object(o.I)(t),r=r?1:-1,t=Object(o.e)(t,{x:c/2*r*Math.cos((90-i)/180*Math.PI)*n,y:c/2*-r*Math.sin((90-i)/180*Math.PI)*n}),c=Object(o.I)({left:t.x-a/2,top:t.y-e/2,width:a,height:e});return Object(o.e)(c,{x:u/2*Math.cos(i/180*Math.PI)*n,y:u/2*Math.sin(i/180*Math.PI)*n})}},,function(t,e,r){"use strict";r.d(e,"c",(function(){return f})),r.d(e,"e",(function(){return S})),r.d(e,"d",(function(){return m})),r.d(e,"a",(function(){return E})),r.d(e,"b",(function(){return D}));e=r(31);var n=r.n(e),o=r(34),i=r(2),a=r(7);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,u){var s;if("throw"!==(o=l(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==c(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}));u(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}var f={onBeforeAddOrUpdate:function(t){(t=t.data).url=o.a.getCode(t.url)},onBeforeSaveAsync:function(t,e){return l(u().mark((function r(){var n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((n=t.data).url){if(e)return r.next=5,o.a.getLocalUrlAsync(n.url);r.next=8}else r.next=11;break;case 5:n.url=r.sent,r.next=11;break;case 8:return r.next=10,o.a.getRemoteUrlAsync(n.url);case 10:n.url=r.sent;case 11:case"end":return r.stop()}}),r)})))()},getResultCanvasAsync:function(t,e){return l(u().mark((function r(){var c,s,l,f,d,h,p,y,g,m,v,b,w,O,x,j,_,E,k,S,L,I,T,M,P,A,C,R,N,D,F,B,G,U,z,W,K,H,Y,V,X,q,$;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.width,s=e.height,l=t.width,f=t.height,d=t.opacity,h=t.rotate,m=t.data,p=m.backgroundColor,y=m.backgroundGradient||null,g=m.stretchOption,E=m.imageTransform,m=m.url,v=E.flipH,b=E.flipV,w=E.scale,O=E.rotate,x=E.heightRatio,j=E.widthRatio,_=E.offsetX,E=E.offsetY,r.next=9,Object(a.x)(l,f,v,b,d);case 9:if(L=r.sent,k=L.canvas,S=L.ctx,m)return r.next=15,Object(a.zb)(m);r.next=68;break;case 15:if(L=r.sent,I=L.width,T=L.height,M=document.getElementById("background-".concat(t.id))){r.next=21;break}return r.abrupt("return");case 21:return r.next=23,o.a.getRemoteUrlAsync(m);case 23:if("false"===(P=M).getAttribute("ready"))return r.next=27,Object(a.zb)(m);r.next=28;break;case 27:P=r.sent;case 28:if(g!==i.u.repeat)r.next=37;else{for(A=Math.trunc(f/T)+1,C=Math.trunc(l/I)+1,R=l/2-I/2,N=f/2-T/2,D=-A;D<A;D++)for(F=-C;F<C;F++)S.drawImage(P,R+I*F,N+T*D,I,T);S.fill(),r.next=66}break;case 37:g!==i.u.fill?r.next=42:(B=Object(a.L)(P.width,P.height,l,f),S.drawImage(P,B.dx,B.dy,B.dw,B.dh),r.next=66);break;case 42:return B=n()(_*j*c*w),z=n()(E*x*s*w),K=n()(c*j),H=n()(s*x),K=n()(K*w),H=n()(H*w),Y=n()(c),V=n()(s),W=P,G=Object(a.t)(K,H),U=G.canvas,G.ctx.drawImage(W,0,0,W.width,W.height,0,0,K,H),G=Object(a.t)(K,H),W=G.canvas,(G=G.ctx).translate(B+K/2,z+H/2),G.rotate(Math.PI/180*O),G.drawImage(U,0,0,K,H,-K/2,-H/2,K,H),z=Object(a.t)(Y,V),G=z.canvas,z.ctx.drawImage(W,(K-Y)/2,(H-V)/2,Y,V,0,0,Y,V),r.next=61,Object(a.x)(Y,V,v,b,d);case 61:return U=r.sent,z=U.canvas,U.ctx.drawImage(G,0,0),r.abrupt("return",z);case 66:r.next=69;break;case 68:y?(W=y.colors,K=y.angle,H=Object(a.i)(c,s,K),Y=H.x0,V=H.y0,X=H.x1,q=H.y1,$=S.createLinearGradient(Y,V,X,q),W.forEach((function(t){var e=t.color;t=t.value;$.addColorStop(t,e)})),S.fillStyle=$,S.fillRect(0,0,c,s)):p&&(S.fillStyle=p,S.fillRect(0,0,c,s),t.width=c,t.height=s);case 69:return r.abrupt("return",Object(a.y)(t,h+O,w,k,c,s));case 70:case"end":return r.stop()}}),r)})))()},checkDisableHide:function(){return!0},isBackgroundLayer:function(){return!0}},d=(e=r(15),r.n(e)),h=(e=r(298),r.n(e)),p=r(0),y=r.n(p),g=r(10),m=(e=r(12),{originBackground:null,setOriginBackground:Object(e.b)((function(t,e){t.originBackground=e})),destroy:Object(e.b)((function(t){t.originBackground=null}))}),v=(e=Object(e.f)()).useStoreState,b=e.useStoreActions,w=(e.useStoreDispatch,r(24));function O(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?j(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var E,k=function(t){return{backgroundColor:t,url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",naturalWidth:0,naturalHeight:0,imageTransform:{offsetX:0,offsetY:0,rotate:0,scale:1,flipH:!1,flipV:!1,widthRatio:1,heightRatio:1},stretchOption:2<arguments.length&&void 0!==arguments[2]?arguments[2]:2}},S=function(){y=Object(g.w)(),t=y.cloneLayer,e=y.addOrUpdate,r=Object(w.h)(),n=Object(g.r)().setGroupPickId;var t,e,r,n,o=function(t,o){var i,a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};t=d()(t),a&&(i=d()(t)),t.data=o,t=x(x({},t),c),e(t),a&&i&&r.action(i,t),n("")},c=function(o,i){e(t(i)),r.action(o,i),n("")},u=Object(g.p)().getBackgroundLayer,s=Object(g.w)().cloneLayer,l=Object(g.i)(),f=v((function(t){return t.backgroundModel.originBackground})),y=b((function(t){return t.backgroundModel.setOriginBackground})),m=Object(p.useRef)(null).current,O=b((function(t){return t.backgroundModel.destroy}));return{originBackground:f,setOriginBackground:y,destroy:O,create:function(t){return e=t.width,r=t.height,t=t.backgroundColor,Object(a.E)({width:e,height:r,data:k(t)});var e,r},update:function(t,e){var r,n,a,c,s,l,f,d,p,y=u();h()(e)||(e=!0),y&&(r=new Map,f=y.data,n=t.id,a=t.backgroundColor,c=t.url,s=void 0===(s=t.backgroundGradient)?null:s,l=void 0===(l=t.naturalWidth)?f.naturalWidth:l,f=void 0===(d=t.naturalHeight)?f.naturalHeight:d,d=void 0===(d=t.imageTransform)?{offsetX:0,offsetY:0,rotate:0,scale:1,flipH:!1,flipV:!1,widthRatio:1,heightRatio:1}:d,p=void 0===(p=t.opacity)?1:p,t=void 0===(t=t.stretchOption)?i.u.cover:t,(n=void 0===n?"":n)&&r.set(i.o.BACKGROUND,[String(n)]),o(y,_(_({},y.data),{},{backgroundColor:a,backgroundGradient:s||null,url:c,stretchOption:t,naturalWidth:l,naturalHeight:f,imageTransform:d}),e,{materialIds:r,opacity:p}))},resetData:function(){var t=u();f&&c(t,f)},getConfigRealTime:function(){return l},getBackgroundMaterialIdRealTime:function(){var t;return l?((null==(t=l.materialIds)?void 0:t.get(i.o.BACKGROUND))||[0])[0]:0},setVertical:function(){var t=u(),e=t.data.imageTransform;o(t,_(_({},t.data),{},{imageTransform:_(_({},e),{},{flipV:!e.flipV})}),!0)},setHorizontal:function(){var t=u(),e=t.data.imageTransform;o(t,_(_({},t.data),{},{imageTransform:_(_({},e),{},{flipH:!e.flipH})}),!0)},modify:function(t){var e=u(),r=d()(e.data);switch(m=m||d()(e),t.type){case"scale":case"rotate":r.imageTransform[t.type]=t.value,o(m,r,t.isPushHistory);break;case"opacity":o(m,r,t.isPushHistory,{opacity:t.value})}t.isPushHistory&&(m=s(e))}}},L=r(42),I=r(19),T=r(45),M=r(98);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(){A=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==P(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function C(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?N(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1028),(e=E=E||{}).drawSuccess="drawSuccess",e.drawFail="drawFail";var D=y.a.memo((function(t){var e=t.layer,r=void 0===(o=t.stageWidth)?0:o,n=void 0===(o=t.stageHeight)?0:o,o=t.overflowStageHidden,c=Object(p.useRef)(null),u=(t=R(Object(p.useState)(""),2))[0],s=t[1],l=(t=(Object(T.d)(),e.data),Object(p.useRef)({})),f={width:r,height:n,background:t.backgroundColor||Object(M.e)((null==t?void 0:t.backgroundGradient)||"")||"transparent"},d=t.imageTransform.widthRatio,h=t.imageTransform.heightRatio,g={rotateX:t.imageTransform.flipV?180:0,rotateY:t.imageTransform.flipH?180:0,rotateZ:t.imageTransform.rotate},m=t.imageTransform.offsetX||0,v=t.imageTransform.offsetY||0,b=e.opacity||1;t=(null==t?void 0:t.imageTransform.scale)||1;return Object(p.useEffect)((function(){var t=e.data,o=t.stretchOption,u=function(){e=A().mark((function e(){var s,f,d,h,p,y,g,m,v,b,w,O,x;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c.current){e.next=4;break}return setTimeout((function(){u()}),10),e.abrupt("return");case 4:if(null!=(s=c.current)&&s.setAttribute("ready","false"),e.t0=l.current[t.url],e.t0){e.next=10;break}return e.next=9,Object(a.zb)(t.url);case 9:e.t0=e.sent;case 10:if(f=e.t0,l.current[t.url]=f,d=f.width,h=f.height,p=null==(s=c.current)?void 0:s.getContext("2d"),o===i.u.repeat){for(null!=(O=c.current)&&O.setAttribute("width","".concat(r)),null!=(O=c.current)&&O.setAttribute("height","".concat(n)),y=Math.trunc(n/h)+1,g=Math.trunc(r/d)+1,m=r/2-d/2,v=n/2-h/2,b=-y;b<y;b++)for(w=-g;w<g;w++)p.drawImage(f,m+d*w,v+h*b,d,h);p.fill()}else null!=(O=c.current)&&O.setAttribute("width","".concat(d)),null!=(x=c.current)&&x.setAttribute("height","".concat(h)),null!=p&&p.clearRect(0,0,d,h),null!=p&&p.drawImage(f,0,0),null!=(x=c.current)&&x.setAttribute("ready","true");I.a.emit(E.drawSuccess),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(0),I.a.emit(E.drawFail);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}));var e,s=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){C(i,n,o,a,c,"next",t)}function c(t){C(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(){return s.apply(this,arguments)}}();s(t.url),t.url&&u()}),[e,r,n]),y.a.createElement(L.a,{layer:e,disableEvents:!0,overflowStageHidden:o},y.a.createElement("div",{className:"app-background-wrap"},y.a.createElement("div",{style:f},u?y.a.createElement("div",{className:"point-event-none",style:{display:"flex",alignItems:"center",justifyContent:"center",width:r,height:n,backgroundColor:"#fff",transform:"rotateX(".concat(g.rotateX,"deg) rotateY(").concat(g.rotateY,"deg) ")}},y.a.createElement("canvas",{id:"background-".concat(e.id),ref:c,style:{display:"block",width:d*r,height:h*n,flexShrink:0,transform:"translate(".concat(m*t*r*d,"px, ").concat(v*t*n*h,"px) rotateZ(").concat(g.rotateZ,"deg) scale(").concat(t,") "),transformOrigin:"center center",opacity:b}})):null)))}))},function(t,e,r){"use strict";var n=r(9),o=r.n(n),i=(n=r(0),r.n(n));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function u(t,e,r){(e=function(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==a(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===a(t)?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}r(814),e.a=function(t){var e=t.name,r=t.color,n=void 0===(n=t.fontSize)?12:n,a=void 0!==(a=t.isActive)&&a,s=void 0!==(l=t.disable)&&l,l=t.width,f=t.height,d=void 0===(d=t.borderRadius)?4:d,h=void 0===(h=t.marginBottom)?0:h,p=void 0===(p=t.text)?"":p,y=void 0===(y=t.textSize)?12:y,g=t.minWidth,m=t.onClick,v=t.type,b=(t=void 0!==(t=t.vertical)&&t,{});return"button"===v&&!p||"menu"===v?b={width:void 0===l?32:l,height:void 0===f?32:f,borderRadius:d,marginBottom:h}:"button"===v&&p&&(b={borderRadius:d,marginBottom:h,minWidth:void 0===g?50:g}),i.a.createElement("div",{style:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},b),className:o()("icon-legacy",{"font-icon-btn":"button"===v,"font-icon-btn__vertical":"button"===v&&t,"font-icon-btn__active":"button"===v&&a,"font-icon-btn__disable":"button"===v&&s,"font-icon-menu":"menu"===v,"font-icon-menu__active":"menu"===v&&a}),onClick:function(t){m&&!s&&m(t)}},i.a.createElement("div",{className:o()({"font-icon-menu__bg":"menu"===v,"font-icon-btn__wrap":"button"===v})},i.a.createElement("div",{style:{color:r,width:n,height:n,fontSize:n},className:o()("iconfont",(u(l={},"icon-".concat(e),!0),u(l,"b-icon-font",!0),u(l,"b-icon-font__active",a),u(l,"b-icon-font__disable",s),l))})),"button"===v&&p?i.a.createElement("div",{style:{fontSize:y},className:"font-icon-btn__text"},p):null,"menu"===v?i.a.createElement("div",{className:"font-icon-menu__text"},p):null)}},,,,,,function(t,e,r){"use strict";r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return R})),r.d(e,"g",(function(){return x})),r.d(e,"h",(function(){return I})),r.d(e,"e",(function(){return T.c})),r.d(e,"b",(function(){return T.a})),r.d(e,"d",(function(){return T.b})),r.d(e,"f",(function(){return T.e})),r.d(e,"i",(function(){return T.f})),r.d(e,"j",(function(){return j.c}));var n=r(0),o=r.n(n),i=r(42);function a(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(582);var u={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:9999,opacity:.6},s=o.a.memo((function(t){var e=(t=t.layer).width>t.height?t.height:t.width;return o.a.createElement("div",{className:"l-watermark",key:t.id},o.a.createElement(i.a,{disableEvents:!0,layer:t},o.a.createElement("div",{className:"l-watermark__img",style:c(c({},u),{},{backgroundSize:e})})))})),l=o.a.memo((function(t){return t=t.renderLayers,o.a.createElement(o.a.Fragment,null,t.map((function(t){return o.a.createElement(s,{layer:t})})))})),f=(e=r(31),r.n(e)),d=r(34),h=r(2),p=r(7),y=r(22);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(){m=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==g(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function v(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){v(i,n,o,a,c,"next",t)}function c(t){v(i,n,o,a,c,"throw",t)}a(void 0)}))}}function w(t,e){var r;if(t)return"string"==typeof t?O(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var x=function(){function t(t,n){var i,a=function(t,e){var r,n,o,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=w(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(a.s();!(i=a.n()).done;){var s,d=i.value;d.removedNodes.forEach(function(){var t=b(m().mark((function t(n){var i,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n===f)return i=u||c,t.next=4,l(r,o);t.next=6;break;case 4:f=t.sent,i||(null!=(a=document.querySelector("#waterMark"))&&a.remove(),null!=(a=document.querySelector("#"+e))&&a.appendChild(f));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),d.target===f&&null!=(s=document.querySelector("#waterMark"))&&s.remove()}}catch(t){a.e(t)}finally{a.f()}}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"scaleLayer",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(n.useState)(""),2),a=i[0],c=(i[1],Object(y.g)()),u=Object(y.f)(),s=I().showWaterMark,l=function(){var t=b(m().mark((function t(e,r){var n,o,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.round((e<r?e:r)/3),(o=document.createElement("div")).id="waterMark",i={position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px",pointerEvents:"none",backgroundImage:"url(http://xiuxiu-pro.meitudata.com/images/b909e6eb3fcc77b69a8174c2b20ffc4e.jpg)",backgroundRepeat:"repeat",backgroundSize:n+"px",userSelect:"none",cursor:"not-allowed",zIndex:"9999",opacity:.6},Object.keys(i).forEach((function(t){o.style[t]=i[t]})),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),f=Object(n.useRef)(null).current,d=document.querySelector("#"+e),h={attributes:!0,childList:!0,subtree:!0};Object(n.useEffect)((function(){function n(){setTimeout((function(){s||a()}),500)}var i,a=function(){var t=b(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=b(m().mark((function t(e,r){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=document.querySelector("#waterMark"))&&n.remove(),document.querySelector("#waterMark"))return t.next=4,a();t.next=4;break;case 4:return t.abrupt("return",e(!0));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(s)return function(){var t=b(m().mark((function t(){var i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u||c)return n(),t.abrupt("return",!1);t.next=4;break;case 4:return a(),t.next=7,l(r,o);case 7:return f=t.sent,null!=(i=document.querySelector("#"+e))&&i.appendChild(f),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),i=new MutationObserver(t),d&&null!=i&&i.observe(d,h),function(){n(),null!=i&&i.disconnect()};n()}),[r,o,u,c,s,a])},j=r(163);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(){E=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==_(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function k(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?S(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var I=function(){var t=Object(j.b)((function(t){return t.watermarkLayerModel.showWaterMark})),e=Object(j.b)((function(t){return t.watermarkLayerModel.waterMarkMap}));return{showWaterMark:t,setShowWaterMark:Object(j.a)((function(t){return t.watermarkLayerModel.setShowWaterMark})),waterMarkMap:e,setWaterMarkMap:Object(j.a)((function(t){return t.watermarkLayerModel.setWaterMarkMap})),checkMaterialId:function(t){var e,r=arguments;return e=E().mark((function e(){var n,o,i,a,c,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<r.length&&void 0!==r[1]?r[1]:[],o=2<r.length?r[2]:void 0,a=!(i=[]),c=[],u=[],function t(e){e.forEach((function(e){e.materialIds&&i.push.apply(i,k(Object(p.Z)(e.materialIds))),e.children&&t(e.children)}))}(t),Array.from(new Set(i)).forEach((function(t){var e;null!=(e=o.get(t))&&e.isVip&&c.push(t)&&u.push(o.get(t))})),n.length&&n.forEach((function(t){null!=(t=o.get(t))&&t.isVip&&(a=!0)})),e.abrupt("return",{showWaterMark:a,materials:u,result:c});case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){L(i,n,o,a,c,"next",t)}function c(t){L(i,n,o,a,c,"throw",t)}a(void 0)}))}()}}},T=r(384);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(){P=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==M(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function A(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function C(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){A(i,n,o,a,c,"next",t)}function c(t){A(i,n,o,a,c,"throw",t)}a(void 0)}))}}r(385);var R={onBeforeAddOrUpdate:function(t){t=t.data;var e=d.a.getCode(t.url);d.a.uploadImgAsync(e,t.url),t.url=e},onBeforeSaveAsync:function(t,e){return C(P().mark((function r(){var n;return P().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((n=t.data).url){if(e)return r.next=5,d.a.getLocalUrlAsync(n.url);r.next=8}else r.next=11;break;case 5:n.url=r.sent,r.next=11;break;case 8:return r.next=10,d.a.getRemoteUrlAsync(n.url);case 10:n.url=r.sent;case 11:case"end":return r.stop()}}),r)})))()},getResultCanvasAsync:function(t,e){return C(P().mark((function r(){var n,o,i,a,c,u,s,l,y,g,m,v,b,w,O,x,j,_,E,k,S,L,I,M,A,R,N,D;return P().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.width,o=t.height,i=t.left,a=t.top,c=t.opacity,u=t.rotate,y=t.data,s=y.url,l=y.isFullScreen,y=y.size,r.next=6,d.a.getRemoteUrlAsync(s);case 6:if(g=e.width,m=e.height,v=f()(n),b=f()(o),l)return r.next=12,Object(p.P)(s);r.next=25;break;case 12:return w=r.sent,x=Object(T.d)(y,{width:w.width,height:w.height},{width:g,height:m}),O=x.width,x=x.height,r.next=16,Object(p.mb)(w.img,w.width,w.height,O,x);case 16:return w=r.sent,O=Object(p.t)(v,b),x=O.canvas,N=O.ctx,R=N.createPattern(w,"repeat"),N.globalAlpha=c,N.fillStyle=R,N.fillRect(0,0,x.width,x.height),r.abrupt("return",x);case 25:if(j=document.getElementById("".concat(h.e).concat(t.id))){r.next=28;break}return r.abrupt("return");case 28:if("false"===(_=j).getAttribute("ready"))return r.next=32,Object(p.zb)(s);r.next=33;break;case 32:_=r.sent;case 33:return E={x:v/2+i,y:b/2+a},k={x:-v/2,y:-b/2},S=f()(n),L=f()(o),I=v/2,M=b/2,A=function(){var t=C(P().mark((function t(e){var r,n;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(p.t)(g,m),r=n.canvas,(n=n.ctx).translate(E.x,E.y),n.globalAlpha=c,n.drawImage(e,0,0,v,b,k.x,k.y,v,b),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=C(P().mark((function t(){var e,r;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(p.t)(v,b),e=r.canvas,(r=r.ctx).translate(I,M),r.rotate(2*Math.PI/360*u),r.drawImage(_,-S/2,-L/2,S,L),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.next=43,R();case 43:return N=r.sent,D=A(N),r.abrupt("return",D);case 47:case"end":return r.stop()}}),r)})))()},checkDisableHide:function(t){return!!t}}},,function(t,e,r){"use strict";function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?o(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return c}));var i=function(t,e){for(var r=[t];0<r.length;){var o=r.pop();o&&o.children&&0<o.children.length&&r.push.apply(r,n(o.children)),e(o)}},a=function(t,e){t.forEach((function(t){i(t,e)}))},c=function t(e,r){e.children&&0<e.children.length&&(e.children.forEach((function(e){t(e,r)})),r(e))}},,,,,,,,,,,,,function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),(r=n=n||{}).canUndo="canUndo",r.canRedo="canRedo",r.disable="disable",r.onRedoOrUndo="onRedoOrUndo"},,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return u}));e=r(15);var n=r.n(e),o=r(139),i=r(2),a={offsetX:0,offsetY:0,rotate:0,scale:1,flipH:!1,flipV:!1,widthRatio:1,heightRatio:1},c={id:Object(o.a)(),layerType:i.h.IMAGE_LAYER,width:0,height:0,left:0,top:0,rotate:0,opacity:1,title:"",materialIds:new Map,data:{cutoutMaskURL:"",url:"",stretchOption:i.u.fill,naturalWidth:0,naturalHeight:0,maskURL:"",maskType:i.n.none,imageTransform:a},lock:!1,children:[],shine:!0,hidden:!1,mode:i.g.none,category:i.f.masterImg},u=function(t,e,r,a,u,s,l,f){var d=n()(c),h=d.data;return d.id=Object(o.a)(),h.url=t,h.naturalHeight=f||r,h.naturalWidth=l||e,d.width=e,d.height=r,d.left=a,d.top=u,s&&null!=(t=d.materialIds)&&t.set(i.o.IMAGE_MATERIAL,[s]),d}},,,,,function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return a}));var n=60,o=72,i=260,a=260},,,,,,function(t,e,r){"use strict";function n(t){var e=(y=t.data).color,r=y.fontSize,n=y.fontFamily,o=y.lineSpacing,i=y.letterSpacing,a=y.bold,c=y.italic,u=y.lineThrough,s=y.underline,d=y.textAlign,h=y.writingMode,p=y.fontFamilySubset,y=(y.textGradient,y.listStyle,t.opacity);return(t=(l.A.VERTICAL_RL,{color:e,fontSize:"".concat(r,"px"),fontFamily:"".concat(Object(f.B)(n)).concat(p?","+Object(f.B)(p):""),letterSpacing:"".concat(i,"px"),fontWeight:a?"bold":"normal",fontStyle:c?"italic":"normal",textDecoration:"".concat(u?"line-through":""," ").concat(s?"underline":""),textAlign:"",textAlignLast:"",justifyContent:"",writingMode:h,lineHeight:"".concat(o<.01?.01:o),unselectable:"on",onselectstart:"return false",margin:0,padding:0,opacity:y,whiteSpace:"break-spaces",outline:"none",wordBreak:"break-all",position:"absolute",width:"100%",height:"100%",top:"0",left:"0",display:"",alignItems:"",lineBreak:"anywhere",backgroundImage:"",WebkitTextFillColor:"",WebkitBackgroundClip:"",backgroundClip:"",paddingTop:"",paddingLeft:""})).textAlign=d,t}r.d(e,"a",(function(){return E})),r.d(e,"e",(function(){return k.a})),r.d(e,"f",(function(){return k.b})),r.d(e,"b",(function(){return V})),r.d(e,"c",(function(){return Z})),r.d(e,"d",(function(){return tt}));e=r(634);var o=r.n(e),i=(e=r(15),r.n(e)),a=(e=r(31),r.n(e)),c=r(239),u=r(340),s=(e=r(19),r(34)),l=r(2),f=r(7),d=r(98),h=r(392),p=r.n(h),y=r(78);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(){m=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==g(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function v(t,e){var r,n,o,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){n=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(t)||(a=function(t,e){var r;if(t)return"string"==typeof t?b(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){w(i,n,o,a,c,"next",t)}function c(t){w(i,n,o,a,c,"throw",t)}a(void 0)}))}}var x=new Map,j=null,_=(e.b.onInit((function(){x.clear(),j=null})),new Map),E={createTextSpriteAsync:function(t){return O(m().mark((function e(){var r,n,i,a,l,d,h,p,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o()("binary-tree"),n=[],i=[],a=[],x.clear(),j=null,t.length<=0)return e.abrupt("return");e.next=8;break;case 8:return l=new Set,h=d=0,t.forEach((function(t){var e=t.id,o=t.width,i=t.height,a=t.data.fontFamily,c=((t=_.get(t.id))&&t.font_name&&t.useSubset&&(a=t.font_name),!l.has(a)&&(l.add(a),t=s.a.getFont(a))&&(c=t.base64,t=t.isWoff2,a=Object(f.v)(a,c,t),n.push(a)),o+360);r.addItem({id:e,width:c,height:i+360})})),p=r.export(),d=p.width,h=p.height,p.items.forEach((function(t){if(x.set(t.id,t),o=document.getElementById("text-".concat(t.id))){var e,r=v(o.querySelectorAll(".text-clip"));try{for(r.s();!(e=r.n()).done;)e.value.style.webkitBackgroundClip="text"}catch(t){r.e(t)}finally{r.f()}var n=Object(f.Kb)(o),o=((o=(s="data-class",(o=o.querySelector("ul"))?null==o?void 0:o.getAttribute(s):null))&&a.push("\n                    .".concat(o," li::before {\n                        content: counter(text, ").concat(o,") '").concat({"simp-chinese-formal":"\u3001",decimal:".","cjk-decimal":"\u3001","lower-latin":".","upper-roman":".",disc:"",circle:"",square:""}[o],"';\n                        transform: scale(").concat("square"===o?.5:1,");\n                    }\n                ")),null==(s=_.get(t.id))?void 0:s.font_name),s=(n=n.replace(/font-family:/g,"font-family:".concat(o,",")),"Safari"===Object(u.a)());o=Object(c.c)()===c.a.WIN;s&&!o||(n=null==(s=n)||null==(o=s.replace(/background-clip/g,"-webkit-background-clip"))?void 0:o.replace(/-webkit--webkit-background-clip/g,"-webkit-background-clip")),i.push('\n                <div style="\n                    position:absolute;\n                    left: '.concat(t.x,"px;\n                    top: ").concat(t.y,"px;\n                    width:").concat(t.width,"px;\n                    height:").concat(t.height,'px;\n                ">\n                    <div style="position:absolute;left:').concat(180,"px;top:").concat(180,"px;width:").concat(t.width-360,"px;height:").concat(t.height-360,'px;">\n                        ').concat(n,"\n                    </div>\n                </div>"))}})),p='data:image/svg+xml;charset=utf-8,\n    <svg\n        width="'.concat(d,'"\n        height="').concat(h,'"\n        viewBox="0 0 ').concat(d," ").concat(h,'"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <style type="text/css">\n            body,div{padding:0;margin:0}').concat(n.join("")).concat(a.length?".text-list-style-wrap {list-style: none !important;padding: 0px 0px 0px ".concat(y.b,"em;box-sizing: border-box;}.text-list-style-wrap li {counter-increment: text;display: list-item;position: relative;}.text-list-style-wrap li::before {position: absolute;left: -").concat(y.b,"em;box-sizing: border-box;margin: 0;letter-spacing: 0;white-space: nowrap;width: ").concat(y.b,"em;}.text-list-style-wrap-max {list-style: none !important;padding: 0px 0px 0px ").concat(y.c,"em !important;box-sizing: border-box;}.text-list-style-wrap-max li {counter-increment: text;display: list-item;position: relative;}.text-list-style-wrap-max li::before {position: absolute;left: -").concat(y.c,"em !important;box-sizing: border-box;margin: 0;letter-spacing: 0;white-space: nowrap;width: ").concat(y.c,"em !important;}").concat(a.join("")):"",'\n        </style>\n        <foreignObject x="0" y="0" width="100%" height="100%">\n            <body xmlns="http://www.w3.org/1999/xhtml">\n                ').concat(i.join(""),"\n            </body>\n        </foreignObject>\n    </svg>"),e.next=19,Object(f.Ab)(p);case 19:return p=e.sent,e.next=22,Object(f.Ab)(p.src);case 22:g=e.sent,g=(g=Object(f.t)(d,h,g)).canvas,j=g;case 25:case"end":return e.stop()}}),e)})))()},getResultCanvasAsync:function(t,e){return O(m().mark((function r(){var n,o,i,c,u,s,l,d,h,p,y,g,v;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.width,o=e.height,d=t.id,i=t.width,c=t.left,u=t.top,s=t.height,l=t.rotate,(d=x.get(d))&&j){r.next=5;break}return r.abrupt("return");case 5:return p=Object(f.t)(d.width,d.height),h=p.canvas,p.ctx.drawImage(j,d.x,d.y,d.width,d.height,0,0,d.width,d.height),p=a()(d.width),y=a()(d.height),v=Object(f.t)(n,o),g=v.canvas,(v=v.ctx).translate(a()(i)/2+c,a()(s)/2+u),v.rotate(2*Math.PI/360*l),v.drawImage(h,0,0,p,y,-p/2,-y/2,p,y),r.abrupt("return",g);case 14:case"end":return r.stop()}}),r)})))()},getActiveBaseInfo:function(t){var e=(t=t.data).fontSize,r=t.letterSpacing,n=t.textGlow,o=t.textShadow;t=t.textStroke;return{fontSize:e,letterSpacing:r,textGlow:i()(n),textShadow:i()(o),textStroke:i()(t)}},getScaleMinRatio:function(t,e){return t=t.fontSize,l.k/(void 0===t?12:t)},getLayerMinSize:function(t){return{width:t.width,height:t.height}},correctLayerMinSize:function(t,e,r,n){function o(t){return function(e){return(e=i()(e)).width*=t,e}}function c(t){return function(e){return(e=i()(e)).distance*=t,e.x*=t,e.y*=t,e}}function u(t){return function(e){return(e=i()(e)).width*=t,e}}var s=n.width,f=n.height,d=void 0===(d=n.fontSize)?12:d,h=void 0===(h=n.letterSpacing)?0:h,p=void 0===(p=n.textGlow)?[]:p,y=void 0===(y=n.textShadow)?[]:y,g=(n=void 0===(n=n.textStroke)?[]:n,a()(d*r)),m=h*r,v=!1,b=p.map(o(r)),w=y.map(c(r));r=n.map(u(r));return g<l.k&&(t=(d=(g=l.k)/d)*s,e=d*f,m=d*h,b=p.map(o(d)),w=y.map(c(d)),r=n.map(u(d)),v=!0),{width:Math.ceil(t),height:Math.ceil(e),fontSize:g,letterSpacing:m,isMin:v,textGlow:b,textShadow:w,textStroke:r}},onBeforeScaleUpdate:function(t,e){var r=e.letterSpacing,n=e.textGlow,o=e.textShadow,i=e.textStroke;e=e.fontSize;(t=t.data).letterSpacing=r,t.fontSize=e,t.textGlow=n,t.textShadow=o,t.textStroke=i},onBeforeResizeUpdate:function(t,e){var r,n=!1;return e?((e=t.height)<(r=(r=t.data).fontSize*r.lineSpacing*(t.data.listStyle?3:1))&&(t.height=r,n=!0),r=Object(f.jb)(t.width,e,t.data),t.width=r.width):(e=t.width,r=t.data.fontSize,e<(e=t.data.listStyle?3*r:r)&&(t.width=e,n=!0),t.forceWidth=!0,r=Object(f.jb)(t.width,t.height,t.data,!0),t.height=r.height),{isMin:n,width:t.width,height:t.height}},onBeforeAddOrUpdate:function(t){var e=t,r=t.data;r&&r.text&&(r.text=r.text.replace(/[\x00-\x09\x0b-\x1f\x7f-\x9f]/gi,"")),e.layerInit||e.textParentIsMaterial||(0==t.height&&(r=Object(f.jb)(t.width,t.height,t.data,!0),t.height=r.height),t.data=Object(f.Ub)(t.data)),e.layerInit=!0},onBeforeSaveAsync:function(t,e){return O(m().mark((function r(){var n,o;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:null!=t&&delete t.forceWidth,null!=(n=t.data)&&delete n.withSpace,n=t.data.fontFamilySubset,o=t.useFontFamilySubset||!1,n&&_.set(t.id,{font_name:n,useSubset:o}),delete t.data.fontFamilySubset,delete t.useFontFamilySubset,e||(t.data=Object(f.Vb)(t.data),delete t.layerInit);case 8:case"end":return r.stop()}}),r)})))()}},k=r(352),S=(h=r(9),r.n(h)),L=r(0),I=r.n(L),T=r(42),M=r(86),P=r(24),A=r(10),C=r(22),R=r(212),N=r(217);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(){F=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==D(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function B(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?B(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function U(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function z(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){U(i,n,o,a,c,"next",t)}function c(t){U(i,n,o,a,c,"throw",t)}a(void 0)}))}}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?K(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1153);var H=["#text-font-size","#text-font-size__list","#text-font-family",".text-style__list",".c-layer-align",".c-layer-index",".l-operate__scale",".l-operate__resize","#list-style-wrap",".c-color-gradient-picker"],Y=null,V=function(t){function e(){var t,e,r,n;V.current&&c&&V.current.data.text!==u&&(t=c,U&&c?(t=v(c.id),(e=(null==c?void 0:c.parentId)&&B(c.parentId))&&(r=i()(e),n=i()(e),r.children=e.children.map((function(e){return e.id===c.id?t:e})),n.children=e.children.map((function(t){return t.id===c.id?V.current:t})),_.action(n,r))):_.action(V.current,t))}var r=t.id,o=void 0===(a=t.includeIds)?[]:a,a=t.stageWidth,c=(0,Object(A.o)().getActivePickLayer)(),u=(t=null==c?void 0:c.data).text,s=t.fontSize,d=t.listStyle,h=t.writingMode,p=(t=t.textGradient,Object(C.t)()),g=Object(A.w)().addOrUpdate,m=Object(A.L)().updateGroup,v=Object(A.p)().getLayer,b=Object(A.f)().delActiveLayer,w=Object(A.h)().refreshActiveInfo,O=Object(M.b)(),x=(K=W(Object(L.useState)(!1),2))[0],j=K[1],_=Object(P.h)(),E=(K=Object(R.a)()).updateTextLayer,k=K.getTextActualSize,D=Object(L.useRef)(null),B=Object(A.q)().getLayer,U=c.textParentIsMaterial,K=Object(L.useRef)(U&&/\n$/.test(u)?"".concat(u,"\n"):u),V=Object(L.useRef)(c),X=(Object(L.useRef)({width:null==c?void 0:c.width,height:null==c?void 0:c.height,rotate:null==c?void 0:c.rotate}),Object(L.useRef)(((null==c?void 0:c.left)||0)+((null==c?void 0:c.width)||0)/2),a),q=c.data.fontFamily,$=(t=t&&0<(null==t||null==(a=t.colors)?void 0:a.length),a=u?u.replace(/\n$/,"").split("\n"):[],a="decimal"===d&&10<=a.length||"lower-latin"===d&&13<=a.length||"upper-roman"===d&&3<=a.length,function(){var t=z(F().mark((function t(){var e,r,n,o=arguments;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<o.length&&void 0!==o[0]?o[0]:"",c){t.next=3;break}return t.abrupt("return");case 3:r=Object.assign({},c,{data:G(G({},c.data),{},{text:U?e.replace(/\n$/,""):e})}),U?(Y&&clearTimeout(Y),Y=setTimeout(z(F().mark((function t(){var e,n;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.textIndex,t.next=3,E(r,!0);case 3:n=k(e),r=Object.assign({},r,{data:G(G({},r.data),{},{fontSize:n/l.y})}),(n=(null==c?void 0:c.parentId)&&B(c.parentId))&&(n.children=n.children.map((function(t){return t.id===c.id?r:t})),g(n));case 7:case"end":return t.stop()}}),t)}))),300)):(n=!1,n=h===l.A.VERTICAL_RL?r.forceWidth||Object(N.j)(c):r.forceWidth||Object(f.rb)(c),(n=(n=Object(f.jb)(c.width,c.height,r.data,n)).width>X?Object(f.jb)(X,c.height,r.data,!0):n).width+r.left>X&&(r.forceWidth=!0),r.width=n.width,r.height=n.height,r.left=c.left+(c.width-r.width)/2,g(r),r.parentId&&m(r.parentId),w());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),Z=(null==c?void 0:c.data)&&n(c),J=(Object(L.useEffect)((function(){(e=D.current)&&((t=document.createRange()).selectNodeContents(e),e.lastChild&&t.setEnd(e.lastChild,e.innerText.length),null!=(r=window.getSelection())&&r.removeAllRanges(),null!=r&&r.addRange(t),e.focus(),j(!0));var t,e,r=O.filter((function(t){return t.font_name===q}));Object(f.Bb)(r),c.useFontFamilySubset=!1}),[]),Object(L.useEffect)((function(){function t(t){t.stopPropagation(),t.preventDefault();var e="";(t=t.originalEvent||t).clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):window.clipboardData&&window.clipboardData.getData&&(e=window.clipboardData.getData("Text")),document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,e):document.execCommand("paste",!1,e)}var e;return null!=(e=D.current)&&e.addEventListener("paste",t),function(){var e;null!=(e=D.current)&&e.removeEventListener("paste",t)}}),[]),Object(L.useEffect)((function(){function t(t){var r,n=Array.from(o.concat(H)).find((function(e){return null==(e=document.querySelector(e))?void 0:e.contains(t.target)}));null!=(r=D.current)&&r.contains(t.target)||n||(p(!1),b(),e())}return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[e,D]),Object(L.useEffect)((function(){function t(t){t.stopPropagation()}var e;return null!=(e=D.current)&&e.addEventListener("copy",t),null!=(e=D.current)&&e.addEventListener("cut",t),function(){var e;null!=(e=D.current)&&e.removeEventListener("copy",t),null!=(e=D.current)&&e.removeEventListener("cut",t)}}),[]),Object(L.useEffect)((function(){x&&null!=c&&c.id&&p(!1)}),[null==c?void 0:c.id]),h===l.A.VERTICAL_RL);s=U?{color:"#ffffff",fontSize:s,display:"flex",alignItems:"center",justifyContent:"center"}:{};return d&&(s={paddingLeft:J?0:"".concat(a?y.c:y.b,"em"),paddingTop:J?"".concat(a?y.c:y.b,"em"):0}),c?I.a.createElement(T.a,{overflowStageHidden:!1,layer:c},I.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:U?"#1790ff":""}},I.a.createElement("div",{className:S()("content-editable-layer",{"text-clip":t}),contentEditable:!0,suppressContentEditableWarning:!0,onInput:function(t){$(t.currentTarget.innerText||"")},id:r,ref:D,"data-type":l.a.EDIT,style:G(G({},Z),{},{cursor:"text",pointerEvents:"auto",width:"100%",height:"100%"},s),onContextMenu:function(t){t.stopPropagation()}},K.current))):I.a.createElement(I.a.Fragment,null)},X=r(29);function q(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(1154);var Z=function(){var t,e,r,n=Object(M.d)(),o=Object(X.i)(),i=(0,Object(A.o)().getActivePickLayer)();return i&&(t=i.top,e=i.left,r=i.width,i=i.height,n)?I.a.createElement("div",{className:"font-loading-wrap",style:$({},{top:"".concat(t+i/2-12,"px"),left:"".concat(e+r/2-27,"px"),width:"".concat(54,"px"),height:"".concat(24,"px"),transform:" scale(".concat(1/o,")")})},I.a.createElement("div",{className:"font-loading"},I.a.createElement("span",null),I.a.createElement("span",null),I.a.createElement("span",null))):null};function J(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(1155);var tt=I.a.memo((function(t){function e(t,r){return!!t&&(t.id===r||!!t.parentNode&&e(t.parentNode,r))}var r,o,i,a,c,u,s=t.layer,f=t.isLinkOperate,h=(t=t.overflowStageHidden,(O=s.data).text),g=O.textStroke,m=O.textGlow,v=O.textBackground,b=O.listStyle,w=O.writingMode,O=O.textGradient,x=Q(Q({},n(s)),{},{width:"".concat(s.width+1,"px")}),j=(E={},0<(null==(k=(k=s).data.textStroke)?void 0:k.length)&&(E.WebkitTextStroke="",i=(k=k[0]).direction,o=k.color,r=k.width,k.hidden||(i===l.v.CENTER?E.WebkitTextStroke="".concat(r,"px ").concat(o):E.WebkitTextStroke="".concat(2*r,"px ").concat(o))),E),_=((k=(k=s).data).textGlow,i=k.textShadow,k.textStroke,k.textBackground,k={textShadow:""},0<(null==i?void 0:i.length)&&(r=(i=i[0]).color,o=i.x,E=i.y,a=i.blur,i.hidden||(k.textShadow=k.textShadow+" ".concat(o,"px ").concat(E,"px ").concat(a,"px ").concat(r,","))),k.textShadow=p()(k.textShadow,","),k),E=s.textParentIsMaterial,k=(a={},0<(k=(k=s).data.textGlow).length&&((k=k[0]).hidden||0===k.width||function(t){return t.endsWith("00")}(k.color)||(a.WebkitTextStroke="".concat(k.width,"px ").concat(k.color),a.filter="blur(".concat(14,"px)"))),a),L=(R={},0<(null==(L=(L=s).data.textBackground)?void 0:L.length)&&(c=(L=L[0]).color,L.hidden||(R.backgroundColor=c)),R),M=(R={},null!=(c=(c=s).data.textGradient)&&null!=(P=c.colors)&&P.length&&(R.backgroundClip="text",R.WebkitBackgroundClip="text",R.WebkitTextFillColor="transparent",R.backgroundImage=Object(d.e)(c)),R),P=w===l.A.VERTICAL_RL,A=Object(C.h)(),R=h?h.replace(/\n$/,"").split("\n"):[],N=(w="decimal"===b&&10<=R.length||"lower-latin"===b&&13<=R.length||"upper-roman"===b&&3<=R.length,O&&0<(null==O||null==(O=O.colors)?void 0:O.length)),D=(O=N?"\n            .ul-".concat(s.id," li::before, .ul-").concat(s.id," li {\n                -webkit-background-clip: ").concat(M.backgroundClip||"",";\n                background-clip: ").concat(M.backgroundClip||"",";\n                background-image: ").concat(M.backgroundImage||"",";\n                -webkit-text-fill-color: ").concat(M.WebkitTextFillColor||"",";\n            }\n        "):"",b?I.a.createElement("ul",{className:S()("text-list-style-wrap",b,{"vertical-list":P,"text-list-style-wrap-max":w},"ul-".concat(s.id)),"data-class":b,style:Q({},((u={margin:0,padding:0,boxSizing:"border-box"}).listStyle=b,P?u.paddingTop="".concat(w?y.c:y.b,"em"):u.paddingLeft="".concat(w?y.c:y.b,"em"),u))},O?I.a.createElement("style",null,O):null,R.map((function(t){return I.a.createElement("li",{className:S()({"text-gradient":N})},t&&!/^\r/.test(t)?I.a.createElement("div",{style:{opacity:A&&e(document.querySelector(".content-editable-layer"),s.id)?0:1}},t):I.a.createElement("br",null))}))):I.a.createElement(I.a.Fragment,null,h));b=g.map((function(t,e){return I.a.createElement("div",{key:Math.random()},I.a.createElement("div",{className:S()("pointer-none",{"text-clip":N}),style:Q(Q({},x),_)},D),I.a.createElement("div",{className:S()("pointer-none",{"text-clip":N}),style:Q(Q({},x),j)},D),I.a.createElement("div",{className:S()("pointer-none",{"text-clip":N}),style:Q(Q({},x),M)},D))}));return E?I.a.createElement(T.a,{isLinkOperate:f,layer:s,overflowStageHidden:t}):I.a.createElement(T.a,{isLinkOperate:f,layer:s,overflowStageHidden:t},I.a.createElement("div",{id:"text-".concat(s.id),className:"text-layer-pointer-none"},v&&0<v.length?I.a.createElement("div",{className:S()("pointer-none"),style:Q(Q({},x),L)},D):null,m&&0<m.length?I.a.createElement("div",{className:S()("pointer-none",{"text-clip":N}),style:Q(Q({},x),k)},D):null,b.length?b:I.a.createElement("div",{id:"text-inner-".concat(s.id),className:S()("pointer-none",{"text-clip":N}),style:Q(Q(Q({},x),_),M)},D)))}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"e",(function(){return s.a})),r.d(e,"f",(function(){return d})),r.d(e,"c",(function(){return h})),r.d(e,"g",(function(){return p})),r.d(e,"h",(function(){return y})),r.d(e,"d",(function(){return g})),r.d(e,"b",(function(){return m}));e=r(7);var n,o=r(2),i=r(618),a=r.n(i);function c(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}c(n={},(i=r(457)).a.small,{itemWidth:68,itemHeight:88,parentWidth:252}),c(n,i.a.large,{itemWidth:108,itemHeight:128,parentWidth:252});var u=n,s=r(527),l=new RegExp(/\?/),f=Object(e.xb)()?"/format/webp/alpha/remove":"/alpha/remove",d=function(t,e,r,n){var o="";return t&&"-1"!==e&&(o=t,o=(o+=l.test(o)?"&":"?")+"imageView2/0/w/".concat(2*r,"|effect/modular/filter/effect/").concat(e,"/client_id/").concat(n).concat(f)),o};function h(t,e){var r=e.name,n=e.id,o=e.filterId,i=e.corner_mark,a=e.cornerMark,c=e.zip_url,u=e.zipUrl,s=e.type_id;e=e.threshold;return{categoryId:t,filterId:"".concat(n||o),name:r,cornerMark:i||a,zipUrl:c||u,typeId:s,threshold:e}}var p=function(){return{name:"\u65e0\u6ee4\u955c",filterId:"-1",categoryId:"",cornerMark:"",zipUrl:"",typeId:"",threshold:0}},y=function(){return{id:"recentUsedList",name:"\u5e38\u7528\u6ee4\u955c",cursor:"",seed:0,materials:[p()]}},g=function(t){var e=t.data.filterPreview;return e?(delete t.data.filterPreview,(t=null==(t=t.materialIds)?void 0:t.get(o.o.FILTER))&&t[t.length-1]===e&&a()(t,t.length-1),e):""},m=function(t,e){var r,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e&&(t.materialIds||(t.materialIds=new Map),(r=t.materialIds.get(o.o.FILTER))?n&&r.includes(e)||r.push(e):t.materialIds.set(o.o.FILTER,[e]))}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var n=r(20),o=r(86),i=r(10),a=r(34),c=r(2),u=r(136);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof f?e:f,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return l;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,l):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,l):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}(r,a),r)){if(r===l)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===l)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function f(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=f.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var l;if("throw"!==(o=u(t[o],t,i)).type)return(i=(l=o.arg).value)&&"object"==s(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,c,"next",t)}function c(t){h(i,n,o,a,c,"throw",t)}a(void 0)}))}}var y=c.c.zip_file,g=!1,m="",v=0,b=0,w=function(){var t=Object(i.p)().getLayer,e=Object(o.b)(),r=function(){var t=p(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.textBridge.getResultImage();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=p(d().mark((function t(e,r){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.textBridge.registerFont(e,r||y);case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),l=function(){var t=p(d().mark((function t(r,n){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.find((function(t){return t.font_name===n})),t.next=3,s(n,null==o?void 0:o.zip_file);case 3:return t.next=5,h(r,!0);case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),h=function(){var e=p(d().mark((function e(o,i){var s,l,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(null==o?void 0:o.parentId)&&t(o.parentId)||void 0,h=s&&(null==s?void 0:s.layerType)===c.h.TEXT_MATERIAL_LAYER,f=Object(u.a)(o),h&&(f.width=s.width),f.data.textIndex=f.textIndex;try{n.textBridge.updateTextLayerAttr(f.data,f.width,f.height,v,!!h)}catch(e){}if(i)return e.next=9,n.textBridge.processRender();e.next=20;break;case 9:return e.next=11,r();case 11:if(null!=(l=e.sent)&&l.canvas&&(f=l.canvas.toDataURL(),h=Object(u.d)(o,s),e.t0=h,e.t0))return e.next=19,a.b.setItemAsync(h,f);e.next=19;break;case 19:return e.abrupt("return",l);case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),w=function(){var t=p(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.textBridge.getTextsInfo();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{renderTextMaterial:function(){var t=p(d().mark((function t(o,i,l){var p,y,O,x,j,_,E,k,S,L,I,T,M,P,A,C,R,N=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=3<N.length&&void 0!==N[3]?N[3]:"init",y=4<N.length?N[4]:void 0,O=5<N.length?N[5]:void 0,v=i,b=l,g)return t.abrupt("return");t.next=7;break;case 7:return T=o.data,j=T.materialId,T=T.materialZip,x=y||o.width/v,_="".concat(j,"/ar/configuration.plist"),S=Object(n.createCanvas)(v*c.y,b*c.y),g=!0,t.prev=14,t.next=17,n.textBridge.from(S).apply("".concat(j),T,_,c.C,c.D);case 17:m=j,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(14);case 23:if(t.prev=23,null==o||!o.children){t.next=35;break}E=(null==o?void 0:o.children)||[],k=0;case 27:if(k<E.length)return(S=E[k]).textIndex=k,t.next=32,h(S,!1);t.next=35;break;case 32:k++,t.next=27;break;case 35:t.next=40;break;case 37:t.prev=37,t.t1=t.catch(23);case 40:return I=L=null,t.prev=42,t.next=45,n.textBridge.processRender();case 45:return t.next=47,w();case 47:L=t.sent,M=(null==(T=L)?void 0:T.textLayers)||[],P=d().mark((function t(r){var o,i,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=M[r],o=i.info.mTextFont,i=i.info.mTextIndex,a=(O||e).find((function(t){return t.font_name===o})))return t.next=7,s(o,null==a?void 0:a.zip_file);t.next=9;break;case 7:t.next=12;break;case 9:return o=c.c.name,t.next=12,s(c.c.name,c.c.zip_file);case 12:n.textBridge.setTextFont(o,i);case 13:case"end":return t.stop()}}),t)})),A=0;case 51:if(A<M.length)return t.delegateYield(P(A),"t2",53);t.next=56;break;case 53:A++,t.next=51;break;case 56:t.next=61;break;case 58:t.prev=58,t.t3=t.catch(42);case 61:return t.prev=61,n.textBridge.setWidthRation(x),t.next=65,n.textBridge.processRender();case 65:return t.next=67,r();case 67:I=t.sent,t.next=73;break;case 70:t.prev=70,t.t4=t.catch(61);case 73:if("init"===p&&null!=(_=I)&&_.canvas&&o&&(C=I.canvas.toDataURL(),R=Object(u.d)(o),t.t5=R,t.t5))return t.next=80,a.b.setItemAsync(R,C);t.next=80;break;case 80:return g=!1,t.abrupt("return",f(f({},L),{},{resImage:I}));case 82:case"end":return t.stop()}}),t,null,[[14,20],[23,37],[42,58],[61,70]])})));return function(e,r,n){return t.apply(this,arguments)}}(),updateTextLayer:h,updateFontFamily:l,getTextActualSize:function(t){return n.textBridge?n.textBridge.getTextActualSize(t):null},destroy:function(){n.textBridge&&(n.textBridge.destroy(),g=!1,m="")},getRendingStatus:function(){return g},getCurInitedMaterialId:function(){return m}}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n.a})),r.d(e,"b",(function(){return tt})),r.d(e,"c",(function(){return nt})),r.d(e,"d",(function(){return ct})),r.d(e,"e",(function(){return lt})),r.d(e,"f",(function(){return dt})),r.d(e,"g",(function(){return pt})),r.d(e,"h",(function(){return mt})),r.d(e,"i",(function(){return bt})),r.d(e,"j",(function(){return xt})),r.d(e,"o",(function(){return X})),r.d(e,"k",(function(){return Vt})),r.d(e,"l",(function(){return Rt})),r.d(e,"m",(function(){return Wt})),r.d(e,"n",(function(){return Nt}));var n=r(236),o=(e=(e=r(1029)).keys().map(e),new Map),i=(e.forEach((function(t){t.__esModule&&(t=t.default);var e=/.*\/(.*)\.svg$/.exec(t);e&&e[1]&&(e=e[1].split(".")[0],o.set(e,t))})),[{value:"",name:"line-0"},{value:"20,10",name:"line-1"},{value:"10,10",name:"line-2"},{value:"25,5,5,5",name:"line-3"},{value:"25,5,5,5,5,5",name:"line-4"}]),a={"10,5":"20,10","5,5":"10,10","10,5,5,5":"25,5,5,5","10,5,5,5,5,5":"25,5,5,5,5,5"},c=[{value:3,name:"3\uff08\u4e09\u89d2\u5f62\uff09"},{value:4,name:"4\uff08\u83f1\u5f62\uff09"},{value:5,name:"5\uff08\u4e94\u8fb9\u5f62\uff09"}],u=r(2);function s(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}e=(e=r(1035)).keys().map(e);var l=new Map,f=(e.forEach((function(t){t.__esModule&&(t=t.default);var e=/.*\/(.*)\.svg$/.exec(t);e&&e[1]&&(e=e[1].split(".")[0],l.set(e,t))})),s(e={},u.w.arrow,{edges:!1,radius:!1,fillColor:!1,dasharray:!1,tag:u.x.arrow}),s(e,u.w.line,{edges:!1,radius:!1,fillColor:!1,tag:u.x.line}),s(e,u.w.curve,{edges:!1,radius:!1,fillColor:!1,tag:u.x.path}),s(e,u.w.circle,{edges:!1,radius:!1,tag:u.x.ellipse}),s(e,u.w.square,{edges:!1,tag:u.x.rect}),s(e,u.w.polygon,{radius:!1,tag:u.x.path}),s(e,u.w.heart,{edges:!1,radius:!1,tag:u.x.path}),s(e,u.w.star,{edges:!1,radius:!1,tag:u.x.path}),e),d=[{name:u.w.line,label:"\u76f4\u7ebf"},{name:u.w.arrow,label:"\u7bad\u5934"},{name:u.w.curve,label:"\u66f2\u7ebf"},{name:u.w.circle,label:"\u5706\u5f62"},{name:u.w.square,label:"\u77e9\u5f62"},{name:u.w.polygon,label:"\u591a\u8fb9\u5f62"},{name:u.w.heart,label:"\u5fc3\u5f62"},{name:u.w.star,label:"\u661f\u5f62"}],h=r(13),p=r(0),y=r.n(p),g=r(10),m=r(24),v=Symbol("dasharray"),b=r(85),w=Symbol("edges"),O=(e=r(180),r.n(e)),x=Symbol("fillColor"),j=(e=r(91),r.n(e)),_=Symbol("radiusAction"),E=Symbol("resetSvgAction"),k=Symbol("strokeColor"),S=Symbol("strokeWidth"),L=(e=r(12),r(216));L=r.n(L);function I(t){return"svg".concat(t).split("").join("_")}function T(t){return localStorage.getItem(I(t))}function M(t,e){localStorage.setItem(I(t),e)}function P(){return q((function(t){return t.svgPenModel.name}))}function A(){return q((function(t){return t.svgPenModel.strokeWidth}))}function C(){return q((function(t){return t.svgPenModel.opacity}))}function R(){return q((function(t){return t.svgPenModel.dasharray}))}function N(){return q((function(t){return t.svgPenModel.edges}))}function D(){return q((function(t){return t.svgPenModel.radius}))}function F(){return q((function(t){return t.svgPenModel.strokeColor}))}function B(){return q((function(t){return t.svgPenModel.fillColor}))}var G=T("name")||u.w.line,U=L()(T("strokeWidth"))||10,z=L()(T("opacity"))||1,W=T("dasharray")||"",K=L()(T("edges"))||3,H=L()(T("radius"))||0,Y=T("strokeColor")||"#000000",V=T("fillColor")||"#00000000",X={destroy:Object(e.b)((function(t){t.name=G,t.strokeWidth=U,t.opacity=z,t.dasharray=W,t.edges=K,t.radius=H,t.strokeColor=Y,t.fillColor=V,t.ids=[]})),ids:[],clearIds:Object(e.b)((function(t){t.ids=[]})),pushId:Object(e.b)((function(t,e){t.ids.push(e)})),name:G,setName:Object(e.b)((function(t,e){M("name",t.name=e)})),strokeWidth:U,setStrokeWidth:Object(e.b)((function(t,e){M("strokeWidth",t.strokeWidth=e)})),opacity:z,setOpacity:Object(e.b)((function(t,e){M("opacity",t.opacity=e)})),dasharray:W,setDasharray:Object(e.b)((function(t,e){M("dasharray",t.dasharray=e)})),edges:K,setEdges:Object(e.b)((function(t,e){M("edges",t.edges=e)})),radius:H,setRadius:Object(e.b)((function(t,e){M("radius",t.radius=e)})),strokeColor:Y,setStrokeColor:Object(e.b)((function(t,e){M("strokeColor",t.strokeColor=e)})),fillColor:V,setFillColor:Object(e.b)((function(t,e){M("fillColor",t.fillColor=e)}))},q=(L=Object(e.f)()).useStoreState,$=L.useStoreActions,Z=(e=(L.useStoreDispatch,r(115)),r.n(e)),J=(r(1044),h.m.Option),Q=y.a.memo((function(t){var e,r,n,a=t.id,c=t.dasharray,u=t.onChange,s=$((function(t){return t.svgPenModel.setDasharray})),l=(e=Object(m.e)(),r=Object(g.p)().getLayer,n=Object(g.w)().addOrUpdate,Object(m.i)(v,{undo:function(t){var e=t.id;t=t.oldDasharray;(e=r(e))&&(e.data.dasharray=t,n(e))},redo:function(t){var e=t.id;t=t.newDasharray;(e=r(e))&&(e.data.dasharray=t,n(e))}}),{action:function(t,o){var i,a=r(t);a&&(i=a.data.dasharray,a.data.dasharray=o,n(a),e.push(v,{id:t,oldDasharray:i,newDasharray:o}))}});return Object(p.useEffect)((function(){s(c)}),[c]),y.a.createElement("div",{className:Z.a.item},y.a.createElement("div",{className:"c-stroke-dasharray__title"},"\u753b\u7b14\u7c7b\u578b"),y.a.createElement("div",{className:"c-stroke-dasharray__content"},y.a.createElement(h.m,{value:c,dropdownClassName:"c-stroke-dasharray__options",style:{width:228},suffixIcon:y.a.createElement(h.d,{name:"chevronDownBold",fontSize:16}),onChange:function(t){a&&l.action(a,t),s(t),null!=u&&u(t,a)}},i.map((function(t,e){return y.a.createElement(J,{key:e,label:t.value,value:t.value},y.a.createElement("img",{style:{width:200,marginLeft:-3},src:o.get("line-".concat(e)),alt:""}))})))))})),tt=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),R()),n=P(),o="";t&&t.layerType===u.h.SVG_LAYER&&(o=t.id,t=t.data,r=a[t.dasharray]||t.dasharray,n=t.name),t=Object(p.useCallback)((function(t,r){null!=e&&e(t,r)}),[]);return!1===f[n].dasharray?null:y.a.createElement(Q,{id:o,dasharray:r,onChange:t})})),et=(r(1045),h.m.Option),rt=y.a.memo((function(t){var e,r,n,o=t.id,i=t.edges,a=t.onChange,u=$((function(t){return t.svgPenModel.setEdges})),s=(e=Object(m.e)(),r=Object(g.p)().getLayer,n=Object(g.w)().addOrUpdate,Object(m.i)(w,{undo:function(t){var e,o=t.id;t=t.oldEdges;(o=r(o))&&((e=o.data).edges=t,e.path=Object(b.f)(o,t),n(o))},redo:function(t){var e,o=t.id;t=t.newEdges;(o=r(o))&&((e=o.data).edges=t,e.path=Object(b.f)(o,t),n(o))}}),{action:function(t,o){var i,a,c=r(t);c&&(a=(i=c.data).edges,i.edges=o,i.path=Object(b.f)(c,o),n(c),e.push(w,{id:t,oldEdges:a,newEdges:o}))}});return Object(p.useEffect)((function(){u(i)}),[i]),y.a.createElement("div",{className:Z.a.item},y.a.createElement("div",{className:"c-stroke-edges__title"},"\u8fb9\u6570"),y.a.createElement("div",{className:"c-stroke-edges__content"},y.a.createElement(h.m,{value:i,style:{width:228},suffixIcon:y.a.createElement(h.d,{name:"chevronDownBold",fontSize:16}),onChange:function(t){o&&s.action(o,t),u(t),null!=a&&a(t,o)}},c.map((function(t,e){return y.a.createElement(et,{key:e,label:t.value,value:e+3},t.name)})))))})),nt=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),P()),n=N(),o="";t&&t.layerType===u.h.SVG_LAYER&&(o=t.id,n=(t=t.data).edges,r=t.name),t=Object(p.useCallback)((function(t,r){null!=e&&e(t,r)}),[]);return!1===f[r].edges?null:y.a.createElement(rt,{id:o,edges:n,onChange:t})})),ot=r(264),it=["#000000","#FFFFFF","#BC1808","#D7D7D7","#555555","#7EE37D","#4168D3","#AA7FF3"],at=y.a.memo((function(t){var e,r,n,o=t.id,i=t.fillColor,a=t.onChange,c=$((function(t){return t.svgPenModel.setFillColor})),u=(e=Object(m.e)(),r=Object(g.p)().getLayer,n=Object(g.w)().addOrUpdate,Object(m.i)(x,{undo:function(t){var e=t.id;t=t.oldFillColor;(e=r(e))&&(e.data.fillColor=t,n(e))},redo:function(t){var e=t.id;t=t.newFillColor;(e=r(e))&&(e.data.fillColor=t,n(e))}}),{action:function(t,o,i){var a=r(t);a&&(a.data.fillColor=o,n(a),O()(i))&&e.push(x,{id:t,oldFillColor:i,newFillColor:o})}}),s=Object(p.useRef)(null);return Object(p.useEffect)((function(){c(i)}),[i]),y.a.createElement("div",{className:Z.a.item},y.a.createElement(ot.a,{color:i,title:"\u586b\u5145\u989c\u8272",height:"20px",width:"38px",fastSelect:8,fastSelectTransparent:!1,fastPresetColors:it,setColor:function(t){o&&(null===s.current&&(s.current=i),u.action(o,t)),c(t)},setColorAfter:function(t){o&&(u.action(o,t,s.current),s.current=null),c(t),null!=a&&a(t,o)}}))})),ct=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),P()),n=B(),o="";t&&t.layerType===u.h.SVG_LAYER&&(o=t.id,n=(t=t.data).fillColor,r=t.name),t=Object(p.useCallback)((function(t,r){null!=e&&e(t,r)}),[]);return!1===f[r].fillColor?null:y.a.createElement(at,{id:o,fillColor:n,onChange:t})})),ut=r(42),st=y.a.memo((function(t){var e=t.id,r=t.opacity,n=t.onChange,o=Object(ut.r)(),i=Object(p.useRef)(null),a=$((function(t){return t.svgPenModel.setOpacity}));return Object(p.useEffect)((function(){a(r)}),[r]),y.a.createElement("div",{className:Z.a.item},y.a.createElement(h.q,{title:"\u753b\u7b14\u5f3a\u5ea6",value:+(100*r).toFixed(0),max:100,min:0,onChange:function(t){t/=100,e&&(null===i.current&&(i.current=r),o.action(e,t)),a(t)},onAfterChange:function(t){t/=100,e&&(o.action(e,t,i.current),i.current=null),a(t),null!=n&&n(t,e)}}))})),lt=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),C()),n=P(),o="";t&&t.layerType===u.h.SVG_LAYER&&(o=t.id,r=t.opacity,n=t.data.name),t=Object(p.useCallback)((function(t,r){null!=e&&e(t,r)}),[]);return!1===f[n].opacity?null:y.a.createElement(st,{id:o,opacity:r,onChange:t})})),ft=y.a.memo((function(t){var e,r,n,o=t.id,i=t.radius,a=t.onChange,c=(e=Object(m.e)(),r=Object(g.p)().getLayer,n=Object(g.w)().addOrUpdate,Object(m.i)(_,{undo:function(t){var e=t.id;t=t.originRadius;(e=r(e))&&(e.data.radius=t,n(e))},redo:function(t){var e=t.id;t=t.radius;(e=r(e))&&(e.data.radius=t,n(e))}}),{action:function(t,o,i){var a=r(t);a&&(a.data.radius=o,n(a),j()(i))&&e.push(_,{id:t,originRadius:i,radius:o})}}),u=Object(p.useRef)(null),s=$((function(t){return t.svgPenModel.setRadius}));return Object(p.useEffect)((function(){s(i)}),[i]),y.a.createElement("div",{className:Z.a.item},y.a.createElement(h.q,{title:"\u5706\u89d2",value:+i.toFixed(0),max:100,min:0,onChange:function(t){o&&(null===u.current&&(u.current=i),c.action(o,t)),s(t)},onAfterChange:function(t){o&&(c.action(o,t,u.current),u.current=null),s(t),null!=a&&a(t,o)}}))})),dt=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),D()),n=P(),o="";t&&t.layerType===u.h.SVG_LAYER&&(o=t.id,r=(t=t.data).radius||0,n=t.name),t=Object(p.useCallback)((function(t,r){null!=e&&e(t,r)}),[]);return!1===f[n].radius?null:y.a.createElement(ft,{id:o,radius:r,onChange:t})})),ht=y.a.memo((function(t){var e,r,n,o,i,a=t.onClick,c=(t=Object(g.K)(),e=t.delLayers,r=t.addLayers,t=Object(g.f)(),n=t.getActiveInfo,o=t.delActiveLayer,i=Object(m.e)(),Object(m.i)(E,{undo:function(t){var e=t.map;t=t.layers;r(e,t)},redo:function(t){t=t.map,e(Array.from(t.values()))}}),{action:function(t){var r;t=(r=(null!=(r=n())&&r.id&&t.includes(r.id)&&o(),e(t))).map;(r=r.layers).length&&i.push(E,{map:t,layers:r})}}),u=q((function(t){return t.svgPenModel.ids}));return y.a.createElement("div",{className:Z.a.item},y.a.createElement(h.a,{onClick:function(){c.action(u),null!=a&&a()},icon:y.a.createElement(h.d,{name:"arrowCounterclockwise",fontSize:20})},"\u91cd\u7f6e"))})),pt=y.a.memo((function(t){var e=t.onClick;t=Object(p.useCallback)((function(){null!=e&&e()}),[]);return y.a.createElement(ht,{onClick:t})})),yt=(L=r(9),r.n(L)),gt=(r(1047),y.a.memo((function(t){var e=t.id,r=t.onChange,n=t.name,o=Object(g.f)().delActiveLayer;return y.a.createElement("div",{className:"c-shape-list"},d.map((function(t,i){return y.a.createElement(h.x,{placement:"top",title:t.label,key:i},y.a.createElement("div",{className:yt()("c-shape-list__item",{"c-shape-list__item-active":n===t.name}),onClick:function(){o(),null!=r&&r(t,e)}},y.a.createElement("img",{src:l.get(t.name),alt:""})))})))}))),mt=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),$((function(t){return t.svgPenModel.setName}))),n=P(),o="";(null==t?void 0:t.layerType)===u.h.SVG_LAYER&&(o=t.id,n=t.data.name),Object(p.useEffect)((function(){r(n)}),[n]),t=Object(p.useCallback)((function(t,o){t.name!==n&&null!=e&&e(t,o),r(t.name)}),[n]);return y.a.createElement(gt,{id:o,onChange:t,name:n})})),vt=y.a.memo((function(t){var e,r,n,o=t.id,i=t.strokeColor,a=t.onChange,c=$((function(t){return t.svgPenModel.setStrokeColor})),u=(e=Object(m.e)(),r=Object(g.p)().getLayer,n=Object(g.w)().addOrUpdate,Object(m.i)(k,{undo:function(t){var e=t.id;t=t.oldStrokeColor;(e=r(e))&&(e.data.strokeColor=t,n(e))},redo:function(t){var e=t.id;t=t.newStrokeColor;(e=r(e))&&(e.data.strokeColor=t,n(e))}}),{action:function(t,o,i){var a=r(t);a&&(a.data.strokeColor=o,n(a),O()(i))&&e.push(k,{id:t,oldStrokeColor:i,newStrokeColor:o})}}),s=Object(p.useRef)(null);return Object(p.useEffect)((function(){c(i)}),[i]),y.a.createElement("div",{className:Z.a.item},y.a.createElement(ot.a,{color:i,title:"\u753b\u7b14\u989c\u8272",height:"20px",width:"38px",fastSelect:8,fastSelectTransparent:!1,fastPresetColors:it,setColor:function(t){o&&(null===s.current&&(s.current=i),u.action(o,t)),c(t)},setColorAfter:function(t){o&&(u.action(o,t,s.current),s.current=null),c(t),null!=a&&a(t,o)}}))})),bt=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),F()),n=P(),o="";t&&t.layerType===u.h.SVG_LAYER&&(o=t.id,r=(t=t.data).strokeColor,n=t.name),t=Object(p.useCallback)((function(t,r){null!=e&&e(t,r)}),[]);return!1===f[n].strokeColor?null:y.a.createElement(vt,{id:o,strokeColor:r,onChange:t})})),wt=(e=r(15),r.n(e)),Ot=y.a.memo((function(t){var e,r,n,o,i,a,c=t.id,s=t.strokeWidth,l=t.layer,f=t.onChange,d=Object(p.useRef)(null),v=$((function(t){return t.svgPenModel.setStrokeWidth})),w=(e=Object(m.e)(),t=Object(g.p)(),r=t.getLayer,n=t.getLayerParentId,o=Object(g.w)().addOrUpdate,i=Object(g.L)().updateGroup,a=Object(g.h)().refreshActiveInfo,Object(m.i)(S,{undo:function(t){var e=t.oldInfo;t=t.parentId;o(e),t&&i(t),a()},redo:function(t){var e=t.newInfo;t=t.parentId;o(e),t&&i(t),a()}}),{action:function(t,c,s){var l,f;(t=r(t))&&(l=(f=t.data).strokeWidth,f.strokeWidth=c,c=!1,f.name===u.w.line?(Object(b.i)(t,l),c=!0):f.name===u.w.curve?(Object(b.h)(t,l),c=!0):f.name===u.w.arrow&&(Object(b.g)(t,l),c=!0),o(t),f="",c&&(f=n(t.id))&&i(f),a(),s)&&e.push(S,{oldInfo:s,newInfo:t,parentId:f})}});return Object(p.useEffect)((function(){v(s)}),[s]),y.a.createElement("div",{className:Z.a.item},y.a.createElement(h.q,{title:"\u753b\u7b14\u5927\u5c0f",value:+s.toFixed(0),max:100,min:1,onChange:function(t){c&&(null===d.current&&(d.current=wt()(l)),w.action(c,t)),v(t)},onAfterChange:function(t){c&&(w.action(c,t,d.current),d.current=null),v(t),null!=f&&f(t,c)}}))})),xt=y.a.memo((function(t){var e=t.onChange,r=(t=(0,Object(g.o)().getActivePickLayer)(),A()),n=P(),o="",i=(t&&t.layerType===u.h.SVG_LAYER&&(o=t.id,r=(i=t.data).strokeWidth,n=i.name),Object(p.useCallback)((function(t,r){null!=e&&e(t,r)}),[]));return!1===f[n].strokeWidth?null:y.a.createElement(Ot,{id:o,strokeWidth:r,layer:t,onChange:i})})),jt=r(160),_t=r(46),Et=r(7),kt=r(29),St=r(22),Lt=(L=r(501),r.n(L)),It=(e=r(316),r.n(e)),Tt=(L=r(237),r.n(L)),Mt=r(19);function Pt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(r),!0).forEach((function(e){Ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ct(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}var Rt,Nt=y.a.memo((function(t){var e,r,n,o,i,c,s,l,f,d,h=t.layer,p=t.isLinkOperate,g=(t=t.overflowStageHidden,h.opacity),m=h.width,v=h.height,b=h.id,w=(S=h.data).fillColor,O=S.strokeColor,x=S.dasharray,j=S.strokeWidth,_=S.path,E=S.tag,k=S.radius,S=S.name,L={style:{pointerEvents:"visibleStroke"},"data-type":u.a.LAYER,"data-id":b};e=(w={width:m,height:v,id:b,fillColor:w,strokeColor:O,strokeWidth:j,path:_,radius:k,name:S,attr:L}).id,_=w.attr,r=void 0===_?{}:_,n=w.width,o=w.height,i=w.fillColor,c=w.strokeColor,s=w.strokeWidth,l=w.path,f=w.radius,d=w.name,Ct(_={},u.x.path,(function(){var t=s;return d!==u.w.curve&&(t=2*s),y.a.createElement("path",At({clipPath:"url(#clipPath".concat(e,")"),d:l,fill:i,strokeWidth:t},r))})),Ct(_,u.x.line,(function(){return y.a.createElement("path",At({d:l,fill:i,strokeWidth:s},r))})),Ct(_,u.x.arrow,(function(){return y.a.createElement("path",At({d:l,fill:i,strokeWidth:s},r))})),Ct(_,u.x.ellipse,(function(){var t=n/2,e=o/2,a=t-s/2,u=e-s/2;return y.a.createElement("ellipse",At({cx:t,cy:e,rx:a=a<0?1:a,ry:u=u<0?1:u,stroke:c,fill:i},r))})),Ct(_,u.x.rect,(function(){return y.a.createElement("rect",At({x:s/2,y:s/2,width:n-s,height:o-s,stroke:c,fill:i,rx:f,ry:f,strokeWidth:s},r))})),k=_;return y.a.createElement(ut.a,{disableEvents:!0,isLinkOperate:p,layer:h,overflowStageHidden:t},y.a.createElement("svg",{id:"svg-".concat(b),width:m,height:v,viewBox:"0, 0 ".concat(m," ").concat(v),version:"1.1",xmlns:"http://www.w3.org/2000/svg",stroke:O,strokeDasharray:a[x]||x,style:{overflow:"visible",opacity:g,display:"block"},strokeWidth:j},S!==u.w.curve?y.a.createElement("defs",null,y.a.createElement("clipPath",{id:"clipPath".concat(b)},k[E]())):null,k[E]()))}));function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ft(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}function Bt(t,e){e*=2;var r=(t.width=Math.max(e,t.width),t.height=Math.max(e,t.height),t.x1),n=t.x2,o=t.y1,i=t.y2;r<n&&o<i&&n-r<e&&i-o<e?(t.left=r,t.top=o):r<n&&i<o&&n-r<e&&o-i<e?(t.left=r,t.top=o-e):n<r&&i<o&&r-n<e&&o-i<e?(t.left=r-e,t.top=o-e):n<r&&o<i&&r-n<e&&i-o<e&&(t.left=r-e,t.top=o)}function Gt(t){var e=t.maxY,r=t.maxX,n=t.top,o=t.left,i=t.x1,a=t.x2,c=t.y1,u={x:(a-i)/2+i,y:((t=t.y2)-c)/2+c};a={x:a-i,y:t-c},i=-Object(Et.db)(a,{x:1,y:0}),t=Math.pow(e-n,2)+Math.pow(r-o,2);return{centerPoint:u,rotate:i,width:+Math.sqrt(t).toFixed(0)}}function Ut(t,e,r,n,o,i){var a=n.x,c=(n=n.y,o.x),u=(o=o.y,Lt()([a,c])),s=It()([a,c]),l=Lt()([n,o]),f=It()([n,o]);i={fromRefresh:i,strokeWidth:e,width:u-s,height:l-f,left:s,top:f,rotate:0,maxX:u,maxY:l,x1:a,x2:c,y1:n,y2:o};return zt(e,r)[t](i),i}r(1048),(Rt=Rt||{}).drawEnd="shape_pen_draw_end";var zt=function(t,e){var r={};return Ft(r,u.w.line,(function(e){var r=(o=Gt(e)).centerPoint,n=o.rotate,o=o.width;e.width=Math.max(t,o),e.height=t,e.top=r.y-e.height/2,e.left=r.x-e.width/2,e.rotate=n})),Ft(r,u.w.arrow,(function(e){var r=(o=Gt(e)).centerPoint,n=o.rotate,o=o.width,i=(s=Object(b.a)(t)).arrowShadow,a=s.offset,c=s.borderOffset,u=s.minWidth,s=s.height;e.fromRefresh?(u=Math.max(u,o),e.width=~~u):(u=Math.max(i+c,o),e.width=~~(u+2*a)),e.height=s,e.top=~~(r.y-e.height/2),e.left=~~(r.x-e.width/2),e.rotate=n})),Ft(r,u.w.curve,(function(t){var r=(n=Object(Et.U)().getBoundingClientRect()).width,n=n.height;t.width=r/e,t.height=n/e,t.left=0,t.top=0})),Ft(r,u.w.circle,(function(e){Bt(e,t)})),Ft(r,u.w.square,(function(e){Bt(e,t)})),Ft(r,u.w.polygon,(function(e){Bt(e,t)})),Ft(r,u.w.heart,(function(e){Bt(e,t)})),Ft(r,u.w.star,(function(e){Bt(e,t)})),r},Wt=y.a.memo((function(){var t=Object(p.useRef)(null),e=Object(ut.h)(),r=Object(g.f)().getActiveInfo,n=Object(kt.i)(),o=Object(g.g)(),i=Object(p.useRef)(!1),a=Object(p.useRef)([]),c=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Dt(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dt(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(p.useState)(null),2),s=c[0],l=c[1],d=Object(p.useRef)(),h=$((function(t){return t.svgPenModel.clearIds})),m=P(),v=R(),w=B(),O=F(),x=N(),j=A(),_=C(),E=D(),k=$((function(t){return t.svgPenModel.pushId})),S=(Ft(c={},u.w.line,(function(t){return Object(b.e)(t.width,t.height)})),Ft(c,u.w.arrow,(function(t){return Object(b.b)(t,t.strokeWidth)})),Ft(c,u.w.curve,(function(t){return Object(b.c)(a.current)})),Ft(c,u.w.circle,(function(t){return""})),Ft(c,u.w.square,(function(t){return""})),Ft(c,u.w.polygon,(function(t){return Object(b.f)(t,x)})),Ft(c,u.w.heart,(function(t){return Object(b.d)(t,u.w.heart)})),Ft(c,u.w.star,(function(t){return Object(b.d)(t,u.w.star)})),c),L=(Object(_t.e)((function(t){var e,r,c,u,s,h,p,y,g,b,k,I,T,M,P,A,C,R;o||(e=Object(Et.gb)(t.currentPoint,n),r=i.current,c=d.current,t.isStart&&(r=Object(Et.j)(t.startPoint),i.current=r,d.current=(A=_,u=w,s=O,h=v,p=x,y=j,g=E,C=(b=f[R=m]).tag,k=b.fillColor,I=b.strokeColor,T=b.strokeWidth,M=b.edges,P=b.radius,b=b.dasharray,Object(Et.hb)({opacity:A,data:{tag:C,name:R,path:"",fillColor:!1!==k?u:"rgba(0,0,0,0)",strokeColor:!1!==I?s:"rgba(0,0,0,0)",strokeWidth:!1!==T?y:0,edges:!1!==M?p:0,radius:!1!==P?g:0,dasharray:!1!==b?h:""}})),c=d.current),r&&(A=!0,(A=(!a.current.length||(C=a.current[a.current.length-1]).x!==e.x||C.y!==e.y)&&A)&&a.current.push({x:e.x,y:e.y}),c&&(R=Ut(m,j,n,a.current[0],a.current[a.current.length-1]),Object.assign(c,{width:~~R.width,height:~~R.height,left:~~R.left,top:~~R.top,rotate:R.rotate}),c.data.path=S[m](R),l(wt()(c))),t.isEnd)&&(i.current=!1,a.current=[],c&&(L(wt()(c)),Mt.a.emit(Rt.drawEnd,c)),l(null)))})),function(r){var o,i;m===u.w.curve&&(i=null==(i=t.current)||null==(i=i.getElementsByTagName("path")[0])?void 0:i.getBoundingClientRect(),o=Object(Et.gb)({x:(null==i?void 0:i.left)||0,y:(null==i?void 0:i.top)||0},n),r.width=~~(((null==i?void 0:i.width)||0)/n+2*j),r.height=~~(((null==i?void 0:i.height)||0)/n+2*j),r.left=o.x-j,r.top=o.y-j,(i=r.data).path=Tt()(i.path).translate(-o.x+j,-o.y+j).toString()),e.action(r),k(r.id)});return Object(p.useEffect)((function(){return h(),function(){h()}}),[]),Object(p.useEffect)((function(){function e(){!r()&&t.current&&(t.current.style.display="block")}function n(){t.current&&(t.current.style.display="none")}var o=document.getElementById("scaleLayer");return o&&(o.style.cursor="crosshair"),document.addEventListener("mousedown",e),document.addEventListener("mouseup",n),function(){o&&(o.style.cursor="default"),document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",n)}}),[]),y.a.createElement("div",{ref:t,className:"l-draw-svg-mask"},s?y.a.createElement(Nt,{layer:s}):null)}));function Kt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function Ht(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1049);var Vt=y.a.memo((function(t){function e(t,e){return{opacity:t&&t!==e?0:1}}t=t.id;var r,n,o,i,a,c,s,l,f,d,h=(0,Object(g.q)().getLayer)(t),v=(t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?Yt(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(p.useState)(null),2),t[0]),w=t[1],O=(r=Object(p.useRef)(),n=Object(p.useRef)(),o=Object(p.useRef)(),i=Object(p.useRef)(),a=Object(kt.i)(),c=Object(g.w)().addOrUpdate,s=Object(m.h)(),l=Object(g.h)().setActiveLayer,f=Object(St.q)(),d=Object(g.L)().updateGroup,{resize:function(t,e,h,p){var y,g,m;t.isStart&&(f(!0),r.current=wt()(e),m=Object(Et.I)(e),o.current=Object(Et.Jb)({x:e.left+e.width,y:m.y},m,e.rotate),n.current=Object(Et.Jb)({x:e.left,y:m.y},m,e.rotate),i.current=Object(Et.p)(t.currentPoint,a)),o.current&&n.current&&i.current&&r.current&&(m={x:~~((m=Object(Et.p)(t.currentPoint,a)).x-i.current.x),y:~~(m.y-i.current.y)},g=Object(Et.e)(m,n.current),m=Object(Et.e)(m,o.current),y=e.data.strokeWidth,y=Ut(p===u.w.line?u.w.line:u.w.arrow,y,a,h===u.r.LC?g:n.current,h===u.r.RC?m:o.current,!0),(g=wt()(e)).width=y.width,g.height=y.height,g.rotate=y.rotate,g.left=y.left,g.top=y.top,(p===u.w.line?Object(b.i):Object(b.g))(g),c(g),t.isEnd)&&(s.action(r.current,g),null!=(h=r.current)&&h.parentId&&d(null==(m=r.current)?void 0:m.parentId),l(e.id),f(!1))}});return Object(_t.e)((function(t){var e,r;Object(Et.ib)(t.target)&&h&&((e=h.data.name)!==u.w.line&&e!==u.w.arrow||(Object(Et.l)(t.target,u.a.RESIZE)&&(r=t.target.getAttribute("data-operate"),w(r),O.resize(t,h,r,e)),t.isEnd&&w(null)))})),!h||h.layerType!==u.h.SVG_LAYER||(t=h.data.name)!==u.w.line&&t!==u.w.arrow?null:(t=h.rotate,t=Object(jt.a)(t),y.a.createElement("div",{className:yt()("l-operate__svg-line")},y.a.createElement("div",{className:yt()("resize",u.r.LC,t.LC),"data-type":u.a.RESIZE,"data-operate":u.r.LC,style:Ht({},e(v,u.r.LC))}),y.a.createElement("div",{className:yt()("resize",u.r.RC,t.RC),"data-type":u.a.RESIZE,"data-operate":u.r.RC,style:Ht({},e(v,u.r.RC))})))}))},function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"m",(function(){return i})),r.d(e,"o",(function(){return a})),r.d(e,"p",(function(){return c})),r.d(e,"n",(function(){return u})),r.d(e,"e",(function(){return s})),r.d(e,"j",(function(){return l})),r.d(e,"f",(function(){return f})),r.d(e,"i",(function(){return d})),r.d(e,"b",(function(){return h})),r.d(e,"l",(function(){return p})),r.d(e,"k",(function(){return y})),r.d(e,"d",(function(){return g})),r.d(e,"h",(function(){return m})),r.d(e,"g",(function(){return v})),r.d(e,"a",(function(){return b}));var n=r(17),o=function(){return Object(n.b)((function(t){return t.sdk.layersManagerModel.changeRenderSortIds}))},i=function(){return Object(n.b)((function(t){return t.sdk.layersManagerModel.restoreRenderSortIds}))},a=function(){return Object(n.b)((function(t){return t.sdk.layersManagerModel.updateOpacity}))},c=function(){return Object(n.b)((function(t){return t.sdk.layersManagerModel.updateRotate}))},u=function(){return Object(n.b)((function(t){return t.sdk.layersManagerModel.setResizeActionType}))},s=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.hoverId}))},l=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.pickIdsSet}))},f=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.layers}))},d=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.mainLayer}))},h=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.backGroundLayer}))},p=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.renderLayers}))},y=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.renderSortIdsArr}))},g=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.flatLayersMap}))},m=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.onLayerChange}))},v=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.onGroupLayerChange}))},b=function(){return Object(n.d)((function(t){return t.sdk.layersManagerModel.activeInfo}))}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return f})),r.d(e,"e",(function(){return d})),r.d(e,"c",(function(){return h})),r.d(e,"g",(function(){return p})),r.d(e,"b",(function(){return y})),r.d(e,"l",(function(){return g})),r.d(e,"n",(function(){return m})),r.d(e,"o",(function(){return v})),r.d(e,"k",(function(){return b})),r.d(e,"m",(function(){return w})),r.d(e,"p",(function(){return O})),r.d(e,"h",(function(){return x})),r.d(e,"i",(function(){return j})),r.d(e,"j",(function(){return _})),r.d(e,"f",(function(){return E}));e=r(15);var n=r.n(e),o=(e=r(392),r.n(e)),i=r(78),a=r(2),c=r(279);function u(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l=.5,f=function(t){return{fontSize:"36px",lineHeight:"1",textShadow:" ",color:t,position:"absolute",left:0,top:0,transform:"translate(-50%, -50%)"}},d=function(t,e){return e=f(e),0<t.length&&((t=t[0]).hidden||(e.WebkitTextStroke="".concat(t.width,"px ").concat(t.color),e.filter="blur(".concat(14,"px)"))),e},h=function(t,e){t.textGlow;var r,n,i=t.textShadow,c=t.textStroke;t.textBackground,t=f(e);return 0<(null==c?void 0:c.length)&&(t.WebkitTextStroke="",c=(e=c[0]).direction,n=e.color,r=e.width,e.hidden||(c===a.v.CENTER?t.WebkitTextStroke="".concat(r,"px ").concat(n):t.WebkitTextStroke="".concat(2*r,"px ").concat(n))),t.textShadow="",0<(null==i?void 0:i.length)&&(c=(e=i[0]).color,r=e.x,n=e.y,i=e.blur,e.hidden||(t.textShadow=t.textShadow+" ".concat(r,"px ").concat(n,"px ").concat(i,"px ").concat(c,","))),t.textShadow=o()(t.textShadow,","),t},p=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return t};return null==(e=n()(e(a.B)))?void 0:e.map((function(e){o={textShadow:e.textShadow,textStroke:e.textStroke,textGlow:e.textGlow},r=t;var r,o={textShadow:o.textShadow.map((function(t){return t.distance=t.distance*(r/176),t})),textStroke:o.textStroke.map((function(t){return t.width=t.width*(r/176),t})),textGlow:o.textGlow.map((function(t){return t.width=t.width*(r/176),t}))};return e.textShadow=o.textShadow,e.textStroke=o.textStroke,e.textGlow=o.textGlow,e.textShadow.length&&(e.textShadow=null==(o=e.textShadow)?void 0:o.map((function(t,r){var n=t.angle,o=(n=(o={x:(o=t.distance)*Math.cos(n*Math.PI/180)||0,y:-o*Math.sin(n*Math.PI/180)||0}).x,o.y);return e.textShadow[r]=s(s({},t),{},{x:n,y:o})}))),n()(e)}))},y=function(t,e,r){return n=t,e.find((function(t){return t.font_name===n||t.default_name===n}))?t:r||a.c.name;var n},g=function(t,e){return t/1e3*e},m=function(t){return t/1e3+1.2},v=function(t){var e,r,n,o=s({},t),i=t.textGlow,a=t.textShadow,c=t.textStroke,u=t.fontSize,l=t.lineSpacing;t=t.letterSpacing;return(o=s(s({},o),{},{textGlow:i,textShadow:a,textStroke:c})).letterSpacing=g(t,u),o.lineSpacing=m(l),o.textGlow=(e=u,null==(t=i)?void 0:t.map((function(t){return s(s({},t),{},{width:25*t.width/512*e})}))),o.textShadow=(r=u,null==(l=a)?void 0:l.map((function(t){return s(s({},t),{},{blur:t.blur*r/128*5})}))),o.textStroke=(n=u,null==(i=c)?void 0:i.map((function(t){var e=t.width*n/128*5;return s(s({},t),{},{width:e})}))),o};var b=function(t,e){return t/e*1e3},w=function(t){return 1e3*(t-1.2)},O=function(t){var e=s({},t),r=t.fontSize,n=t.lineSpacing,o=t.letterSpacing,i=t.textGlow,a=t.textShadow;t=t.textStroke,e.letterSpacing=b(o,r),e.lineSpacing=w(n),o=a,n=t,(a={textGlow:[],textShadow:[],textStroke:[]}).textGlow=function(t,e){return null==t?void 0:t.map((function(t){return s(s({},t),{},{width:t.width/e*512/25})}))}(i,t=r),a.textShadow=function(t,e){return null==t?void 0:t.map((function(t){return s(s({},t),{},{blur:t.blur/e*128/5})}))}(o,t),a.textStroke=function(t,e){return null==t?void 0:t.map((function(t){return s(s({},t),{},{width:t.width/e*128/5})}))}(n,t),i=a;return s(s({},e),i)},x=function(t,e,r){var n,o,u={width:0,height:0,minWidth:0,minHeight:0};return null!==r&&(e=(t=function(t,e,r){var n,o,u,s,l,f,d,h,p,y,g,m,v=3<arguments.length&&void 0!==arguments[3]&&arguments[3],b={minWidth:0,minHeight:0,div:null,divInner:null};return null===r?b:(n=r.fontSize,m=r.fontFamily,o=r.lineSpacing,u=r.letterSpacing,s=r.bold,l=r.italic,f=r.lineThrough,d=r.underline,h=r.textAlign,p=r.writingMode,y=r.text,g=document.createElement("div"),v?(g.style.width="".concat(t,"px"),g.style.height="auto"):(g.style.width="auto",g.style.height="".concat(e,"px")),g.style.position="absolute",g.style.left="0",g.style.top="0",g.style.visibility="hidden",g.style.pointerEvents="none",(v=document.createElement("div")).style.fontSize="".concat(n,"px"),v.style.fontFamily="".concat(Object(c.c)(m)),v.style.margin="0",v.style.padding="0",v.style.whiteSpace="break-spaces",v.style.writingMode=p,v.style.lineHeight="".concat(o),v.style.letterSpacing="".concat(u,"px"),v.style.fontWeight=s?"bold":"normal",v.style.textAlign=h,v.style.wordBreak="break-all",v.style.outline="none",v.style.lineBreak="anywhere",v.style.fontStyle=l?"italic":"normal",v.style.textDecoration="".concat(f?"line-through":""," ").concat(d?"underline":""),r.listStyle?(t=r.listStyle,e=y?y.replace(/\n$/,"").split("\n"):[],m="decimal"===t&&10<=e.length||"lower-latin"===t&&13<=e.length||"upper-roman"===t&&3<=e.length,p===a.A.HORIZONTAL_TB?v.style.paddingLeft="".concat(m?i.c:i.b,"em"):v.style.paddingTop="".concat(m?i.c:i.b,"em"),r.withSpace=!0):(p===a.A.HORIZONTAL_TB?v.style.paddingLeft="0px":v.style.paddingTop="0px",r.withSpace=!1),g.appendChild(v),document.body.appendChild(g),v.innerText=" ",b.minWidth=v.offsetWidth||n,b.minHeight=v.offsetHeight||n,v.innerText=y,{div:g,divInner:v,minWidth:b.minWidth,minHeight:b.minHeight})}(t,e,r,3<arguments.length&&void 0!==arguments[3]&&arguments[3])).div,r=t.divInner,n=t.minWidth,t=t.minHeight,r&&(o=(r=r.getBoundingClientRect()).width||Math.abs(r.right-r.left),r=r.height||Math.abs(r.top-r.bottom),u.width=Math.ceil(o||n),u.height=Math.ceil(r||t),u.minWidth=n,u.minHeight=t,null!=e))&&e.remove(),u},j=function(t){var e;return t.height>(null==(e=t.data)?void 0:e.fontSize)*((null==(e=t.data)?void 0:e.lineSpacing)+.5)},_=function(t){return t.width>1.5*(null==(t=t.data)?void 0:t.fontSize)},E=function(t){return{textGlow:[{width:5,blur:5,color:"#ffffffff",hidden:!1,editable:!0}],textShadow:[{blur:5,color:"#000000ff",x:0,y:-5,hidden:!1,editable:!0}],textStroke:[{width:1,color:"#000000ff",direction:0,hidden:!1,editable:!0}],textBackground:[{color:"#000000ff",hidden:!1,editable:!0}]}}},,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return l})),r.d(e,"c",(function(){return f.a})),r.d(e,"d",(function(){return f.b})),r.d(e,"e",(function(){return f.d})),r.d(e,"f",(function(){return f.e})),r.d(e,"b",(function(){return m}));e=r(31);var n=r.n(e),o=r(7),i=r(136);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(e){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(u(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function c(){return new e((function(n,c){!function n(o,i,c,u){var s;if("throw"!==(o=l(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==a(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):e.resolve(i).then((function(t){s.value=t,c(s)}),(function(t){return n("throw",t,c,u)}));u(o.arg)}(o,i,n,c)}))}return n=n?n.then(c,c):c()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return u(m,"constructor",h.prototype=p),u(p,"constructor",h),h.displayName=u(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),u(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),u(m,i,"Generator"),u(m,n,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function u(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}var l={getResultCanvasAsync:function(t,e){return s(c().mark((function r(){var i,a,u,s,l,f,d,h;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.width,a=e.height,f=t.id,s=t.width,l=t.height,u=t.rotate,s=n()(s),l=n()(l),f=document.getElementById("text-material-".concat(f))){r.next=7;break}return r.abrupt("return");case 7:return d=Object(o.t)(s,l),h=d.canvas,d.ctx.drawImage(f,0,0,f.width,f.height,0,0,s,n()(s*f.height/f.width)),r.abrupt("return",Object(o.y)(t,u,1,h,i,a));case 10:case"end":return r.stop()}}),r)})))()},onBeforeAddOrUpdate:function(t){var e=t,r=Object(i.d)(t);e.textImageMd5=r,t.children.forEach((function(t,e){t.textParentIsMaterial=!0,t.textIndex=e}))},onBeforeSaveAsync:function(t,e){return s(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete(r=t).textImageMd5,delete r.data.fontFamilySubset,delete r.useFontFamilySubset,t.children.forEach((function(t){delete t.textParentIsMaterial,delete t.textIndex,delete t.data.fontFamilySubset,delete t.useFontFamilySubset}));case 5:case"end":return e.stop()}}),e)})))()}},f=r(285),d=r(0),h=r.n(d),p=r(42);function y(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(1064);var m=h.a.memo((function(t){var e=t.layer,r=(t=t.isLinkOperate,Object(d.useRef)(null)),n=e.textImageMd5;return Object(d.useEffect)((function(){n&&Object(o.zb)(n).then((function(t){var e,n,o;r.current&&(e=t.width,n=t.height,r.current.width=e,r.current.height=n,o=r.current.getContext("2d"))&&(o.clearRect(0,0,e,n),null!=o)&&o.drawImage(t,0,0,e,n)})).catch((function(){delete e.textImageMd5}))}),[n]),h.a.createElement(p.a,{isLinkOperate:t,layer:e},h.a.createElement("div",{style:g({},{pointerEvents:"none",display:"block",width:"100%",height:"100%"})},h.a.createElement("canvas",{style:{width:"100%"},id:"text-material-".concat(e.id),ref:r})))}))},,,function(t,e,r){"use strict";r.d(e,"b",(function(){return h}));var n=r(91),o=r.n(n),i=(n=r(237),r.n(n)),a=r(2),c=r(7),u=r(85);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var l;if("throw"!==(o=u(t[o],t,i)).type)return(i=(l=o.arg).value)&&"object"==s(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function f(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,c,"next",t)}function c(t){f(i,n,o,a,c,"throw",t)}a(void 0)}))}}var h=function(t,e){var r,n,c,s,l,f;t.layerType===a.h.SVG_LAYER&&(r=t.width,n=t.height,c=(l=t.data).path,(s=l.name)!==a.w.line&&o()(e)&&((f=t.data).strokeWidth=Math.max(Math.min(f.strokeWidth*e,100),1)),s===a.w.line?(l.strokeWidth=Math.min(t.height,100),Object(u.i)(t)):s===a.w.arrow?(o()(e)||r!==(l=(f=t).pathRenderSize.width)&&((s=t.data).strokeWidth=Math.max(Math.min(s.strokeWidth*(r/l),100),1),f.pathRenderSize={width:r,height:n}),Object(u.g)(t)):(l=(s=(e=t).pathRenderSize).width,f=s.height,r===l&&n===f||(s=r/l,l=n/f,f=i()(c).scale(s,l).toString(),t.data.path=f,e.pathRenderSize={width:r,height:n})))};e.a={onBeforeAddOrUpdate:function(t){var e,r;(r=((r=t.data).points&&delete r.points,t)).pathRenderSize||(e=t.width,t=t.height,r.pathRenderSize={width:e,height:t})},onBeforeResizeUpdate:function(t){h(t)},onBeforeScaleUpdate:function(t){h(t)},onBeforeSaveAsync:function(t,e){return d(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete t.pathRenderSize;case 2:case"end":return e.stop()}}),e)})))()},getResultCanvasAsync:function(t,e){return d(l().mark((function r(){var n,o,i,a,u,s;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.width,o=e.height,i=document.getElementById("svg-".concat(t.id))){r.next=4;break}return r.abrupt("return");case 4:return a=Object(c.Kb)(i),a=Object(c.R)(n,o,t,a),r.next=8,Object(c.Ab)(a);case 8:return a=r.sent,u=Object(c.t)(n,o),s=u.canvas,u.ctx.drawImage(a,0,0),r.abrupt("return",s);case 12:case"end":return r.stop()}}),r)})))()},getScaleMinRatio:function(t,e){var r=t.width,n=t.height,o=t.cutHeight;t=t.cutWidth;return 1e10<=Math.floor(r/n*1e10)?(r-r*((n-o)/n))/r:(r-(r-t))/r},getScaleIsNeedLimitSize:function(){return!0},getActiveBaseInfo:function(t){var e;return(t=t.data).name===a.w.line?{cutWidth:1,cutHeight:1}:t.name===a.w.arrow?{cutWidth:(e=Object(u.a)(1)).minWidth,cutHeight:e.height}:{cutWidth:e=2*t.strokeWidth,cutHeight:e}}}},,,function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return i})),(r=n=n||{}).MAC="mac",r.WIN="win";var o=function(){var t=-1<(t=navigator.userAgent.toLowerCase()).indexOf("mtxx-pc")?"MTXX-PC":-1<t.indexOf("mtxx-linux")?"MTXX-LINUX":-1<t.indexOf("mtxx-mac")?"MTXX-MAC":"MTXX-WEB",e=window.navigator.userAgent.toLowerCase();return"MTXX-MAC"==t||/(macintosh)|(mac os x)/.test(e)?n.MAC:n.WIN},i=function(t){return t?t.getBoundingClientRect():{width:0,height:0,top:0,left:0,bottom:0,right:0}}},,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return o.a})),r.d(e,"b",(function(){return B}));var n,o=r(283),i=((e=n=n||{}).delete="delete",e.cut="cut",e.copy="copy",e.paste="paste",e.makeGroup="makeGroup",e.brokeGroup="brokeGroup",e.lock="lock",e.arrow="arrow",e.sortUp="sortUp",e.sortDown="sortDown",e.sortTop="sortTop",e.sortBottom="sortBottom",e.upload="upload",r(0)),a=r.n(i),c=r(29),u=r(22),s=r(7),l=r(13),f=(e=r(9),r.n(e)),d=r(23),h=r(42),p=r(155),y=r(10),g=r(239),m=r(40);function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?b(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e=Object(g.c)()===g.a.MAC?"mac":"win";var w="".concat(e,"Menu"),O=function(){return[{name:"\u4e0a\u4f20",disabled:!1,keyName:"",type:n.upload},{name:"\u590d\u5236",disabled:!1,keyName:m.b[m.a.copy][w],type:n.copy},{name:"\u526a\u5207",disabled:!1,keyName:m.b[m.a.cut][w],type:n.cut},{name:"\u7c98\u8d34",disabled:!1,keyName:m.b[m.a.paste][w],type:n.paste}]},x=r(173),j=r(19);function _(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?E(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1132);var k=["image/jpeg","image/jpg","image/png","image/heic"],S=a.a.memo((function(t){function e(t){var e;(t=null!=t&&null!=(e=t.target)&&e.files.length?_(null==t||null==(e=t.target)?void 0:e.files):[])&&j.a.emit(o.a.add,t,{x:r,y:n})}var r=t.x,n=t.y,c=Object(i.useRef)(null);return Object(i.useEffect)((function(){var t;return null!=(t=c.current)&&t.addEventListener("change",e),function(){var t;null!=(t=c.current)&&t.removeEventListener("change",e)}}),[]),a.a.createElement("div",{className:"contextmenu-upload",onClick:function(){c.current&&c.current.click()}},a.a.createElement("input",{type:"file",ref:c,multiple:!0,accept:k.join(","),style:{display:"none"}}),a.a.createElement(x.a,{name:"plus",fontSize:20}),"\u6dfb\u52a0\u56fe\u7247")}));function L(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?L(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?M(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t){function e(t){return(t?[].concat(v(O()),[{name:"\u6210\u7ec4",disabled:!1,line:!0,keyName:m.b[m.a.makeGroup][w],type:n.makeGroup},{name:"\u89e3\u7ec4",disabled:!1,keyName:m.b[m.a.brokeGroup][w],type:n.brokeGroup},{name:"\u56fe\u5c42\u6392\u5e8f",disabled:!1,line:!0,type:n.arrow,children:[{name:"\u7f6e\u9876",disabled:!0,keyName:m.b[m.a.sortTop][w],type:n.sortTop},{name:"\u7f6e\u5e95",disabled:!0,keyName:m.b[m.a.sortBottom][w],type:n.sortBottom},{name:"\u4e0a\u79fb\u4e00\u5c42",disabled:!0,keyName:m.b[m.a.sortUp][w],type:n.sortUp},{name:"\u4e0b\u79fb\u4e00\u5c42",disabled:!0,keyName:m.b[m.a.sortDown][w],type:n.sortDown}]},{name:"\u9501\u5b9a\u56fe\u5c42",disabled:!1,keyName:m.b[m.a.lock][w],type:n.lock},{name:"\u5220\u9664",disabled:!1,keyName:m.b[m.a.delete][w],type:n.delete}]):O()).map((function(e){if(e.type===n.arrow)return(e.children||[]).forEach((function(t){var e=rt.current;t.type===n.sortTop?t.disabled=null==e?void 0:e.disableTop:t.type===n.sortBottom?t.disabled=null==e?void 0:e.disableBottom:t.type===n.sortDown?t.disabled=null==e?void 0:e.disableDown:t.type===n.sortUp&&(t.disabled=null==e?void 0:e.disableUp)})),e;if(e.type===n.paste)return I(I({},e),{},{disabled:!H});if((e.type===n.copy||e.type===n.cut)&&!t)return I(I({},e),{},{disabled:!0});if(e.type===n.lock)return I(I({},e),{},{name:null!=(r=W)&&r.lock?A.UN_LOCK:A.LOCK});if([n.brokeGroup,n.makeGroup].includes(e.type)){if((null==(r=W)?void 0:r.layerType)!==d.a.GROUP_LAYER)return I(I({},e),{},{disabled:!0});var r=null==(r=W.data)?void 0:r.isExtraGroup,o=(null==(o=W.data)?void 0:o.isTextMaterial)&&(null==(o=W.data)?void 0:o.isVip)||!1;if(e.type===n.brokeGroup)return I(I({},e),{},{disabled:r||o});if(e.type===n.makeGroup)return I(I({},e),{},{disabled:!r})}return I(I({},e),{},{disabled:!(null==(o=W)||!o.lock)})}))}function r(t,e){if(t.stopPropagation(),!e.disabled&&e.type!==n.arrow){var r;t=e.type;switch(W&&(r=null==(e=W.data)?void 0:e.isExtraGroup),j.a.emit(o.a.track,t),t){case n.sortTop:null!=(i=rt.current)&&null!=(a=i.setTop)&&a.call(i);break;case n.sortBottom:null!=(a=rt.current)&&null!=(i=a.setBottom)&&i.call(a);break;case n.sortUp:null!=(i=rt.current)&&null!=(a=i.setUp)&&a.call(i);break;case n.sortDown:null!=(a=rt.current)&&null!=(i=a.setDown)&&i.call(a);break;case n.copy:G.setCopyInfo(W),Y(W||null);break;case n.cut:if(!(i=U.action()))return;G.setCopyInfo(i,0),Y(i||null);break;case n.paste:G.copyInfo&&z.action(G.copyInfo,k);break;case n.lock:var i=(a=W).id,a=a.lock;N.action(i,!a),R.setActiveInfoById(i);break;case n.brokeGroup:r||J.action(!0);break;case n.makeGroup:r&&J.action(!1);break;case n.delete:U.action(!0)}null!=b&&b()}}var u=t.contextMenuInfo,s=t.contextWrapInfo,b=t.destroyContextMenu,x=(t.uploadToStage,u.clientX),_=u.clientY,E=u.show,k=u.layerCenterPoint,L=s.bottom,M=s.right,P=Object(i.useRef)(null),R=Object(y.h)(),N=(t=Object(y.m)(),Object(h.p)()),D=Object(c.i)(),F=(u=Object(y.p)()).getLayer,B=u.getLayers,G=Object(h.m)(),U=Object(h.n)(),z=Object(h.l)(),W=t.getActiveLayer(),K=(u=(s=T(Object(i.useState)([]),2))[0],s[1]),H=(t=T(Object(i.useState)(null),2))[0],Y=t[1],V=(s=T(Object(i.useState)(I({},C)),2))[0],X=s[1],q=Object(y.f)().delActiveLayer,$=Object(y.x)().hide,Z=Object(y.u)(),J=Object(p.g)(),Q=(t=T(Object(i.useState)(!0),2))[0],tt=t[1],et=Object(h.j)(),rt=Object(i.useRef)(),nt=(Object(i.useEffect)((function(){if(!E)return X(I({},V));P.current&&(nt(),setTimeout((function(){var t=(e=Object(g.b)(P.current)).width,e=e.height;t=I({},it(t,e,x,_));Y(G.copyInfo),X(t)}),100))}),[P.current,E,x,_]),Object(i.useEffect)((function(){nt()}),[H]),function(){$();var t=Z.getHoverId();if(Z.destroy(),t&&(null==(r=W=F(t))||!r.parentId))return ot(W),r=e(!0),K(r),void R.setActiveLayer(t);var r=B().filter((function(t){return!t.hidden})).filter((function(t){return![d.a.BACKGROUND_LAYER,d.a.MAIN_LAYER,d.a.WATERMARK].includes(t.layerType)}));t=Object(d.p)({x:x,y:_});(r=Object(d.j)(D,r,t,!1))?null!=(t=W)&&t.id&&!W.parentId?(ot(W),t=e(!0),K(t)):(W=F(r),ot(W),t=e(!0),K(t),R.setActiveLayer(r)):(t=e(!1),K(t),q())}),ot=function(t){t&&(rt.current=et.getSortData(t))},it=function(t,e,r,n){var o=r,i=n;return M-t<r?(o=M-10-t,tt(!1)):tt(!0),{left:o,top:i=L-e<n?L-10-e:i}};return a.a.createElement("ul",{style:I({},V),className:"l-contentmenu",ref:P},u.map((function(t,e){return t.type===n.upload?a.a.createElement("li",{className:"l-contentmenu__upload",key:t.type},a.a.createElement(S,I({},k))):a.a.createElement("div",{key:t.type},t.line?a.a.createElement("li",{className:"l-contentmenu__line"}):null,a.a.createElement("li",{className:f()("l-contentmenu__item",{disabled:t.disabled,arrow:t.type===n.arrow}),onClick:function(e){return r(e,t)}},t.children?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:f()("l-contentmenu","l-contentmenu-children",{left:!Q,right:Q})},t.children.map((function(t,e){return a.a.createElement("div",{className:f()("l-contentmenu__item",{line:t.line,disabled:t.disabled}),key:t.type,onClick:function(e){return r(e,t)}},a.a.createElement("span",null,t.name),t.keyName?a.a.createElement("span",null,t.keyName):null)})))):null,a.a.createElement("span",null,t.name),t.keyName?a.a.createElement("span",null,t.keyName):null,t.type===n.arrow?a.a.createElement("span",null,a.a.createElement(l.d,{name:"chevronRightFill",fontSize:18})):null))})))}r(1133),(e=A=A||{}).LOCK="\u9501\u5b9a\u56fe\u5c42",e.UN_LOCK="\u89e3\u9501\u56fe\u5c42";var A,C={visibility:"hidden"};function R(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?F(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1134);var B=function(t){t=t.children;var e,r=Object(u.d)(),n=Object(c.i)(),o=Object(u.o)().canUseQuickAdd,l=(e=D(Object(i.useState)({clientX:0,clientY:0,show:!1,layerCenterPoint:{x:0,y:0}}),2))[0],f=e[1],d=(e=D(Object(i.useState)({bottom:0,left:0,right:0,top:0}),2))[0],h=e[1],p=Object(i.useRef)(null),y=Object(u.r)(),g=(Object(i.useEffect)((function(){r&&g()}),[r]),Object(i.useEffect)((function(){p.current&&setTimeout((function(){p.current&&function t(){var e=function(){var t=p.current.getBoundingClientRect();return{bottom:t.bottom,top:t.top,left:t.left,right:t.right,width:t.width,height:t.height}}(),r=e.bottom,n=e.top,o=e.left,i=e.right,a=e.width;e=e.height;a&&e?h({bottom:r,top:n,left:o,right:i}):setTimeout((function(){t()}),100)}()}),100)}),[p.current]),function(){f(N(N({},l),{},{show:!1})),y(!1)});return Object(i.useEffect)((function(){return document.addEventListener("click",g),function(){document.removeEventListener("click",g)}}),[]),a.a.createElement("div",{onContextMenu:function(t){var e;t.preventDefault(),o()&&(e=t.clientX,t=t.clientY,y(!0),f({clientX:e,clientY:t,show:!0,layerCenterPoint:Object(s.gb)({x:e,y:t},n)}))},className:"l-contentmenu-wrap",ref:p},l.show?a.a.createElement(a.a.Fragment,null,a.a.createElement(P,{contextMenuInfo:l,contextWrapInfo:d,destroyContextMenu:g})):null,t)}},,,,,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return g})),r.d(e,"a",(function(){return v})),r.d(e,"c",(function(){return b})),r.d(e,"e",(function(){return O})),r.d(e,"d",(function(){return x}));e=r(15);var n=r.n(e),o=(e=r(391),r.n(e)),i=(e=r(31),r.n(e)),a=r(19),c=r(2),u=r(7),s=r(73),l=r(254),f=r(110);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=l.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==d(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=p),a(p,"constructor",f),f.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,c,"next",t)}function c(t){p(i,n,o,a,c,"throw",t)}a(void 0)}))}}var g=function t(e){return e.forEach((function(e){var r;w(e),e.children&&t(e.children),o()(e.materialIds)&&(e.materialIds=(e=e.materialIds,r=Object.create(null),e.forEach((function(t,e){t&&!t.includes("undefined")&&(r[e]=t)})),r))}))},m=function(){var t=y(h().mark((function t(e,r){var n,o,i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.layerType!==c.h.GROUP_LAYER){t.next=9;break}o=e.children||[],i=0,a=o.length;case 3:if(i<a)return t.next=6,m(o[i],r);t.next=9;break;case 6:i++,t.next=3;break;case 9:return t.next=11,null==(n=Object(s.a)(e.layerType))?void 0:n.onBeforeSaveAsync(e,r);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),v=function(){var t=y(h().mark((function t(e){var r,n,o,i,a=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=1<a.length&&void 0!==a[1]&&a[1],n=0,o=e.length;case 2:if(n<o)return i=e[n],t.next=6,m(i,r);t.next=9;break;case 6:n++,t.next=2;break;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(t){t.materialIds&&!o()(t.materialIds)&&(t.materialIds=function(t){for(var e=new Map,r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];t[o]&&e.set(o,t[o])}return e}(t.materialIds)),w(t)},w=function(t){t.left=i()(t.left),t.top=i()(t.top),t.width=i()(t.width),t.height=i()(t.height)},O=function(){var t=Object(f.a)().getResultLayers;return{getLayers:function(){return y(h().mark((function e(){var r,o,i,u,s,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a.a.emit(l.a.convert),r=n()(t()),o=new Set,i=0;i<r.length;i++)(u=r[i]).layerType===c.h.GROUP_LAYER&&u.data.isExtraGroup&&o.add(u.id);for(s=[],f=0;f<r.length;f++)(d=r[f]).parentId?o.has(d.parentId)&&(d.parentId=void 0,s.push(d)):o.has(d.id)||s.push(d);return e.next=8,v(s);case 8:return g(s),a.a.emit(l.a.convertEnd,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))()}}},x=function(){var t=O().getLayers;return{drawAsync:function(e,r){var n=arguments;return y(h().mark((function o(){var i,f,d,p,g,m,v,b,w,O,x,j,_,E,k,S,L,I,T,M,P,A,C;return h().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=2<n.length&&void 0!==n[2]?n[2]:"jpeg",f=3<n.length?n[3]:void 0,d=4<n.length?n[4]:void 0){o.next=8;break}return o.next=7,t();case 7:d=o.sent;case 8:for(a.a.emit(l.a.draw),(new Date).getTime(),p={width:e,height:r},I=Object(u.t)(e,r),m=I.canvas,v=I.ctx,b=function(t){return!t.hidden&&0<t.width&&0<t.height},w=[],O=function t(e){var r;b(e)&&(e.layerType===c.h.GROUP_LAYER&&null!=(r=e.children)&&r.forEach((function(e){t(e)})),e.layerType===c.h.TEXT_LAYER)&&w.push(e)},x=0,j=d.length;x<j;x++)_=d[x],O(_);return o.next=19,null==(I=Object(s.a)(c.h.TEXT_LAYER))||null==(L=I.createTextSpriteAsync)?void 0:L.call(I,w);case 19:E=function(){var t=y(h().mark((function t(e){var r,n,o,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b(e)){t.next=2;break}return t.abrupt("return");case 2:if(e.layerType!==c.h.GROUP_LAYER){t.next=11;break}r=e.children||[],n=0,o=r.length;case 5:if(n<o)return t.next=8,E(r[n]);t.next=11;break;case 8:n++,t.next=5;break;case 11:return t.next=13,null==(i=Object(s.a)(e.layerType))?void 0:i.getResultCanvasAsync(e,p);case 13:(i=t.sent)&&v.drawImage(i,0,0);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=0,S=d.length;case 21:if(k<S)return L=d[k],o.next=25,E(L);o.next=28;break;case 25:k++,o.next=21;break;case 28:if(f)return I=Object(u.t)(e,r),T=I.canvas,M=I.ctx,o.next=32,Object(u.zb)(f);o.next=38;break;case 32:A=o.sent,C=A.width,P=A.height,C=Object(u.L)(C,P,e,r),M.drawImage(A,C.dx,C.dy,C.dw,C.dh),v.globalCompositeOperation="destination-in",v.drawImage(T,0,0);case 38:return g="jpeg"===i||"jpg"===i?(P=Object(u.t)(e,r),A=P.canvas,(C=P.ctx).fillStyle="#fff",C.fillRect(0,0,e,r),C.drawImage(m,0,0),A):m,(new Date).getTime(),a.a.emit(l.a.drawEnd),o.abrupt("return",g);case 43:case"end":return o.stop()}}),o)})))()},scaleResult:function(t,e,r){return y(h().mark((function n(){var o,i,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.width,i=t.height,o=Object(u.L)(o,i,e,r),i=Object(u.t)(e,r),a=i.canvas,i.ctx.drawImage(t,o.dx,o.dy,o.dw,o.dh),n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})))()}}}},function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),(r=n=n||{}).draw="r_draw_event",r.drawEnd="r_draw_end_event",r.convert="r_convert_event",r.convertEnd="r_convert_end_event",r.materialAdd="r_material_add_event"},,,,,,,function(t,e,r){"use strict";r.d(e,"d",(function(){return x})),r.d(e,"c",(function(){return j})),r.d(e,"a",(function(){return _}));var n=r(0),o=r.n(n),i=(r(1139),r(9)),a=r.n(i),c=r(42),u=r(19),s=r(46),l=r(10),f=r(2),d=r(7),h=r(24),p=r(383);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(){g=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,m=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==y(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function m(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,c,"next",t)}function c(t){m(i,n,o,a,c,"throw",t)}a(void 0)}))}}var b=Symbol("dropImage");function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?O(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var x=function(t){var e=t.data.maskURL;return!(t.layerType!==f.h.IMAGE_LAYER||!e)},j=function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=(e=Object(d.gb)(e,r),t.width/2+t.left),i=t.height/2+t.top;o=Object(d.Ib)({x:e.x-o,y:-(e.y-i)},n?0:t.rotate),e={x:[-t.width/2,t.width/2],y:[-t.height/2,t.height/2]};return i=e=n?{x:[-42/r,42/r],y:[-20/r,20/r]}:e,!((t=o).x<i.x[0]||t.x>i.x[1]||t.y<i.y[0]||t.y>i.y[1])},_=function(t){var e=t.dropLayer,r=t.canDrop;t=t.scale;return o.a.createElement("div",{className:"l-render-drop-image"},o.a.createElement(c.a,{layer:e},o.a.createElement("div",{className:a()({"l-render-drop-image__btn":!0,"drag-in":!r,release:r}),style:{transform:" translate(-50%, -50%) scale(".concat(1/t,") rotate(-").concat(e.rotate,"deg)")}},r?"\u91ca\u653e":"\u62d6\u5165","\u56fe\u7247")))};e.b=function(t){var e=t.scale,r=Object(l.p)().getLayers,i=(0,Object(l.n)().getActiveLayer)(),a=(t=w(Object(n.useState)(null),2))[0],y=t[1],m=(t=w(Object(n.useState)(!1),2))[0],O=t[1];E=Object(l.p)().getLayer,t=Object(l.w)(),k=t.cloneLayer,S=t.delLayer,L=t.addOrUpdate,I=Object(h.e)(),T=Object(p.a)().replaceImage,M=Object(l.v)().getLayerIndexMap,Object(h.i)(b,{undo:function(t){return v(g().mark((function e(){var r,n,o,i,a,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.fromLayer,n=t.toLayer,o=t.delIndexMap,c=n.data,i=c.url,a=c.naturalWidth,c=c.naturalHeight,T(i,n.id,a,c,!1),L({layer:r,insertIds:o});case 4:case"end":return e.stop()}}),e)})))()},redo:function(t){return v(g().mark((function e(){var r,n,o,i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.fromLayer,n=t.toLayer,a=r.data,o=a.url,i=a.naturalWidth,a=a.naturalHeight,n.data.url=o,T(o,n.id,i,a,!1),S(r);case 5:case"end":return e.stop()}}),e)})))()}});var E,k,S,L,I,T,M,P=function(t,e){var r,n,o,i=E(e);t&&i&&(o=M(t.id).layerIndexMap,I.push(b,{fromLayer:t,toLayer:k(e),delIndexMap:o}),r=(o=t.data).url,n=o.naturalWidth,o=o.naturalHeight,i.data.url=r,T(r,e,n,o,!1,t.materialIds),S(t))},A=(t=w(Object(n.useState)(null),2))[0],C=t[1],R=Object(l.w)().cloneLayer,N=Object(l.h)().setActiveLayer;return Object(n.useEffect)((function(){function t(){m&&a&&A&&P(A,a.id),m&&a&&A&&N(a.id),y(null),O(!1)}return u.a.on(c.c.drag,t),function(){u.a.off(c.c.drag,t)}}),[a,A,m]),Object(s.e)((function(t){var n,o,a,c;!i||x(i)||i.layerType!==f.h.IMAGE_LAYER||Object(d.m)(t.target,[f.a.MOVE,f.a.LAYER])||(t.isStart?C(R(i)||null):(n=A&&document.getElementById(A.id),t.isEnd&&n&&(n.style.opacity="1"),o={x:t.x,y:t.y},a=null,c=r(),Object(d.ec)(c,(function(t){t.id!==i.id&&x(t)&&j(t,o,e)&&(a=t)})),a?(y(a),n&&!t.isEnd&&(n.style.opacity="0.3"),j(a,o,e,!0)?O(!0):O(!1)):(y(null),O(!1),n&&!t.isEnd&&(n.style.opacity="1"))))})),a?o.a.createElement(_,{dropLayer:a,scale:e,canDrop:m}):null}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n=r(13),o=r(98),i=(e=r(9),r.n(e)),a=(e=r(180),r.n(e)),c=(e=r(126),r.n(e)),u=r(0),s=r.n(u);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?f(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1046);var d=n.w.CustomTitle,h=["#FFFFFF","#000000","#EE3F27","#F6B35C","#F17D30","#F8F850","#5DD840","#6BF6F5","#2B7BF7","#8546F5"],p=function(t){function e(t){I(t.color),T.current=t.transparent,m(t.color,t.transparent)}var r=void 0===(r=t.showIcon)||r,f=void 0===(f=t.fastSelect)?0:f,p=void 0===(p=t.fastSelectTransparent)||p,y=void 0===(y=(t.presetColors,t.fastPresetColors))?h:y,g=void 0===(b=t.color)?"#ffffffff":b,m=t.setColor,v=t.setColorAfter,b=void 0===(b=t.title)?"":b,w=void 0===(w=t.titleSize)?"12px":w,O=void 0===(O=t.titleColor)?"var(--text--normal_2)":O,x=t.placement,j=void 0===(j=t.style)?{}:j,_=void 0===(_=t.width)?"100%":_,E=void 0===(E=t.height)?"36px":E,k=void 0!==(k=t.isGradient)&&k,S=t.onClick,L=(t=l(Object(u.useState)(""),2))[0],I=t[1],T=(Object(u.useRef)(""),Object(u.useRef)(!1));Object(u.useEffect)((function(){var t=g||"#ffffffff";T.current=!g||9===g.length&&/00$/gi.test(g),c()(t,L)||I(t)}),[g]),t=b,a()(b)&&(t=b?s.a.createElement("span",{style:{fontSize:w,color:O},className:"b-color-pick_text"},b):null),w=k?s.a.createElement(o.a,{color:L,transparent:T.current,onChange:e,onChangeComplete:function(t){null!=v&&v(t.color,t.transparent)}}):s.a.createElement(o.c,{color:L,transparent:T.current,onChange:e,onChangeComplete:function(t){null!=v&&v(t.color,t.transparent)}}),O=s.a.createElement("div",{className:"app-color-picker",style:j},s.a.createElement(n.k,{destroyTooltipOnHide:!0,overlayClassName:"app-color-picker-Popover",content:w,trigger:"click",placement:x||"rightBottom"},r?s.a.createElement("div",{className:"color-group-icon"}):null,s.a.createElement("div",{className:i()("color-btn",{"no-icon":!r}),style:{width:_,height:E},onClick:function(){return null==S?void 0:S()}},s.a.createElement("div",{className:"wrap"},s.a.createElement("div",{className:"color",style:{background:L||"#fff"}}),s.a.createElement("div",{className:"mosaic-bg"})))));return s.a.createElement("div",null,s.a.createElement(d,{leftNode:t,rightNode:O}),0<f?s.a.createElement("div",{className:"fast-select-color"},p?s.a.createElement("div",{className:i()("fast-select-color-item",{active:T.current}),onClick:function(){var t="#ffffff00";T.current=!0,I(t),m(t,!0),null!=v&&v(t,!0)}},s.a.createElement("div",{className:"mosaic-bg"})):null,y.map((function(t,e){return s.a.createElement("div",{key:e,style:{backgroundColor:t},className:i()("fast-select-color-item",{active:!T.current&&t.padEnd(9,"f").toLocaleLowerCase()===(L||"").padEnd(9,"f").toLocaleLowerCase()}),onClick:function(){var e=t.padEnd(9,"f");T.current=!1,I(e),m(e,!1),null!=v&&v(e,!1)}})})).slice(0,p?f-1:f)):null)}},,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return f})),r.d(e,"c",(function(){return g})),r.d(e,"d",(function(){return m})),r.d(e,"f",(function(){return u.b})),r.d(e,"e",(function(){return u.a})),r.d(e,"h",(function(){return u.c})),r.d(e,"i",(function(){return u.d})),r.d(e,"j",(function(){return u.e})),r.d(e,"g",(function(){return v}));var n=r(0);r(24),Symbol("templateName");var o=r(17),i=function(){var t=Object(o.b)((function(t){return t.sdk.editorManagerModel.setIsShowCollapse}));return{close:function(){t(!1)},open:function(){t(!0)}}},a=r(280),c=r(203),u=r(327);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?l(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var f=function(){function t(){var t=(e=(null==(e=document.body)?void 0:e.getBoundingClientRect())||{width:0,height:0}).width,e=e.height,n=(t=t-c.b,c.b);r&&(t-=c.a+10,n+=c.a+10),o&&(t-=c.d),e-=c.c;f(t),h(e),y(n)}var e,r=Object(u.a)(),o=Object(u.b)(),i=Object(a.a)(),l=(e=s(Object(n.useState)(0),2))[0],f=e[1],d=(e=s(Object(n.useState)(0),2))[0],h=e[1],p=(e=s(Object(n.useState)(0),2))[0],y=e[1];return Object(n.useLayoutEffect)((function(){t()}),[]),Object(n.useEffect)((function(){t()}),[r,o,i]),{left:p,width:l,height:d}};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=l.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==d(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=p),a(p,"constructor",f),f.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var y=new Map,g=function(){function t(){var t="";return r((function(e){t=e})),t}var e=Object(o.b)((function(t){return t.sdk.editorManagerModel.setFeature})),r=Object(o.b)((function(t){return t.sdk.editorManagerModel.getFeature}));return{getCurFeature:t,use:function(r){return n=h().mark((function n(){var o,i;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==(i=y.get(t()))||null==(o=i.leave)?void 0:o.call(i);case 2:return n.next=4,null==(o=y.get(r))||null==(i=o.enter)?void 0:i.call(o);case 4:e(r);case 5:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){p(i,r,o,a,c,"next",t)}function c(t){p(i,r,o,a,c,"throw",t)}a(void 0)}))}();var n},register:function(t,e){y.set(t,e)}}},m=function(){var t=Object(o.b)((function(t){return t.sdk.editorManagerModel.destroy}));return{init:function(){t()}}},v=function(){var t=Object(o.b)((function(t){return t.sdk.editorManagerModel.setIsShowPanel}));return{close:function(){t(!1)},open:function(){t(!0)}}}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return p})),r.d(e,"b",(function(){return g})),r.d(e,"d",(function(){return b})),r.d(e,"e",(function(){return w}));e=r(606);var n=r.n(e),o=(e=(r(200),r(186)),r.n(e)),i=r(34),a=r(2),c=(r(133),r(181));function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=l(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==u(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}var d="undefined"!=typeof FontFace,h=function(){var t=f(s().mark((function t(e,r,n){var i,u,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=new Map,u=[],Object(c.c)(e,function(){var t=f(s().mark((function t(e){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.layerType===a.h.TEXT_LAYER&&(r=e.data,e.useFontFamilySubset||(n="".concat(r.fontFamily,"-subset"),i.get(n)?i.set(n,"".concat(i.get(n)).concat(r.text)):i.set(n,"".concat(r.text))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),l=new Map,Object(c.c)(e,function(){var t=f(s().mark((function t(e){var c,f,d,h,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.layerType!==a.h.TEXT_LAYER){t.next=16;break}if(c=e.data,e.useFontFamilySubset){t.next=16;break}if(f="".concat(c.fontFamily,"-subset"),d=i.get(f)){t.next=7;break}return t.abrupt("return");case 7:o.a,h="".concat(f,"-").concat(o.a.hashBinary(d)),e.data.fontFamilySubset=h,e.useFontFamilySubset=!0,null!=n&&n(e),p=r.find((function(t){return t.font_name===c.fontFamily})),s=p.zip_url,y=d,p="https://font-tool.meitu.com/subset/file?src=".concat(encodeURIComponent(s),"&type=woff2&chars=").concat(encodeURIComponent(y)),l.has(h)||(u.push({font_name:h,zip_url:p}),l.set(h,1));case 16:case"end":return t.stop()}var s,y}),t)})));return function(e){return t.apply(this,arguments)}}()),u.length)return t.next=9,w(u);t.next=9;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r,n){return t.apply(this,arguments)}}();function p(t){return null==t?void 0:t.replace(/\./g,"")}function y(t,e){return new Promise(function(){var r=f(s().mark((function r(o,a){var c,u;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.split("?")[0].split("!")[0].split("."),c=!0,v.has(t))return r.abrupt("return",o({font:"",isWoff2:c}));r.next=4;break;case 4:v.add(t),(u=new XMLHttpRequest).open("GET",e,!0),u.responseType="blob",u.onerror=function(e){v.delete(t),a(e)},u.onload=function(){var e;200===this.status||206===this.status||304===this.status?((e=new FileReader).addEventListener("load",(function(){var r,u,s,l=e.result;(d?m(t,l,c).then((function(t){return o({font:t,isWoff2:c})})):(r=t,u=l,s=c,new Promise((function(t,e){if(i.a.getFont(r))return t(u);var o=document.createElement("style"),a=new n.a(p(r));o.setAttribute("data-font-name",r),o.setAttribute("id",r),o.innerHTML=g(r,u,s),document.getElementsByTagName("head")[0].appendChild(o),i.a.setFont(r,u,s),a.load(void 0,36e5).then((function(){return t(u)})).catch((function(e){t(u)}))})).then((function(){return o({font:l,isWoff2:c})})))).catch(a)})),e.addEventListener("error",(function(e){v.delete(t),a(e)})),d?e.readAsArrayBuffer(this.response):e.readAsDataURL(this.response)):(v.delete(t),a(Object.assign(new Error("unknown error"),{xmlHttpRequest:u})))},u.send();case 11:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}())}var g=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return e?"\n      @font-face {\n        font-family: ".concat(p(t),";\n        font-display: swap;\n        src:url('").concat(e,"') ").concat(r?"format('woff2')":"format('truetype')",";\n      }\n    "):""},m=function(){var t=f(s().mark((function t(e,r,n){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return","");case 2:if(i.a.getFont(e))return t.abrupt("return","");t.next=4;break;case 4:return o=new FontFace(p(p(e)),r,{display:"swap"}),document.fonts.add(o),o="data:binary/octet-stream;base64,".concat(function(t){for(var e="",r=new Uint8Array(t),n=0,o=r.byteLength;n<o;n++)e+=String.fromCharCode(r[n]);return window.btoa(e)}(r)),i.a.setFont(e,o,n),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),v=new Set,b=function(){var t=f(s().mark((function t(e,r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,r);case 2:(n=t.sent).font,n.isWoff2;case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),w=function(t){try{var e=t.map((function(t){var e=t.font_name;t=t.zip_url;return b(e,t)}));return Promise.all(e)}catch(t){}}},function(t,e,r){"use strict";var n=r(0);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(){var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?o(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(n.useState)({width:window.innerWidth,height:window.innerHeight}),2),e=t[0],r=t[1];return Object(n.useEffect)((function(){function t(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),e}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));e=r(220);var n=r.n(e),o=r(7),i=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"jpeg",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.5,a=Object(o.Lb)(r),c=("png"===r&&(i=1),"".concat(e,".").concat(r));t.toBlob((function(t){n()(t,c)}),a,i)}},,function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),(r=n=n||{}).paste="CONTEXT_MENU_PASTE_FILES_TO_STAGE",r.add="CONTEXT_MENU_ADD_FILES_TO_STAGE",r.track="CONTEXT_MENU_TRACK"},function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return l})),r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return k}));var n=r(24),o=r(10),i=Symbol("imageMattingAction"),a=function(){var t=Object(n.e)(),e=Object(o.w)().addOrUpdate,r=Object(o.h)().setActiveLayer;return Object(n.i)(i,{undo:function(t){t=t.oldInfo,e(t),r(t.id)},redo:function(t){t=t.newInfo,e(t),r(t.id)}}),{action:function(r){var n=r.oldInfo;r=r.newInfo;t.push(i,{oldInfo:n,newInfo:r}),e(r)}}},c=(e=r(12),{isImageCutout:!1,imageCutoutInfo:{originImage:"",resultImage:""},setIsImageCutout:Object(e.b)((function(t,e){t.isImageCutout=e})),setImageCutoutInfo:Object(e.b)((function(t,e){t.imageCutoutInfo=e})),destroy:Object(e.b)((function(t){t.isImageCutout=!1,t.imageCutoutInfo={originImage:"",resultImage:""}}))}),u=(e=Object(e.f)()).useStoreState,s=e.useStoreActions,l=(e.useStoreDispatch,function(){var t=u((function(t){return t.imageMattingModel.imageCutoutInfo})),e=u((function(t){return t.imageMattingModel.isImageCutout})),r=s((function(t){return t.imageMattingModel.setIsImageCutout})),n=s((function(t){return t.imageMattingModel.setImageCutoutInfo})),o=s((function(t){return t.imageMattingModel.destroy}));return{imageCutoutInfo:t,isImageCutout:e,setIsImageCutout:r,setImageCutoutInfo:n,initImageMattingModel:function(){o()}}}),f=(e=r(15),r.n(e)),d=r(0),h=r.n(d),p=r(23);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,g=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function m(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==y(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(g,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),a(g,i,"Generator"),a(g,n,(function(){return this})),a(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function b(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function w(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){b(i,n,o,a,c,"next",t)}function c(t){b(i,n,o,a,c,"throw",t)}a(void 0)}))}}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?x(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1062);var j=null,_=null,E=["c-image-matting-cancel","c-image-matting-confirm"],k=h.a.memo((function(t){var e=t.onCancel,r=t.onConfirm,n=(t=l()).initImageMattingModel,i=t.isImageCutout,c=(t=t.imageCutoutInfo).originImage,u=t.resultImage,s=a(),y=(t=Object(o.g)(),Object(o.q)().getLayer),g=O(Object(d.useState)({}),2),b=g[0],x=g[1],k=((null==t?void 0:t.layerType)===p.a.GROUP_LAYER?null==t?void 0:t.pickId:null==t?void 0:t.id)||"",S=y(k),L=function(){var t=w(v().mark((function t(){var r,o,i,a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(),r=f()(j),o=f()(r),r&&o&&(i=o.data,a=r.data,i.url=c,a.url=u,s.action({oldInfo:r,newInfo:o})),j=null,e&&e();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(),j=null,r&&r();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.useEffect)((function(){i&&(!S&&i&&u||S&&i&&u&&_!==S.id?I():S&&((j=f()(S)).data.url=c,_=k))}),[S,i,u]),Object(d.useEffect)((function(){function t(t){t=t.target,E.includes(t.className)||i&&u&&I()}return document.addEventListener("mousedown",t,!0),function(){document.removeEventListener("mousedown",t,!0)}}),[i,u]),Object(d.useEffect)((function(){var t;if(k&&i)return(t=function(){var t=(r=document.getElementById(k).getBoundingClientRect()).left,e=r.top,r=r.width;x({top:e-35,left:t+r-82,visibility:i?"initial":"hidden"})})(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[k,i]),i&&u&&S?h.a.createElement("div",{className:"c-image-matting-buttons",style:m({},b)},h.a.createElement("div",{className:"c-image-matting-cancel",onClick:function(t){return L()}},"\u53d6\u6d88"),h.a.createElement("div",{className:"c-image-matting-confirm",onClick:function(t){return I()}},"\u5e94\u7528")):null}))},function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return S})),r.d(e,"b",(function(){return L})),r.d(e,"d",(function(){return T})),r.d(e,"e",(function(){return w.a}));var n=r(10),o=r(2),i=function(){var t=Object(n.p)().getLayer,e=Object(n.w)().addOrUpdate;return{action:function(r){r&&((null==(r=t(r))?void 0:r.layerType)===o.h.TEXT_MATERIAL_LAYER&&e(r),null!=r)&&r.parentId&&(null==(r=t(r.parentId))?void 0:r.layerType)===o.h.TEXT_MATERIAL_LAYER&&e(r)}}},a=r(13),c=(e=r(15),r.n(e)),u=r(139),s=r(42),l=(e=r(19),r(86)),f=r(45),d=r(170),h=r(34),p=r(7),y=r(279),g=r(133),m=r(217),v=r(307),b=r(136),w=r(212);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(){x=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==O(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function j(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){j(i,n,o,a,c,"next",t)}function c(t){j(i,n,o,a,c,"throw",t)}a(void 0)}))}}var E=0,k=(e.b.onInit((function(){E=0})),{}),S={set:function(t,e){e=I(e,t),k[t]=e},get:function(t){return c()(k[t])}},L=function(t,e,r,i){var a=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],c=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];a&&function t(e,r){var i,a;e.id=Object(u.a)(),e.layerType===o.h.TEXT_LAYER&&(c&&null!=(i=Object(n.d)(o.h.TEXT_LAYER))&&null!=(a=i.onBeforeAddOrUpdate)&&a.call(i,e),e.forceWidth=!0),r&&(e.parentId=r),(e.children||[]).forEach((function(r){t(r,e.id)}))}(t),e&&(a=Object(d.c)(t),Object(d.f)(t,a,e)),r&&Object(g.z)(t,r.left,r.top),i&&(e=(a=Object(d.c)(t)).get(t.id))&&(a.delete(t.id),Object(d.a)(t,e,a,i))},I=function(t,e){return t.materialIds={},t.materialIds["advanced-text-material"]=[e],t.layerType===o.h.GROUP_LAYER&&(t=Object(v.b)(t)),Object(p.cc)(t,(function(t){t.layerType===o.h.IMAGE_LAYER&&(t.data.stretchOption=o.u.fill)})),t.data.isTextMaterial=!0,t},T=function(){var t,e=Object(f.d)(),r=Object(l.b)(),i=Object(s.h)(),c=(t=Object(w.a)()).getRendingStatus,d=t.renderTextMaterial;return(t=(Object(n.h)().setActiveLayer,Object(n.L)())).scaleActiveLayer,t.moveActiveLayer,Object(n.w)().cloneLayer,{addTextMaterialLayer:function(t,n,s,l){return _(x().mark((function f(){var p,v,w,O,j,_,k,S,L;return x().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(n){f.next=3;break}return a.i.warning("\u8bf7\u9009\u62e9\u65b0\u7684\u7d20\u6750\u5305"),f.abrupt("return");case 3:if(c())return a.i.warning("\u82b1\u5b57\u521d\u59cb\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),f.abrupt("return");f.next=6;break;case 6:return e.show(),p=Object(u.a)(),E++,(v=new Map).set(o.o.TEXT_MATERIAL,["".concat(t)]),v=Object(g.y)({id:p,left:0,top:0,width:0,height:0,children:[],data:{materialId:t,materialZip:n},materialIds:v}),f.next=14,d(v,s,l,"new",m.a);case 14:if((w=f.sent)&&w.layer&&null!=(j=w.resImage)&&j.canvas){f.next=18;break}return e.hide(),f.abrupt("return");case 18:if(O=[],j=function(){var t;return null!=(t=w.textLayers)&&t.length?w.textLayers.sort((function(t,e){return t.info.mTextIndex-e.info.mTextIndex})).map((function(t){var e,n=t.info.mHorizontal?o.A.HORIZONTAL_TB:o.A.VERTICAL_RL,i=[],a=[],c=[],s=[],l=t.info.mTextFont,f=r.find((function(t){return t.font_name===l}));return f||(f=r.find((function(t){return t.font_name===o.c.name})),l=o.c.name),f&&Object(y.d)(l,f.zip_url),null!=(e=f)&&e.material_id&&O.push("".concat(f.material_id)),t.info.mGlowConfig&&i.push({width:+t.info.mGlowConfig.strokeWidth.toFixed(1),blur:+t.info.mGlowConfig.blur.toFixed(1),color:Object(b.c)("rgba(".concat(255*t.info.mGlowConfig.r,", ").concat(255*t.info.mGlowConfig.g,", ").concat(255*t.info.mGlowConfig.b,", ").concat(t.info.mGlowConfig.a,")")),hidden:!t.info.mGlowConfig.enable,editable:!!t.info.mGlowConfig.editable}),t.info.mShadowConfig&&a.push({blur:+t.info.mShadowConfig.blur.toFixed(1),color:Object(b.c)("rgba(".concat(255*t.info.mShadowConfig.r,", ").concat(255*t.info.mShadowConfig.g,", ").concat(255*t.info.mShadowConfig.b,", ").concat(t.info.mShadowConfig.a,")")),x:+t.info.mShadowConfig.offset_x.toFixed(1),y:+t.info.mShadowConfig.offset_y.toFixed(1),hidden:!t.info.mShadowConfig.enable,editable:!!t.info.mShadowConfig.editable}),t.info.mStrokeConfig&&c.push({width:+t.info.mStrokeConfig.size.toFixed(0),color:Object(b.c)("rgba(".concat(255*t.info.mStrokeConfig.r,", ").concat(255*t.info.mStrokeConfig.g,", ").concat(255*t.info.mStrokeConfig.b,", ").concat(t.info.mStrokeConfig.a,")")),direction:0,hidden:!t.info.mStrokeConfig.enable,editable:!!t.info.mStrokeConfig.editable}),t.info.mBgConfig&&s.push({color:Object(b.c)("rgba(".concat(255*t.info.mBgConfig.r,", ").concat(255*t.info.mBgConfig.g,", ").concat(255*t.info.mBgConfig.b,", ").concat(t.info.mBgConfig.a,")")),hidden:!t.info.mBgConfig.enable,editable:!!t.info.mBgConfig.editable}),Object(g.x)({id:Object(u.a)(),parentId:p,width:t.width/o.y,height:t.height/o.y,left:_+t.x/o.y,top:k+t.y/o.y,data:{text:t.info.mTextString,color:Object(b.c)("rgba(".concat(255*t.info.mTextORgba.r,", ").concat(255*t.info.mTextORgba.g,", ").concat(255*t.info.mTextORgba.b,", ").concat(t.info.mTextORgba.a,")")),fontSize:t.info.mTextSize/o.y,fontFamily:l,lineSpacing:Object(m.n)(t.info.mLineSpacing/o.y),letterSpacing:Object(m.l)(t.info.mSpacing/o.y,t.info.mTextSize/o.y),bold:!!t.info.mBold,italic:!!t.info.mItalic,lineThrough:!!t.info.mStrikeThrough,underline:!!t.info.mUnderline,textAlign:Object(b.b)(n,t.info.mJustify),writingMode:n,textGlow:i,textShadow:a,textStroke:c,textBackground:s}})})):[]},L=(null==(L=w.layer)?void 0:L.width)/o.y,S=(null==(S=w.layer)?void 0:S.height)/o.y,_=(s-L)/2+5*E,k=(l-S)/2+5*E,v.left=_,v.top=k,v.width=L,v.height=S,v.children=j(),null!=(L=v.materialIds)&&L.set(o.o.FONT_FAMILY,O),S=w.resImage.canvas.toDataURL(),L=Object(b.d)(v),f.t0=L,f.t0)return f.next=36,h.b.setItemAsync(L,S);f.next=36;break;case 36:i.action(v),e.hide();case 38:case"end":return f.stop()}}),f)})))()},addNewTextMaterialLayer:function(t,e,r){return _(x().mark((function n(){var o,a;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=t.width/e,o=t.height/r,a=o<a?e/2-t.width:t.width/o/2-t.width,L(t,a),L(t,void 0,{left:e/2-t.width/2,top:r/2-t.height/2},void 0,!1),i.action(t);case 9:case"end":return n.stop()}}),n)})))()}}}},,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return l})),r.d(e,"d",(function(){return f}));e=r(15);var n=r.n(e),o=r(47);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t){var e=new Array(8).fill(0);return t&&(e[e.length-1]=+t),e}var u=function(t){for(var e=t.length/4,r=[],n=0;n<e;n++){var o=(u=i(t.slice(4*n,4*n+4),4))[0],a=u[1],c=u[2],u=u[3];r.push("".concat(o,",").concat(a,",").concat(c,",").concat(u))}return r},s=function(t){var e=new Array(3).fill(0);return t&&(e[0]=+t),e},l=function(t){var e=n()(o.c);return Object.keys(e).forEach((function(r,n){e[r]=c(0===n?t:"")})),e},f=function(t){var e=n()(o.c);return Object.keys(e).forEach((function(r,n){e[r]=c(t[n])})),e}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return d}));e=r(452);var n=r.n(e),o=r(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}var u="xdesign-widgets__config-update-event",s=function(t){return t.dev="dev",t.pre="pre",t.beta="beta",t.release="release",t}({}),l={theme:"light",env:s.release,client_id:"",gid:"",device_id:"",channel:"",country_code:"",app_key:""},f=function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r=t[e],l[e]=r,"env"===e&&r===s.dev&&(l.env=s.pre),n.a.publish(u));var r},d=function(){var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(l),2),e=t[0],r=t[1];return Object(o.useEffect)((function(){function t(){r(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==i(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===i(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},l))}return n.a.subscribe(u,t),function(){n.a.unsubscribe(t)}}),[]),e}},,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return l.b})),r.d(e,"b",(function(){return g}));e=r(15);var n,o=r.n(e),i=(r(10),r(2)),a=(e=r(494),e=r.n(e),[(a=n=n||{})["1.0.0"]="1.0.0",a["2.0.0"]="2.0.0",a["2.0.1"]="2.0.1",a["3.0.0"]="3.0.0",a["3.1.0"]="3.1.0",a["4.0.0"]="4.0.0",a["4.1.0"]="4.1.0",a["5.0.0"]="5.0.0",a["5.1.0"]="5.1.0",a["5.2.0"]="5.2.0",a["6.0.0"]="6.0.0",a["7.0.0"]="7.0.0",a["7.1.0"]="7.1.0",a["8.0.0"]="8.0.0",a["8.1.0"]="8.1.0",a["8.2.0"]="8.2.0",a["8.3.0"]="8.3.0",a["8.4.0"]="8.4.0",a["8.5.0"]="8.5.0"]),c=(e()(a),r(7)),u=r(88);function s(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}s(e={},n["1.0.0"],(function(t){return!0})),s(e,n["2.0.0"],(function(t){return!0})),s(e,n["2.0.1"],(function(t){return!0})),s(e,n["3.0.0"],(function(t){return!0})),s(e,n["3.1.0"],(function(t){return!0})),s(e,n["4.0.0"],(function(t){return!0})),s(e,n["4.1.0"],(function(t){return!0})),s(e,n["5.0.0"],(function(t){return!0})),s(e,n["5.1.0"],(function(t){var e;return(e=!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.IMAGE_LAYER&&t.filter&&(e=!0)})),e})))||t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.IMAGE_LAYER&&delete t.filter}))})),e})),s(e,n["5.2.0"],(function(t){return!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.IMAGE_LAYER&&t.stretchOption===i.u.repeat&&(e=!0),t.layerType===i.h.BACKGROUND_LAYER&&t.stretchOption===i.u.repeat&&(e=!0)})),e}))})),s(e,n["6.0.0"],(function(t){return!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.WATERMARK&&(e=!0)})),e}))})),s(e,n["7.0.0"],(function(t){return!1})),s(e,n["7.1.0"],(function(t){var e;return(e=!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.IMAGE_LAYER&&t.effect&&(e=!0)})),e})))||t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.IMAGE_LAYER&&delete t.effect}))})),e})),s(e,n["8.0.0"],(function(t){return!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.GROUP_LAYER&&t.isTextMaterial&&(e=!0)})),e}))})),s(e,n["8.1.0"],(function(t){var e;return(e=!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&t.textGradient&&0<t.textGradient.colors.length&&(e=!0),t.layerType===i.h.IMAGE_LAYER&&t.category===u.a.qrCode&&(e=!0)})),e})))||t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&delete t.textGradient}))})),e})),s(e,n["8.2.0"],(function(t){var e;return(e=!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.BACKGROUND_LAYER&&t.backgroundGradient&&0<t.backgroundGradient.colors.length&&(e=!0)})),e})))||t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&delete t.backgroundGradient}))})),e})),s(e,n["8.3.0"],(function(t){var e;return(e=!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&t.textBackground&&0<t.textBackground.length&&(e=!0)})),e})))||t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&delete t.textBackground}))})),e})),s(e,n["8.4.0"],(function(t){var e;return(e=!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&t.listStyle&&""!==t.listStyle&&(e=!0)})),e})))||t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&delete t.listStyle}))})),e})),s(e,n["8.5.0"],(function(t){return!!t.find((function(t){var e=!1;return Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&t.textAlign===i.z.JUSTIFY&&(e=!0)})),e}))}));var l=r(370);function f(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}r(281),r(181),h(a={},n["1.0.0"],(function(t,e,r){return t.find((function(t){return t.layerType===i.h.BACKGROUND_LAYER}))||t.unshift(Object(l.a)(e,r)),p[n["2.0.0"]](t),t})),h(a,n["2.0.0"],(function(t){return t=t.map((function(t,e){return void 0===t.hidden&&(t.hidden=!1),t})),p[n["2.0.1"]](t),t})),h(a,n["2.0.1"],(function(t){return t=t.map((function(t,e){var r=t;return r.layerType===i.h.IMAGE_LAYER&&(void 0===r.maskURL&&(r.maskURL=""),void 0===r.maskType&&(r.maskType=i.n.none),void 0===r.mode&&(r.mode=i.g.none),void 0===r.category&&(r.category=i.f.masterImg),t=d(d({},t),{},{maskURL:"",maskType:i.n.none,mode:i.g.none,category:i.f.masterImg})),r})),p[n["3.0.0"]](t),t})),h(a,n["3.0.0"],(function(t){return t.forEach((function(t){t.layerType!==i.h.IMAGE_LAYER||t.cutoutMaskURL||(t.cutoutMaskURL="")})),p[n["3.1.0"]](t),t})),h(a,n["3.1.0"],(function(t){return t.forEach((function(t){t.parentId="",t.children=[],t.title=""})),p[n["4.0.0"]](t),t})),h(a,n["4.0.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){var e,r;t.layerType===i.h.TEXT_LAYER&&(e=t.textGlow,r=t.textShadow,t=t.textStroke,e.forEach((function(t){t.hidden=!1})),r.forEach((function(t){t.hidden=!1})),t.forEach((function(t){t.hidden=!1})))}))})),p[n["4.1.0"]](t),t})),h(a,n["4.1.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){t.materialIds={}}))})),p[n["5.0.0"]](t),t})),h(a,n["5.0.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.IMAGE_LAYER&&(t.filter=null)}))})),p[n["5.1.0"]](t),t})),h(a,n["5.1.0"],(function(t){return p[n["5.2.0"]](t),t})),h(a,n["5.2.0"],(function(t){return p[n["6.0.0"]](t),t})),h(a,n["6.0.0"],(function(t){return p[n["7.0.0"]](t),t})),h(a,n["7.0.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.IMAGE_LAYER&&(t.effect=null)}))})),p[n["7.1.0"]](t),t})),h(a,n["7.1.0"],(function(t){return p[n["8.0.0"]](t),t})),h(a,n["8.0.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&(t.textGradient=null)}))})),p[n["8.1.0"]](t),t})),h(a,n["8.1.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.BACKGROUND_LAYER&&(t.backgroundGradient=null)}))})),p[n["8.2.0"]](t),t})),h(a,n["8.2.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&(t.textBackground=[])}))})),p[n["8.3.0"]](t),t})),h(a,n["8.3.0"],(function(t){return t.forEach((function(t){Object(c.cc)(t,(function(t){t.layerType===i.h.TEXT_LAYER&&(t.listStyle="")}))})),p[n["8.4.0"]](t),t})),h(a,n["8.4.0"],(function(t){return p[n["8.5.0"]](t),t})),h(a,n["8.5.0"],(function(t){return t}));var p=a,y=(r(90),function(t,e,r){var n=t.offsetX,i=t.offsetY,a=t.widthRatio,c=t.heightRatio,u=t.scale;i=i*r/(c*u*r);return t.offsetX=n*e/(a*u*e),t.offsetY=i,o()(t)}),g=function t(e){var r=e.id,n=e.layerType,o=e.left,a=e.top,c=e.rotate,u=e.opacity,s=e.width,l=e.height,f=e.shine,d=e.lock,h=e.hidden,p=e.mode,g=e.category,m=e.parentId,v=e.title,b=e.materialIds,w=e.children;return{id:r,layerType:n,width:s,height:l,left:o,top:a,rotate:c,opacity:u,data:{isExtraGroup:!1,isTextMaterial:e.isTextMaterial},lock:void 0!==d&&d,children:(null==w?void 0:w.map((function(e){return e.layerType===i.h.BACKGROUND_LAYER?function(t){var e=t.url,r=t.cutoutMaskURL,n=t.maskURL,o=t.stretchOption,i=t.backgroundColor,a=t.imageTransform,c=t.id,u=t.layerType,s=t.left,l=t.top,f=t.rotate,d=t.opacity,h=t.width,p=t.height,g=t.shine,m=t.naturalWidth,v=t.naturalHeight,b=t.lock,w=t.hidden,O=t.maskType,x=t.mode,j=t.category,_=t.parentId,E=t.title,k=t.materialIds;return t=t.backgroundGradient,{id:c,layerType:u,width:h,height:p,left:s,top:l,rotate:f,opacity:d,data:{url:e,maskURL:n,stretchOption:o,naturalWidth:m,naturalHeight:v,imageTransform:y(void 0===a?{offsetX:0,offsetY:0,rotate:0,scale:1,flipH:!1,flipV:!1,widthRatio:1,heightRatio:1}:a,h,p),maskType:O,cutoutMaskURL:r,backgroundColor:i,type:"",id:1,backgroundGradient:t},lock:void 0!==b&&b,children:[],shine:g,hidden:w,mode:x,category:j,parentId:_,title:E,materialIds:new Map(Object.entries(k||{}))}}(e):e.layerType===i.h.GROUP_LAYER?t(e):e.layerType===i.h.IMAGE_LAYER?function(t){var e=t.url,r=t.cutoutMaskURL,n=t.maskURL,o=t.stretchOption,i=t.imageTransform,a=t.id,c=t.layerType,u=t.left,s=t.top,l=t.rotate,f=t.opacity,d=t.width,h=t.height,p=t.shine,g=t.naturalWidth,m=t.naturalHeight,v=t.lock,b=t.hidden,w=t.maskType,O=t.mode,x=t.category,j=t.parentId,_=t.title,E=t.materialIds,k=t.effect;return t=t.filter,{id:a,layerType:c,width:d,height:h,left:u,top:s,rotate:l,opacity:f,data:{url:e,maskURL:n,stretchOption:o,naturalWidth:g,naturalHeight:m,imageTransform:y(void 0===i?{offsetX:0,offsetY:0,rotate:0,scale:1,flipH:!1,flipV:!1,widthRatio:1,heightRatio:1}:i,d,h),maskType:w,cutoutMaskURL:r,effect:k,filter:t},lock:void 0!==v&&v,children:[],shine:p,hidden:b,mode:O,category:x,parentId:j,title:_,materialIds:new Map(Object.entries(E||{}))}}(e):e.layerType===i.h.TEXT_LAYER?function(t){var e=t.text,r=t.id,n=t.layerType,o=t.left,i=t.top,a=t.rotate,c=t.opacity,u=t.width,s=t.height,l=t.lock,f=t.shine,d=t.color,h=t.fontSize,p=t.fontFamily,y=t.lineSpacing,g=t.letterSpacing,m=t.bold,v=t.italic,b=t.lineThrough,w=t.underline,O=t.textAlign,x=t.writingMode,j=t.textGlow,_=t.textShadow,E=t.textStroke,k=t.hidden,S=t.parentId,L=t.title,I=t.materialIds,T=t.textBackground,M=t.textGradient;return t=t.listStyle,{id:r,layerType:n,width:u,height:s,left:o,top:i,rotate:a,opacity:c,lock:void 0!==l&&l,shine:f,hidden:k,parentId:S,title:L,materialIds:new Map(Object.entries(I||{})),children:[],data:{text:e.replace(/(\r\n|\r)/g,"\n").replace(/^\s+|\s+$/g,""),color:d,fontSize:h,fontFamily:p,lineSpacing:y,letterSpacing:g,bold:m,italic:v,lineThrough:b,underline:w,textAlign:O,writingMode:x,textGlow:j,textShadow:_,textStroke:E,textIndex:0,flipH:!1,flipV:!1,textBackground:T,textGradient:M,listStyle:t||""}}}(e):e.layerType===i.h.WATERMARK?function(t){var e=t.id,r=t.layerType,n=t.width,o=t.height,i=t.left,a=t.top,c=t.rotate,u=t.opacity,s=t.lock,l=t.shine,f=t.hidden,d=t.parentId,h=t.title,p=t.materialIds,y=t.mode,g=t.category,m=(t.url,t.isFullScreen),v=t.offsetX,b=t.offsetY,w=t.size,O=t.space,x=t.cross,j=t.texts,_=t.textColor,E=t.fontFamily;return t.children,{id:e,layerType:r,width:n,height:o,left:i,top:a,rotate:c,opacity:u,data:{isFullScreen:m,offsetX:v,offsetY:b,size:w,space:O,cross:x,texts:j,textColor:_,fontFamily:E},lock:void 0!==s&&s,children:[],shine:l,hidden:f,mode:y,category:g,parentId:d,title:h,materialIds:new Map(Object.entries(p||{}))}}(e):e})))||[],shine:f,hidden:h,mode:p,category:g,parentId:m,title:v,materialIds:new Map(Object.entries(b||{}))}}},,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s}));var n=r(13),o=(e=r(0),r.n(e)),i=(r(1051),r(101)),a=(r(1052),function(t){var e=t.setMode,r=(t=t.feedBackSrc,Object(i.a)());return o.a.createElement(n.j,{className:"feed-back-model",visible:!0,closable:!0,onCancel:function(){e("")},footer:null},o.a.createElement("div",{className:"model__title"},"\u610f\u89c1\u53cd\u9988"),o.a.createElement("iframe",{id:"feedBackIframe",title:"\u610f\u89c1\u53cd\u9988",src:"".concat(t,"&theme=").concat(r.theme),frameBorder:"0"}))}),c=(e=r(114),r.n(e)),u=r(40),s=(r(1053),function(t){var e=t.setMode;return o.a.createElement(n.j,{className:"keyboard-keymap-model",visible:!0,closable:!0,onCancel:function(){e("")},footer:null},o.a.createElement("div",{className:"model__title"},"\u952e\u76d8\u5feb\u6377\u952e"),o.a.createElement("div",{className:"model__content"},o.a.createElement(c.a,null,o.a.createElement(n.t,{columns:[{title:"\u529f\u80fd",dataIndex:"name",key:"name",align:"center"},{title:"Windows\u7cfb\u7edf",dataIndex:"win",key:"win",align:"center"},{title:"Mac\u7cfb\u7edf",dataIndex:"mac",key:"mac",align:"center"}],dataSource:u.c,bordered:!0,pagination:!1}))))});r(9),r.p,r.p,r(1054)},,,,,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return u}));var n=r(17),o=function(){return Object(n.d)((function(t){return t.sdk.editorManagerModel.isShowPanel}))},i=function(){return Object(n.d)((function(t){return t.sdk.editorManagerModel.isShowCollapse}))},a=function(){return Object(n.d)((function(t){return t.sdk.editorManagerModel.scale}))},c=function(){return Object(n.b)((function(t){return t.sdk.editorManagerModel.setScale}))},u=function(){return Object(n.d)((function(t){return t.sdk.editorManagerModel.version}))}},function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a}));var n=r(0),o=function(t){var e={layerId:t,preventDefault:function(){e.isPreventDefault=!0},isPreventDefault:!1};return e},i={},a={getEvents:function(){return i}};e.a=function(t){i=t,Object(n.useEffect)((function(){return function(){i={}}}),[])}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return u}));e=r(15);var n=r.n(e),o=r(139),i=r(2),a="watermark_type",c={id:Object(o.a)(),layerType:i.h.WATERMARK,width:0,height:0,left:0,top:0,rotate:0,opacity:1,title:"",materialIds:new Map,data:{originUrl:"",url:"",zipUrl:"",isFullScreen:!1,offsetX:0,offsetY:0,size:0,space:0,cross:0,texts:[],textColor:"",fontFamily:""},lock:!1,children:[],shine:!0,hidden:!1},u=function(t,e,r){var a=n()(c),u=a.data;return"text"===t?u.zipUrl=(null==r?void 0:r.zipUrl)||"":u.originUrl=e||"",a.id=Object(o.a)(),null!=r&&r.materialId&&null!=(t=a.materialIds)&&t.set(i.o.WATERMARK,[null==r?void 0:r.materialId]),a}},,,,,,,,,,,function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t){try{return!!f.namedItem(t)}catch(t){return!1}}function i(t,e){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:l,n=t.length;n--;){var o=t[n];if(e[o].test(r))return o}return"unknown"}function a(){var t;return null==(t=s.browserLanguage||s.language)?void 0:t.replace(/-\w+/g,(function(t){return t.toUpperCase()}))}function c(){return"undefined"!=typeof __wxjs_environment&&"miniprogram"===__wxjs_environment}function u(t){return m.isWebview.test(t)}r.d(e,"a",(function(){return O})),r.d(e,"b",(function(){return x}));var s={},l=(s="undefined"!=typeof navigator?navigator:s).userAgent,f=s.mimeTypes,d=s.platform,h={Trident:/(Trident|NET CLR)/,Presto:/Presto/,WebKit:/AppleWebKit/,Gecko:/Gecko\//,KHTML:/KHTML\//},p={Safari:/Safari/,Chrome:/(Chrome|CriOS)/,IE:/(MSIE|Trident)/,Edge:/(Edge|Edg\/|EdgA|EdgiOS)/,Firefox:/(Firefox|FxiOS)/,"Firefox Focus":/Focus/,Chromium:/Chromium/,Opera:/(Opera|OPR|OPT)/,Vivaldi:/Vivaldi/,Yandex:/YaBrowser/,Arora:/Arora/,Lunascape:/Lunascape/,QupZilla:/QupZilla/,"Coc Coc":/coc_coc_browser/,Kindle:/(Kindle|Silk\/)/,Iceweasel:/Iceweasel/,Konqueror:/Konqueror/,Iceape:/Iceape/,SeaMonkey:/SeaMonkey/,Epiphany:/Epiphany/,360:/(QihooBrowser|QHBrowser)/,"360EE":/360EE/,"360SE":/360SE/,UC:/(UCBrowser|UBrowser|UCWEB)/,QQBrowser:/QQBrowser/,QQ:/QQ\//,Baidu:/(Baidu|BIDUBrowser|baidubrowser|baiduboxapp|BaiduHD)/,Maxthon:/Maxthon/,Sogou:/(MetaSr|Sogou)/,Liebao:/(LBBROWSER|LieBaoFast)/,"2345Explorer":/2345Explorer/,"115Browser":/115Browser/,TheWorld:/TheWorld/,XiaoMi:/MiuiBrowser/,Quark:/Quark/,Qiyu:/Qiyu/,Wechat:/MicroMessenger/,WechatWork:/wxwork\//,Taobao:/AliApp\(TB/,Alipay:/AliApp\(AP/,Weibo:/Weibo/,Douban:/com\.douban\.frodo/,Suning:/SNEBUY-APP/,iQiYi:/IqiyiAp/,DingTalk:/DingTalk/,Huawei:/(HuaweiBrowser|HUAWEI\/|HONOR)/,Vivo:/VivoBrowser/},y={Windows:/Windows/,Linux:/(Linux|X11)/,MacOS:/Macintosh/,Android:/(Android|Adr)/,HarmonyOS:/HarmonyOS/,Ubuntu:/Ubuntu/,FreeBSD:/FreeBSD/,Debian:/Debian/,"Windows Phone":/(IEMobile|Windows Phone)/,BlackBerry:/(BlackBerry|RIM)/,MeeGo:/MeeGo/,Symbian:/Symbian/,iOS:/like Mac OS X/,"Chrome OS":/CrOS/,WebOS:/hpwOS/},g={Mobile:/(Mobi|iPh|480)/,Tablet:/(Tablet|Pad|Nexus 7)/},m={isWebview:/; wv/},v={device:["Mobile","Tablet"],os:["Windows","Linux","MacOS","Android","HarmonyOS","Ubuntu","FreeBSD","Debian","Windows Phone","BlackBerry","MeeGo","Symbian","iOS","Chrome OS","WebOS"],engine:["Trident","Presto","WebKit","Gecko","KHTML"],browser:["Safari","Chrome","IE","Edge","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360EE","360SE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","Liebao","2345Explorer","115Browser","TheWorld","XiaoMi","Quark","Qiyu","Wechat","WechatWork","Taobao","Alipay","Weibo","Douban","Suning","iQiYi","DingTalk","Huawei","Vivo"]},b=new(function(){function t(e){var r=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ua=l,this.version={Safari:function(){return r.ua.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return r.ua.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return r.ua.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return r.ua.replace(/^.*Edge\/([\d.]+).*$/,"$1").replace(/^.*Edg\/([\d.]+).*$/,"$1").replace(/^.*EdgA\/([\d.]+).*$/,"$1").replace(/^.*EdgiOS\/([\d.]+).*$/,"$1")},Firefox:function(){return r.ua.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return r.ua.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return r.ua.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return r.ua.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1").replace(/^.*OPT\/([\d.]+).*$/,"$1")},Vivaldi:function(){return r.ua.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return r.ua.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return r.ua.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return r.ua.replace(/^.*Lunascape[\s]([\d.]+).*$/,"$1")},QupZilla:function(){return r.ua.replace(/^.*QupZilla[\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return r.ua.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return r.ua.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return r.ua.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return r.ua.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return r.ua.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return r.ua.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return r.ua.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},Maxthon:function(){return r.ua.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return r.ua.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return r.ua.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return r.ua.replace(/^.*BIDUBrowser[\s/]([\d.]+).*$/,"$1").replace(/^.*baiduboxapp\/([\d.]+).*$/,"$1")},UC:function(){return r.ua.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return r.ua.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},TheWorld:function(){return r.ua.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return r.ua.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Vivo:function(){return r.ua.replace(/^.*VivoBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return r.ua.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return r.ua.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return r.ua.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},WechatWork:function(){return r.ua.replace(/^.*wxwork\/([\d.]+).*$/,"$1")},Taobao:function(){return r.ua.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return r.ua.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return r.ua.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return r.ua.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return r.ua.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return r.ua.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")},DingTalk:function(){return r.ua.replace(/^.*DingTalk\/([\d.]+).*$/,"$1")},Huawei:function(){return r.ua.replace(/^.*Version\/([\d.]+).*$/,"$1").replace(/^.*HuaweiBrowser\/([\d.]+).*$/,"$1")},"115Browser":function(){return r.ua.replace(/^.*115Browser\/([\d.]+).*$/,"$1")},360:function(){return r.ua.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){return{86:"13.0",78:"12.0",69:"11.0",63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"}[r.ua.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"360EE":function(){return{86:"13.0",78:"12.0",69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"}[r.ua.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"2345Explorer":function(){return{69:"10.0",55:"9.9"}[r.ua.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||r.ua.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1").replace(/^.*Mb2345Browser\/([\d.]+).*$/,"$1")},Liebao:function(){var t="",e=(/LieBaoFast/.test(r.ua)&&(t=r.ua.replace(/^.*LieBaoFast\/([\d.]+).*$/,"$1")),r.ua.replace(/^.*Chrome\/([\d]+).*$/,"$1"));return t||{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[e]||""}},this.osVersion={Android:function(){return r.ua.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return r.ua.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return r.ua.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return r.ua.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},MacOS:function(){return r.ua.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return r.ua.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")},HarmonyOS:function(){return{10:"2"}[r.ua.replace(/^Mozilla.*Android ([\d.]+)[;)].*$/,"$1")]||""},Windows:function(){var t=r.ua.replace(/^Mozilla\/\d.0 \(Windows NT ([\d.]+);.*$/,"$1");return{10:"10",6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"}[t]||t}},e&&(this.ua=e)}var e,r;return e=t,(r=[{key:"getOs",value:function(){return i(v.os,y,this.ua)}},{key:"getEngine",value:function(){return i(v.engine,h,this.ua)}},{key:"getBrowser",value:function(){return i(v.browser,p,this.ua)}},{key:"getDevice",value:function(){var t;return"MacIntel"===d&&1<s.maxTouchPoints?"Tablet":"unknown"===(t=i(v.device,g,this.ua))?"PC":t}},{key:"getEnv",value:function(t){this.ua=t||l;var e,r=(t={version:"unknown",osVersion:"unknown",engine:this.getEngine(),browser:this.getBrowser(),os:this.getOs(),device:this.getDevice(),isWebview:u(this.ua),language:null!=(t=a())?t:"unknown",platfrom:null!=d?d:"unknown"}).browser,n=!1;return"undefined"!=typeof chrome&&(e=this.ua.replace(/^.*Chrome\/([\d]+).*$/,"$1"),chrome.adblock2345||chrome.common2345?t.browser="2345Explorer":o("application/360softmgrplugin")||o("application/mozilla-npqihooquicklogin")||"36"<e&&"undefined"!=typeof showModalDialog?n=!0:"45"<e&&!(n=o("application/vnd.chromium.remoting-viewer"))&&"69"<=e&&(n=o("application/hwepass2001.installepass2001")||o("application/asx"))),"Mobile"===t.device&&/iPad/.test(this.ua)?t.device="Tablet":n&&(r=o("application/gameplugin")||null==(e=s)||null==(n=e.connection)||!n.saveData?"360SE":"360EE"),v.browser.indexOf(r)>=v.browser.indexOf(t.browser)&&(t.browser=r),"Baidu"===t.browser&&p.Opera.test(this.ua)&&(t.browser="Opera"),t.os in this.osVersion&&(t.osVersion=this.osVersion[t.os](),t.osVersion===this.ua)&&(t.osVersion="unknown"),t.browser in this.version&&(t.version=this.version[t.browser](),t.version===this.ua)&&(t.version="unknown"),"Chrome"===t.browser&&this.ua.match(/\S+Browser/)?(t.browser=this.ua.match(/\S+Browser/)[0],t.version=this.ua.replace(/^.*Browser\/([\d.]+).*$/,"$1")):"Firefox"!==t.browser||"undefined"==typeof clientInformation&&"undefined"!=typeof u2f?"Wechat"===t.browser&&c()&&(t.browser="Wechat Miniapp"):t.browser="".concat(t.browser," Nightly"),"Edge"===t.browser?t.engine=75<parseInt(t.version)?"Blink":"EdgeHTML":(p.Chrome.test(this.ua)&&"WebKit"===t.engine&&27<parseInt(this.version.Chrome())||"Opera"===t.browser&&12<parseInt(t.version)||"Yandex"===t.browser)&&(t.engine="Blink"),t}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function w(t){return b.getEnv(t)}w.isWebview=u,w.isWechatMiniapp=c,w.getLanguage=a;var O=function(){return w().browser},x=function(t){var e="8px";switch(t){case"Chrome":return{bottom:"8px",left:"30px"};case"Safari":return{top:e,right:"34px"};case"Firefox":case"Firefox Nightly":return{top:e,right:"83px"};case"Edge":return{top:e,right:"68px"};case"360SE":case"360EE":return{top:e,right:"85px"};case"Opera":return{top:e,right:"3px"};default:return{top:e,right:"100px"}}}},,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return o}));r=r(12);var n,o=((i=n=n||{})[i.customMaterial=0]="customMaterial",i[i.serverMaterial=1]="serverMaterial",{dragData:null,setDragData:Object(r.b)((function(t,e){t.dragData=e}))}),i=Object(r.f)(),a=i.useStoreState,c=i.useStoreActions;i.useStoreDispatch,e.b=function(){var t=c((function(t){return t.dragAndDropImageModel.setDragData}));return{dragData:a((function(t){return t.dragAndDropImageModel.dragData})),setDragData:t}}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return C}));var n=r(24),o=r(10),i=(e=(Symbol("replaceTextAction"),r(31)),r.n(e)),a=r(0),c=r(139),u=r(42),s=(e=r(19),r(22)),l=r(2),f=r(7),d=r(133),h=r(307);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,g,m=((g=(g=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(h=g),d.prototype=l.prototype=Object.create(h));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==p(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function g(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var m=0,v=(e.b.onInit((function(){m=0})),function(){Object(o.p)();var t=Object(u.h)(),e=Object(s.t)(),r=Object(s.h)(),n=Object(a.useRef)(0),p=Object(o.F)();return{addTextLayer:function(){var o,a=arguments;return o=y().mark((function o(){var u,s,g,v,b,w,O,x,j,_,E,k;return y().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:x=0<a.length&&void 0!==a[0]?a[0]:0,u=1<a.length&&void 0!==a[1]?a[1]:0,s=2<a.length&&void 0!==a[2]?a[2]:"\u53cc\u51fb\u7f16\u8f91\u6587\u5b57",g=3<a.length&&void 0!==a[3]?a[3]:"#000000ff",v=4<a.length&&void 0!==a[4]?a[4]:l.c.name,b=!(5<a.length&&void 0!==a[5])||a[5],w=6<a.length&&void 0!==a[6]&&a[6],(O=p.length)<=n.current&&(m=0),n.current=O,O=+(.073*x).toFixed(0),E=6.2*O,k=1.2*O,w&&(O=Math.min(60,O/1.5),E=i()(x/2)),O=Math.max(12,O),x=(x-E)/2+5*m,j=(u-k)/2+5*m,m++,_=Object(c.a)(),(_=Object(d.x)({id:_,width:E,height:k,left:x,top:j,materialIds:new Map,data:{text:s,bold:!1,color:g,fontFamily:v,fontSize:O,italic:!1,letterSpacing:0,lineSpacing:1.2,lineThrough:!1,underline:!1,textAlign:l.z.CENTER,writingMode:l.A.HORIZONTAL_TB,textGlow:[],textShadow:[],textStroke:[],textBackground:[],listStyle:"",textGradient:Object(h.a)()}})).shine=!0,E=Object(d.x)(_),w&&(k=Object(f.jb)(E.width,E.height,E.data,!0),E.height=k.height,E.top=(u-E.height)/2+5*m),t.action(E,b),setTimeout((function(){r||e(!0)}),0);case 25:case"end":return o.stop()}}),o)})),function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){g(i,r,n,a,c,"next",t)}function c(t){g(i,r,n,a,c,"throw",t)}a(void 0)}))}()}}}),b=r(98),w=(e=r(15),r.n(e)),O=r(29),x=r(86),j=r(285),_=r(212);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?S(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new w(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(O([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==E(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function v(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(v,this),this.reset(!0)}function O(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:x}}function x(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,b(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function I(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){M(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function M(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function A(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){P(i,n,o,a,c,"next",t)}function c(t){P(i,n,o,a,c,"throw",t)}a(void 0)}))}}var C=function(){function t(t){return(t=s(t))?{layer:t,oldInfo:d(t)}:{layer:t}}var e,r=Object(n.h)(),i=Object(x.f)(),a=Object(x.b)(),c=Object(o.h)().refreshActiveInfo,s=Object(o.p)().getLayer,d=(e=Object(o.w)()).cloneLayer,p=e.addOrUpdate,y=Object(o.L)().updateGroup,g=(e=(Object(u.r)(),Object(_.a)())).updateFontFamily,m=e.updateTextLayer,v=e.getTextActualSize,E=Object(j.c)();return Object(O.i)(),{updateFontFamily:function(e,n){return A(L().mark((function o(){var u,s,d,h,m,v,b,w,O,x,j,_,E;return L().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=t(e),u=s.layer,s=s.oldInfo,u&&s){o.next=3;break}return o.abrupt("return");case 3:if(d=u.textParentIsMaterial,i(!0),h=a.find((function(t){return t.font_name===n})),m=a.find((function(t){return t.font_name===n})),h){o.next=10;break}return i(!1),o.abrupt("return");case 10:return v=h.font_name,b=h.material_id,O=h.zip_url,j=h.woff2_file_url,u.materialIds=new Map,null!=(x=u.materialIds)&&x.set(l.o.FONT_FAMILY,["".concat(b)]),w=Object.assign({},u,{data:T(T({},u.data),{},{fontFamily:v})}),o.next=16,Object(f.yb)(v,j||O);case 16:if(d)return o.next=19,g(w,v);o.next=28;break;case 19:x=t(u.parentId),j=x.layer,!(E=j&&(null==j||null==(O=j.materialIds)?void 0:O.get(l.o.FONT_FAMILY))||[]).find((function(t){return t===b}))&&j&&((E=E.filter((function(t){return t!==(null==m?void 0:m.material_id)}))).push("".concat(b)),null!=j)&&null!=(_=j.materialIds)&&_.set(l.o.FONT_FAMILY,E),j.children=j.children.map((function(t){return t.id===e?w:t})),p(w),p(j),o.next=35;break;case 28:_=w.forceWidth||Object(f.rb)(u),E=Object(f.jb)(w.width,w.height,w.data,_),(w=Object.assign({},w,{width:E.width,height:E.height})).useFontFamilySubset=!1,delete w.data.fontFamilySubset,p(w),!d&&null!=u&&u.parentId&&y(u.parentId);case 35:s&&w&&r.action(s,w),c(),i(!1);case 38:case"end":return o.stop()}}),o)})))()},updateFontSize:function(e,n){var o,i,a=(e=t(e)).layer;e=e.oldInfo;a&&e&&(i=(n=Object.assign({},a,{data:T(T({},a.data),{},{fontSize:n})})).forceWidth||Object(f.rb)(a),o=(i=Object(f.jb)(n.width,n.height,n.data,i)).width,i=i.height,n.left=n.left+(n.width-o)/2,n.top=n.top+(n.height-i)/2,n.width=o,n.height=i,n.forceWidth=a.forceWidth||!1,p(n),null!=a&&a.parentId&&y(a.parentId),e&&n&&r.action(e,n),c())},updateAttr:function(e,n,o){return A(L().mark((function i(){var a,c,u,s,l;return L().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c=t(e),a=c.layer,c=c.oldInfo,a&&c){i.next=3;break}return i.abrupt("return");case 3:if(u=a.textParentIsMaterial,s=Object.assign({},a,{data:T(T({},a.data),{},M({},n,o))}),"underline"===n?s.data.lineThrough=!1:"lineThrough"===n&&(s.data.underline=!1),!u){i.next=13;break}if(a.parentId){i.next=9;break}return i.abrupt("return");case 9:return i.next=11,m(s,!0);case 11:i.next=17;break;case 13:l=s.forceWidth||Object(f.rb)(a),l=Object(f.jb)(s.width,s.height,s.data,l),s.width=l.width,s.height=l.height;case 17:p(s),c&&s&&r.action(c,s),u&&E.action(e);case 20:case"end":return i.stop()}}),i)})))()},updateAlign:function(e,n,o,i,a){return A(L().mark((function u(){var s,d,h,g,b,w;return L().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(d=t(e),s=d.layer,d=d.oldInfo,s&&d){u.next=3;break}return u.abrupt("return");case 3:if(h=s.textParentIsMaterial,"letterSpacing"!==n&&"lineSpacing"!==n||!a||(d=a),g=Object.assign({},s,{data:T(T({},s.data),{},M({},n,o))}),"writingMode"===n&&(g.width=s.height,g.height=s.width,o===l.A.HORIZONTAL_TB?g.width=g.width-.5*g.data.fontSize:(g.height=g.height+.5*g.data.fontSize,g.forceWidth=!0)),h||"writingMode"!==n&&"letterSpacing"!==n&&"lineSpacing"!==n||(w=Object(f.jb)(g.width,g.height,g.data,!0),b="writingMode"===n?Math.max(w.width,g.width):w.width,w="writingMode"===n?Math.max(w.height,g.height):w.height,g.left=g.left+(g.width-b)/2,g.top=g.top+(g.height-w)/2,g.width=b,g.height=w),!h){u.next=18;break}if(s.parentId&&i){u.next=11;break}return u.abrupt("return");case 11:if("writingMode"===n)return u.abrupt("return");u.next=13;break;case 13:return u.next=15,m(g,!0);case 15:b=s.textIndex,(w=v(b))&&(g.data.fontSize=w/l.y);case 18:p(g),h||"writingMode"!==n&&"letterSpacing"!==n&&"lineSpacing"!==n||null!=s&&s.parentId&&y(s.parentId),i&&d&&g&&r.action(d,g),h&&E.action(e),c();case 23:case"end":return u.stop()}}),u)})))()},updateColor:function(e,n,o,i){return A(L().mark((function a(){var c,u,s,l,f;return L().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(u=t(e),c=u.layer,u=u.oldInfo,c&&u){a.next=3;break}return a.abrupt("return");case 3:if(s=c.textParentIsMaterial,f=c.data,"color"===n?l=-1!==o.indexOf("linear-gradient")?Object.assign({},c,{data:T(T({},f),{},{textGradient:Object(b.e)(o)})}):Object.assign({},c,{data:T(T({},f),{},{color:o,textGradient:Object(h.a)()})}):"textShadow"!==n&&"textStroke"!==n&&"textBackground"!==n&&"textGlow"!==n||(l=Object.assign({},c,{data:T(T({},f),{},M({},n,null==(f=f[n])?void 0:f.map((function(t,e){return i===e&&(t.color=o),t}))))})),!s){a.next=11;break}if(c.parentId){a.next=9;break}return a.abrupt("return");case 9:return a.next=11,m(l,!0);case 11:p(l),u&&l&&r.action(u,l),s&&E.action(e);case 14:case"end":return a.stop()}}),a)})))()},setTextStyle:function(e,n){return A(L().mark((function o(){var i,a,u,s;return L().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=t(e),i=a.layer,a=a.oldInfo,i&&a){o.next=3;break}return o.abrupt("return");case 3:if(u=i.textParentIsMaterial,null!=n&&n.isVip?(i.materialIds=new Map,null!=(s=i.materialIds)&&s.set(l.o.TEXT_EFFECT,["".concat(n.textVipId)]),delete n.textVipId,delete n.isVip):i.materialIds&&i.materialIds.delete(l.o.TEXT_EFFECT),s=Object.assign({},i,{data:T(T({},i.data),n)}),!u){o.next=11;break}if(i.parentId){o.next=9;break}return o.abrupt("return");case 9:return o.next=11,m(s,!0);case 11:p(s),a&&s&&r.action(a,s),u&&E.action(e),c();case 15:case"end":return o.stop()}}),o)})))()},addTextStyle:function(e,n){return A(L().mark((function o(){var i,a,u,s,l,d,h,y,g;return L().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=t(e),i=a.layer,a=a.oldInfo,i&&a){o.next=3;break}return o.abrupt("return");case 3:if(u=i.textParentIsMaterial,d=i.data,h=d.fontSize,g=d.textShadow,s=d.textStroke,l=d.textGlow,d=d.textBackground,h=Object(f.Q)(h)[n][0],y=[],"textShadow"===n?(y=k(g)).push(h):"textStroke"===n?(y=k(s)).push(h):"textGlow"===n?(y=k(l)).push(h):"textBackground"===n&&(y=d?k(d):[]).push(h),g=Object.assign({},i,{data:T(T({},null==i?void 0:i.data),{},M({},n,y))}),!u){o.next=14;break}if(i.parentId){o.next=12;break}return o.abrupt("return");case 12:return o.next=14,m(g,!0);case 14:p(g),a&&g&&r.action(a,g),u&&E.action(e),c();case 19:case"end":return o.stop()}}),o)})))()},removeTextStyle:function(e,n,o){return A(L().mark((function i(){var a,u,s,l,f,d;return L().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(u=t(e),a=u.layer,u=u.oldInfo,a&&u){i.next=3;break}return i.abrupt("return");case 3:if(s=a.textParentIsMaterial,(l=a.data).fontSize,d=l.textShadow,l=l.textStroke,f=[],"textShadow"===n?(f=k(d)).splice(o,1):"textStroke"===n&&(f=k(l)).splice(o,1),d=Object.assign({},a,{data:T(T({},null==a?void 0:a.data),{},M({},n,f))}),!s){i.next=13;break}if(a.parentId){i.next=11;break}return i.abrupt("return");case 11:return i.next=13,m(d,!0);case 13:p(d),u&&d&&r.action(u,d),s&&E.action(e),c();case 17:case"end":return i.stop()}}),i)})))()},updateTextStyle:function(e,n,o,i){return A(L().mark((function a(){var u,s,l,f,d,h,y,g;return L().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=t(e),u=s.layer,s=s.oldInfo,u&&s){a.next=3;break}return a.abrupt("return");case 3:if(l=u.textParentIsMaterial,h=u.data,g=h.textShadow,f=h.textStroke,d=h.textGlow,h=h.textBackground,y=[],"textShadow"===n?y=w()(g):"textStroke"===n?y=w()(f):"textGlow"===n?y=w()(d):"textBackground"===n&&(y=w()(h)),y=y.map((function(t,e){return i===e?Object.assign({},t,o):t})),g=Object.assign({},u,{data:T(T({},null==u?void 0:u.data),{},M({},n,y))}),!l){a.next=14;break}if(u.parentId){a.next=12;break}return a.abrupt("return");case 12:return a.next=14,m(g,!0);case 14:p(g),s&&g&&r.action(s,g),l&&E.action(e),c();case 18:case"end":return a.stop()}}),a)})))()},updateOpacity:function(e,n,o){return A(L().mark((function i(){var a,c,u,s;return L().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s=t(e),a=s.layer,s=s.oldInfo,a&&s){i.next=3;break}return i.abrupt("return");case 3:if(c=a.textParentIsMaterial,u=Object.assign({},a,{opacity:n}),!c||null==o){i.next=10;break}if(a.parentId){i.next=8;break}return i.abrupt("return");case 8:return i.next=10,m(u,!0);case 10:p(u),null!=o&&(s=Object.assign({},a,{opacity:o}),r.action(s,u)),c&&null!=o&&E.action(e);case 13:case"end":return i.stop()}}),i)})))()},setTextListStyle:function(e,n){return A(L().mark((function o(){var i,a,c,u;return L().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=t(e),i=a.layer,a=a.oldInfo,i&&a){o.next=3;break}return o.abrupt("return");case 3:(c=Object.assign({},i,{data:T(T({},null==i?void 0:i.data),{},{listStyle:n})})).data.withSpace=!1,u=Object(f.jb)(c.width,c.height,c.data,!0),c.width=u.width,c.height=u.height,p(c),r.action(a,c);case 10:case"end":return o.stop()}}),o)})))()}}}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(17),o=function(){var t=Object(n.d)((function(t){return t.sdk.themeManagerModel.theme})),e=Object(n.b)((function(t){return t.sdk.themeManagerModel.setWhiteTheme})),r=Object(n.b)((function(t){return t.sdk.themeManagerModel.setDarkTheme}));return{theme:t,setWhiteTheme:function(){e()},setDarkTheme:function(){r()}}}},,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return f}));e=r(15);var n=r.n(e),o=r(139),i=r(2);function a(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var u={colors:[],angle:0},s=function(){return n()(u)},l={backgroundColor:"#FFFFFFFF",naturalHeight:0,naturalWidth:0,url:"",stretchOption:i.u.none,maskType:i.n.none,imageTransform:{offsetX:0,offsetY:0,rotate:0,scale:1,flipH:!1,flipV:!1,widthRatio:1,heightRatio:1},category:i.f.bgImg,mode:i.g.none,cutoutMaskURL:"",maskURL:""},f=function(t,e){return c(c({id:Object(o.a)(),layerType:i.h.BACKGROUND_LAYER,width:t,height:e,left:0,top:0,rotate:0,opacity:1,lock:!1,children:[],shine:!1,hidden:!1,overflow:!1,parentId:"",materialIds:{}},l),{},{maskURL:"",maskType:i.n.none,title:""})};Object(o.a)(),i.h.IMAGE_LAYER,new Map,i.u.fill,i.n.none,i.f.masterImg,i.g.imgContainer,i.g.none,i.f.masterImg,Object(o.a)(),i.h.GROUP_LAYER,new Map,i.g.none,i.f.none,Object(o.a)(),i.h.TEXT_LAYER,new Map,i.z.CENTER,i.A.HORIZONTAL_TB,s(),i.g.none,i.f.none},,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return w})),r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return g})),(n=n||{}).FetchData="FetchData",(e=o=o||{}).Fetch="fetch",e.Post="post";var n,o,i=r(0),a=r(253),c=(e=r(63),r.n(e)),u=r(139),s=r(19);function l(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(){return c.a.parseUrl(window.location.href).query.d_w_id}var h,p=new Map,y=window.opener,g=((h=h||{}).open="duplicate_e_open",function(){return{openDuplicate:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object(u.a)(),e=f(f({},(r=(s.a.emit(h.open),c.a.parseUrl(window.location.href))).query),{},{d_w_id:t}),r=window.open(c.a.stringifyUrl({url:r.url,query:e}));p.set(t,r)},fetchMessage:function(t,e){var r=d();r&&null!=y&&y.postMessage({__duplicate:!0,action:t,type:o.Fetch,message:f({fromWinId:r},e)},"/")},postMessage:function(t,e,r){null!=(t=p.get(t))&&t.postMessage({__duplicate:!0,action:e,type:o.Post,message:r},"/")}}});function m(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b=!1,w=function(t){function e(t){var e,r;(t=t.data)&&t.__duplicate&&(e=t.action,t.type===o.Fetch?null!=(r=f[e])&&r.call(f,t.message):t.type===o.Post&&null!=(r=h[e])&&r.call(h,t.message))}var r=t.stage,c=t.fileName,u=t.initHandler,s=g(),l=Object(a.e)().getLayers,f=v({},n.FetchData,(function(t){var e=t.fromWinId;l().then((function(t){Object(a.a)(t,!0).then((function(){s.postMessage(e,n.FetchData,{layers:t,stage:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r),fileName:c})}))}))})),h=v({},n.FetchData,(function(t){var e=t.stage,r=t.layers;t=t.fileName;null!=u&&u(r,e,t)}));Object(i.useEffect)((function(){b||(b=!0,d()&&s.fetchMessage(n.FetchData))}),[]),Object(i.useEffect)((function(){return window.addEventListener("message",e,!1),function(){window.removeEventListener("message",e,!1)}}),[r])}},function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"f",(function(){return s})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return f})),r.d(e,"c",(function(){return d})),r.d(e,"g",(function(){return h})),r.d(e,"a",(function(){return p}));var n=r(20),o=(e=(r(220),r(31)),r.n(e));function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",c=y.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(e){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(u(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,u){var s;if("throw"!==(o=l(t[o],t,a)).type)return(a=(s=o.arg).value)&&"object"==i(a)&&r.call(a,"__await")?e.resolve(a.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):e.resolve(a).then((function(t){s.value=t,c(s)}),(function(t){return n("throw",t,c,u)}));u(o.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return u(m,"constructor",h.prototype=p),u(p,"constructor",h),h.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),u(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),u(m,c,"Generator"),u(m,n,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t,e,r){return{canvas:r=r?Object(n.createCanvas)(t,e,r):Object(n.createCanvas)(t,e),width:t,height:e,ctx:r.getContext("2d")}}r(376);var s=function(t,e,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d");return i.width=n,i.height=o,null!=a&&a.drawImage(t,0,0,e,r,0,0,n,o),i},l=function(t,e,r,n,i,a){var c=t.left,s=t.top,l=t.width;t=t.height,l=o()(l),t=o()(t),a=(i=u(i,a)).canvas;return(i=i.ctx).translate(l/2+c,t/2+s),i.scale(r,r),i.rotate(2*Math.PI/360*e),i.drawImage(n,0,0,l,t,-l/2,-t/2,l,t),a};function f(t,e,r,n){var o,i,a;e=(t=t/e)<=r/n?(o=(r-(i=t*(a=n)))/2,0):(o=0,(n-(a=(i=r)/t))/2);return{dx:o,dy:e,dw:i,dh:a}}var d=function(){var t=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))}}(a().mark((function t(e,r,n,i,c){var s,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o()(e),r=o()(r),l=u(e,r),s=l.canvas,(l=l.ctx).globalAlpha=c,n&&(l.translate(e,0),l.scale(-1,1)),i&&(l.translate(0,r),l.scale(1,-1)),t.abrupt("return",{canvas:s,ctx:l});case 7:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),h=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"jpeg";return"image/"+("jpg"===t?"jpeg":t)};function p(t,e){var r,n,o,i,a,c,u,s,l,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:180;return 360<=f&&(f-=360),f<0&&(f+=360),0===(f=Math.round(f))?{x0:Math.round(t/2),y0:e,x1:Math.round(t/2),y1:0}:180===f?{x0:Math.round(t/2),y0:0,x1:Math.round(t/2),y1:e}:90===f?{x0:0,y0:Math.round(e/2),x1:t,y1:Math.round(e/2)}:270===f?{x0:t,y0:Math.round(e/2),x1:0,y1:Math.round(e/2)}:f===(r=Math.round(180*Math.asin(t/Math.sqrt(Math.pow(t,2)+Math.pow(e,2)))/Math.PI))?{x0:0,y0:e,x1:t,y1:0}:f===180-r?{x0:0,y0:0,x1:t,y1:e}:f===180+r?{x0:t,y0:0,x1:0,y1:e}:f===360-r?{x0:t,y0:e,x1:0,y1:0}:(o=n=a=i=0,(f<r||180-r<f&&f<180||180<f&&f<180+r||360-r<f)&&(l=f*Math.PI/180,u=f<r||360-r<f?e/2:-e/2,s=Math.tan(l)*u,c=f<r||180-r<f&&f<180?t/2-s:-t/2-s,i=-(n=s+(s=Math.pow(Math.sin(l),2)*c)),a=-(o=u+s/Math.tan(l))),(r<f&&f<90||90<f&&f<180-r||180+r<f&&f<270||270<f&&f<360-r)&&(c=(90-f)*Math.PI/180,u=r<f&&f<90||90<f&&f<180-r?t/2:-t/2,s=Math.tan(c)*u,l=r<f&&f<90||270<f&&f<360-r?e/2-s:-e/2-s,i=-(n=u+(f=Math.pow(Math.sin(c),2)*l)/Math.tan(c)),a=-(o=s+f)),{x0:i=Math.round(i+t/2),y0:a=Math.round(e/2-a),x1:n=Math.round(n+t/2),y1:o=Math.round(e/2-o)})}},function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"g",(function(){return s})),r.d(e,"j",(function(){return l})),r.d(e,"c",(function(){return f})),r.d(e,"l",(function(){return d})),r.d(e,"d",(function(){return h})),r.d(e,"k",(function(){return p})),r.d(e,"a",(function(){return y})),r.d(e,"i",(function(){return m})),r.d(e,"h",(function(){return v})),r.d(e,"f",(function(){return b}));var n=r(34);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){i=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",a=y.asyncIterator||"@@asyncIterator",c=y.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(e){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}return"throw"===(n=l(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,f):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}(r,a),r)){if(r===f)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=l(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===f)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(u(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(i,a){function c(){return new e((function(n,c){!function n(i,a,c,u){var s;if("throw"!==(i=l(t[i],t,a)).type)return(a=(s=i.arg).value)&&"object"==o(a)&&r.call(a,"__await")?e.resolve(a.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):e.resolve(a).then((function(t){s.value=t,c(s)}),(function(t){return n("throw",t,c,u)}));u(i.arg)}(i,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return u(m,"constructor",h.prototype=p),u(p,"constructor",h),h.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),u(m,c,"Generator"),u(m,n,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function a(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var c=function(t){return new Promise((function(e,r){var n=new FileReader;n.onload=function(){e(n.result)},n.readAsDataURL(t)}))},u=function(t){var e=document.createElement("canvas"),r=(e.width=t.width,e.height=t.height,e.getContext("2d"));return null!=r&&r.drawImage(t,0,0,t.width,t.height),e.toDataURL("image/png")},s=function(t){var e=document.createElement("canvas"),r=(e.width=t.width,e.height=t.height,e.getContext("2d"));return null!=r&&r.drawImage(t,0,0,t.width,t.height),e},l=function(){t=i().mark((function t(e){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.getLocalUrlAsync(e);case 2:return r=t.sent,t.abrupt("return",new Promise((function(t,e){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){t(n)},n.onerror=function(){e()},n.src=r})));case 4:case"end":return t.stop()}}),t)}));var t,e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,u,"next",t)}function u(t){a(i,n,o,c,u,"throw",t)}c(void 0)}))};return function(t){return e.apply(this,arguments)}}(),f=function(t){return l(t).then((function(t){return{width:t.width,height:t.height,img:t}}))},d=function(t){return(new XMLSerializer).serializeToString(t).replace(/#/g,"%23").replace(/\t/g,"      ").replace(/(\n)|(\r\n)/g,"<br/>")},h=function(t,e,r,n){var o=r.left,i=r.top,a=r.width,c=r.height;r=r.rotate;return'data:image/svg+xml;charset=utf-8,\n    <svg\n        width="'.concat(t,'"\n        height="').concat(e,'"\n        viewBox="0 0 ').concat(t," ").concat(e,'"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <style type="text/css">body,div{padding:0;margin:0}</style>\n        <foreignObject x="0" y="0" width="100%" height="100%">\n            <body xmlns="http://www.w3.org/1999/xhtml">\n                <div style="width:').concat(t,"px;height:").concat(e,';">\n                    <div style="\n                        transform:translate(').concat(o,"px, ").concat(i,"px);\n                        width:").concat(a,"px;\n                        height:").concat(c,'px;\n                    ">\n                        <div style="\n                            width:').concat(a,"px;\n                            height:").concat(c,"px;\n                            transform-origin:center;\n                            transform:rotate(").concat(r,'deg)\n                        ">\n                            ').concat(n,"\n                        </div>\n                    </div>\n                </div>\n            </body>\n        </foreignObject>\n    </svg>")},p=function(t){return new Promise((function(e){var r=new Image;r.onload=function(){e(r)},r.src=t}))},y=function(t){var e=t.type;return new File([t],"\u81ea\u5b9a\u4e49\u56fe\u7247",{type:e})},g=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp;"),m=function(){return g},v=function(t){return/^https{0,1}:/i.test(t)},b=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:80;return v(t)&&t&&e?(t=(t=t.split("!")[0]).split("?")[0],(m()?"".concat(t,"?imageView2/2/w/").concat(e,"/format/webp/q/"):"".concat(t,"?imageView2/2/w/").concat(e,"/q/")).concat(r)):t}},,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(389),o=Symbol("modifyAction"),i=function(){var t=Object(n.c)();return{action:function(e,r){return t.push(o,{oldInfo:e,newInfo:r}),!0}}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return O}));e=r(15);var n=r.n(e),o=r(0),i=r(123),a=r(42),c=r(382),u=r(110),s=r(22),l=r(2),f=r(88),d=r(7),h=r(133),p=r(198);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,g=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function m(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==y(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(g,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),a(g,i,"Generator"),a(g,n,(function(){return this})),a(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function b(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function w(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){b(i,n,o,a,c,"next",t)}function c(t){b(i,n,o,a,c,"throw",t)}a(void 0)}))}}var O=function(){var t=Object(a.h)(),e=Object(u.d)(),r=e.addOrUpdate,y=e.cloneLayer,g=Object(u.a)().getLayer,b=Object(c.a)(),O=Object(s.m)();return Object(o.useRef)(!1),{updateMask:function(t,e){var o,i=e.url;e=e.materialId;(t=g(t))&&((o=n()(t)).data.maskURL=i,o)&&(""===i?(null!=(i=o.materialIds)&&i.set(f.d.MASK,[]),o.shine=!1,o.data.stretchOption=l.u.fill):(null!=(i=o.materialIds)&&i.set(f.d.MASK,[e]),o.shine=!0,o.data.stretchOption=l.u.cover),r(o),b.action(t,o))},addImageLayer:function(e,r,n,o,i,a,c,u){return w(v().mark((function s(){var l;return v().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:l=Object(p.b)(e,r,n,o,i,a,c,u),l=Object(h.n)(l),(l=Object(h.n)(l)).shine=!1,t.action(l);case 5:case"end":return s.stop()}}),s)})))()},replaceImage:function(t,e,o,a){var c=arguments;return w(v().mark((function u(){var s,l,h,w,O,x,j,_,E,k,S;return v().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(s=!(4<c.length&&void 0!==c[4])||c[4],l=5<c.length&&void 0!==c[5]?c[5]:new Map,h=g(e)){u.next=5;break}return u.abrupt("return");case 5:if(void(O=w=0)===o||void 0===a)return u.next=10,Object(d.P)(t);u.next=17;break;case 10:x=u.sent,j=x.width,x=x.height,w=j,O=x,u.next=19;break;case 17:w=o,O=a;case 19:j=n()(h),null!=(x=j.materialIds)&&x.set(f.d.IMAGE_MATERIAL,l.get(f.d.IMAGE_MATERIAL)||[]),null!=(_=j.materialIds)&&_.set(f.d.FILTER,l.get(f.d.FILTER)||[]),_=j.width,E=j.height,(k=null==(k=j)?void 0:k.data).stretchOption,k.naturalWidth=o||w,k.naturalHeight=a||O,k.url=t,k.cutoutMaskURL="",S=m(m({},n()(p.a)),{},{widthRatio:1,heightRatio:1}),S=Object.assign(S,Object(i.d)({imgWidth:w,imgHeight:O,stageHeigh:E,stageWidth:_})),k.imageTransform=S,j=m(m({},j),{},{data:m({},k)}),r(j),s&&b.action(h,y(j));case 35:case"end":return u.stop()}}),u)})))()},updateImageUrlByCanvas:function(t,e,o){return w(v().mark((function i(){var a,c,u;return v().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c=g(t)){i.next=3;break}return i.abrupt("return");case 3:(u=n()(c)).data.url=Object(d.lb)(e),null!=(a=u.materialIds)&&a.set(f.d.FILTER,[o]),r(u),b.action(c,u);case 8:case"end":return i.stop()}}),i)})))()},updateImageUrl:function(t,e){return w(v().mark((function o(){var i,a;return v().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=g(t)){o.next=3;break}return o.abrupt("return");case 3:(a=n()(i)).data.url=e,r(a),b.action(i,a);case 7:case"end":return o.stop()}}),o)})))()},doubleClick:function(t){Object(o.useEffect)((function(){return function(){return t()}}),[O])}}}},function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return _})),r.d(e,"e",(function(){return E})),r.d(e,"d",(function(){return k})),r.d(e,"f",(function(){return S}));e=r(31);var n,o,i=r.n(e),a=(e=r(180),r.n(e)),c=r(42),u=r(10),s=r(329),l=r(20),f=r(2),d=r(163),h=r(86),p=r(98),y=r(0),g=r(24),m=r(385);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(){O=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(h="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=h.asyncIterator||"@@asyncIterator",i=h.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var h,p,y=((p=(p=(a(h={},n,(function(){return this})),Object.getPrototypeOf))&&p(p(j([]))))&&p!==e&&r.call(p,n)&&(h=p),d.prototype=l.prototype=Object.create(h));function g(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==v(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(y,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),a(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),a(y,i,"Generator"),a(y,n,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,w(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function x(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){x(i,n,o,a,c,"next",t)}function c(t){x(i,n,o,a,c,"throw",t)}a(void 0)}))}}(e=n=n||{}).IMG="img",e.TEXT="text",(r=o=o||{}).SIZE="size",r.SPACE="space",r.CROSS="crisscross",r.OFFSET_X="offsetX",r.OFFSET_Y="offsetY",r.ROTATE="evolve";var _=4,E=function(t){var e=t.toLowerCase();t=1;if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(e)){if(4===e.length||5===e.length){for(var r="#",n=1;n<e.length;n+=1)r+=e.slice(n,n+1).concat(e.slice(n,n+1));e=r}9===e.length&&(t=Number((parseInt("0x"+e.slice(7,9))/255).toFixed(2)));for(var o=[],i=1;i<7;i+=2)o.push(parseInt("0x"+e.slice(i,i+2)));return[].concat(o,[t])}return e},k=function(t,e,r){var n=0,o=0;return r.width>r.height?(r=e.width/e.height,n=i()(e.width/.5*t),o=i()(n/r)):(r=e.height/e.width,o=i()(e.height/.5*t),n=i()(o*r)),(e.width>e.height&&n<o||e.height>e.width&&o<n)&&(t=o,o=n,n=t),{width:n,height:o}},S=function(){function t(t,e){var r=0,n=0,o=t.width/t.height;e.height>e.width?n=(r=e.width/4)/o:r=(n=e.height/4)*(t.width/t.height),o=.9*(e.height-n);return{width:r,height:n,top:o,left:.9*(e.width-r)}}Object(g.e)();var e=Object(m.a)().action,r=Object(c.h)(),n=Object(g.h)(),i=(v=Object(u.p)()).getMainLayer,v=(v.getLayer,v.getLayers),b=(Y=Object(u.w)()).cloneLayer,x=Y.addOrUpdate,k=Object(h.b)(),S=v(),L=Object(u.q)().getLayer,I=((Y=Object(u.f)()).getActiveInfo,Y.delActiveLayer,Object(d.b)((function(t){return t.watermarkLayerModel.bridgeState}))),T=Object(d.a)((function(t){return t.watermarkLayerModel.setBridgeState})),M=Object(y.useRef)(!1),P=Object(y.useRef)(!1),A=(Object(y.useEffect)((function(){M.current=I}),[I]),function(){var t=j(O().mark((function t(e){var r;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=_-1;case 1:if(0<=r)return t.next=4,l.waterMarkBridge.removeText(e,r);t.next=7;break;case 4:r--,t.next=1;break;case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C=function(){var t=j(O().mark((function t(r,n,o,i){var a,c,u,s,f,d=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=4<d.length&&void 0!==d[4]&&d[4],t.next=3,A(r);case 3:c=0;case 4:if(c<n.length)return f=n[c],t.next=8,l.waterMarkBridge.addText(r,f);t.next=15;break;case 8:return t.next=10,l.waterMarkBridge.setTextColor(r,o[0],o[1],o[2],o[3],c);case 10:return t.next=12,l.waterMarkBridge.setTextFont(r,i,c);case 12:c++,t.next=4;break;case 15:if(a)return t.next=18,l.waterMarkBridge.updateResultBuffer(r);t.next=26;break;case 18:return u=L(r),s=b(u),t.next=22,D(r);case 22:f=t.sent,Object.assign(s.data,{url:(null==f?void 0:f.url)||"",texts:n}),x(s),e(u,s);case 26:return t.abrupt("return",!0);case 27:case"end":return t.stop()}}),t)})));return function(e,r,n,o){return t.apply(this,arguments)}}(),R=function(){var t=j(O().mark((function t(r,n,o){var i,a,c,u,s,f,d,h,y,g=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.r,a=n.g,c=n.b,u=n.a,s=3<g.length&&void 0!==g[3]&&g[3],f=0;case 3:if(f<o)return t.next=6,l.waterMarkBridge.setTextColor(r,i,a,c,u,f);t.next=9;break;case 6:f++,t.next=3;break;case 9:if(s)return t.next=12,l.waterMarkBridge.updateResultBuffer(r);t.next=20;break;case 12:return d=L(r),h=b(d),t.next=16,D(r);case 16:y=t.sent,Object.assign(h.data,{url:(null==y?void 0:y.url)||"",textColor:Object(p.f)({r:i,g:a,b:c,a:u/100})}),x(h),e(d,h);case 20:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),N=function(){var t=j(O().mark((function t(e,r){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.waterMarkBridge.registerFont(e,r);case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D=function(){var t=j(O().mark((function t(e){var r;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.waterMarkBridge.getWaterMarkSplitBitmap(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=j(O().mark((function t(e,r){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.waterMarkBridge.setCustomizePath(e,r);case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),B=function(){var t=j(O().mark((function t(){var e,r,n;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.current||P.current)return t.abrupt("return");t.next=2;break;case 2:return P.current=!0,r=i(),n=r.width,e=r.height,r=document.querySelector("#".concat(f.e).concat(r.id)),n=Object(l.createCanvas)(n,e,r),t.next=10,l.waterMarkBridge.from(n).create(f.C,f.D);case 10:M.current=!0,P.current=!1,T(!0);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=j(O().mark((function t(e,r){var n;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.match(/zip\/(.*?).zip/)[1],t.next=3,l.waterMarkBridge.setMaterialPath(e,n,r,n);case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),U=function(){var t=j(O().mark((function t(e){var r;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=k.find((function(t){return t.font_name===e})))return r=r.zip_file,t.next=5,N(e,r);t.next=7;break;case 5:t.next=9;break;case 7:return t.next=9,N("douyufont","https://material-center.meitudata.com/material/zip/6152bb0e452b59564.zip");case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=j(O().mark((function t(e,r){var n,o,i,a;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.data.fontFamily,o=[],i=[],n?(o=r.data.texts,i=E(r.data.textColor),t.next=20):t.next=8;break;case 8:return t.next=10,l.waterMarkBridge.getTextsInfo(e);case 10:if(null==(a=t.sent)||null==a.textLayers)return t.abrupt("return");t.next=13;break;case 13:if(0==a.textLayers.length)return t.abrupt("return");t.next=16;break;case 16:n=a.textLayers[0].info.mTextFont,o=a.textLayers.map((function(t){return t.info.mTextString})),i=[255*a.textLayers[0].info.mTextORgba.r,255*a.textLayers[0].info.mTextORgba.g,255*a.textLayers[0].info.mTextORgba.b,a.textLayers[0].info.mTextORgba.a],Object.assign(r.data,{texts:o,textColor:Object(p.f)({r:255*a.textLayers[0].info.mTextORgba.r,g:255*a.textLayers[0].info.mTextORgba.g,b:255*a.textLayers[0].info.mTextORgba.b,a:a.textLayers[0].info.mTextORgba.a}),fontFamily:n});case 20:return t.next=22,U(n);case 22:return t.next=24,D(e);case 24:return t.next=26,C(e,o,i,n);case 26:return t.next=28,R(e,{r:i[0],g:i[1],b:i[2],a:100*i[3]},o.length);case 28:return t.next=30,l.waterMarkBridge.updateResultBuffer(e);case 30:return t.abrupt("return",!0);case 31:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),W=function(){var t=j(O().mark((function t(e){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.waterMarkBridge.removeWaterMark(e);case 2:return t.next=4,l.waterMarkBridge.addWaterMark(e);case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=j(O().mark((function t(r,n,i){var c,u,s,f,d=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=!(3<d.length&&void 0!==d[3])||d[3],u=void 0,a()(r))return t.next=5,H(r);t.next=10;break;case 5:if(u=L(r)){t.next=8;break}return t.abrupt("return");case 8:t.next=12;break;case 10:u=b(r),r=u.id;case 12:if(s=b(u),n===o.SIZE)return t.next=16,l.waterMarkBridge.setWidthRatio(r,i/100,0);t.next=18;break;case 16:t.next=46;break;case 18:if(n===o.SPACE)return(null==s?void 0:s.data).space=i/100,t.next=22,l.waterMarkBridge.setSpacing(r,i/100,0);t.next=24;break;case 22:t.next=46;break;case 24:if(n===o.ROTATE)return s.rotate=i,t.next=28,l.waterMarkBridge.setRotate(r,i,0);t.next=30;break;case 28:t.next=46;break;case 30:if(n===o.CROSS)return(null==s?void 0:s.data).cross=i/100,t.next=34,l.waterMarkBridge.setStaggered(r,i/100,0);t.next=36;break;case 34:t.next=46;break;case 36:if(n===o.OFFSET_X)return(null==s?void 0:s.data).offsetX=i/100,t.next=40,l.waterMarkBridge.setMoveOffsetX(r,i/100);t.next=42;break;case 40:t.next=46;break;case 42:if(n===o.OFFSET_Y)return(null==s?void 0:s.data).offsetY=i/100,t.next=46,l.waterMarkBridge.setMoveOffsetY(r,i/100);t.next=46;break;case 46:if(c)return t.next=49,D(r);t.next=53;break;case 49:f=t.sent,(null==s?void 0:s.data).url=null==f?void 0:f.url,x(s),e(u,s);case 53:return t.abrupt("return",!0);case 54:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),H=function(){var t=j(O().mark((function t(e){var r;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M.current){t.next=3;break}return t.next=3,B();case 3:if(e)return t.next=6,D(e);t.next=14;break;case 6:if(t.sent)return t.abrupt("return");t.next=9;break;case 9:return t.next=11,W(e);case 11:return r=L(e),t.next=14,q(r);case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=(v=function(){var t=j(O().mark((function t(r,n,o){var i,a,c,u,s,d,h=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=3<h.length&&void 0!==h[3]&&h[3],a=b(L(r))){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,D(r);case 6:if(t.sent){t.next=10;break}return t.next=10,H(a.id);case 10:return t.next=12,U(n);case 12:c=0;case 13:if(c<_)return t.next=16,l.waterMarkBridge.setTextFont(r,n,c);t.next=19;break;case 16:c++,t.next=13;break;case 19:if(i)return t.next=22,l.waterMarkBridge.updateResultBuffer(r);t.next=35;break;case 22:return u=b(a),t.next=25,D(r);case 25:return s=t.sent,t.next=28,l.waterMarkBridge.getTextsInfo(r);case 28:(null==u?void 0:u.data).url=null==s?void 0:s.url,(null==u?void 0:u.data).fontFamily=n,null!=(d=u.materialIds||new Map)&&d.set(f.o.FONT_FAMILY,[String(o)]),u.materialIds=d,x(u),e(a,u);case 35:return t.abrupt("return",!0);case 36:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),function(){var r=j(O().mark((function r(a,c){var u,s,d,h,p,y,g,m=arguments;return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=2<m.length&&void 0!==m[2]&&m[2],s=(S.filter((function(t){return t.layerType===f.h.WATERMARK}))||[null])[0]){r.next=4;break}return r.abrupt("return");case 4:return s=L(s.id),d=s.id,r.next=8,H(d);case 8:return(h=b(s)).data.isFullScreen=a,r.next=13,l.waterMarkBridge.setFullscreen(d,a);case 13:if(a)return y=i(),p=y.width,y=y.height,r.next=18,K(d,o.ROTATE,s.rotate,!1);r.next=30;break;case 18:return r.next=20,K(d,o.SIZE,50,!1);case 20:return r.next=22,K(d,o.SPACE,20,!1);case 22:return r.next=24,K(d,o.CROSS,0,!1);case 24:return r.next=26,D(d);case 26:g=r.sent,Object.assign(h,{width:p,height:y,top:0,left:0,rotate:s.rotate,data:w(w({},h.data),{url:(null==g?void 0:g.url)||"",size:.1,space:.2,cross:0})}),r.next=36;break;case 30:return r.next=32,K(d,o.ROTATE,0,!1);case 32:return r.next=34,D(d);case 34:g=r.sent,Object.assign(h,t({width:g.width,height:g.height},c),{rotate:0,data:w(w({},h.data),{url:(null==g?void 0:g.url)||"",size:0,space:0,rotate:0,cross:0})});case 36:u&&(x(h),n.action(s,h),e(s,h));case 37:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}()),V=function(){var r=j(O().mark((function r(n,o,i){var a,c,u,s=arguments;return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=3<s.length&&void 0!==s[3]&&s[3],c=b(n),r.next=4,F(c.id,o);case 4:if(a)return r.next=7,D(c.id);r.next=13;break;case 7:u=r.sent,(null==c?void 0:c.data).url=u.url,(null==c?void 0:c.data).originUrl=o,Object.assign(c,t({width:u.width,height:u.height},i),{top:c.top,left:c.left}),x(c),e(n,c);case 13:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}(),X=function(){var i=j(O().mark((function i(a,c,u,d,h,p){var y,g,m;return O().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return y=Object(s.b)(a,u,d),(g=(S.filter((function(t){return t.layerType===f.h.WATERMARK}))||[null])[0])&&(y.id=g.id),i.next=5,B();case 5:return i.next=7,W(y.id);case 7:if(null!=d&&d.materialId||!u){i.next=12;break}return i.next=10,F(y.id,u);case 10:i.next=16;break;case 12:return i.next=14,G(y.id,null==d?void 0:d.zipUrl);case 14:return i.next=16,z(y.id,y);case 16:if(h)return i.next=19,l.waterMarkBridge.setFullscreen(y.id,!0);i.next=28;break;case 19:return i.next=21,K(y,o.ROTATE,0,!1);case 21:return i.next=23,K(y,o.SPACE,20,!1);case 23:return i.next=25,K(y,o.CROSS,0,!1);case 25:return i.next=27,K(y,o.SIZE,50,!1);case 27:Object.assign(y,{width:c.width,height:c.height,top:0,left:0,rotate:0,data:w(w({},y.data),{isFullScreen:!0,size:.1,space:.2,cross:0})});case 28:if(p)return i.next=31,D(y.id);i.next=35;break;case 31:m=i.sent,y.data.url=null==m?void 0:m.url,h||Object.assign(y,t({width:m.width,height:m.height},c)),g?(g=L(g.id),x(y),n.action(g,y),e(g,y)):r.action(y);case 35:case"end":return i.stop()}}),i)})));return function(t,e,r,n,o,a){return i.apply(this,arguments)}}(),q=function(){var t=j(O().mark((function t(e){var r,n,i,a,c,u,s,f,d;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.rotate,n=e.id,d=e.data,i=d.fontFamily,d.url,a=d.originUrl,c=d.textColor,u=d.isFullScreen,s=d.zipUrl,d.size,f=d.space,d=d.cross,i||c){t.next=7;break}return t.next=5,F(e.id,a);case 5:t.next=11;break;case 7:return t.next=9,G(e.id,s);case 9:return t.next=11,z(e.id,e);case 11:if(u)return t.next=14,l.waterMarkBridge.setFullscreen(n,u);t.next=22;break;case 14:return t.next=16,K(n,o.CROSS,100*d,!1);case 16:return t.next=18,K(n,o.SIZE,50,!1);case 18:return t.next=20,K(n,o.SPACE,100*f,!1);case 20:return t.next=22,K(n,o.ROTATE,r,!1);case 22:return t.abrupt("return",!0);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{initWatermarkImageKit:B,destroy:function(){l.waterMarkBridge.destroy(),T(!1)},addWatermarkLayer:X,setFullScreen:Y,setWatermarkFullScreen:K,getWatermarkImg:D,createWatermark:W,setImgWatermark:F,setTextWatermark:G,initTextWatermark:z,registerFont:N,changeTextWatermark:C,setTextWatermarkColor:R,checkImageKit:H,setWatermarkFont:v,setImageWatermarkUrl:V,updateBridge:q}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(19),o=r(24),i=r(10),a=r(41),c=r(329),u=Symbol("watermarkModify"),s=(Symbol("watermarkOpacityModify"),function(){var t=Object(o.e)(),e=(Object(i.f)().delActiveLayer,Object(i.w)().addOrUpdate);return Object(o.i)(u,{undo:function(t){t.callback,t=t.layer,e(t),n.a.emit("".concat(a.e.BeforeRedo).concat(c.a),{layer:t})},redo:function(t){t.callback,t=t.newLayer,e(t),n.a.emit("".concat(a.e.BeforeRedo).concat(c.a),{layer:t})}}),{action:function(e,r){return t.push(u,{layer:e,newLayer:r}),!0}}})},,,function(t,e,r){"use strict";r.d(e,"b",(function(){return v})),r.d(e,"a",(function(){return b})),r.d(e,"c",(function(){return w}));var n=r(162);function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(e,r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.min=0,this.max=0,this.min=e,this.max=r}var e,r;return e=t,(r=[{key:"overlaps",value:function(t){return this.max>t.min&&t.max>this.min}}])&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.x=void 0,this.y=void 0,this.x=void 0,this.y=void 0}var e,r;return e=t,(r=[{key:"collidesWith",value:function(t){var e=(e=this.getAxes()).concat(t.getAxes());return!this.separationOnAxes(e,t)}},{key:"separationOnAxes",value:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r],i=e.project(o);o=this.project(o);if(!i.overlaps(o))return!0}return!1}},{key:"project",value:function(t){throw"project(axis) not implemented"}},{key:"getAxes",value:function(){throw"getAxes() not implemented"}}])&&a(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.x=0,void(this.y=0)===e?(this.x=0,this.y=0):(this.x=e.x,this.y=e.y)}var e,r;return e=t,(r=[{key:"getMagnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"add",value:function(e){var r=new t(void 0);return r.x=this.x+e.x,r.y=this.y+e.y,r}},{key:"subtract",value:function(e){var r=new t(void 0);return r.x=this.x-e.x,r.y=this.y-e.y,r}},{key:"dotProduct",value:function(t){return this.x*t.x+this.y*t.y}},{key:"edge",value:function(t){return this.subtract(t)}},{key:"perpendicular",value:function(){var e=new t(void 0);return e.x=this.y,e.y=0-this.x,e}},{key:"normalize",value:function(){var e=new t(void 0),r=this.getMagnitude();return 0!==r&&(e.x=this.x/r,e.y=this.y/r),e}},{key:"normal",value:function(){return this.perpendicular().normalize()}}])&&u(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=p((function t(e,r){y(this,t),this.x=0,this.y=0,this.x=e,this.y=r})),m=function(){var t=n,e=c;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e);var r=function(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var t,n=d(e);if(t=r?(t=d(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(n);function n(){var t;return y(this,n),(t=r.call(this)).points=[],t.points=[],t}return p(n,[{key:"getAxes",value:function(){for(var t=new s(void 0),e=new s(void 0),r=[],n=0,o=this.points.length-1;n<o;n++)t.x=this.points[n].x,t.y=this.points[n].y,e.x=this.points[n+1].x,e.y=this.points[n+1].y,r.push(t.edge(e).normal());return t.x=this.points[this.points.length-1].x,t.y=this.points[this.points.length-1].y,e.x=this.points[0].x,e.y=this.points[0].y,r.push(t.edge(e).normal()),r}},{key:"project",value:function(t){var e=[],r=new s(void 0);return this.points.forEach((function(n){r.x=n.x,r.y=n.y,e.push(r.dotProduct(t))})),new i(Math.min.apply(Math,e),Math.max.apply(Math,e))}},{key:"addPoint",value:function(t,e){this.points.push(new g(t,e))}},{key:"collidesWith",value:function(t){var e=t.getAxes();return void 0!==e&&(e=e.concat(this.getAxes()),!this.separationOnAxes(e,t))}}]),n}(),v=function(t,e){var r=[],n=b(t);return e.map(b).forEach((function(t){n.polygon.collidesWith(t.polygon)&&r.push(t.id)})),r},b=function(t){var e=t.id,r=new m;return w(t).forEach((function(t){var e=(t=new g(t.x,t.y)).x;t=t.y;r.addPoint(e,t)})),{polygon:r,id:e}},w=function(t){var e=t.id,r=t.left,o=t.top,i=t.rotate,a=t.width,c=(t=t.height,a/2+r),u=t/2+o;return[Object(n.t)({x:r-c,y:o-u},i),Object(n.t)({x:r-c+a,y:o-u},i),Object(n.t)({x:r-c+a,y:o-u+t},i),Object(n.t)({x:r-c,y:o-u+t},i)].map((function(t){var r=t.x;t=t.y;return{x:r+c,y:t+u,id:e}}))}},function(t,e,r){"use strict";r.d(e,"c",(function(){return v})),r.d(e,"a",(function(){return O})),r.d(e,"d",(function(){return j})),r.d(e,"b",(function(){return _}));var n=r(139),o=r(19),i=r(10),a=r(34),c=r(17),u=r(285),s=r(2),l=r(194);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=l.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==f(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,c,"next",t)}function c(t){h(i,n,o,a,c,"throw",t)}a(void 0)}))}}var y,g=[],m=!1,v=(o.b.onInit((function(){g.length=0,m=!1})),function(){var t=Object(c.b)((function(t){return t.sdk.historyManagerModel.push})),e=Object(c.b)((function(t){return t.sdk.historyManagerModel.setDisable}));return{push:function(r,o){e(!0);var i,c=Object(n.a)();t({id:c,historyType:r}),g.push({id:c,data:o}),i=function(){e(!1)},m||function t(){var e,r;g.length?(e=(r=g.pop()).id,r=r.data,a.b.setItemAsync(e,r).then((function(e){t()}))):(m=!1,i())}(),m=!0}}}),b="b_redo_event",w="b_undo_event",O=function(){return{onBeforeRedo:function(t){o.a.onUnique(b,t)},onBeforeUndo:function(t){o.a.onUnique(w,t)}}},x=new Map,j=function(t,e){null!=e&&e.undo||null!=e&&e.redo?x.set(t,e):x.delete(t)},_=((e=y=y||{}).Back="history_event_back",e.Forward="history_event_forward",function(){var t=Object(c.b)((function(t){return t.sdk.historyManagerModel.setDisable})),e=Object(c.b)((function(t){return t.sdk.historyManagerModel.back})),r=Object(c.b)((function(t){return t.sdk.historyManagerModel.forward})),n=Object(c.b)((function(t){return t.sdk.historyManagerModel.setRedoOrUndo}));function f(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];(t=t.oldInfo)&&(j(t),g(t,e),t.layerType===s.h.TEXT_LAYER)&&t.textParentIsMaterial&&k.action(t.id)}function h(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];(t=t.newInfo)&&(j(t),g(t,e),t.layerType===s.h.TEXT_LAYER)&&t.textParentIsMaterial&&k.action(t.id)}function g(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];t.layerType===s.h.MAIN_LAYER||t.layerType===s.h.BACKGROUND_LAYER||(t.parentId&&_(t.parentId),!e)||t.layerType===s.h.TEXT_MATERIAL_LAYER&&t.parentId||E(t.id)}m=Object(c.b)((function(t){return t.sdk.historyManagerModel.getStateByName}));var m,v=function(t){var e;return m({payload:t,callback:function(t){e=t}}),e},O=Object(i.x)().hide,j=Object(i.w)().addOrUpdate,_=Object(i.L)().updateGroup,E=Object(i.h)().setActiveLayer,k=Object(u.c)();return{undo:function(){var r=v(l.a.canUndo),i=v(l.a.disable);r&&!i&&(o.a.emit(y.Back),t(!0),O(),e((function(t){var e=t.id,r=t.historyType;a.b.getItemAsync(e).then(function(){var t=p(d().mark((function t(e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.a.emit(w,e),setTimeout(p(d().mark((function t(){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(o=x.get(r))&&o.undo)return t.next=4,o.undo(e,f);t.next=6;break;case 4:t.next=7;break;case 6:f(e);case 7:n();case 8:case"end":return t.stop()}}),t)}))),0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})))},redo:function(){var e=v(l.a.canRedo),i=v(l.a.disable);e&&!i&&(o.a.emit(y.Forward),t(!0),O(),r((function(t){var e=t.id,r=t.historyType;a.b.getItemAsync(e).then(function(){var t=p(d().mark((function t(e){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.a.emit(b,e),setTimeout(p(d().mark((function t(){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(o=x.get(r))&&o.redo)return t.next=4,o.redo(e,h);t.next=6;break;case 4:t.next=7;break;case 6:h(e);case 7:n();case 8:case"end":return t.stop()}}),t)}))),0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})))}}})},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){t.exports={item:"item--LUCZw"}},function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(454),a=r(13);function c(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?l(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1055),e.a=o.a.memo((function(t){var e,r=void 0===(e=t.iframeUrl)?"":e,c=void 0===(e=t.appInfo)?{}:e,l=void 0===(e=t.userInfo)?{}:e,f=t.setMode,d=(t=(e=s(Object(n.useState)("\u5728\u7ebf\u54a8\u8be2"),2))[0],e[1]);return Object(n.useEffect)((function(){i.b.setTarget(r),Object(i.a)({getAppInfo:function(){return u({},c)},getUserInfo:function(){return u({},l)},setNavigationBarTitle:function(t){"string"==typeof(t=t.title)&&d(t)}})}),[l,r,c]),o.a.createElement("div",{className:"business-messenger"},o.a.createElement("div",{className:"business-messenger__content"},o.a.createElement("span",{className:"title"},t),o.a.createElement("span",{className:"close"},o.a.createElement(a.d,{name:"crossBold",fontSize:22,onClick:function(){f("")},color:"#b2b2b2"}))),o.a.createElement("iframe",{className:"business-messenger__iframe",title:"\u5728\u7ebf\u54a8\u8be2",frameBorder:"0",src:Object(i.c)(r)}))}))},,,,,,,,,,function(t,e,r){"use strict";var n=r(13),o=r(0),i=r.n(o);r(1138),e.a=function(t){var e=t.scale,r=t.setScale,o=t.cancel,a=t.confirm,c=t.reset,u=t.isChange,s=void 0!==(s=t.showAdjustImage)&&s,l=void 0===(f=t.adjustImage)?function(){}:f,f=t.cropScalePosition,d=(t=void 0!==(t=t.isBackground)&&t,{});return f&&(d.left=f.x,d.top=f.y,d.transform="translate(0, 0)"),i.a.createElement("div",{className:"m-crop-img-scale",style:d},i.a.createElement("div",{className:"m-crop-img-scale__left"},i.a.createElement("div",{className:"m-crop-img-scale__title"},"\u7f29\u653e"),i.a.createElement(n.p,{className:"m-crop-img-scale__slider",defaultValue:100*e,value:100*e,min:100,max:300,tipFormatter:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return 300<=t?"\u5df2\u8fbe\u6700\u5927\u503c":t+"%"},onChange:function(t){return r(t/100)},onAfterChange:function(t){return r(t/100,!0)}})),i.a.createElement("ul",{className:"m-crop-img-scale__right"},t?null:i.a.createElement("li",{className:s?"":"disable",onClick:function(){return l()}},i.a.createElement("span",null,"\u9002\u914d\u56fe\u7247")),i.a.createElement("li",{className:u?"":"disable",onClick:function(){return c()}},i.a.createElement("span",null,"\u91cd\u7f6e")),i.a.createElement("li",{onClick:function(){return o()}},i.a.createElement("span",null,"\u53d6\u6d88")),i.a.createElement("li",{className:"active",onClick:function(){return a()}},i.a.createElement("span",null,"\u5b8c\u6210"))))}},,,,,,function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return d}));e=r(12);var n={vipModalShow:!1,vipModalParams:"",setVipModalShow:Object(e.b)((function(t,e){t.vipModalShow=e})),setVipModalParams:Object(e.b)((function(t,e){t.vipModalParams=e}))},o=(e=Object(e.f)()).useStoreState,i=e.useStoreActions,a=(e.useStoreDispatch,r(0)),c=r.n(a),u=r(13),s=r(101);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?f(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1050);var d=function(t){function e(t){var e=t.data||t.originalEvent&&t.originalEvent.data;"string"==typeof e&&/^[\[\{]/.test(e)&&(e=JSON.parse(e)),/pc\.meitu\.com/.test(t.origin)&&e&&"closeVipSubscribeDialog"===e.action&&(e.data&&e.data.needLogin&&(d(!1),g)&&g(),e.data)&&e.data.success&&(d(!1),m)&&m()}var r={setVipModalShow:i((function(t){return t.vipModel.setVipModalShow})),setVipModalParams:i((function(t){return t.vipModel.setVipModalParams})),vipModalShow:o((function(t){return t.vipModel.vipModalShow})),vipModalParams:o((function(t){return t.vipModel.vipModalParams}))},n=r.vipModalShow,f=r.vipModalParams,d=r.setVipModalShow,h=r.setVipModalParams,p=Object(s.a)().theme,y=t.onClose,g=t.onPayFailCallback,m=t.onPaySuccessCallback,v=(t=(r=l(Object(a.useState)(""),2))[0],r[1]),b=(r=l(Object(a.useState)(!1),2))[0],w=r[1];return Object(a.useEffect)((function(){w(!1),window.localStorage.getItem("access_token");v("".concat(window.location.protocol,"//").concat("","pc.meitu.com/vip?theme=").concat(p).concat(f?"&"+f:"")),w(!0)}),[f]),Object(a.useEffect)((function(){return void 0!==window.addEventListener&&window.addEventListener("message",e,!1),function(){void 0!==window.removeEventListener&&window.removeEventListener("message",e,!1)}}),[]),n?c.a.createElement("div",{className:"buy-vip-modal",onClick:function(t){return t.stopPropagation()}},c.a.createElement("div",{className:"body",style:{backgroundColor:"light"===p?"#ffffff":"rgba(51, 51, 51, 1)"}},c.a.createElement(u.d,{name:"crossBold",color:"light"===p?"#808080":"#b2b2b2",fontSize:24,onClick:function(){d(!1),h(""),y&&y()}}),c.a.createElement("div",{className:"content"},b?c.a.createElement("iframe",{src:t,style:{width:"100%",height:"100%",border:"none",borderRadius:"12px"},title:"\u4f1a\u5458\u4e2d\u5fc3"}):null))):null}},,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n,o,i;function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(){var t="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"",e="navigator"in window&&"appVersion"in navigator&&navigator.appVersion.toLowerCase()||"";return/mac/i.test(e)?"mac":/win/i.test(e)?"windows":/linux/i.test(e)?"linux":(/iphone/i.test(t)||/ipad/i.test(t)||/ipod/i.test(t),/android/i.test(t)?"android":/win/i.test(e)&&/phone/i.test(t)?"windowsPhone":void 0)}function u(){t={},(e=(e=(r=navigator.userAgent.toLowerCase()).match(/rv:([\d.]+)\) like gecko/))||r.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=r.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=r.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=r.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=r.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=r.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]);var t,e,r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?a(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.ie?["IE",t.ie]:t.edge?["EDGE",t.edge]:t.firefox?["Firefox",t.firefox]:t.chrome?["Chrome",t.chrome]:t.opera?["Opera",t.opera]:t.safari?["Safari",t.safari]:["Unkonwn","Unkonwn"],2);return{model:r[0],version:r[1],theme:window.matchMedia("(prefers-color-scheme: dark)").matches?o.Dark:o.Light,language:navigator.systemLanguage||navigator.language,system:-1<(e=navigator.userAgent).indexOf("Mac OS X")?"IOS"+(e.match(/OS [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."):-1<e.indexOf("Android")||-1<e.indexOf("Linux")?"Android"+e.substr(e.indexOf("Android")+8,e.indexOf(";",e.indexOf("Android"))-e.indexOf("Android")-8):-1<e.indexOf("BB10")?"blackberry"+e.substr(e.indexOf("BB10")+5,e.indexOf(";",e.indexOf("BB10"))-e.indexOf("BB10")-5):-1<e.indexOf("IEMobile")?"winphone"+e.substr(e.indexOf("IEMobile")+9,e.indexOf(";",e.indexOf("IEMobile"))-e.indexOf("IEMobile")-9):-1<(e=navigator.userAgent.toLowerCase()).indexOf("windows nt 5.0")?"Windows 2000":-1<e.indexOf("windows nt 5.1")||-1<e.indexOf("windows nt 5.2")?"Windows XP":-1<e.indexOf("windows nt 6.0")?"Windows Vista":-1<e.indexOf("windows nt 6.1")||-1<e.indexOf("windows 7")?"Windows 7":-1<e.indexOf("windows nt 6.2")||-1<e.indexOf("windows 8")?"Windows 8":-1<e.indexOf("windows nt 6.3")?"Windows 8.1":-1<e.indexOf("windows nt 6.2")||-1<e.indexOf("windows nt 10.0")?"Windows 10":"Unknown",osType:c()}}function s(t){var e=t.href;switch(t.target){case i.Self:document.querySelector("iframe").src=e;break;case i.Blank:window.open(e);break;case i.Parent:window.location.replace(e)}}r.d(e,"c",(function(){return f})),r.d(e,"b",(function(){return N})),r.d(e,"a",(function(){return D})),(e=n=n||{})[e.Success=0]="Success",e[e.Unknow=-1]="Unknow",e[e.Timeout=-2]="Timeout",e[e.NotMessenger=1e3]="NotMessenger",e[e.NotSechema=1001]="NotSechema",e[e.NotTarget=1002]="NotTarget",e[e.HandlerError=2e3]="HandlerError",(e=o=o||{}).Light="light",e.Dark="dark",(e=i=i||{}).Blank="blank",e.Self="self",e.Parent="parent",e.Top="top";var l="client_origin";function f(t){return"".concat(t).concat(-1===t.indexOf("?")?"?":"&").concat(l,"=").concat(encodeURIComponent(location.origin))}function d(t){var e=t.schema,r=t.code,o=t.msg;t=t.error;return{schema:null!=e?e:"",code:null!=r?r:n.Unknow,msg:null!=o?o:"\u672a\u77e5\u9519\u8bef",error:null!=(e=null!=t?t:o)?e:null}}var h,p=r(4),y=r(33),g=r(32),m=r(38),v=r(39),b=(e=r(435),"@meitu/messenger"),w="[".concat(b,"] ").concat(location.href,'"}');function O(t){return"object"==typeof t&&!Array.isArray(t)}function x(t){return!!(O(t)&&O(null==t?void 0:t.meta)&&void 0!==(null==t?void 0:t.data)&&t.meta.by===b&&t.meta.id&&t.meta.timestamp&&t.meta.target&&t.meta.origin)}function j(t,e){t=0<arguments.length&&void 0!==t?t:Date.now(),e=1<arguments.length&&void 0!==e?e:"iframe";return"".concat(b.replace("@","").replace("/","-"),"-").concat(e,"-").concat(t,"-").concat((e=(e=99999)-(t=1e4)+1,Math.floor(Math.random()*e+t)))}(r=h=h||{}).Any="any",r.String="string",r.JSON="json";var _=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(){return Object(g.a)(this,r),e.apply(this,arguments)}return Object(y.a)(r)}(Object(e.a)(Error)),E=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object(g.a)(this,t),this.iframe=null,this.iframeLoaded=!1,this.options={debug:!1,sandbox:"allow-same-origin allow-top-navigation allow-top-navigation-by-user-activation allow-scripts"},this.iframeNames=[],this.options=Object.assign(Object.assign({},this.options),e),this.log("options =>",e)}return Object(y.a)(t,[{key:"id",get:function(){var t;return(null==(t=this.iframe)?void 0:t.getAttribute("name"))||""}},{key:"debug",get:function(){return this.options.debug}},{key:"log",value:function(){if(this.debug){for(var t,e="log",r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];"function"==typeof console[n[0]]&&(e=n[0],n.shift()),(t=console)[e].apply(t,["".concat(w)].concat(n))}}},{key:"postMessage",value:function(e,r){var n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=(this.debug,o=o||this.id,this.log("postMessage: options =>",i,{iframeName:o}),this.debug),c=i.useWindow,u=void 0!==(u=i.useWindowTop)&&u,s=void 0!==(l=i.concurrency)&&l,l=void 0===(l=i.receive)||l;try{var f=(null==(n=e.match(/https?:\/\/([^/]+)/))?void 0:n[0])||"";if(!f)throw new _("target ".concat(e," invalid"));var d=f||"*",h=((/MSIE/i.test(navigator.userAgent)||/Trident\/(.*)rv:11\.0/.test(navigator.userAgent)||/Edge\/1(2|3)\./.test(navigator.userAgent))&&(d=e),Date.now()),p={meta:{id:j(h,"post"),by:b,timestamp:h,target:e,origin:location.href},data:r},y=p.meta.id;if(this.log("postMessage: before =>",function(t,e){return JSON.stringify(t,null,1<arguments.length&&void 0!==e?e:"    ")}({id:y,iframeName:o,target:e,targetOrigin:d,data:r})),l&&t.receive((function(t,e,r){r=r.stopReceiveMessage,x(t)&&t.meta.id===p.meta.id&&"function"==typeof(null==i?void 0:i.onReturn)&&i.onReturn(t),s||r()}),{debug:a}),u&&void 0!==window.top)window.top.postMessage(p,d);else if(c)c.postMessage(p,d);else{if(!window.frames[o])throw new _("iframe ".concat(o," not found"));window.frames[o].postMessage(p,d)}"function"==typeof(null==i?void 0:i.onSent)&&i.onSent(),l||"function"==typeof(null==i?void 0:i.onReturn)&&i.onReturn(p)}catch(e){this.log("error",e),"function"==typeof(null==i?void 0:i.onError)&&i.onError(e)}this.debug}},{key:"post",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return function(t,e,r,n){return new(r=r||Promise)((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))}(this,void 0,void 0,Object(p.a)().mark((function n(){var o,i,a,c,u,s,l,f=this;return Object(p.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.onInit,i=r.useIframe,a=r.useWindow,s=r.useWindowTop,c=void 0!==s&&s,s=r.receive,u=void 0===s||s,s=r.concurrency,l=void 0!==s&&s,n.abrupt("return",new Promise((function(n,s){function d(t){return n(t)}function h(t){return s(t)}var p=null==r?void 0:r.onSent;f.createIframeElement(t,{concurrency:l,useIframe:i,useWindow:a,useWindowTop:c,onInit:o,onReady:function(t,r){f.log("post: onReady",{target:t,iframeName:r}),f.postMessage(t,e,r,{receive:u,useWindow:a,useWindowTop:c,onError:h,onSent:p,onReturn:d})},onError:h})})));case 2:case"end":return n.stop()}}),n)})))}},{key:"postSync",value:function(t,e,r){var n=this,o=r.onError,i=r.onInit,a=r.useIframe,c=r.useWindow,u=r.useWindowTop,s=r.concurrency;this.createIframeElement(t,{concurrency:void 0!==s&&s,useIframe:a,useWindow:c,useWindowTop:void 0!==u&&u,onInit:i,onError:o,onReady:function(t,o){n.log("postSync: onReady =>",{target:t,iframeName:o}),"function"==typeof(null==r?void 0:r.onReady)&&r.onReady(t,o),n.postMessage(t,e,o,r)}})}},{key:"createIframeElement",value:function(t){var e,r=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(null==t||!t.trim())throw new _("src is empty");this.debug,this.log("createIframeElement: options =>",n);var o,i,a,c=void 0!==(c=n.concurrency)&&c,u=void 0!==(u=n.useWindowTop)&&u,s=n.useWindow,l=n.useIframe,f=("function"==typeof(null==n?void 0:n.onInit)&&n.onInit(),function(){"function"==typeof(null==n?void 0:n.onReady)&&n.onReady(t,e)});u||s?(this.debug,f()):(s=(null==(u=document.querySelector('iframe[src="'.concat(t,'"]')))?void 0:u.name)===this.id&&!!this.iframe&&!c,u=l||(s?u:document.createElement("iframe")),this.iframe=u,o=s||l&&this.id?this.id:j(),i=Array.isArray(this.options.sandbox)?this.options.sandbox.join(" "):this.options.sandbox,i=(a="".concat(i).trim().split(" ")).filter((function(t,e){return a.indexOf(t,0)===e})).join(" "),c&&this.iframeNames.push(o),l&&u.getAttribute("sandbox")===i&&(s=!0),e=o,this.log("createIframeElement:",{name:o,src:t,concurrency:c,useIframe:l,isReuseIframe:s,createIframe:!s&&!l,sandbox:i}),this.debug,s?f():(u.src=t,u.setAttribute("name",o),u.setAttribute("frameborder","0"),u.setAttribute("sandbox",i),u.addEventListener("load",(function(){r.iframeLoaded=!0,f()}),!1),u.addEventListener("error",(function(t){r.log("error",t),"function"==typeof(null==n?void 0:n.onError)&&n.onError(t.error)}),!1),u.addEventListener("abort",(function(t){r.log("error",t),"function"==typeof(null==n?void 0:n.onError)&&n.onError(new Error("iframe load abort"))}),!1),l||(u.width="0",u.height="0",u.style.width="0",u.style.height="0",u.style.visibility="hidden",document.body.appendChild(u))))}},{key:"concurrency",value:function(t,e){var r=this,n=0;t.forEach((function(o){r.postSync(o.target,o.data,Object.assign(Object.assign({},o.options),{onReturn:function(i){var a;"function"==typeof(null==(a=null==o?void 0:o.options)?void 0:a.onReturn)&&o.options.onReturn(i),(n+=1)===t.length&&(r.log("concurrency: complete =>",r.iframeNames),r.iframeNames.forEach((function(t){(t=document.querySelector('iframe[name="'.concat(t,'"]')))&&t.parentNode.removeChild(t)})),"function"==typeof e)&&e()},concurrency:!0}))}))}},{key:"destroy",value:function(){this.iframe&&(this.iframe.parentElement.removeChild(this.iframe),this.iframe=null,this.iframeLoaded=!1)}}]),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(){S=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o=(p="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=p.asyncIterator||"@@asyncIterator",a=p.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(e){c=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i,a,c,u;e=e&&e.prototype instanceof f?e:f,e=Object.create(e.prototype),o=new O(o||[]);return n(e,"_invoke",{value:(i=t,a=r,c=o,u="suspendedStart",function(t,e){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===t)throw e;return{value:void 0,done:!0}}for(c.method=t,c.arg=e;;){var r=c.delegate;if(r&&(r=function t(e,r){var n=r.method,o=e.iterator[n];return void 0===o?(r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),l):"throw"===(n=s(o,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,l):(o=n.arg)?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,l):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}(r,c),r)){if(r===l)continue;return r}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===u)throw u="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);if(u="executing","normal"===(r=s(i,a,c)).type){if(u=c.done?"completed":"suspendedYield",r.arg===l)continue;return{value:r.arg,done:c.done}}"throw"===r.type&&(u="completed",c.method="throw",c.arg=r.arg)}})}),e}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function h(){}var p,y,g=((y=(y=(c(p={},o,(function(){return this})),Object.getPrototypeOf))&&y(y(x([]))))&&y!==e&&r.call(y,o)&&(p=y),h.prototype=f.prototype=Object.create(p));function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u;if("throw"!==(o=s(t[o],t,i)).type)return(i=(u=o.arg).value)&&"object"==k(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function x(t){if(t){var e,n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(n=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=n}return{next:j}}function j(){return{value:void 0,done:!0}}return n(g,"constructor",{value:d.prototype=h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(v.prototype),c(v.prototype,i,(function(){return this})),t.AsyncIterator=v,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new v(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),c(g,a,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=Object(t),n=[];for(e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},t.values=x,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,w(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function L(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function I(t){var e=void 0!==(e=t.debug)&&e,r=t.handlers;E.receive(function(){t=S().mark((function t(e,o,i){var a,c,u,s,l,f,h,p;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=e.meta,a=e.data,c=i.returnMessage,u&&a){t.next=6;break}return t.abrupt("return");case 6:if(u=a.code,f=a.msg,a.data,s=a.schema,l=a.params,void 0!==u&&void 0!==f)return t.abrupt("return");t.next=11;break;case 11:if(r&&"function"==typeof r[s]){t.next=15;break}return f="[receiveMessage]\u6d88\u606f\u6709\u8bef\uff0c\u67e5\u627e\u4e0d\u5230\u5bf9\u5e94\u534f\u8bae\uff01schema: ".concat(s,"."),t.abrupt("return",d({origin:origin,schema:s,code:n.NotSechema,msg:f}));case 15:return t.prev=15,t.next=18,r[s](l);case 18:h=t.sent,c({origin:origin,schema:s,code:0,msg:"success",data:h}),t.next=28;break;case 22:t.prev=22,t.t0=t.catch(15),h="[receiveMessage]\u56de\u8c03\u9519\u8bef",p={origin:origin,schema:s,code:null!=(p=t.t0.code)?p:n.HandlerError,msg:null!=(p=t.t0.msg)?p:h,error:null!=(p=t.t0.error)?p:t.t0},c(p);case 28:case"end":return t.stop()}}),t,null,[[15,22]])}));var t,e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){L(i,n,o,a,c,"next",t)}function c(t){L(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(t,r,n){return e.apply(this,arguments)}}(),{debug:e})}function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function C(t,e,r){(e=R(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}function R(t){return t=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==T(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===T(t)?t:String(t)}E.receive=function(t){function e(t){return"object"==typeof(t=function(t){if("string"==typeof t&&t)try{t=JSON.parse(t)}catch(t){}return t}(t))?t:{}}var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.debug,o=void 0!==n&&n,i=void 0===(n=r.only)||n,a=void 0===(n=r.dataType)?h.JSON:n,c=(null==r?void 0:r.window)||window;c.addEventListener("message",(function r(n){"".concat(w," receiveMessage.onMessage");var u,s=n.data,l=s=a===h.JSON?e(s):s,f=x(s);i&&!f||(u=f?null==l?void 0:l.meta:{},"function"==typeof t&&t(s,n,{parseJSON:e,returnMessage:function(t){var e=Date.now();e={meta:Object.assign(Object.assign({id:j(e,"return")},u),{timestamp:e,by:b,target:n.origin,origin:location.href}),data:t};o&&(e.meta.originData=l),n.source.postMessage(e,{targetOrigin:n.origin})},stopReceiveMessage:function(){c.removeEventListener("message",r,!1)}}))}),!1)};var N=new(function(){function t(){var e=(o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).target,r=o.timeout,n=void 0!==(n=o.debug)&&n,o=o.handlers,i=this;if(!(i instanceof t))throw new TypeError("Cannot call a class as a function");C(this,"messenger",null),C(this,"debug",!1),C(this,"target",void 0),C(this,"useIframe",void 0),C(this,"timeout",15e3),C(this,"handlers",{}),this.target=e||(null==(i=document.querySelector("iframe"))?void 0:i.src)||void 0,void 0!==r&&(this.timeout=r),this.debug=n,(o=o||{}).getSystemInfo||(o.getSystemInfo=u),o.navigateTo||(o.navigateTo=s),this.handlers=o,this.messenger=new E({debug:n}),this.registReceiver()}var e,r;return e=t,(r=[{key:"getReceiveOptions",value:function(t){return P({handlers:this.handlers,debug:this.debug},t)}},{key:"setTarget",value:function(t){this.target=t}},{key:"getPostOptions",value:function(t){return P({useWindow:window,target:this.target,timeout:this.timeout,debug:this.debug},t)}},{key:"registReceiver",value:function(t){return I(this.getReceiveOptions(t))}},{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"removeHandler",value:function(t){this.handlers[t]=void 0}},{key:"destroy",value:function(){var t,e;for(e in null!=(t=this.messenger)&&t.destroy(),this.messenger=void 0,this.handlers)this.handlers[e]=void 0}}])&&A(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function D(t){for(var e in t)N.addHandler(e,t[e])}},,function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return M}));var n,o,i,a,c=r(661),u=r(651),s=r(644),l=r(627),f=r(660),d=r(510),h=r(650),p=r(659),y=r(420),g=r(455),m=r(244),v=r(347),b=((e=n=n||{})[e.Created=0]="Created",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Terminated=3]="Terminated",e[e.Publish=4]="Publish",e[e.Published=5]="Published",e[e.End=6]="End",(e=o=o||{})[e.Client=1]="Client",e[e.ClientLocal=2]="ClientLocal",e[e.Server=3]="Server",e[e.AsyncCommon=4]="AsyncCommon",e[e.AsyncPush=5]="AsyncPush",e[e.AsyncRecommend=6]="AsyncRecommend",(e=i=i||{}).Uid="type1",e.AppGid="type2",e.WebGid="type3",e.PcGid="type4",e.MacAddress="type5",(e=a=a||{}).Release="release",e.Beta="beta",e.Test="test",(e={})[a.Release]="//meepo.meitustat.com/ab_allot_web_v2",e[a.Beta]="//test-meepo.meitustat.com/ab_allot_web_v2",e[a.Test]="//test-meepo.meitustat.com/ab_allot_web_v2",e);function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(){return(O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e=function(){function t(t){this.options={appKey:"",gid:"",uid:void 0,wgid:"",custom:[],env:a.Release},this.options=O({},this.options,t)}var e,r;return e=t,(r=[{key:"url",get:function(){return b[this.options.env]}}])&&w(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var x=r(1188),j=r(1194),_=r(1195);function E(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function k(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){E(i,n,o,a,c,"next",t)}function c(t){E(i,n,o,a,c,"throw",t)}a(void 0)}))}}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(e){e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,o=(v="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=v.asyncIterator||"@@asyncIterator",a=v.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(r){c=function(t,e,r){return t[e]=r}}function u(t,r,n,o){var i,a,c,u;r=r&&r.prototype instanceof y?r:y,r=Object.create(r.prototype),o=new E(o||[]);return r._invoke=(i=t,a=n,c=o,u=l,function(t,r){if(u===d)throw new Error("Generator is already running");if(u===h){if("throw"===t)throw r;return S()}for(c.method=t,c.arg=r;;){var n=c.delegate;if(n&&(n=function t(r,n){var o=r.iterator[n.method];if(o===e){if(n.delegate=null,"throw"===n.method){if(r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}return"throw"===(o=s(o,r.iterator,n.arg)).type?(n.method="throw",n.arg=o.arg,n.delegate=null,p):(o=o.arg)?o.done?(n[r.resultName]=o.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}(n,c),n)){if(n===p)continue;return n}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===l)throw u=h,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);if(u=d,"normal"===(n=s(i,a,c)).type){if(u=c.done?h:f,n.arg!==p)return{value:n.arg,done:c.done}}else"throw"===n.type&&(u=h,c.method="throw",c.arg=n.arg)}}),r}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",h="completed",p={};function y(){}function g(){}function m(){}var v,b,w=((b=(b=(c(v={},o,(function(){return this})),Object.getPrototypeOf))&&b(b(k([]))))&&b!==r&&n.call(b,o)&&(v=b),m.prototype=y.prototype=Object.create(v));function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var u;if("throw"!==(o=s(t[o],t,i)).type)return(i=(u=o.arg).value)&&"object"==typeof i&&n.call(i,"__await")?e.resolve(i.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(i).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}));c(o.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t){var r,i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(i=function o(){for(;++r<t.length;)if(n.call(t,r))return o.value=t[r],o.done=!1,o;return o.value=e,o.done=!0,o}).next=i}return{next:S}}function S(){return{value:e,done:!0}}return c(w,"constructor",g.prototype=m),c(m,"constructor",g),g.displayName=c(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,a,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(x.prototype),c(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,a,"Generator"),c(w,o,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,_(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:k(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(e.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})),T="abTest",M=function(t){function e(){var e,r=t.apply(this,arguments)||this;return r.initialize=!1,r.identifyMap=(e=r.custom,Object(v.a)(e,(function(t,e){var r=e.type;e=e.value;return t[r]=e,t}),{})),r}r=t,(a=e).prototype=Object.create(r.prototype),L(a.prototype.constructor=a,r);var r,a=e.prototype;return a.init=function(){var t=k(I.mark((function t(){var e,r;return I.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],window.mtstat&&"function"==typeof window.mtstat.init&&this.wgid)return t.prev=2,t.next=5,this.fetchABCodes();t.next=16;break;case 5:r=t.sent,e=Object(m.a)(r,"abCodes"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:this._setLocalABInfo(e),this.initialize=!0,t.next=17;break;case 16:case 17:return t.abrupt("return",e);case 18:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),a.fetchABCodes=function(){var t=b[this.options.env],e=this.toQueryParams(),r=function(t){for(var e=function(t){t=function(t){for(var e,r="",n=e=0,o=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<o;i++){var a=t.charCodeAt(i),c=null;a<128?e++:c=127<a&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==c&&(n<e&&(r+=t.substring(n,e)),r+=c,n=e=i+1)}return n<e&&(r+=t.substring(n,t.length)),r}(t);for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return e}(t),r="",n=0;n<e.length;n++){var o=e[n].toString(16);r+=(o=1===o.length?"0"+o:o).toUpperCase()}return r}(JSON.stringify(e));return new Promise((function(e,n){null!=fetch&&fetch(t,{method:"POST",body:r}).then(function(){var t=k(I.mark((function t(r){var n;return I.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:n=t.sent,e(Object(x.a)(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return n(t)}))}))},a.toQueryParams=function(){var t,e=this.identifyMap,r=(o=this.options).appKey,n=o.gid,o=o.uid;return(r={appKey:r})[i.WebGid]=this.wgid,r.version=3,n&&Object(g.a)(r,((t={})[i.AppGid]=n,t)),o&&Object(g.a)(r,((n={})[i.Uid]=o,n)),Object(g.a)(r,e)},a.isInABTesting=function(t){var e,r;if(this._checkHasInit("isInABTesting"))return e=Object(j.a)(T,[]),-1!==(t=Object(y.a)(e,{abCode:t}))&&(0===Object(m.a)(e,[t,"count"])&&(r=Object(m.a)(e,[t,"abCode"]),this.reportABCodeEnterTest(r)),Object(p.a)(e,[t,"count"],Object(h.a)(Object(m.a)(e,[t,"count"]),1)),Object(_.a)(T,e),!0)},a.inABTestingCode=function(t){var e,r;if(this._checkHasInit("inABTestingCode"))return r=Object(j.a)(T,[]),e=Object(d.a)(r,"abCode"),r=Object(f.a)(t,(function(t){return!Object(l.a)(null==e?void 0:e[t])})),this.isInABTesting(r),r},a.getABTestingServerCodes=function(){var t;if(this._checkHasInit("getABTestingServerCodes"))return t=Object(j.a)(T,[]),Object(v.a)(t,(function(t,e){var r=e.abCode;e=e.et;return Object(s.a)([o.Server,o.AsyncCommon,o.AsyncPush,o.AsyncRecommend],e)&&t.push(r),t}),[])},a.setABTestingServerCodes=function(t){var e=this;this._checkHasInit("setABTestingServerCodes")&&Object(u.a)(t,(function(t){e.isInABTesting(t)}))},a.getABTestingCodes=function(){var t;if(this._checkHasInit("getABTestingCodes"))return t=Object(j.a)(T,[]),Object(v.a)(t,(function(t,e){var r=e.abCode;return e.status===n.InProgress&&t.push(r),t}),[])},a._setLocalABInfo=function(t){void 0===t&&(t=[]);var e=Object(j.a)(T,[]),r=Object(d.a)(e,"abCode");e=Object(c.a)(t,(function(t){var e=t.abCode,n=t.et,o=t.status,i=(t=t.v,Object(m.a)(r,e,{}));return{abCode:e,et:n,status:o,v:t,count:(null==i?void 0:i.v)===t?i.count:0}}));Object(_.a)(T,e)},a.reportABCodeEnterTest=function(t){var e;this._checkHasInit("reportABCodeEnterTest")&&null!=(e=mtstat)&&e.track("abcode_enter_test",{current_abcode:t})},a._checkHasInit=function(t){return void 0===t&&(t="\u8be5"),this.initialize,this.initialize},a.getABInfo=function(){var t=Object(j.a)(T,[]);return{ab_codes:Object(v.a)(t,(function(t,e){var r=e.abCode,o=e.status;e=e.count;return o===n.InProgress&&t.push({code:r,count:e}),t}),[]),version:"1.1.3"}},r=e,(a=[{key:"wgid",get:function(){var t="";try{var e;t=null==(e=window.mtstat)?void 0:e.getDeviceId()}catch(t){}return this.identifyMap[i.WebGid]||t}},{key:"custom",get:function(){var t;return null!=(t=null==(t=this.options)?void 0:t.custom)?t:[]}}])&&S(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),e}(e)},function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),(r=n=n||{}).small="small",r.large="large"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){},,,,,,,,,,,,,,function(t){t.exports=JSON.parse('{"name":"image_editor"}')},,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return T})),r.d(e,"b",(function(){return C}));var n=r(13),o=r(0),i=r.n(o),a=r(29),c=r(7);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?s(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){function r(r){var o,i=1;t&&e&&(o=Object(c.n)(h,p,t,e),i=r||o,v(o)),n(i),g(i)}var n=Object(a.j)(),i=Object(a.i)(),s=Object(a.k)(),l=u(Object(o.useState)(s),2),f=l[0],d=l[1],h=(l=Object(a.c)()).width,p=l.height,y=(l=u(Object(o.useState)(1),2))[0],g=l[1],m=(l=u(Object(o.useState)(1),2))[0],v=l[1];return Object(o.useEffect)((function(){g(1),v(1),d(s)}),[s]),Object(o.useEffect)((function(){r()}),[h,p,t,e,s]),Object(o.useEffect)((function(){i!==y&&f===s&&r(i)}),[i,y,f,s]),m}r(1157);var f=r(320),d=r(415);function h(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?g(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(){var t;return null==(t=document.getElementById("scrollContainer"))?void 0:t.parentNode}r(1158);var v=i.a.memo((function(t){var e=t.showContactMessage,r=t.showFeedBack,a=t.showKeyboardKeymap,c=t.feedBackSrc,u=t.businessMessengerConfig,s=(t=void 0===(t=t.unReadMessage)?0:t,y(Object(o.useState)(""),2)),l=s[0],h=s[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(n.k,{content:i.a.createElement("div",null,i.a.createElement("ul",null,a?i.a.createElement("li",{onClick:function(){return h("KeyboardKeymap")}},"\u5feb\u6377\u952e"):null,e?i.a.createElement("li",{onClick:function(){return h("ContactMessage")}},"\u5728\u7ebf\u5ba2\u670d",0<t?i.a.createElement("span",{className:"user-unread-message"},i.a.createElement("span",null,99<t?"99+":t)):null):null,r?i.a.createElement("li",{onClick:function(){return h("FeedBack")}},"\u610f\u89c1\u53cd\u9988"):null)),trigger:"hover",placement:"top",overlayClassName:"navigator-tips-list"},i.a.createElement("span",{className:"navigator-tips"},"?",0<t?i.a.createElement("span",{className:"navigator-tips__unread user-unread-message"},i.a.createElement("span",null,99<t?"99+":t)):null)),"ContactMessage"===l?i.a.createElement(d.a,p(p({},u),{},{setMode:h})):"KeyboardKeymap"===l?i.a.createElement(f.b,{setMode:h}):"FeedBack"===l?i.a.createElement(f.a,{setMode:h,feedBackSrc:c}):null)})),b=(e=r(129),r.n(e));function w(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?j(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _(t,e){return Number((e/t).toFixed(2))}function E(t){return Number(String(t).slice(0,-2))}function k(t){var e=t.adaptScale,r=t.canvasWidth,n=t.canvasHeight,c=(t=t.children,Object(a.i)()),u=Object(a.f)(),s=x(Object(o.useState)(null),2),l=s[0],f=s[1],d=m(),h=(s=x(Object(o.useState)({width:0,height:0,transform:"translate(-50%, -50%)"}),2))[0],p=s[1],y=(s=x(Object(o.useState)(0),2))[0],g=s[1],v=(s=x(Object(o.useState)({height:"0px",width:"0px",top:"0px",left:"0px",borderWidth:2/y+"px"}),2))[0],w=s[1];function j(){I(!1)}Object(o.useEffect)((function(){var t=_(r,122),e=_(n,87);g(e=e<t?e:t),p({width:r,height:n,transform:"translate(-50%, -50%) scale(".concat(e,")")})}),[]),Object(o.useEffect)((function(){var t=b()((function(){var t,o,i,a,u,s,l,f;d&&(t=d.scrollTop,o=d.scrollLeft,s=d.scrollWidth,i=d.scrollHeight,u=d.clientWidth,a=d.clientHeight,l=o/c,f=t/c,w({width:(u=r*u/s)+"px",height:(s=n*a/i)+"px",top:c<=e||t<0?"0":n<f+s?n-s+"px":f+"px",left:c<=e||o<0?"0":r<l+u?r-u+"px":l+"px",borderWidth:2/y+"px"}))}),5);return d&&(null!=d&&d.addEventListener("scroll",t,!1),null!==l&&u!==l?setTimeout((function(){t(),f(u)}),210):t(),null===l)&&f(u),function(){null!=d&&d.removeEventListener("scroll",t,!1)}}),[c,e,n,r,y,u]);var k=(s=x(Object(o.useState)({x:0,y:0}),2))[0],S=s[1],L=(s=x(Object(o.useState)(!1),2))[0],I=s[1],T=(s=x(Object(o.useState)(!1),2))[0],M=s[1];return Object(o.useEffect)((function(){return document.addEventListener("mouseup",j,!1),function(){document.removeEventListener("mouseup",j,!1)}}),[]),i.a.createElement("div",{className:"l-navigator__navigator-inner",onMouseDown:function(t){t.stopPropagation(),I(!0),S({x:t.pageX,y:t.pageY})},onMouseMove:function(t){var e,r,n,o,i,a;t.stopPropagation(),L&&!T&&d&&(M(!0),r=(e=d).scrollWidth,a=d.scrollHeight,i=k.x,n=k.y,o=t.pageY>n?"down":"up",n=Math.abs(t.pageY-n)/y*c,"down"==o?(o=a-E(v.height)*c,a=e.scrollTop+n>o?o:e.scrollTop+n,e.scrollTop=a):(o=e.scrollTop-n<0?0:e.scrollTop-n,e.scrollTop=o),a=t.pageX>i?"left":"right",n=Math.abs(t.pageX-i)/y*c,"left"==a?(o=r-E(v.width)*c,i=e.scrollLeft+n>o?o:e.scrollLeft+n,e.scrollLeft=i):(a=e.scrollLeft-n<0?0:e.scrollLeft-n,e.scrollLeft=a),M(!1),S({x:t.pageX,y:t.pageY}))}},i.a.createElement("div",{className:"l-navigator__navigator__layer",style:O({},h)},t),i.a.createElement("div",{style:O(O({},h),{},{overflow:"hidden"}),className:"l-navigator__navigator__mask"},i.a.createElement("div",{className:"l-navigator__navigator__window",style:v})))}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?L(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var I=[4,3,2,1.75,1.5,1.25,1,.75,.5,.25,.15],T=function(t){function e(){var t=Number(((100*m+10)/100).toFixed(2));b(t<=I[0]?t:I[0])}function r(){var t=Number(((100*m-10)/100).toFixed(2));b(I[I.length-1]<=t?t:I[I.length-1])}var c=t.children,u=t.canvasWidth,s=t.canvasHeight,f=void 0!==(f=t.showNavigatorTips)&&f,d=void 0===(d=t.showContactMessage)||d,h=void 0===(h=t.showKeyboardKeymap)||h,p=void 0===(p=t.showFeedBack)||p,y=t.feedBackSrc,g=t.businessMessengerConfig,m=(t=void 0===(t=t.unReadMessage)?0:t,Object(a.i)()),b=Object(a.j)(),w=l(u,s),O=Object(a.k)(),x=i.a.createElement("div",{className:"l-navigator__navigator-menu"},i.a.createElement("ul",null,I.map((function(t,e){return i.a.createElement("li",{key:e,onClick:function(){return b(t)},className:t===m?"active":""},~~(100*t),"%")})),i.a.createElement("li",{onClick:function(){return b(w)}},"\u9002\u5e94\u5c4f\u5e55"),i.a.createElement("li",{onClick:function(){b(1)}},"\u5b9e\u9645\u5927\u5c0f")));function j(t){!0!==t.ctrlKey&&!0!==t.metaKey||61!==t.keyCode&&107!==t.keyCode&&173!==t.keyCode&&109!==t.keyCode&&187!==t.keyCode&&189!==t.keyCode||(t.preventDefault(),187===t.keyCode?e():189===t.keyCode&&r())}Object(o.useEffect)((function(){E(!1)}),[O]);var _=(O=S(Object(o.useState)(!1),2))[0],E=O[1];return Object(o.useEffect)((function(){return document.addEventListener("keydown",j,!1),function(){document.removeEventListener("keydown",j,!1)}}),[m]),i.a.createElement("div",{className:"l-navigator-wrap"},f?i.a.createElement(v,{showContactMessage:d,showKeyboardKeymap:h,showFeedBack:p,feedBackSrc:y,businessMessengerConfig:g,unReadMessage:t}):null,i.a.createElement("div",{className:"l-navigator"},i.a.createElement("div",{className:"l-navigator__scale"},i.a.createElement(n.x,{placement:"top",title:m===I[I.length-1]?"\u5df2\u7f29\u5c0f\u81f3\u6700\u5c0f\u753b\u5e03":"\u7f29\u5c0f",trigger:"hover"},i.a.createElement("span",null,i.a.createElement(n.d,{onClick:function(){r()},name:"minus",fontSize:24}))),i.a.createElement(n.k,{content:x,trigger:"hover",getPopupContainer:function(t){return t.parentNode},placement:"topLeft",overlayClassName:"app-operate-scale-list"},i.a.createElement("span",{className:"scale-label"},"".concat(Math.round(100*m),"%"))),i.a.createElement(n.x,{placement:"top",title:m===I[0]?"\u5df2\u653e\u5927\u81f3\u6700\u5927\u753b\u5e03":"\u653e\u5927",trigger:"hover"},i.a.createElement("span",null,i.a.createElement(n.d,{onClick:function(){e()},name:"plus",fontSize:24})))),i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(n.k,{placement:"top",content:i.a.createElement(k,{canvasWidth:u,canvasHeight:s,adaptScale:w},c),trigger:"click",getPopupContainer:function(t){return t.parentNode},overlayClassName:"l-navigator__navigator",destroyTooltipOnHide:{keepParent:!1},visible:_},i.a.createElement(n.x,{placement:"top",title:(_?"\u6536\u8d77":"\u5c55\u5f00")+"\u5bfc\u822a\u5668"},i.a.createElement("span",{style:{marginLeft:"4px",cursor:"pointer"}},i.a.createElement(n.d,{onClick:function(){E(!_)},name:"pip",fontSize:24})))))))},M=(e=r(114),r.n(e));function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?A(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1159);var C=function(t){var e=t.children,r=t.canvasWidth,n=t.canvasHeight,c=Object(a.i)(),u=(t=P(Object(o.useState)({}),2))[0],s=t[1],f=(t=P(Object(o.useState)(0),2))[0],d=t[1],h=(t=Object(a.c)()).width,p=t.height,y=(t=P(Object(o.useState)({}),2))[0],g=t[1],v=l(r,n);t=Object(a.k)();return Object(o.useEffect)((function(){d(0)}),[t]),Object(o.useEffect)((function(){var t={width:"".concat(r,"px"),height:"".concat(n,"px"),transform:"translate(-50%, -50%) scale(".concat(c,") ")};s(t),g({width:"".concat(h<r*c?r*c:h,"px"),height:"".concat(p<n*c?n*c:p,"px"),position:"relative",overflow:"hidden"})}),[c,h,p,r,n,t]),Object(o.useEffect)((function(){var t=m();v<c&&(t.scrollTop+=Math.floor(n*(c-f)/2),t.scrollLeft+=Math.floor(r*(c-f)/2)),d(c)}),[c,v,t]),i.a.createElement(M.a,{style:{width:"100%",height:"100%"}},i.a.createElement("div",{"data-move-make-up":"true",id:"scrollContainer",style:y},i.a.createElement("div",{"data-move-make-up":"true",id:"scaleLayer",className:"l-scale",style:u},e)))}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return _})),(e=n=n||{})[e.Release=0]="Release",e[e.Test=1]="Test",(e=o=o||{}).Release="https://strategy.app.meitudata.com/upload/policy",e.Test="http://prestrategy.meitubase.com/upload/policy",(e=p=p||{}).AWSS3="aws-s3",e.HuaweiS3="hw-s3",e.Qiniu="qiniu",e.MeituYun="mtyun";var n,o,i={app:"",type:"",count:1,suffix:"",sig:"",sigTime:"",sigVersion:"1.3",version:"2"},a={debug:!1,env:n.Release,accessToken:"",sign:function(t){return t},progress:function(t){return t}};function c(t){if(Array.isArray(t))return t.map(c);if("object"!=typeof t)return t;var e,r={};for(e in t)r[e.replace(/_([A-Za-z])/g,(function(t,e){return e.toUpperCase()}))]="object"==typeof t[e]?c(t[e]):t[e];return r}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,r){return(d=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(t){}}}()?Reflect.construct:function(t,e,r){var n=[null];return n.push.apply(n,e),e=new(Function.bind.apply(t,n)),r&&f(e,r.prototype),e}).apply(null,arguments)}var h=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),f(e.prototype.constructor=e,r),n}(function(t){var e="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return d(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)}(t)}(Error)),p=function(){function t(t){if(this.options=a,this.tokenList=[],this.retryCount=0,this.currentTokenIndex=0,this.currentCloudIndex=0,this.options=s({},this.options,t),"function"!=typeof this.options.sign)throw new h("\u53c2\u6570\u7b7e\u540d\u65b9\u6cd5\u9009\u9879 sign \u5fc5\u987b\u5b9e\u73b0 sign(params: UploadTokenRequestParams) => UploadTokenRequestParams");var e=this.options.sign.bind(this);this.options.sign=function(t){var r;if(null==(t=e(s({},i,{sigTime:""+Math.floor((new Date).getTime()/1e3)},t)))||!t.sig||""===(null==t||null==(r=t.sig)?void 0:r.trim()))throw new h("\u4e0a\u4f20\u53c2\u6570\u7b7e\u540d\u53c2\u6570 sig \u4e0d\u80fd\u4e3a\u7a7a");if(32!==(null==t||null==(r=t.sig)?void 0:r.length))throw new h("\u4e0a\u4f20\u53c2\u6570\u7b7e\u540d\u53c2\u6570 sig \u503c\u4e0d\u6b63\u786e");return t}}var e,r=t.prototype;return r.debugLog=function(){var t;if(this.debug){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=console).log.apply(t,["[@meitu/upload]"].concat(r))}},r.uploadImage=function(){return this},r.uploadVideo=function(){return this},r.uploadAudio=function(){return this},r.uploadParts=function(){return this},r=t,(e=[{key:"env",get:function(){return this.options.env}},{key:"debug",get:function(){return this.options.debug}},{key:"isTest",get:function(){return this.env===n.Test}},{key:"tokenApi",get:function(){return this.isTest?o.Test:o.Release}},{key:"accessToken",get:function(){return this.options.accessToken}}])&&u(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),t}(),y=r(605);function g(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){g(i,n,o,a,c,"next",t)}function c(t){g(i,n,o,a,c,"throw",t)}a(void 0)}))}}function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){if(null==t)return{};for(var r,n={},o=Object.keys(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||(n[r]=t[r]);return n}var O=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(e){e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,o=(v="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=v.asyncIterator||"@@asyncIterator",a=v.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(r){c=function(t,e,r){return t[e]=r}}function u(t,r,n,o){var i,a,c,u;r=r&&r.prototype instanceof y?r:y,r=Object.create(r.prototype),o=new E(o||[]);return r._invoke=(i=t,a=n,c=o,u=l,function(t,r){if(u===d)throw new Error("Generator is already running");if(u===h){if("throw"===t)throw r;return S()}for(c.method=t,c.arg=r;;){var n=c.delegate;if(n&&(n=function t(r,n){var o=r.iterator[n.method];if(o===e){if(n.delegate=null,"throw"===n.method){if(r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}return"throw"===(o=s(o,r.iterator,n.arg)).type?(n.method="throw",n.arg=o.arg,n.delegate=null,p):(o=o.arg)?o.done?(n[r.resultName]=o.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}(n,c),n)){if(n===p)continue;return n}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===l)throw u=h,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);if(u=d,"normal"===(n=s(i,a,c)).type){if(u=c.done?h:f,n.arg!==p)return{value:n.arg,done:c.done}}else"throw"===n.type&&(u=h,c.method="throw",c.arg=n.arg)}}),r}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",h="completed",p={};function y(){}function g(){}function m(){}var v,b,w=((b=(b=(c(v={},o,(function(){return this})),Object.getPrototypeOf))&&b(b(k([]))))&&b!==r&&n.call(b,o)&&(v=b),m.prototype=y.prototype=Object.create(v));function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,c){var u;if("throw"!==(o=s(t[o],t,i)).type)return(i=(u=o.arg).value)&&"object"==typeof i&&n.call(i,"__await")?e.resolve(i.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(i).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}));c(o.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t){var r,i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(i=function o(){for(;++r<t.length;)if(n.call(t,r))return o.value=t[r],o.done=!1,o;return o.value=e,o.done=!0,o}).next=i}return{next:S}}function S(){return{value:e,done:!0}}return c(w,"constructor",g.prototype=m),c(m,"constructor",g),g.displayName=c(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,a,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(x.prototype),c(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),c(w,a,"Generator"),c(w,o,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,_(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:k(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(e.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})),x=["url","data"],j=["headers"],_=function(t){var e;function r(e){return(e=t.call(this,e)||this).subscription=null,e.subObject=null,e.observable=null,e.fixQiniuXReqIdError(),e}e=t,(n=r).prototype=Object.create(e.prototype),b(n.prototype.constructor=n,e);var n=r.prototype;return n.fixQiniuXReqIdError=function(){var t=XMLHttpRequest.prototype.getResponseHeader;XMLHttpRequest.prototype.getResponseHeader=function(e){return"x-reqId"===e?"":t(e)}},n.thirdUpload=function(){var t=m(O.mark((function t(e,r,n,o,i){var a,c,u,s,l,f,d,p=this;return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=this.currentCloudIndex,f=this.retryCount,a=null==r||null==(a=r.order)?void 0:a[l],c=null==r?void 0:r[a],this.debugLog("[upload] \u4e0a\u4f20\u76f8\u5173\u53c2\u6570 =>",{currentCloudIndex:l,cloud:a,retryCount:f}),c){t.next=6;break}throw new h("\u4e0a\u4f20 Token \u6570\u636e\u4e0d\u5b58\u5728");case 6:u=c.key,s=c.token,l=c.chunkSize,f=c.url,d=c.backupUrl,this.debugLog("[upload] \u5f00\u59cb\u4e0a\u4f20 =>",{key:u,uploadHost:f,uploadBackupHost:d,chunkSize:l}),0,function(t){var r=p.retryCount,a=i||{},c=a.progress,l=a.complete;t&&(p.debugLog("[upload] qiniu.upload =>",{uploadHost:t,errorTime:0,retryCount:r}),t=(a=Object(y.upload)(e,u,s,{},{uphost:t.replace(/https?:\/\//,""),upprotocol:0<=t.indexOf("https")?"https":"http",debugLogLevel:"INFO",disableStatisticsReport:!0})).subscribe(r={next:function(t){p.debugLog("[upload] qiniu.upload.next =>",t),"function"==typeof c&&c(t)},error:function(t){o(t)},complete:function(t){var e=t.url;e=v({url:t.data,previewUrl:e},w(t,x));p.debugLog("[upload] qiniu.upload.complete: result =>",e),"function"==typeof l&&l(e),n(e)}}),p.observable=a,p.subscription=t,p.subObject=r)}(f);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),n.request=function(){var t=m(O.mark((function t(e,r){var n;return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),t.next=3,window.fetch(e,v({method:"GET"},r));case 3:return n=t.sent,this.debugLog("[request] result =>",n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),n.requestToken=function(){var t=m(O.mark((function t(e){var r,n,o,i,a;return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=void 0===(r=e.headers)?{}:r,o=w(e,j),n={},this.options.accessToken&&(n["Access-Token"]=this.options.accessToken),this.debugLog("[requestToken] params =>",o),void 0,o=Object.entries(o).filter((function(t){return"undefined"!==t[1]&&""!==t[1]})).filter((function(t){return t})).map((function(t){return t[0]+"="+t[1]})).sort().join("&"),a=this.tokenApi.replace("http:",window.location.protocol),t.next=8,this.request(a+"?"+o,{headers:v({},n,r)});case 8:if(200!==(i=t.sent).status)throw i;t.next=11;break;case 11:return t.t0=c,t.next=14,i.json();case 14:return t.t1=t.sent,a=(0,t.t0)(t.t1),this.debugLog("[requestToken] tokenList =>",a),t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.upload=function(){var t=m(O.mark((function t(e,n,o){var i,a=this;return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.debugLog("[upload] file =>",e),this.debugLog("[upload] params =>",n),t.next=4,this.requestToken(n);case 4:return this.tokenList=t.sent,"string"==typeof e&&/^data:/.test(e)&&(this.debugLog("[upload] Data URL to File =>",n),i=(new Date).getTime()+(n.suffix?"."+n.suffix:""),e=r.dataURLToFile(e,i)),i=new Promise((function(t,r){a.thirdUpload(e,a.tokenList[a.currentTokenIndex],t,r,o).catch((function(t){r(t)}))})),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.dataURLToFile=function(t,e){for(var r=(null==(t=t.split(","))||null==(r=t[0])||null==r.match||null==(r=r.match(/:(.*?)/))?void 0:r[1])||"",n=window.atob(t[1]),o=n.length,i=new Uint8Array(o);o--;)i[o]=n.charCodeAt(o);return new File([i],e,{type:r})},n.cancel=function(){this.subscription&&this.subscription.unsubscribe()},n.resume=function(){var t;this.observable&&(t=this.observable.subscribe(this.subObject),this.subscription=t)},r}(p)},function(t,e,r){"use strict";r.d(e,"l",(function(){return o})),r.d(e,"z",(function(){return i})),r.d(e,"e",(function(){return a})),r.d(e,"s",(function(){return c})),r.d(e,"n",(function(){return u})),r.d(e,"c",(function(){return s})),r.d(e,"q",(function(){return l})),r.d(e,"a",(function(){return f})),r.d(e,"o",(function(){return d})),r.d(e,"d",(function(){return h})),r.d(e,"r",(function(){return p})),r.d(e,"j",(function(){return y})),r.d(e,"x",(function(){return g})),r.d(e,"f",(function(){return m})),r.d(e,"t",(function(){return v})),r.d(e,"i",(function(){return b})),r.d(e,"w",(function(){return w})),r.d(e,"k",(function(){return O})),r.d(e,"y",(function(){return x})),r.d(e,"b",(function(){return j})),r.d(e,"p",(function(){return _})),r.d(e,"g",(function(){return E})),r.d(e,"u",(function(){return k})),r.d(e,"h",(function(){return S})),r.d(e,"v",(function(){return L})),r.d(e,"m",(function(){return I}));var n=r(17),o=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.linkLayerId}))},i=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setLinkLayerId}))},a=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isEditingText}))},c=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsEditingText}))},u=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsBaseMove}))},s=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isCropImage}))},l=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsCropImage}))},f=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isBasicOperation}))},d=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsBasicOperation}))},h=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isCropStageOperating}))},p=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsCropStageOperating}))},y=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isStageAutoCrop}))},g=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsStageAutoCrop}))},m=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isEliminatePen}))},v=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsEliminatePen}))},b=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isShapePen}))},w=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsShapePen}))},O=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.layerDoubleClick}))},x=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setLayerDoubleClick}))},j=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isContextMenu}))},_=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsContextMenu}))},E=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isIntelligent}))},k=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsIntelligent}))},S=function(){return Object(n.d)((function(t){return t.sdk.operateManagerModel.isProtectPen}))},L=function(){return Object(n.b)((function(t){return t.sdk.operateManagerModel.setIsProtectPen}))},I=function(){var t=Object(n.b)((function(t){return t.sdk.operateManagerModel.getQuickAddState}));return{canUseQuickAdd:function(){var e=!0;return t((function(t){e=t})),e}}}},,function(t,e,r){"use strict";r.d(e,"k",(function(){return u})),r.d(e,"j",(function(){return s})),r.d(e,"b",(function(){return l})),r.d(e,"n",(function(){return f})),r.d(e,"i",(function(){return d})),r.d(e,"d",(function(){return h})),r.d(e,"t",(function(){return p})),r.d(e,"g",(function(){return y})),r.d(e,"q",(function(){return g})),r.d(e,"p",(function(){return m})),r.d(e,"m",(function(){return a.b})),r.d(e,"s",(function(){return a.d})),r.d(e,"l",(function(){return a.a})),r.d(e,"r",(function(){return a.c})),r.d(e,"H",(function(){return a.f})),r.d(e,"F",(function(){return a.e})),r.d(e,"x",(function(){return v})),r.d(e,"y",(function(){return b})),r.d(e,"f",(function(){return c.c})),r.d(e,"C",(function(){return c.m})),r.d(e,"I",(function(){return c.o})),r.d(e,"J",(function(){return c.p})),r.d(e,"E",(function(){return c.n})),r.d(e,"o",(function(){return c.e})),r.d(e,"z",(function(){return c.j})),r.d(e,"w",(function(){return c.i})),r.d(e,"e",(function(){return c.b})),r.d(e,"B",(function(){return c.l})),r.d(e,"A",(function(){return c.k})),r.d(e,"v",(function(){return c.h})),r.d(e,"u",(function(){return c.g})),r.d(e,"c",(function(){return c.a})),r.d(e,"a",(function(){return w.b})),r.d(e,"D",(function(){return w.e})),r.d(e,"h",(function(){return w.d})),r.d(e,"G",(function(){return O}));var n=r(22),o=r(17),i=r(2),a=r(110),c=r(214),u=function(){var t=Object(c.a)(),e=Object(c.d)(),r=Object(a.b)().getLayer;return{getActivePickLayer:function(){var n,o;if(t)return o=t.id,n=t.pickId,(null==(o=r(o))?void 0:o.layerType)!==i.h.GROUP_LAYER&&(null==o?void 0:o.layerType)!==i.h.TEXT_MATERIAL_LAYER||!n?o:e.get(n)}}},s=function(){var t=Object(c.a)(),e=Object(a.b)().getLayer;return{getActiveLayer:function(){if(t){var r=t.id;if(r=e(r))return r}}}},l=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.getActiveInfo})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.setActiveInfo})),r={getActiveInfo:function(){var e=null;return t((function(t){e=t})),e||null},delActiveLayer:function(){e(null)},checkActiveLayer:function(t){var e=r.getActiveInfo();return(null==e?void 0:e.layerType)===t},isGroupLayer:function(){return r.checkActiveLayer(i.h.GROUP_LAYER)}};return r},f=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.setActiveInfo})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.brokeGroup})),r=l().getActiveInfo;return{setGroupPickId:function(e){var n=r();n&&(n.pickId=e,t(n))},brokeGroupLayer:function(n){var o,a=r();a&&(o=a.id,a.layerType===i.h.GROUP_LAYER)&&(e(o),n&&n!==o||!n)&&t(null)}}},d=function(){var t=Object(a.a)().getLayer,e=l().getActiveInfo;return{getActiveLayer:function(){var r=e();if(r)return r=r.id,t(r)},getActivePickLayer:function(){var r,n=e();if(n)return r=n.id,n=n.pickId,(null==(r=t(r))?void 0:r.layerType)!==i.h.GROUP_LAYER&&(null==r?void 0:r.layerType)!==i.h.TEXT_MATERIAL_LAYER||!n?r:t(n)}}},h=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.setActiveInfoById})),e=l().getActiveInfo,r=Object(a.a)(),c=r.getLayerParentId,u=r.getLayer,s=Object(a.d)().checkLayerInRender,f=Object(n.b)().getStateByName,d=p().hide,h={setActiveLayer:function(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";!s(e)||(null==(r=u(e))?void 0:r.layerType)===i.h.WATERMARK&&r.data.isFullScreen||((r=f(n.a.linkLayerId))&&r!==c(e)&&d(),t({id:e,pickId:o,isLink:!!r}))},setActiveInfoById:function(e){t({id:e,pickId:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",isLink:2<arguments.length&&void 0!==arguments[2]&&arguments[2]})},refreshActiveInfo:function(){var t=e(),r=null==t?void 0:t.id;r&&(t=null==t?void 0:t.pickId,h.setActiveLayer(r,t))}};return h},p=function(){function t(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"all";(t=s(t))&&function t(r){(r.children||[]).forEach((function(e){t(e)})),r.layerType===i.h.GROUP_LAYER&&(r=null==(r=document.getElementById(r.id))?void 0:r.style)&&(r.pointerEvents=e)}(t)}var e=Object(o.b)((function(t){return t.sdk.layersManagerModel.setActiveInfoById})),r=Object(o.b)((function(t){return t.sdk.layersManagerModel.setActiveInfo})),c=Object(n.A)(),u=Object(n.b)().getStateByName,s=Object(a.a)().getLayer,f=l().getActiveInfo;return{getId:function(){return u(n.a.linkLayerId)},show:function(n){var o;c(n),t(n,"none"),(o=null!=(n=f())&&n.pickId&&n.pickId!==n.id?n.pickId:o)?e({id:o,pickId:"",isLink:!0}):r(null)},hide:function(){var e=u(n.a.linkLayerId);e&&(c(null),t(e))}}},y=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.updateStageSize})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.resetStageSizeChange})),r=Object(o.b)((function(t){return t.sdk.layersManagerModel.moveScaleStageSize})),n=Object(o.b)((function(t){return t.sdk.layersManagerModel.moveChangeStageSize})),i=Object(o.b)((function(t){return t.sdk.layersManagerModel.rotateFullStage})),a=Object(o.b)((function(t){return t.sdk.layersManagerModel.rotateStage})),c=Object(o.b)((function(t){return t.sdk.layersManagerModel.moveStage})),u=Object(o.b)((function(t){return t.sdk.layersManagerModel.flipXStage})),s=Object(o.b)((function(t){return t.sdk.layersManagerModel.flipYStage}));return{changeStageSize:function(e,r){t({width:e,height:r})},moveChangeStageSize:function(t){n(t)},rotateFullStage:function(t){i(t)},rotateStage:function(t){a(t)},moveStage:function(t){c(t)},moveScaleStageSize:function(t){r(t)},flipXStage:function(){u()},flipYStage:function(){s()},resetStageSizeChange:function(t){e(t)}}},g=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.setHoverId})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.getHoverId}));return{active:function(e,r){t({id:e,type:r})},destroy:function(){t({id:null,type:null})},getHoverId:function(){var t="";return e((function(e){t=e})),t}}},m=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.destroy}));return{init:function(){t()}}},v=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.setPickLayer})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.clearPickIds})),r=Object(o.b)((function(t){return t.sdk.layersManagerModel.createGroup})),n=l().getActiveInfo,c=Object(a.a)().getLayer,u=f().brokeGroupLayer,s=Object(a.d)().addOrUpdate,d=h().setActiveLayer;return{clearPickLayer:function(){e()},setPickLayer:function(e){t(e)},createExtraGroup:function(t){var n;r({groupId:t,callback:function(t){n=t}}),n&&(s(n),d(t),e())},getActivePickIds:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(o=n()){var e,r,o=o.id,a=c(o,!1);if(a&&!a.lock)return e=[],a.layerType===i.h.GROUP_LAYER&&(r=a.children,!0===a.data.isExtraGroup)?((r||[]).forEach((function(t){e.push(t.id)})),t&&u()):e.push(a.id),{pickIds:e,layerId:o}}}}},b=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.hideMaterial})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.showMaterial}));return{hide:function(){t()},show:function(){e()}}},w=r(253),O=function(){var t=Object(o.b)((function(t){return t.sdk.layersManagerModel.delSvgLayers})),e=Object(o.b)((function(t){return t.sdk.layersManagerModel.addSvgLayers}));return{delLayers:function(e){var r,n;return t({ids:e,callback:function(t,e){r=t,n=e}}),{map:r,layers:n}},addLayers:function(t,r){e({map:t,layers:r})}}}},,function(t,e,r){"use strict";r.r(e),r.d(e,"SimpleTitle",(function(){return i})),r.d(e,"CustomTitle",(function(){return a})),r.d(e,"BackTitle",(function(){return c}));e=r(0);var n=r.n(e),o=r(13),i=(r(891),function(t){return t=t.text,n.a.createElement(a,{leftNode:n.a.createElement("span",{className:"b-custom-title_text"},t),rightNode:null})}),a=function(t){var e=t.leftNode;t=t.rightNode;return n.a.createElement("div",{className:"b-custom-title"},e,t)},c=function(t){var e=t.text,r=t.handleBackClick;t=n.a.createElement("div",{className:"b-custom-title_left back",onClick:function(){r()}},n.a.createElement(o.d,{fontSize:24,name:"chevronLeftBold"}),n.a.createElement("span",{className:"b-custom-title_text"},e));return n.a.createElement(a,{leftNode:t,rightNode:null})}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(17),o=function(){var t=Object(n.b)((function(t){return t.sdk.operateManagerModel.getStateByName}));return{getStateByName:function(e){var r;return t({payload:e,callback:function(t){r=t}}),r}}}},function(t,e,r){"use strict";r(561);var n=r(506),o=r(91),i=r.n(o),a=(o=r(9),r.n(o)),c=(o=r(0),r.n(o)),u=r(71),s=r(13);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r(852);var f=["className","children"];function d(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}o=function(t){var e=t.className,r=t.children;t=function(t,e){if(null==t)return{};var r,n=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],0<=e.indexOf(r)||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),i=0;i<o.length;i++)r=o[i],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}(t,f);return c.a.createElement(n.a,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],(e=function(t){return t=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==l(r=r.call(t,"string")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"===l(t)?t:String(t)}(e))in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({className:a()("mt-modal",e)},t),r)},o.checkClickOnModal=function(t){var e=null==t||null==(t=t.className)||null==(e=t.indexOf)?void 0:e.call(t,"ant-modal-wrap");return!!i()(e)&&-1!==e},o.confirm=function(t){function e(){u.unmountComponentAtNode(o)&&document.body.removeChild(o)}function r(t){w&&w(t),e()}var o=document.createElement("div"),i=(document.body.appendChild(o),t.title),a=t.content,l=t.icon,f=t.hideIcon,d=t.hideOkButton,h=t.hideCancelButton,p=void 0===(p=t.cancelText)?"\u53d6\u6d88":p,y=void 0===(y=t.okText)?"\u786e\u8ba4":y,g=void 0!==(g=t.centered)&&g,m=void 0===(m=t.closable)||m,v=t.closeIcon,b=t.onOk,w=t.onCancel,O=t.className;return null!=(t=t.onInstance)&&t({destroy:function(){e()}}),u.render(c.a.createElement(n.a,{className:"mt-modal-confirm ".concat(O),visible:!0,closeIcon:v||c.a.createElement(s.d,{fontSize:24,name:"crossBold"}),closable:m,onCancel:function(){return r("close")},centered:g,footer:!1},c.a.createElement("div",{className:"mt-modal-confirm__body"},i?c.a.createElement("div",{className:"mt-modal-confirm__title"},f?null:c.a.createElement("div",{className:"mt-modal-confirm__icon"},l||c.a.createElement(s.d,{fontSize:30,name:"infoCircle"})),i):null,a?c.a.createElement("div",{className:"mt-modal-confirm__content"},a):null,h&&d?null:c.a.createElement("div",{className:"mt-modal-confirm__actions"},h?null:c.a.createElement(s.a,{className:"mt-modal-confirm__cancel",type:"text",size:"large",onClick:function(){return r("cancel")}},p),d?null:c.a.createElement(s.a,{className:"mt-modal-confirm__ok",type:"primary",size:"large",onClick:function(){b&&b(),e()}},y)))),o)},e.a=o},function(t,e,r){"use strict";r.d(e,"b",(function(){return i}));var n=r(0),o="data-track-",i=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length?arguments[2]:void 0;Object(n.useLayoutEffect)((function(){window.setTimeout((function(){try{var n,i,a;e.length&&(n=document.getElementById(t))&&(i=n.querySelectorAll("[data-type='track']"),a=new IntersectionObserver((function(t){t.forEach((function(t){var e,n=t.target.getAttributeNames().filter((function(t){return-1!==t.indexOf(o)}));t.isIntersecting&&!t.target.getAttribute("data-track")&&(e={},n.forEach((function(r){var n=t.target.getAttribute(r);r=r.replace(o,"");e[r]=n})),t.target.setAttribute("data-track","true"),r&&r(e),a.unobserve(t.target))}))}),{rootMargin:"0px",threshold:.5}),i.forEach((function(t){a.observe(t)})))}catch(n){}}),0)}),[e])};e.a=i},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return L})),r.d(e,"b",(function(){return d}));e=r(129);var n=r.n(e),o=r(0),i=r.n(o),a=r(29),c=r(19),u=r(10),s=r(22),l=r(7);function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var d,h,p={mac:"Meta",win:"Control"},y=function(){var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?f(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!1),2),e=t[0],r=t[1];return Object(o.useEffect)((function(){var t=function(t){return/(macintosh)|(mac os x)/.test(t)}(window.navigator.userAgent.toLowerCase())?"mac":"win";c.a.on(l.a,(function(e){e.key===p[t]&&r(!0)})),c.a.on(l.b,(function(e){e.key===p[t]&&r(!1)}))}),[]),e},g=(r(1140),r(139)),m=r(88),v=r(42),b=r(283),w=r(45),O=r(155),x=r(24),j=r(46),_=r(209),E=r(40),k=(document.addEventListener("keyup",(function(t){"enter"===(null==(t=t.key)?void 0:t.toLocaleLowerCase())&&c.a.emit(d.enter)}),!1),(d=d||{}).enter="HE_enter",["INPUT"]),S=i.a.memo((function(){function t(){var t=.9*U;z(t=t<.15?.15:t)}function e(){var t=1.1*U;z(t=4<t?4:t)}var r=Object(v.m)(),n=Object(x.d)(),i=Object(v.n)(),l=Object(v.l)(),f=Object(v.q)(),d=Object(u.f)().getActiveInfo,h=Object(O.g)(),p=Object(u.B)(),y=Object(u.x)().hide,S=(N=Object(u.p)()).getCollisionLayers,L=N.getLayer,I=Object(u.h)().setActiveLayer,T=Object(v.p)(),M=Object(u.m)(),P=Object(v.j)(),A=Object(_.e)(),C=Object(s.o)().canUseQuickAdd,R=(N=Object(w.c)()).isShowLoading,N=N.isShowMask,D=Object(u.J)().getSize,F=Object(s.i)(),B=Object(s.e)(),G=R||N||F||B,U=Object(a.i)(),z=Object(a.j)();return Object(o.useEffect)((function(){function t(t){k.includes((null==t?void 0:t.target).nodeName)||(null!=t&&t.preventDefault(),null!=t&&null!=(t=t.clipboardData)&&t.setData("text/plain",""),G)||(t=d())&&t.layerType!==m.c.WATERMARK&&(t=L(t.id))&&r.setCopyInfo(t)}function e(t){var e,n;k.includes((null==t?void 0:t.target).nodeName)||C()&&(e=null==t||null==(e=t.clipboardData)?void 0:e.getData("text/plain"),null!=t&&null!=(n=t.clipboardData)&&n.files.length?c.a.emit(b.a.paste,t.clipboardData.files):e?(n=D(),A.addTextLayer(n.width||600,n.height||500,e,"#000000ff",void 0,void 0,!0)):G||r.copyInfo&&l.action(r.copyInfo))}function n(t){null!=t&&t.preventDefault(),null!=t&&null!=(t=t.clipboardData)&&t.setData("text/plain",""),G||d()&&(t=i.action())&&r.setCopyInfo(t,0)}return document.addEventListener("paste",e),document.addEventListener("copy",t),document.addEventListener("cut",n),function(){document.removeEventListener("paste",e),document.removeEventListener("copy",t),document.removeEventListener("cut",n)}}),[G]),Object(j.c)(E.b[E.a.sortTop].press,(function(){var t,e;G||(e=d())&&null!=(t=(e=P.getSortData(e.id)).setTop)&&t.call(e)})),Object(j.c)(E.b[E.a.sortBottom].press,(function(){var t,e;G||(e=d())&&null!=(t=(e=P.getSortData(e.id)).setBottom)&&t.call(e)})),Object(j.c)(E.b[E.a.sortUp].press,(function(){var t,e;G||(e=d())&&null!=(t=(e=P.getSortData(e.id)).setUp)&&t.call(e)})),Object(j.c)(E.b[E.a.sortDown].press,(function(){var t,e;G||(e=d())&&null!=(t=(e=P.getSortData(e.id)).setDown)&&t.call(e)})),Object(j.c)(E.b[E.a.selectAll].press,(function(){var t,e;G||(y(),t=S(),e=[],t.forEach((function(t){e.push(t.id)})),1===e.length?I(e[0]):e.length&&(p.setPickLayer(e),p.createExtraGroup(Object(g.a)())))})),Object(j.c)(E.b[E.a.makeGroup].press,(function(){G||h.action(!1)})),Object(j.c)(E.b[E.a.brokeGroup].press,(function(){G||h.action(!0)})),Object(j.c)(E.b[E.a.undo].press,(function(){G||n.undo()})),Object(j.c)(E.b[E.a.redo].press,(function(){G||n.redo()})),Object(j.c)(E.b[E.a.delete].press,(function(){G||document.querySelector(".c-color-gradient-picker")||i.action(!0)})),Object(j.c)(E.b[E.a.cut].press,(function(){var t;G||d()&&(t=i.action())&&r.setCopyInfo(t,0)})),Object(j.c)([E.b[E.a.move].press[3]],(function(){var t;G||(t=d())&&f.move(t.id,{x:-1,y:0})})),Object(j.c)([E.b[E.a.move].press[1]],(function(){var t;G||(t=d())&&f.move(t.id,{x:1,y:0})})),Object(j.c)([E.b[E.a.move].press[0]],(function(){var t;G||(t=d())&&f.move(t.id,{x:0,y:-1})})),Object(j.c)([E.b[E.a.move].press[2]],(function(){var t;G||(t=d())&&f.move(t.id,{x:0,y:1})})),Object(j.c)(E.b[E.a.lock].press,(function(){var t,e;G||(e=M.getActiveLayer())&&(t=e.id,e=e.lock,T.action(t,!e))})),Object(j.c)([E.b[E.a.scale].press[1]],(function(){G||t()})),Object(j.c)([E.b[E.a.scale].press[0]],(function(){G||t()})),Object(j.c)([E.b[E.a.scale].press[3]],(function(){G||e()})),Object(j.c)([E.b[E.a.scale].press[2]],(function(){G||e()})),null})),L=((e=h=h||{}).hover="L_M_hover",e.leave="L_M_leave",e.active="L_M_active",function(t){var e=t.children,r=void 0!==(t=t.canScale)&&t,f=Object(u.r)().brokeGroupLayer,d=Object(u.h)().setActiveLayer,p=Object(u.f)().delActiveLayer,g=Object(s.b)().getStateByName,m=(t=Object(u.x)()).hide,v=t.getId,b=Object(u.u)(),w=Object(a.i)(),O=Object(a.j)(),x=(t=Object(u.p)()).getCollisionLayers,j=t.getLayer,_=Object(o.useRef)(),E=Object(s.l)(),k=Object(s.e)(),L=Object(o.useRef)(null),I=y();t=n()((function(t){var e=t.target,r=Object(l.S)(e),n=Object(l.V)(e),o=(e=Object(l.T)(e),g(s.a.isBasicOperation));_.current&&clearTimeout(_.current),r&&!o?(b.active(r,n),c.a.emit(h.hover,{id:r,type:n,lock:e,x:t.pageX,y:t.pageY})):(_.current=setTimeout((function(){b.destroy()}),10),c.a.emit(h.leave,{id:r,type:n,lock:e,x:t.pageX,y:t.pageY}))}),5,{leading:!0});return Object(o.useEffect)((function(){function t(t){var e;r&&I&&(t.preventDefault(),e=1,0<t.deltaY?(e=.9*w)<.15&&(e=.15):t.deltaY<0&&4<(e=1.1*w)&&(e=4),O(e))}var e;return null!=(e=L.current)&&e.addEventListener("wheel",t),function(){var e;null!=(e=L.current)&&e.removeEventListener("wheel",t)}}),[r,I,w]),i.a.createElement(i.a.Fragment,null,i.a.createElement(S,null),i.a.createElement("div",{ref:L,onMouseDown:function(t){var e,r;!Object(l.ub)(t)||k||(e=t.target,Object(l.wb)(e))||Object(l.sb)()||(f(),(e=Object(l.S)(e))||E||(r=v(),t=Object(l.cb)({x:t.pageX,y:t.pageY}),r?(r=j(r))&&(e=Object(l.M)(w,r.children,t,!0)):e=Object(l.M)(w,x(!1),t,!1)),e?(d(e),c.a.emit(h.active,{id:e})):(m(),p()))},onMouseMove:t,className:"l-event"},e))})},function(t,e,r){"use strict";var n=r(0),o=r.n(n);r(789),e.a=function(t){var e=t.maskURL;t=t.children;return o.a.createElement("div",{className:"l-layers-mask",style:e?{WebkitMaskImage:"url(".concat(e,")")}:{}},t)}},,,function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return a}));var n=r(139),o=new Map,i=function(t,e){e?o.set(t,{base64:e,forceMd5:Object(n.a)()}):o.delete(t)},a=function(t){return o.get(t)||{base64:"",forceMd5:Object(n.a)()}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){var n;n=function(){return e=[function(t,e,r){"use strict";e.__esModule=!0,e.MeituAccountQuickLogin=e.MeituAccountQuickLoginCreator=void 0;var n=(n=r(31))&&n.__esModule?n:{default:n},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(32)),i=r(30),a=r(43);function c(t,e){return new a.MeituAccountQuickLoginCreator(t,e)}r(45),e.MeituAccountQuickLoginCreator=a.MeituAccountQuickLoginCreator,"undefined"!=typeof document&&((r=document.createElement("style")).innerHTML="/*! \u7f8e\u56fe\u8d26\u53f7\u5feb\u901f\u767b\u5f55\u5f39\u7a97\u7ec4\u4ef6 */\n.meitu-account-quick-login-popup{position:fixed;left:0;right:0;top:0;bottom:0;-webkit-transition:opacity .3s linear;transition:opacity .3s linear;opacity:0;display:block}.meitu-account-quick-login-popup.closed .meitu-account-quick-login-popup-mask{background-image:none}.meitu-account-quick-login-popup.closed .meitu-account-quick-login-popup-container{opacity:0;-webkit-transform:translate(-50%,50%);-ms-transform:translate(-50%,50%);transform:translate(-50%,50%)}.meitu-account-quick-login-popup-container{position:fixed;left:50%;top:50%;display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transition:all .3s linear;transition:all .3s linear;opacity:0;line-height:1;background-color:#fff}.meitu-account-quick-login-popup-banner{width:240px;height:100%;overflow:hidden;flex:1}.meitu-account-quick-login-popup-banner.right{-webkit-box-ordinal-group:2;-webkit-order:1;-ms-flex-order:1;order:1}.meitu-account-quick-login-popup-iframe{overflow:hidden;display:block;-webkit-transition:height .2s linear;transition:height .2s linear}.meitu-account-quick-login-popup-close-button{color:#e6e6e9;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjQ0ODYgOC43NTE1QzkuOTc5OTIgOC4yODI4NyA5LjIyMDEzIDguMjgyODcgOC43NTE1IDguNzUxNUM4LjI4Mjg3IDkuMjIwMTMgOC4yODI4NyA5Ljk3OTkyIDguNzUxNSAxMC40NDg2TDE0LjMwMyAxNkw4Ljc1MTUgMjEuNTUxNUM4LjI4Mjg3IDIyLjAyMDEgOC4yODI4NyAyMi43Nzk5IDguNzUxNSAyMy4yNDg2QzkuMjIwMTMgMjMuNzE3MiA5Ljk3OTkyIDIzLjcxNzIgMTAuNDQ4NiAyMy4yNDg2TDE2IDE3LjY5NzFMMjEuNTUxNSAyMy4yNDg2QzIyLjAyMDEgMjMuNzE3MiAyMi43Nzk5IDIzLjcxNzIgMjMuMjQ4NiAyMy4yNDg2QzIzLjcxNzIgMjIuNzc5OSAyMy43MTcyIDIyLjAyMDEgMjMuMjQ4NiAyMS41NTE1TDE3LjY5NzEgMTZMMjMuMjQ4NiAxMC40NDg2QzIzLjcxNzIgOS45Nzk5MiAyMy43MTcyIDkuMjIwMTMgMjMuMjQ4NiA4Ljc1MTVDMjIuNzc5OSA4LjI4Mjg3IDIyLjAyMDEgOC4yODI4NyAyMS41NTE1IDguNzUxNUwxNiAxNC4zMDNMMTAuNDQ4NiA4Ljc1MTVaIiBmaWxsPSIjQUVBRkI3Ii8+Cjwvc3ZnPgo=) no-repeat 0 0;-webkit-background-size:cover;background-size:cover;cursor:pointer;position:absolute;top:12px;width:14px;height:14px;opacity:1}.meitu-account-quick-login-popup-mask{position:fixed;width:100%;height:100%;background:#000 url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ3aGl0ZSI+CiAgICA8cGF0aCBvcGFjaXR5PSIuMjUiIGQ9Ik0xNiAwIEExNiAxNiAwIDAgMCAxNiAzMiBBMTYgMTYgMCAwIDAgMTYgMCBNMTYgNCBBMTIgMTIgMCAwIDEgMTYgMjggQTEyIDEyIDAgMCAxIDE2IDQiLz4KICAgIDxwYXRoIGQ9Ik0xNiAwIEExNiAxNiAwIDAgMSAzMiAxNiBMMjggMTYgQTEyIDEyIDAgMCAwIDE2IDR6Ij4KICAgICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCAxNiAxNiIgdG89IjM2MCAxNiAxNiIgZHVyPSIwLjhzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4KICAgIDwvcGF0aD4KPC9zdmc+) 50% no-repeat}.meitu-account-quick-login-popup.theme-dark .meitu-account-quick-login-popup-container,.meitu-account-quick-login-popup.theme-mcp .meitu-account-quick-login-popup-container{background-color:#141414}.min-popup .meitu-account-quick-login-popup-close-button{display:block}.wide-popup .meitu-account-quick-login-popup-close-button{display:none}.meitu-account-quick-login-popup-close-button{top:0;right:0;width:44px;height:44px;background-size:32px;background-position:50%}",document.head.appendChild(r)),c.version=i.version,c.versionCode=parseInt(c.version.replace(/\./g,"")),c.Utils=o,c.Events=n.default,c.LOG_PREFIX=i.LOG_PREFIX,e.MeituAccountQuickLogin=c},function(t,e){t=t.exports={version:"2.5.7"},"number"==typeof __e&&(__e=t)},function(t,e){t=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),"number"==typeof __g&&(__g=t)},function(t,e,r){t.exports=!r(6)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(13),o=r(36),i=r(27),a=Object.defineProperty;e.f=r(3)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),o)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(5),o=r(16);t.exports=r(3)?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(37),o=r(18);t.exports=function(t){return n(o(t))}},function(t,e,r){var n=r(24)("wks"),o=r(17),i=r(2).Symbol,a="function"==typeof i;(t.exports=function(t){return n[t]||(n[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=n},function(t,e,r){function n(t,e,r){var l,f,d,h=t&n.F,p=t&n.G,y=t&n.S,g=t&n.P,m=t&n.B,v=t&n.W,b=p?i:i[e]||(i[e]={}),w=b[s],O=p?o:y?o[e]:(o[e]||{})[s];for(l in r=p?e:r)(f=!h&&O&&void 0!==O[l])&&u(b,l)||(d=(f?O:r)[l],b[l]=p&&"function"!=typeof O[l]?r[l]:m&&f?a(d,o):v&&O[l]==d?function(t){function e(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)}return e[s]=t[s],e}(d):g&&"function"==typeof d?a(Function.call,d):d,g&&((b.virtual||(b.virtual={}))[l]=d,t&n.R)&&w&&!w[l]&&c(w,l,d))}var o=r(2),i=r(1),a=r(64),c=r(7),u=r(4),s="prototype";n.F=1,n.G=2,n.S=4,n.P=8,n.B=16,n.W=32,n.U=64,n.R=128,t.exports=n},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(41),o=r(19);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(11);t.exports=function(t){if(n(t))return t;throw TypeError(t+" is not an object!")}},function(t,e){t.exports=!0},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(5).f,o=r(4),i=r(9)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){var n=r(24)("keys"),o=r(17);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e,r){var n=r(1),o=r(2),i="__core-js_shared__",a=o[i]||(o[i]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(14)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:r)(t)}},function(t,e,r){var n=r(18);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(11);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t))||"function"==typeof(r=t.valueOf)&&!n(o=r.call(t))||!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(2),o=r(1),i=r(14),a=r(29),c=r(5).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=!i&&n.Symbol||{});"_"==t.charAt(0)||t in e||c(e,t,{value:a.f(t)})}},function(t,e,r){e.f=r(9)},function(t,e){"use strict";e.__esModule=!0,e.LOG_PREFIX="[mt.account.quick.login.popup] ",e.classPrefix="meitu-account-quick-login-popup",e.version="1.3.14",e.webApiPath={prd:"//account.meitu.com",dev:"http://dev.account.meitu.com",pre:"//preaccount.meitu.com",beta:"//betaaccount.meitu.com"},e.webDevelopmentDomains={dev:"http://dev.account.meitu.com",pre:"http://pre.account.meitu.com",beta:"http://beta.account.meitu.com",prd:"http://prd.account.meitu.com"}},function(t,e,r){"use strict";e.__esModule=!0;var n=(r=r(33))&&r.__esModule?r:{default:r};function o(){(0,n.default)(this,o)}o.close="close",o.created="created",o.error="error",o.failure="failure",o.message="message",o.loaded="loaded",o.resize="resize",o.success="success",e.default=o},function(t,e){"use strict";e.__esModule=!0,e.isMobile=function(){return/Android|MeeGo|IEMobile|iPhone|iPad|iPod|BlackBerry|Opera Mini|phone|mobile|Nexus|HTC|Sony|Dell|Droid|Motorola|LG|Kindle|SAMSUNG|Pad|Bada|Tizen|Lumia|Touch|BB10|ARM|Windows Phone|Tablet|PlayBook|webOS|KFAPWI|MicroMessenger|MQQBrowser|Weibo|baidubrowser|UC Browser/i.test(navigator.userAgent)},e.firstUpperCase=function(t){return t.replace(/^\S/,(function(t){return t.toUpperCase()}))}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(11),o=r(2).document,i=n(o)&&n(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,r){t.exports=!r(3)&&!r(6)((function(){return 7!=Object.defineProperty(r(35)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){"use strict";function n(){return this}var o=r(14),i=r(10),a=r(42),c=r(7),u=r(20),s=r(68),l=r(22),f=r(75),d=r(9)("iterator"),h=!([].keys&&"next"in[].keys()),p="values";t.exports=function(t,e,r,y,g,m,v){function b(t){if(!h&&t in _)return _[t];switch(t){case"keys":case p:return function(){return new r(this,t)}}return function(){return new r(this,t)}}s(r,e,y);y=e+" Iterator";var w,O,x=g==p,j=!1,_=t.prototype,E=_[d]||_["@@iterator"]||g&&_[g],k=E||b(g),S=g?x?b("entries"):k:void 0,L="Array"==e&&_.entries||E;if(L&&(L=f(L.call(new t)))!==Object.prototype&&L.next&&(l(L,y,!0),o||"function"==typeof L[d]||c(L,d,n)),x&&E&&E.name!==p&&(j=!0,k=function(){return E.call(this)}),o&&!v||!h&&!j&&_[d]||c(_,d,k),u[e]=k,u[y]=n,g)if(w={values:x?k:b(p),keys:m?k:b("keys"),entries:S},v)for(O in w)O in _||a(_,O,w[O]);else i(i.P+i.F*(h||j),e,w);return w}},function(t,e,r){function n(){}var o=r(13),i=r(72),a=r(19),c=r(23)("IE_PROTO"),u="prototype",s=function(){var t=r(35)("iframe"),e=a.length;for(t.style.display="none",r(66).appendChild(t),t.src="javascript:",(t=t.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;e--;)delete s[u][a[e]];return s()};t.exports=Object.create||function(t,e){var r;return null!==t?(n[u]=o(t),r=new n,n[u]=null,r[c]=t):r=s(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(41),o=r(19).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e,r){var n=r(4),o=r(8),i=r(63)(!1),a=r(23)("IE_PROTO");t.exports=function(t,e){var r,c=o(t),u=0,s=[];for(r in c)r!=a&&n(c,r)&&s.push(r);for(;e.length>u;)!n(c,r=e[u++])||~i(s,r)||s.push(r);return s}},function(t,e,r){t.exports=r(7)},function(t,e,r){"use strict";e.__esModule=!0,e.MeituAccountQuickLoginCreator=void 0;var n=p(r(54)),o=p(r(46)),i=p(r(49)),a=p(r(53)),c=p(r(33)),u=p(r(52)),s=p(r(31)),l=p(r(44)),f=p(r(90)),d=r(32),h=r(30);function p(t){return t&&t.__esModule?t:{default:t}}function y(t,e){(0,c.default)(this,y),this.LOG_PREFIX=h.LOG_PREFIX,this.el=null,this.mask=null,this.iframe=null,this.container=null,this.closeButton=null,this.settings=(0,a.default)({},l.default),this.init(t)}(e.MeituAccountQuickLoginCreator=((0,u.default)(y,[{key:"version",get:function(){return h.version}},{key:"webApiPath",get:function(){return h.webApiPath}},{key:"webDevelopment",get:function(){return h.webDevelopmentDomains}},{key:"webDevelopmentDomains",get:function(){return h.webDevelopmentDomains}},{key:"isDev",get:function(){return"true"===this.settings.dev}},{key:"debug",get:function(){return this.settings.debug}},{key:"webBasePath",get:function(){var t=this.webApiPath,e=t.dev,r=parseInt(this.settings.env,10);return 0===r?e=t.prd:1===r?e=t.pre:2===r&&(e=t.beta),e}},{key:"showBanner",get:function(){var t=this.settings.banner,e=document.body.getBoundingClientRect();return t.enable&&(!(0,d.isMobile)()||768<=e.width)&&("string"==typeof t.content&&""!==t.content.trim()||"string"==typeof t.image&&""!==t.image.trim())}}]),y.prototype.init=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this.settings=(0,f.default)(this.settings,t,{showHeaderLogo:!1,gnum:t.gnum||t.gid||""}),delete this.settings.gid,this.debug,this.settings.cssLink&&!/^(https?)?:?\/\//.test(this.settings.cssLink.trim()))throw new Error("\u65e0\u6548\u7684\u81ea\u5b9a\u4e49\u6837\u5f0f\u6587\u4ef6\u94fe\u63a5\u5730\u5740");return this},y.prototype.close=function(){var t=this;return this.el.style.opacity=0,this.el.classList&&this.el.classList.add("closed"),setTimeout((function(){t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.trigger("close")}),500),this},y.prototype.on=function(t,e){return this.settings["on"+(0,d.firstUpperCase)(t)]=e,this},y.prototype.trigger=function(t){var e,r,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"resize"===t&&this.settings.autoResize&&window.innerWidth<804&&!this.banner.enable&&void 0!==n.response.quick_login_resize&&(e=n.response.quick_login_resize.height,this.debug,e>window.screen.height&&(e=Math.ceil(.9*window.screen.height)+3),r=this.settings.maxHeight+(this.settings.showHeaderLogo?40:0),this.iframe.scrolling="auto",this.iframe.height=e=r<e?r:e),this.settings["on"+(0,d.firstUpperCase)(t)].bind(this)(n),this},y.prototype.createContainerLoading=function(){var t=document.createElement("div");return t.setAttribute("class",h.classPrefix+"-container-loading"),t.innerHTML=this.settings.loading,t.style.cssText="\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            position: absolute;\n            top: 0;\n            left: 0;\n            z-index: 1;\n            width: 100%;\n            height: 100%;\n        ",t},y.prototype.createMask=function(){var t=this,e=document.createElement("div"),r=""+(this.settings.loadingImage||"");return e.setAttribute("class",h.classPrefix+"-mask"),e.style.cssText="background-color: "+this.settings.maskBgColor+";\n                            opacity: "+this.settings.maskOpacity+";\n                            filter: alpha(opacity="+100*this.settings.maskOpacity+");",r&&!this.settings.loading&&(e.style.backgroundImage="url("+r+")"),this.settings.showLoading&&!this.settings.loading||(e.style.backgroundImage="none"),e.onclick=function(){t.settings.maskClosed&&t.close()},e},y.prototype.createCloseBtn=function(t){var e=this,r=document.createElement("div");r.setAttribute("class",h.classPrefix+"-close-button"),r.addEventListener("click",(function(){return e.close()}),!1),t.appendChild(r),this.closeButton=r},y.prototype.createBanner=function(t){var e=t.width,r=(t=t.height,(u=this.settings.banner).type),n=u.image,o=u.align,i=u.style,a=u.content,c=u.link,u=u.target,s=(r=""+r,document.createElement(c?"a":"div"));s.style.width=e+"px",e="\n            overflow: hidden;\n            display: block;\n            width: "+e+"px;\n            height: "+t+"px;\n            border-top-"+o+"-radius: "+this.settings.borderRadius+";\n            border-bottom-"+o+"-radius: "+this.settings.borderRadius+";\n            "+i;return"1"==r&&n&&(e+="\n                background: url("+n+") 0 0 no-repeat;\n                background-size: cover;"),"2"==r&&a&&(s.innerHTML=a),c&&(e+="cursor: pointer;",s.href=c,s.setAttribute("target",u)),s.style.cssText=e,s},y.prototype.createElement=function(t,e){var r=this,n=document.createElement("div"),c=document.createElement("div"),u=document.createElement("iframe"),l="",f=(this.settings.borderRadius&&(l="\n                -webkit-border-radius: "+this.settings.borderRadius+";\n                border-radius: "+this.settings.borderRadius+";\n            "),n.setAttribute("class",h.classPrefix),n.style.zIndex=this.settings.zIndex,n.style.opacity=1,c.setAttribute("class",h.classPrefix+"-container"),c.style.cssText=""+l,u.setAttribute("class",h.classPrefix+"-iframe"),u.style.cssText=""+l,u.name="mt-account-login-popup-iframe-"+(new Date).getTime(),u.width=t,u.height=e,u.frameBorder=0,u.scrolling="auto",u.setAttribute("sandbox",["allow-forms","allow-same-origin","allow-orientation-lock","allow-pointer-lock","allow-top-navigation","allow-presentation","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation","allow-scripts","allow-modals","allow-popups"].join(" ")),this.settings.iframeHeight=u.height,{}),d=["bannerx","zIndex","dev","loadingImage","borderRadius","debug","loading","statParams","customStatParams","mtstatTrace"],p=(l=((0,i.default)(this.settings).map((function(t){-1!==d.indexOf(t)||/^mask/.test(t)||"function"==typeof r.settings[t]||(f[t]=r.settings[t])})),this.debug,encodeURIComponent((0,o.default)((0,a.default)({},f)))),void 0);this.settings.loading&&(p=this.createContainerLoading(),n.appendChild(p)),t=void(this.settings.mask&&(t=this.createMask(),n.appendChild(t),this.mask=t));return this.showBanner&&(t=this.createBanner({width:300,height:e})),u.onload=function(t){p&&p.remove(),c.style.opacity=1,r.trigger(s.default.loaded,t)},{el:n,container:c,iframe:u,settings:l,containerLoading:p,banner:t}},y.prototype.formatSetting=function(t){var e=t.clientId,r=t.clientParams,i=t.clientReferer,c=t.abroad,u=t.gnum||t.gid,s=t.statParams,l=t.sourceFrom,f=t.language,d=t.theme||"default",h=(f||(navigator.language?f=navigator.language:navigator.browserLanguage&&(f=navigator.browserLanguage)),{redirect_callback:"0",client_id:e,gnum:u,phone:t.phone,phone_cc:t.phone&&t.phoneCC?t.phoneCC:"",client_referer:i?encodeURIComponent(i):"",source_from:l,theme:d,client_language:f,client_configs:(0,o.default)((0,a.default)({env:"popup",show_third_party_accounts:!!this.settings.showThirdPartyAccounts,enable_mine_login:!!this.settings.enableMineLogin,enable_meitu_app_scan:!(!1===this.settings.enableMeituAppScan||0===this.settings.enableMeituAppScan),abroad:c},this.settings.clientConfigs)),client_params:"object"===(void 0===r?"undefined":(0,n.default)(r))?encodeURIComponent((0,o.default)(r)):""});if("object"===(void 0===s?"undefined":(0,n.default)(s))){var p,y,g={};for(p in s)Object.hasOwnProperty.call(s,p)&&(y=s[p])&&(g[p]=y);h.client_stat=encodeURIComponent((0,o.default)(g))}var m,v,b=[];for(m in h)Object.hasOwnProperty.call(h,m)&&(v=h[m])&&b.push(m+"="+v);return b.join("&")},y.prototype.createTeam=function(){var t=window.innerWidth,e=window.innerHeight,r=(t=Math.min(442,.9*t),e=parseInt(.9*e,10),e=(t=this.createElement(t,Math.min(e,544))).el,t.container),n=(t=t.iframe,this.el=e,this.iframe=t,this.container=r,this.trigger("createBefore"),"");0<this.settings.mtstatTrace&&(n="?__mtstat_trace__=1"),n=this.webBasePath+"/teams/"+n+"#/create/team?client_callback="+encodeURIComponent(this.settings.callback)+"&"+this.formatSetting(this.settings);return this.debug,this.settings.showCloseBtn&&this.createCloseBtn(r),t.src=n,r.appendChild(t),e.appendChild(r),document.body.appendChild(e),this.trigger(s.default.created),this.debug,this.listenMessageToAccount(),this},y.prototype.create=function(){var t=window.innerWidth,e=window.innerHeight,r=(t=t<=804?t<=414?.9*t:360:804,e=parseInt(.9*e,10),(e=((!1===this.settings.enableMeituAppScan&&804<=t||this.showBanner)&&(t=360),this.createElement(t,Math.min(e,530)))).el),n=e.container,o=e.iframe,i=e.settings;e=e.banner,r.classList&&(t<800?r.classList.add("min-popup"):r.classList.add("wide-popup"),this.settings.theme)&&r.classList.add("theme-"+this.settings.theme),t="#!/web/quick_login?client_callback="+encodeURIComponent(this.settings.callback)+"&"+this.formatSetting(this.settings)+"&settings="+i,this.el=r,this.iframe=o,this.container=n,this.trigger("createBefore"),i="";return 0<this.settings.mtstatTrace&&(i="?__mtstat_trace__=1"),o.src=this.webBasePath+i+t,this.debug,this.settings.showCloseBtn&&this.createCloseBtn(n),e&&"left"===this.settings.banner.align&&n.appendChild(e),n.appendChild(o),e&&"right"===this.settings.banner.align&&n.appendChild(e),r.appendChild(n),document.body.appendChild(r),this.trigger(s.default.created),this.debug,this.listenMessageToAccount(),this},y.prototype.sendMessageToAccount=function(t){try{this.iframe.contentWindow&&(this.iframe.contentWindow.postMessage(t,this.iframe.src),this.debug)}catch(t){this.debug}return this},y.prototype.listenMessageToAccount=function(){var t=this;return window.addEventListener("message",(function(e){var r=/MSIE (8|9)\.0/.test(navigator.userAgent)?JSON.parse(e.data):e.data;/account\.meitu\.com$/.test(e.origin)&&void 0!==r.meta&&(t.debug,t.trigger(s.default.message,e))}),!1),this},y.prototype.postMessageEventHandler=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};void 0===t&&(t={});try{var e=(e=t.response.quick_login_event)||"message";this.debug,e===s.default.close?this.close():this.trigger(e,t)}catch(t){this.debug}return this},y)).defaultOptions=l.default},function(t,e){"use strict";e.__esModule=!0,e.default={debug:!1,dev:!1,mtstatTrace:!1,env:0,title:"",theme:"",btnText:"",linkText:"",phone:"",phoneCC:"",language:"",clientId:"",gnum:"",statParams:{scenes_enter:"",cur_url:"",channel:"",first_url:""},clientReferer:"",clientParams:"",clientConfigs:{},sourceFrom:"",btnSubmitText:"",bgColor:"",textColor:"",btnColor:"",cssLink:"",callback:"",redirectCallback:"",mask:!0,zIndex:2e3,maxHeight:600,loadingImage:"",showLoading:!0,loading:"",showBackButton:!0,showCloseBtn:!0,maskClosed:!1,maskBgColor:"#000",maskOpacity:.5,relogin:!1,borderRadius:"12px",showHeaderLogo:!0,autoResize:!0,banner:{enable:!1,type:1,align:"left",style:"",image:"",link:"",target:"",content:""},footerBanner:{img:"",url:"",target:"_blank"},page:{name:"",title:"",description:""},displayOtherLoginLink:!0,enableMeituAppScan:!0,enableMineLogin:!0,showThirdPartyAccounts:!0,onClose:function(){},onSuccess:function(){},onFailure:function(){},onError:function(){},onLoaded:function(){},onCreated:function(){},onCreateBefore:function(){},onResize:function(){},onMessage:function(){}}},function(t,e){},function(t,e,r){t.exports={default:r(55),__esModule:!0}},function(t,e,r){t.exports={default:r(56),__esModule:!0}},function(t,e,r){t.exports={default:r(57),__esModule:!0}},function(t,e,r){t.exports={default:r(58),__esModule:!0}},function(t,e,r){t.exports={default:r(59),__esModule:!0}},function(t,e,r){t.exports={default:r(60),__esModule:!0}},function(t,e,r){"use strict";e.__esModule=!0;var n=(r=r(48))&&r.__esModule?r:{default:r};function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(t,o.key,o)}}e.default=function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}},function(t,e,r){"use strict";e.__esModule=!0;r=(r=r(47))&&r.__esModule?r:{default:r};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,r){"use strict";e.__esModule=!0;var n=a(r(51)),o=a(r(50)),i="function"==typeof o.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof o.default&&"symbol"===i(n.default)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":i(t)}},function(t,e,r){var n=(r=r(1)).JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},function(t,e,r){r(81),t.exports=r(1).Object.assign},function(t,e,r){r(82);var n=r(1).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){r(83),t.exports=r(1).Object.keys},function(t,e,r){r(86),r(84),r(87),r(88),t.exports=r(1).Symbol},function(t,e,r){r(85),r(89),t.exports=r(29).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(8),o=r(79),i=r(78);t.exports=function(t){return function(e,r,a){var c,u=n(e),s=o(u.length),l=i(a,s);if(t&&r!=r){for(;l<s;)if((c=u[l++])!=c)return!0}else for(;l<s;l++)if((t||l in u)&&u[l]===r)return t||l||0;return!t&&-1}}},function(t,e,r){var n=r(61);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(12),o=r(21),i=r(15);t.exports=function(t){var e=n(t),r=o.f;if(r)for(var a,c=r(t),u=i.f,s=0;c.length>s;)u.call(t,a=c[s++])&&e.push(a);return e}},function(t,e,r){r=r(2).document,t.exports=r&&r.documentElement},function(t,e,r){var n=r(34);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(39),o=r(16),i=r(22),a={};r(7)(a,r(9)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=n(a,{next:o(1,r)}),i(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){function n(t){c(t,o,{value:{i:"O"+ ++u,w:{}}})}var o=r(17)("meta"),i=r(11),a=r(4),c=r(5).f,u=0,s=Object.isExtensible||function(){return!0},l=!r(6)((function(){return s(Object.preventExtensions({}))})),f=t.exports={KEY:o,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,o)){if(!s(t))return"F";if(!e)return"E";n(t)}return t[o].i},getWeak:function(t,e){if(!a(t,o)){if(!s(t))return!0;if(!e)return!1;n(t)}return t[o].w},onFreeze:function(t){return l&&f.NEED&&s(t)&&!a(t,o)&&n(t),t}}},function(t,e,r){"use strict";var n=r(12),o=r(21),i=r(15),a=r(26),c=r(37),u=Object.assign;t.exports=!u||r(6)((function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=n}))?function(t,e){for(var r=a(t),u=arguments.length,s=1,l=o.f,f=i.f;s<u;)for(var d,h=c(arguments[s++]),p=l?n(h).concat(l(h)):n(h),y=p.length,g=0;g<y;)f.call(h,d=p[g++])&&(r[d]=h[d]);return r}:u},function(t,e,r){var n=r(5),o=r(13),i=r(12);t.exports=r(3)?Object.defineProperties:function(t,e){o(t);for(var r,a=i(e),c=a.length,u=0;u<c;)n.f(t,r=a[u++],e[r]);return t}},function(t,e,r){var n=r(15),o=r(16),i=r(8),a=r(27),c=r(4),u=r(36),s=Object.getOwnPropertyDescriptor;e.f=r(3)?s:function(t,e){if(t=i(t),e=a(e,!0),u)try{return s(t,e)}catch(t){}if(c(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(8),o=r(40).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){if(!a||"[object Window]"!=i.call(t))return o(n(t));try{return o(t)}catch(t){return a.slice()}}},function(t,e,r){var n=r(4),o=r(26),i=r(23)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){var n=r(10),o=r(1),i=r(6);t.exports=function(t,e){var r=(o.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*i((function(){r(1)})),"Object",a)}},function(t,e,r){var n=r(25),o=r(18);t.exports=function(t){return function(e,r){e=String(o(e)),r=n(r);var i,a=e.length;return r<0||a<=r?t?"":void 0:(i=e.charCodeAt(r))<55296||56319<i||r+1===a||(a=e.charCodeAt(r+1))<56320||57343<a?t?e.charAt(r):i:t?e.slice(r,r+2):a-56320+(i-55296<<10)+65536}}},function(t,e,r){var n=r(25),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):i(t,e)}},function(t,e,r){var n=r(25),o=Math.min;t.exports=function(t){return 0<t?o(n(t),9007199254740991):0}},function(t,e,r){"use strict";var n=r(62),o=r(69),i=r(20),a=r(8);t.exports=r(38)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n=r(10);n(n.S+n.F,"Object",{assign:r(71)})},function(t,e,r){var n=r(10);n(n.S+n.F*!r(3),"Object",{defineProperty:r(5).f})},function(t,e,r){var n=r(26),o=r(12);r(76)("keys",(function(){return function(t){return o(n(t))}}))},function(t,e){},function(t,e,r){"use strict";var n=r(77)(!0);r(38)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t=this._t,e=this._i;return e>=t.length?{value:void 0,done:!0}:(t=n(t,e),this._i+=t.length,{value:t,done:!1})}))},function(t,e,r){"use strict";function n(t){var e=H[t]=I(D[G]);return e._k=t,e}function o(t,e){_(t);for(var r,n=x(e=k(e)),o=0,i=n.length;o<i;)J(t,r=n[o++],e[r]);return t}function i(t){var e=W.call(this,t=S(t,!0));return!(this===V&&l(H,t)&&!l(Y,t))&&(!(e||!l(this,t)||!l(H,t)||l(this,U)&&this[U][t])||e)}function a(t,e){var r;if(t=k(t),e=S(e,!0),t!==V||!l(H,e)||l(Y,e))return!(r=C(t,e))||!l(H,e)||l(t,U)&&t[U][e]||(r.enumerable=!0),r}function c(t){for(var e,r=N(k(t)),n=[],o=0;r.length>o;)l(H,e=r[o++])||e==U||e==p||n.push(e);return n}function u(t){for(var e,r=t===V,n=N(r?Y:k(t)),o=[],i=0;n.length>i;)!l(H,e=n[i++])||r&&!l(V,e)||o.push(H[e]);return o}var s=r(2),l=r(4),f=r(3),d=r(10),h=r(42),p=r(70).KEY,y=r(6),g=r(24),m=r(22),v=r(17),b=r(9),w=r(29),O=r(28),x=r(65),j=r(67),_=r(13),E=r(11),k=r(8),S=r(27),L=r(16),I=r(39),T=r(74),M=r(73),P=r(5),A=r(12),C=M.f,R=P.f,N=T.f,D=s.Symbol,F=s.JSON,B=F&&F.stringify,G="prototype",U=b("_hidden"),z=b("toPrimitive"),W={}.propertyIsEnumerable,K=g("symbol-registry"),H=g("symbols"),Y=g("op-symbols"),V=Object[G],X=(g="function"==typeof D,s.QObject),q=!X||!X[G]||!X[G].findChild,$=f&&y((function(){return 7!=I(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=C(V,e);n&&delete V[e],R(t,e,r),n&&t!==V&&R(V,e,n)}:R,Z=g&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},J=function(t,e,r){return t===V&&J(Y,e,r),_(t),e=S(e,!0),_(r),(l(H,e)?(r.enumerable?(l(t,U)&&t[U][e]&&(t[U][e]=!1),r=I(r,{enumerable:L(0,!1)})):(l(t,U)||R(t,U,L(1,{})),t[U][e]=!0),$):R)(t,e,r)};g||(h((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=v(0<arguments.length?arguments[0]:void 0);return f&&q&&$(V,t,{configurable:!0,set:function e(r){this===V&&e.call(Y,r),l(this,U)&&l(this[U],t)&&(this[U][t]=!1),$(this,t,L(1,r))}}),n(t)})[G],"toString",(function(){return this._k})),M.f=a,P.f=J,r(40).f=T.f=c,r(15).f=i,r(21).f=u,f&&!r(14)&&h(V,"propertyIsEnumerable",i,!0),w.f=function(t){return n(b(t))}),d(d.G+d.W+d.F*!g,{Symbol:D});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Q.length>tt;)b(Q[tt++]);for(var et=A(b.store),rt=0;et.length>rt;)O(et[rt++]);d(d.S+d.F*!g,"Symbol",{for:function(t){return l(K,t+="")?K[t]:K[t]=D(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in K)if(K[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),d(d.S+d.F*!g,"Object",{create:function(t,e){return void 0===e?I(t):o(I(t),e)},defineProperty:J,defineProperties:o,getOwnPropertyDescriptor:a,getOwnPropertyNames:c,getOwnPropertySymbols:u}),F&&d(d.S+d.F*(!g||y((function(){var t=D();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))}))),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;o<arguments.length;)n.push(arguments[o++]);if(r=e=n[1],(E(e)||void 0!==t)&&!Z(t))return j(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Z(e))return e}),n[1]=e,B.apply(F,n)}}),D[G][z]||r(7)(D[G],z,D[G].valueOf),m(D,"Symbol"),m(Math,"Math",!0),m(s.JSON,"JSON",!0)},function(t,e,r){r(28)("asyncIterator")},function(t,e,r){r(28)("observable")},function(t,e,r){r(80);for(var n=r(2),o=r(7),i=r(20),a=r(9)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<c.length;u++){var s,l=c[u];(s=(s=n[l])&&s.prototype)&&!s[a]&&o(s,a,l),i[l]=i.Array}},function(t,e){"use strict";var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(Object.assign){var t=new String("abc");if(t[5]="de","5"!==Object.getOwnPropertyNames(t)[0]){for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n,o=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"===o.join(""))return n={},"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")?1:void 0}}}catch(t){}}()?Object.assign:function(t,e){for(var i,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))n.call(i,u)&&(a[u]=i[u]);if(r)for(var s=r(i),l=0;l<s.length;l++)o.call(i,s[l])&&(a[s[l]]=i[s[l]])}return a}}],r={},t.m=e,t.c=r,t.p="//static.account.meitu.com/",t(0);function t(n){var o;return(r[n]||(o=r[n]={exports:{},id:n,loaded:!1},e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o)).exports}var e,r},t.exports=n()},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n=n(r(1095));e.default=n.default},function(t,e,r){var n;window,n=function(){return e={"./node_modules/qwebchannel/qwebchannel.js":function(t,e,r){"use strict";var n=1,o=2,i=3,a=4,c=5,u=6,s=7,l=8,f=9,d=10;function h(t,e,r){this.__id__=t,(r.objects[t]=this).__objectSignals__={},this.__propertyCache__={};var n=this;function o(t,e){var o=t[0],i=t[1];n[o]={connect:function(t){"function"!=typeof t||(n.__objectSignals__[i]=n.__objectSignals__[i]||[],n.__objectSignals__[i].push(t),e)||"destroyed"!==o&&"destroyed()"!==o&&"destroyed(QObject*)"!==o&&1==n.__objectSignals__[i].length&&r.exec({type:s,object:n.__id__,signal:i})},disconnect:function(t){"function"!=typeof t||(n.__objectSignals__[i]=n.__objectSignals__[i]||[],-1===(t=n.__objectSignals__[i].indexOf(t)))||(n.__objectSignals__[i].splice(t,1),e)||0!==n.__objectSignals__[i].length||r.exec({type:l,object:n.__id__,signal:i})}}}function i(t,e){(t=n.__objectSignals__[t])&&t.forEach((function(t){t.apply(t,e)}))}this.unwrapQObject=function(t){if(t instanceof Array)return t.map((function(t){return n.unwrapQObject(t)}));if(!(t instanceof Object))return t;var e,o;if(t["__QObject*__"]&&void 0!==t.id)return e=t.id,r.objects[e]||(t.data?((o=new h(e,t.data,r)).destroyed.connect((function(){r.objects[e]===o&&(delete r.objects[e],Object.keys(o).forEach((function(t){return delete o[t]})))})),o.unwrapProperties(),o):void 0);for(var i={},a=0,c=Object.keys(t);a<c.length;a++){var u=c[a];i[u]=n.unwrapQObject(t[u])}return i},this.unwrapProperties=function(){for(var t=0,e=Object.keys(n.__propertyCache__);t<e.length;t++){var r=e[t];n.__propertyCache__[r]=n.unwrapQObject(n.__propertyCache__[r])}},this.propertyUpdate=function(t,e){for(var r=0,o=Object.keys(e);r<o.length;r++){var a=o[r],c=e[a];n.__propertyCache__[a]=this.unwrapQObject(c)}for(var u=0,s=Object.keys(t);u<s.length;u++){var l=s[u];i(l,t[l])}},this.signalEmitted=function(t,e){i(t,this.unwrapQObject(e))},e.methods.forEach((function(t){var e=t[0],o=(t=t[1],")"===e[e.length-1]?t:e);n[e]=function(){for(var t,e,i,a=[],c=0;c<arguments.length;++c){var s=arguments[c];"function"==typeof s?t=s:s instanceof h&&void 0!==r.objects[s.__id__]?a.push({id:s.__id__}):a.push(s)}return t||"function"!=typeof Promise||(i=new Promise((function(r,n){t=r,e=n}))),r.exec({type:u,object:n.__id__,method:o,args:a},(function(r){void 0!==r?(r=n.unwrapQObject(r),t&&t(r)):e&&e()})),i}})),e.properties.forEach((function(t){var e=t[0],i=t[1],a=t[2];n.__propertyCache__[e]=t[3],a&&(1===a[0]&&(a[0]=i+"Changed"),o(a,!0)),Object.defineProperty(n,i,{configurable:!0,get:function(){return n.__propertyCache__[e]},set:function(t){void 0!==t&&((t=n.__propertyCache__[e]=t)instanceof h&&void 0!==r.objects[t.__id__]&&(t={id:t.__id__}),r.exec({type:f,object:n.__id__,property:e,value:t}))}})})),e.signals.forEach((function(t){o(t,!1)})),Object.assign(n,e.enums)}t.exports={QWebChannel:function(t,e){var r;"object"==typeof t&&"function"==typeof t.send&&((r=this).transport=t,this.send=function(t){"string"!=typeof t&&(t=JSON.stringify(t)),r.transport.send(t)},this.transport.onmessage=function(t){var e=t.data;switch((e="string"==typeof e?JSON.parse(e):e).type){case n:r.handleSignal(e);break;case d:r.handleResponse(e);break;case o:r.handlePropertyUpdate(e)}},this.execCallbacks={},this.execId=0,this.exec=function(t,e){e?(r.execId===Number.MAX_VALUE&&(r.execId=Number.MIN_VALUE),t.hasOwnProperty("id")||(t.id=r.execId++,r.execCallbacks[t.id]=e,r.send(t))):r.send(t)},this.objects={},this.handleSignal=function(t){var e=r.objects[t.object];e&&e.signalEmitted(t.signal,t.args)},this.handleResponse=function(t){t.hasOwnProperty("id")&&(r.execCallbacks[t.id](t.data),delete r.execCallbacks[t.id])},this.handlePropertyUpdate=function(t){t.data.forEach((function(t){var e=r.objects[t.object];e&&e.propertyUpdate(t.signals,t.properties)})),r.exec({type:a})},this.debug=function(t){r.send({type:c,data:t})},r.exec({type:i},(function(t){for(var n=0,o=Object.keys(t);n<o.length;n++){var i=o[n];new h(i,t[i],r)}for(var c=0,u=Object.keys(r.objects);c<u.length;c++){var s=u[c];r.objects[s].unwrapProperties()}e&&e(r),r.exec({type:a})})))}}},"./src/index.ts":function(t,e,r){"use strict";r.r(e),r.d(e,"bridge",(function(){return W})),r.d(e,"clientInfo",(function(){return m}));var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function i(t,e,r,n){return new(r=r||Promise)((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))}function a(t,e){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(u){var s=[c,u];if(r)throw new TypeError("Generator is already executing.");for(;i=a&&s[a=0]?0:i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3]))i.label=s[1];else if(6===s[0]&&i.label<o[1])i.label=o[1],o=s;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(s)}}s=e.call(t,i)}catch(u){s=[6,u],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}function c(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||((n=n||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function u(){return window.qtObject}Object.create,Object.create;var s=-1<(p=navigator.userAgent.toLowerCase()).indexOf("qtwebengine"),l=-1<p.indexOf("usesafari"),f=-1<p.indexOf("mtxx-pc"),d=-1<p.indexOf("mtxx-mac"),h=-1<p.indexOf("mtxx-linux"),p=-1<p.indexOf("forappstore"),y=!(s=f||d||h||s),g=function(t){return t=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),null==(t=window.location.search.substr(1).match(t))?null:unescape(t[2])}("income_source")||(f?"MTXX-PC":h?"MTXX-LINUX":d?"MTXX-MAC":"MTXX-WEB"),m={isUsePrompt:l,isClient:s,isPC:f,isMac:d,isLinux:h,isWeb:y,isMacAppStore:p,incomeSource:g};function v(t){return j("themeChange",t=void 0===t?"dark":t)}function b(){return j("loginStateChange")}function w(){return j("vipStateChange")}l=r("./node_modules/qwebchannel/qwebchannel.js"),s=window.qt;var O=document.createEvent("Event");function x(t,e){window.addEventListener("_PCB_".concat(t),(function(t){e(t.data)}))}function j(t,e){var r=document.createEvent("Event");r.initEvent("_PCB_".concat(t),!0,!0),r.data=e,window.dispatchEvent(r)}function _(){}function E(t,e){return void 0===e&&(e=!1),function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var o=r,i=0;i<o.length;i++){var a=o[i];"string"!=typeof a&&(o[i]="".concat(a))}return new Promise((function(n,o){if(m.isClient)if(m.isUsePrompt)try{r.length||e?(i={ParamList:c([],r,!0)},e&&(i.Return="string"),n(window.prompt(t,JSON.stringify(i)))):n(window.prompt(t))}catch(n){o("PT: ".concat(t," method fail"))}else{var i={args:r,property:t,hasReturn:e,resolve:n,reject:o};k?M(i):S.push(i)}else o("\u9700\u8981\u901a\u8fc7 PCB.clientInfo \u5224\u65ad\u662f\u5426\u5728\u5ba2\u6237\u7aef")}))}}O.initEvent("PCBridgeReady",!0,!0),m.isUsePrompt?(window.safari={changeTheme:v,loginStateChanged:b,updateVipStatus:function(){}},setTimeout((function(){return window.dispatchEvent(O)}),0)):s?new l.QWebChannel(s.webChannelTransport,(function(t){var e;null!=(e=(t=t.objects.qtObject||{}).changeTheme)&&e.connect(v),null!=(e=t.loginStateChanged)&&e.connect(b),null!=(e=t.updateVipStatus)&&e.connect(w),window.qtObject=t,setTimeout((function(){return window.dispatchEvent(O)}),0)})):setTimeout((function(){return window.dispatchEvent(O)}),0),window.addEventListener("onResume",(function(){j("resume")})),window.addEventListener("onPageHide",(function(){j("pageHide")})),_.prototype.onResume=function(t){x("resume",t)},_.prototype.onPageHide=function(t){x("pageHide",t)},_.prototype.onThemeChange=function(t){x("themeChange",t)},_.prototype.onLoginStateChange=function(t){x("loginStateChange",t)},_.prototype.onVipStateChange=function(t){x("vipStateChange",t)},f=_;var k=!1,S=[],L=(window.addEventListener("PCBridgeReady",(function(t){k=!0,S.forEach((function(t){M(t)})),S.length=0})),{}),I=1,T=function(){return I++};function M(t){var e,r=t.args,n=t.property,o=t.hasReturn,i=t.resolve;t=t.reject;window.self===window.top?(e=null==(e=u())?void 0:e[n])?o?e.apply(void 0,c(c([],r,!1),[function(t){i(t)}],!1)):i(e.apply(void 0,r)):(o="QT: ".concat(n," method fail"),u()||(o="ERROR: native bridge \u6ca1\u6709\u51c6\u5907"),null!=t&&t({state:"none",msg:o})):(e=T(),L[e]={resolve:i,reject:t},window.parent.postMessage({cmd:n,data:r,handler:e},"*"))}window.addEventListener("message",(function(t){var e,r;"callback"===(t=(t||window.event).data).cmdType&&(e=t.data,t=t.handler)&&(r=(L[t]||{}).resolve,delete L[t],null!=r)&&r(e)})),o(A,P=f),A.prototype.getMeituToken=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.getLocalStorage("token")];case 1:return[2,null==(t=e.sent())?void 0:t.big_account_access_token];case 2:return e.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.setMeituToken=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.setLocalStorage("token",JSON.stringify(t))];case 1:return e.sent(),[3,3];case 2:throw e.sent();case 3:return[2]}}))}))},A.prototype.isOldVersion=function(){return!u().getVersion},A.prototype.openLoginWithFailRedirect=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("relogin")(1)];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.openLogin=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("relogin")(0)];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.closeLogin=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("closeAccountLoginDialog")()];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.openSubscribe=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("account")()];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.closeSubscribe=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("closeVipSubscribeDialog")()];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.setLocalStorage=function(t,e){return i(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:r=JSON.stringify(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,E("setLocalStorage")(t,r)];case 2:return n.sent(),[3,4];case 3:throw n.sent();case 4:return[2]}}))}))},A.prototype.getLocalStorage=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,E("getLocalStorage",!0)(t)];case 1:return e=r.sent(),[2,JSON.parse(e)];case 2:return r.sent(),[2,null];case 3:return[2]}}))}))},A.prototype.getGid=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("getGid",!0)()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.getServerGid=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("getServerGid",!0)()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.getPlatfrom=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("getPlatfrom",!0)()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.getCountryCode=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("getCountryCode",!0)()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.getVersion=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("getVersion",!0)()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.getTheme=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("getTheme",!0)()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.getEquityData=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("getStatisticsData",!0)()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.saveImageToPhotosAlbum=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E("downloadSuccess")(t)];case 1:return e.sent(),[3,3];case 2:throw e.sent();case 3:return[2]}}))}))},A.prototype.buyProductByIAP=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E("buyProduct",!0)(JSON.stringify(t))];case 1:return[2,e.sent()];case 2:throw e.sent();case 3:return[2]}}))}))},A.prototype.loadWeb=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E("loadWeb")(t)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,""];case 3:return[2]}}))}))},A.prototype.showNavigationBarBack=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("enableTitleBack")()];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.openBrowser=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E("openBrowser")(t)];case 1:return e.sent(),[3,3];case 2:throw e.sent();case 3:return[2]}}))}))},A.prototype.mtTrack=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E("mtTrack",!0)(JSON.stringify(t))];case 1:return[2,e.sent()];case 2:throw e.sent();case 3:return[2]}}))}))},A.prototype.switchToStartup=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("switchToStartup")()];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.switchToEditor=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("switchToEditor")()];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.logout=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E("logout")()];case 1:return t.sent(),[3,3];case 2:throw t.sent();case 3:return[2]}}))}))},A.prototype.isWebStartup=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,E("isWebStartup")(t)];case 1:return e.sent(),[3,3];case 2:throw e.sent();case 3:return[2]}}))}))};var P;d=A;function A(){var t=P.call(this)||this,e=t.getMeituToken,r=t.setMeituToken;return t.getMeituToken=function(){return i(t,void 0,void 0,(function(){return a(this,(function(t){return[2,e.call(this)]}))}))},t.setMeituToken=function(e){return i(t,void 0,void 0,(function(){return a(this,(function(t){return[2,r.call(this,e)]}))}))},t}function C(t){return-1}function R(t,e,r){var n,o;return m.isClient?F.loginHandler?(r("\u8bf7\u7b49\u5f85\u4e0a\u4e00\u4e2a login \u8fd4\u56de\u540e\u8c03\u7528"),C):(n="execCommand",o=D++,"login"===t&&(F.loginHandler=o),F[o]={resolve:e,reject:r,command:t},function(e){void 0===e&&(e={});e=JSON.stringify({Handler:o,Command:t,Params:e});return m.isUsePrompt?window.prompt(n,JSON.stringify({ParamList:[e]})):(e={cmd:n,data:e,reject:r,Handler:o},B?U(e):G.push(e)),o}):(r("\u9700\u8981\u901a\u8fc7 PCB.clientInfo \u5224\u65ad\u662f\u5426\u5728\u5ba2\u6237\u7aef"),C)}var N,D=1,F={loginHandler:0},B=!1,G=[];function U(t){var e,r=t.cmd,n=t.data,o=t.reject;t=t.Handler;window.self===window.top&&(null!=(e=u())&&e[r]?u()[r](n):(delete F[t],e="".concat(r," \u6ca1\u6709\u5b9e\u73b0"),u()||(e="ERROR: bridge \u6ca1\u6709\u51c6\u5907"),null!=o&&o({state:"none",msg:e})))}function z(){return null!==N&&N.apply(this,arguments)||this}window.addEventListener("PCBridgeReady",(function(t){B=!0,G.forEach((function(t){U(t)})),G.length=0})),o(z,N=d),z.prototype.test=function(){return new Promise((function(t,e){R("test",t,e)()}))},z.prototype.setHomeButton=function(t){return new Promise((function(e,r){R("setHomeButton",e,r)(t)}))},z.prototype.closeWebview=function(){return new Promise((function(t,e){R("closeWebview",t,e)()}))},z.prototype.setNavigationBarBack=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2,new Promise((function(e,r){R("setNavigationBarBack",e,r)({show:t})}))]}))}))},z.prototype.setTheme=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return[2,new Promise((function(e,r){R("setTheme",e,r)({theme:t})}))]}))}))},z.prototype.setNavigationBarTitle=function(t){return new Promise((function(e,r){R("setNavigationBarTitle",e,r)({title:t})}))},z.prototype.getSystemInfo=function(){return new Promise((function(t,e){R("getSystemInfo",t,e)()}))},z.prototype.getUserInfo=function(){return new Promise((function(t,e){R("getUserInfo",t,e)()}))},z.prototype.login=function(){return new Promise((function(t,e){R("login",t,e)()}))},z.prototype.postImageData=function(t,e){return new Promise((function(r,n){R("postImageData",r,n)({data:t,path:e})}))},z.prototype.getCurrentImageData=function(){return new Promise((function(t,e){R("getCurrentImageData",t,e)()}))},z.prototype.saveMultiImageToAlbum=function(t,e,r,n,o,i){return void 0===o&&(o=""),void 0===i&&(i=""),new Promise((function(a,c){R("saveMultiImageToAlbum",a,c)({name:t,data:e,isEnd:r,type:n,path:o,source:i})}))},z.prototype.openSubscribeWithParams=function(t){return new Promise((function(e,r){R("openSubscribeWithParams",e,r)(t)}))},z.prototype.openModalDialog=function(t){return new Promise((function(e,r){R("openModalDialog",e,r)(t)}))},z.prototype.toolTip=function(t,e){return new Promise((function(r,n){R("toolTip",r,n)({content:t,timer:e})}))};var W=new z;window.PCB=W||{},window.PCB.postMessage=function(t){var e,r,n,o=t.data,i=t.handler,a=t.state;i&&(r=(e=F[i]||{}).resolve,n=e.reject,e.command,delete F[i],F.loginHandler===i&&(F.loginHandler=0),"success"===a?null!=r&&r(o):null!=n&&n(t))},window.PCB.dispatchEvent=j,window.PCB.clientInfo=m,e.default=W}},r={},t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s="./src/index.ts");function t(n){var o;return(r[n]||(o=r[n]={i:n,l:!1,exports:{}},e[n].call(o.exports,o,o.exports,t),o.l=!0,o)).exports}var e,r},t.exports=n()},,,,,,,,function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(123),a=r(261),c=r(10),u=r(7),s=r(349);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof d?e:d,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function d(){}function h(){}function p(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),p.prototype=d.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==l(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",h.prototype=p),a(p,"constructor",h),h.displayName=a(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?p(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.scale,r=t.children,l=t.uploadImageToStage,p=(t=h(Object(n.useState)(null),2))[0],y=t[1],g=(t=h(Object(n.useState)(!1),2))[0],m=t[1],v=(t=Object(i.e)()).addImageLayer,b=t.replaceImage,w=(t=Object(s.b)()).dragData,O=t.setDragData,x=Object(c.p)().getLayers;t=function(){t=f().mark((function t(r){var n,o,i,a,c,s,d,h,x,j,_,E,k,S;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(O(null),r.preventDefault(),r.stopPropagation(),n=Object(u.gb)({x:r.clientX,y:r.clientY},e),w){t.next=7;break}return null!=r&&null!=(o=r.dataTransfer)&&o.files&&null!=l&&l(r.dataTransfer.files,n),t.abrupt("return");case 7:if(o=w.url,i=w.stageWidth,a=w.stageHeight,c=w.id,s=w.width,d=w.height,x=h=0,j=o,s&&d){t.next=19;break}return t.next=14,Object(u.P)(o);case 14:E=t.sent,h=E.width,x=E.height,t.next=21;break;case 19:h=s,x=d;case 21:E=x,1.5*i<(_=h)&&(j=Object(u.nb)(j,1.5*i,100),E=(_=1.5*i)/h*x),g&&p?b(j,p.id,h,x):(S=k=0,h/x<i/a?k=h/(x/(S=a/2)):S=x/(h/(k=i/2)),v(j,k,S,n.x-k/2,n.y-S/2,null==c?void 0:c.toString(),_,E)),u.c.fireMouseup(),y(null),m(!1);case 28:case"end":return t.stop()}}),t)}));var t,r=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(t){return r.apply(this,arguments)}}();return o.a.createElement("div",{className:"l-drag-drop",onDrop:t,onDragOver:function(t){var r,n,o;w&&(r=x(),n={x:t.clientX,y:t.clientY},o=null,Object(u.ec)(r,(function(t){Object(a.d)(t)&&Object(a.c)(t,n,e)&&(o=t)})),o?(y(o),Object(a.c)(o,n,e,!0)?m(!0):m(!1),t.preventDefault()):(y(null),m(!1)))},onDragLeave:function(){y(null),m(!1)},"data-move-make-up":"true",style:{width:"100%",height:"100%",pointerEvents:"auto"}},r,p?o.a.createElement(a.a,{canDrop:g,scale:e,dropLayer:p}):null)}},,function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(42),a=r(10),c=r(17),u=r(2),s=r(34),l=r(7),f=r(384);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(p="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=p.asyncIterator||"@@asyncIterator",i=p.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function h(){}var p,g,m=((g=(g=(a(p={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(p=g),h.prototype=l.prototype=Object.create(p));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==d(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function g(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?v(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(582),e.a=o.a.memo((function(t){var e=t.layer,r=t.isLinkOperate,d=(t=t.overflowStageHidden,(j=Object(a.f)()).getActiveInfo,j.delActiveLayer),h=Object(a.h)().setActiveLayer,v=Object(n.useRef)(null),b=(j=m(Object(n.useState)(""),2))[0],w=j[1],O=e.width,x=e.height,j=e.id,_=e.data,E=e.materialIds,k=e.opacity,S=(((null==E?void 0:E.get(u.o.WATERMARK))||[""])[0],Object(c.b)((function(t){return t.sdk.watermarkLayerModel.setCurFilter})),Object(n.useRef)(!1)),L=(E=m(Object(n.useState)({height:0,width:0}),2))[0],I=E[1],T=_.isFullScreen,M=_.url,P=_.originUrl,A=_.size;return Object(n.useEffect)((function(){T?d():h(e.id)}),[_,T,_.url,k]),Object(n.useEffect)((function(){var t=function(){t=y().mark((function t(){var e,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.getLocalUrlAsync(M||P);case 2:r=t.sent,w(r),null!=(e=v.current)&&e.setAttribute("ready","false"),Object(l.zb)(r).then((function(t){var e=t.width,r=t.height,n=(v.current&&(v.current.width=e,v.current.height=r),null==(n=v.current)?void 0:n.getContext("2d"));null!=n&&n.clearRect(0,0,e,r),null!=n&&n.drawImage(t,0,0,e,r),null!=(n=v.current)&&n.setAttribute("ready","true")}));case 6:case"end":return t.stop()}}),t)}));var t,e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){g(i,n,o,a,c,"next",t)}function c(t){g(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(){return e.apply(this,arguments)}}();T&&M?s.a.getLocalUrlAsync(M).then((function(t){Object(l.zb)(t).then((function(e){var r=(e=Object(f.d)(A,{width:e.width,height:e.height},{width:O,height:x})).width;e=e.height;w(t),I({width:r,height:e}),S.current=!0}))})):(M||P)&&(S.current=!1,t())}),[M,T,P,A]),o.a.createElement(o.a.Fragment,null,T?o.a.createElement(i.a,{layer:p(p({},e),{rotate:0}),disableEvents:!0},o.a.createElement("div",{className:"watermark-full-screen",style:{backgroundImage:"url(".concat(b,")"),opacity:k,backgroundSize:"".concat(L.width,"px ").concat(L.height,"px")}})):o.a.createElement(i.a,{layer:e,disableEvents:!1,isLinkOperate:r,overflowStageHidden:t},o.a.createElement("canvas",{style:{width:O,height:x,opacity:k},id:"".concat(u.e).concat(j),ref:v})))}))},,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return Z}));e=r(15);var n=r.n(e),o=r(0),i=r.n(o),a=r(29),c=r(45),u=r(24),s=r(46),l=r(10),f=r(22),d=(r(486),r(276)),h=r(2),p=r(7);function y(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var v=function(t,e){var r=Object(l.q)().getLayer,i=n()(r(t)),a=(r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?m(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(),2),r[0]),c=r[1],u=(r=Object(l.w)()).addOrUpdate,f=r.cloneLayer,d=r.adjustCropLayer,y=r.checkLayerInRender;Object(s.e)((function(r){var n,o,s,l,m,v,b,w,O,x,j;return y(t)&&i&&(null==i?void 0:i.layerType)===h.h.IMAGE_LAYER?(o=(n=r.target).getAttribute("data-type"),void(Object(p.ib)(n)&&"crop-move"===o&&(r.isStart?c(f(t)):a&&(n=a.width,o=a.height,j=a.data,x=a.rotate,s=(j=j.imageTransform).offsetX,l=j.offsetY,m=j.widthRatio,v=j.heightRatio,b=j.scale,w=j.flipH,j=j.flipV,O=i.data.imageTransform,x=Object(p.bc)(Object(p.Ib)(Object(p.bc)({x:r.displacementX/e,y:r.displacementY/e}),x)),j=j?-1:1,O.offsetX=s+x.x*(w?-1:1)/(m*n*b),O.offsetY=l+x.y*j/(v*o*b),r.isEnd&&d(g({},i)),u(g({},i)))))):null}))};function b(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?x(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var j=["crop-rt","crop-lt","crop-rb","crop-lb"];function _(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?S(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L(){return i.a.createElement("div",{className:"m-crop-grid point-event-none"},i.a.createElement("div",{className:"m-crop-grid__line horizontal point-event-none",style:{top:"33.33%"}}),i.a.createElement("div",{className:"m-crop-grid__line horizontal point-event-none ",style:{top:"66.66%"}}),i.a.createElement("div",{className:"m-crop-grid__line vertical point-event-none",style:{left:"33.33%"}}),i.a.createElement("div",{className:"m-crop-grid__line vertical point-event-none ",style:{left:"66.66%"}}))}function I(t){var e=t.width;t=t.height;return i.a.createElement("div",{className:"l-cropStage-moveAction","data-type":"crop-move",style:{width:e,height:t}})}var T=["crop-bc","crop-rc","crop-lc","crop-tc"],M=(e=(r(1136),r(1137),r(9)),r.n(e)),P=r(160);function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R(t){var e=t.rotate,r=(t=Object(o.useRef)(null),Object(o.useRef)(null)),n=((a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?C(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(0),2))[0],a[1]),a=Object(P.c)(e);return Object(o.useEffect)((function(){var t=Object(p.D)(e,22.5);n(~~(t/45)%4)}),[e]),i.a.createElement("div",{className:"l-cropStage-scaleAction-img"},i.a.createElement("span",{ref:t},i.a.createElement("div",{className:M()("vertex lt",A({},a.LT,!0)),"data-type":"crop-lt"}),i.a.createElement("div",{className:M()("vertex rb",A({},a.RB,!0)),"data-type":"crop-rb"})),i.a.createElement("span",{ref:r},i.a.createElement("div",{className:M()("vertex lb",A({},a.LB,!0)),"data-type":"crop-lb"}),i.a.createElement("div",{className:M()("vertex rt",A({},a.RT,!0)),"data-type":"crop-rt"})))}function N(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function F(t){var e=t.rotate,r=(t=Object(o.useRef)(null),Object(o.useRef)(null)),n=((a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?D(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(0),2))[0],a[1]),a=Object(P.a)(e);return Object(o.useEffect)((function(){var t=Object(p.D)(e,22.5);n(~~(t/45)%4)}),[e]),i.a.createElement("div",{className:"l-cropStage-sizeAction-img"},i.a.createElement("span",{ref:r},i.a.createElement("div",{className:M()("resize tc",N({},a.TC,!0)),"data-type":"crop-tc"}),i.a.createElement("div",{className:M()("resize bc",N({},a.BC,!0)),"data-type":"crop-bc"})),i.a.createElement("span",{ref:t},i.a.createElement("div",{className:M()("resize lc",N({},a.LC,!0)),"data-type":"crop-lc"}),i.a.createElement("div",{className:M()("resize rc",N({},a.RC,!0)),"data-type":"crop-rc"})))}function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?G(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function U(t){var e=t.layer,r=t.scale,n=(t=t.children,e.left),o=e.top,a=e.width,c=e.height,u=e.rotate;return i.a.createElement("div",{className:"l-base",style:{overflow:"visible"}},i.a.createElement("div",{className:"l-base__position",style:{transform:"translate(".concat((n+a/2)*r,"px, ").concat((o+c/2)*r,"px)"),opacity:1}},i.a.createElement("div",{className:"l-base__rotate",style:{transform:"rotate(".concat(u,"deg)")}},i.a.createElement("div",{className:"l-base__layer",id:"".concat(e.id,"-crop"),style:{width:"".concat(a*r,"px"),height:"".concat(c*r,"px"),boxShadow:"0 0 0 1px var(--_base--opacity_black_50),0 0 0 ".concat(1e4,"px var(--_base--opacity_black_50)")}},t))))}function z(t){var e,r,a,c,u,f,y,g,m,b,x,_,S,M,P,A,C,N,D,G=t.scale,z=t.layer,W=void 0===(H=t.stageWidth)?100:H,K=void 0===(H=t.stageHeight)?100:H,H=(t=B(Object(o.useState)({}),2))[0],Y=t[1],V=(t=Object(d.b)()).width;t=t.height;return v(z.id,G),e=z.id,r=G,_=Object(l.q)().getLayer,a=n()(_(e)),_=k(Object(o.useState)(),2),c=_[0],u=_[1],_=Object(l.w)(),f=_.addOrUpdate,y=_.cloneLayer,g=_.adjustCropLayer,m=_.checkLayerInRender,Object(s.e)((function(t){var n,o,i,s,l,d,v,b,w,O,x,j,_,k;return m(e)&&a&&(null==a?void 0:a.layerType)===h.h.IMAGE_LAYER?(n=(j=t.target).getAttribute("data-type"),void(Object(p.ib)(j)&&T.includes(n||"")&&(t.isStart?u(y(e)):c&&(j=c.width,b=c.height,d=c.data,l=c.rotate,i=c.left,x=c.top,k=d.imageTransform,w=d.stretchOption,d.naturalWidth,d.naturalHeight,k.offsetX,k.offsetY,k.widthRatio,k.heightRatio,k.scale,d=a.data.imageTransform,o=Object(p.bc)(Object(p.Ib)(Object(p.bc)({x:t.displacementX/r,y:t.displacementY/r}),l)),i+=j/2,x+=b/2,"crop-bc"===n||"crop-tc"===n?(b+o.y*(s="crop-bc"===n?1:-1)<h.l?(o.y=b-h.l,a.height=h.l):a.height=b+o.y*s,a.left=i+o.y*Math.sin(Object(p.g)(-l))/2-a.width/2,a.top=x+o.y*Math.cos(Object(p.g)(-l))/2-a.height/2):"crop-rc"!==n&&"crop-lc"!==n||(j+o.x*(b="crop-rc"===n?1:-1)<h.l?(o.x=j-h.l,a.width=h.l):a.width=j+o.x*b,a.left=i+o.x*Math.cos(Object(p.g)(-l))/2-a.width/2,a.top=x-o.x*Math.sin(Object(p.g)(-l))/2-a.height/2),s=c.width,j=c.height,b=c.data,w===h.u.cover?(i=a.width,x=a.height,o=b.imageTransform,l=b.naturalHeight,w=b.naturalWidth,b=o.widthRatio,O=o.heightRatio,o=b*s*(b=o.scale),O=O*j*b,d.widthRatio=w/(_=(b=w/i)<(w=l/x)?b:w)/i,d.heightRatio=l/_/x,d.scale=b<w?o/i:O/x):(l=a.width,_=a.height,d.widthRatio=s*k.widthRatio/l,d.heightRatio=j*k.heightRatio/_),a&&a.data&&(b=a.left,w=a.top,o=a.width,i=a.height,O=c.left,x=c.top,s=c.width,l=c.height,k=(j=null==(d=c.data)?void 0:d.imageTransform).widthRatio,_=j.heightRatio,d=j.offsetX,v=j.offsetY,b+=o/2,w+=i/2,O+=s/2,x+=l/2,j=s*k*(k=j.scale),_=l*_*k,k=a.data.imageTransform,"crop-lc"===n||"crop-rc"===n?k.offsetX=(d*j-(o-s)*("crop-rc"===n?1:-1)/2)/j:"crop-tc"===n||"crop-bc"===n?k.offsetY=(v*_-(i-l)*("crop-bc"===n?1:-1)/2)/_:(k.offsetX=(d*j-(b-O))/j,k.offsetY=(v*_-(w-x))/_)),t.isEnd&&g(E({},a)),f(E({},a)))))):null})),b=z.id,x=G,_=Object(l.q)().getLayer,S=n()(_(b)),_=O(Object(o.useState)(),2),M=_[0],P=_[1],_=Object(l.w)(),A=_.addOrUpdate,C=_.cloneLayer,N=_.adjustCropLayer,D=_.checkLayerInRender,Object(s.e)((function(t){var e,r,n,o,i,a,c,u,s,l,f,d;return D(b)&&S&&(null==S?void 0:S.layerType)===h.h.IMAGE_LAYER?(i=(n=t.target).getAttribute("data-type"),void(Object(p.ib)(n)&&j.includes(i||"")&&(t.isStart?P(C(b)):M&&(n=M.width,c=M.height,r=M.data,l=M.rotate,o=M.left,a=M.top,e=r.imageTransform,f=r.stretchOption,r.naturalWidth,r.naturalHeight,e.offsetX,e.offsetY,e.widthRatio,e.heightRatio,e.scale,r=S.data.imageTransform,l=Object(p.bc)(Object(p.Ib)(Object(p.bc)({x:t.displacementX/x,y:t.displacementY/x}),l)),S.width=n-2*l.x*(i="crop-lt"===i||"crop-lb"===i?1:-1),S.height=c*(S.width/n),S.width<h.l&&(l.x=(n-h.l)*i/2,S.width=h.l,S.height=c*(S.width/n)),S.height<h.l&&(S.height=h.l,S.width=h.l/c*n,l.x=(n-S.width)*i/2),S.left=o+l.x*i,S.top=a-(S.height-c)/2,n=M.width,o=M.height,l=M.data,f===h.u.cover?(i=S.width,a=S.height,c=l.imageTransform,f=l.naturalHeight,l=l.naturalWidth,s=c.widthRatio,u=c.heightRatio,c=s*n*(s=c.scale),u=u*o*s,r.widthRatio=l/(d=(s=l/i)<(l=f/a)?s:l)/i,r.heightRatio=f/d/a,r.scale=s<l?c/i:u/a):(f=S.width,d=S.height,r.widthRatio=n*e.widthRatio/f,r.heightRatio=o*e.heightRatio/d),t.isEnd&&N(w({},S)),A(w({},S)))))):null})),Object(o.useEffect)((function(){var t=(t=null==(t=document.getElementById("scrollContainer"))?void 0:t.parentNode)?{x:t.scrollLeft,y:t.scrollTop}:{x:0,y:0};t={width:W*G,height:K*G,position:"relative",transform:"translate(-50%, -50%)",top:"50%",left:"50%",marginTop:"".concat(-t.y,"px"),marginLeft:"".concat(-t.x,"px")};Y(t)}),[G,K,W]),i.a.createElement("div",{className:"l-crop-operate-image"},i.a.createElement("div",{style:{width:V<W*G?W*G:V,height:t<K*G?K*G:t}},i.a.createElement("div",{style:H},i.a.createElement(U,{layer:z,scale:G},i.a.createElement(I,{width:z.width*G,height:z.height*G}),i.a.createElement(F,{rotate:z.rotate}),i.a.createElement(R,{rotate:z.rotate}),i.a.createElement(L,null)))))}var W=r(425),K=r(88),H=r(280);function Y(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?q(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $(t){var e,r={x:0,y:0},n=(t=document.getElementById("".concat(t)),document.getElementById("p-editor__aside")),o=document.getElementById("p-editor__panel"),i=document.getElementById("c-crop-image-wrap");return t&&n&&o&&i?(r=t.getBoundingClientRect(),t=n.getBoundingClientRect(),n=o.getBoundingClientRect(),o=i.getBoundingClientRect(),i=r.x-t.width-15,(e=r.y-a.a-40-10)<0&&e+r.height>o.height?e=10:e<0?e=r.bottom-a.a+5:e+r.height>o.height&&(e=a.a+40),i<0&&r.x+393>n.left||i<0?i=10:r.x+393>n.left&&(i=n.left-393-t.width-40),{x:i,y:e}):r}var Z=function(t){var e,r,d=t.stageWidth,h=t.stageHeight,y=t.scale,g=t.cancelCallBack,m=t.confirmCallBack,v=t.resetCallBack,b=(t=Object(l.w)()).addOrUpdate,w=t.adjustCropLayer,O=t.cloneLayer,x=Object(l.L)().updateGroup,j=Object(f.s)(),_=(t=Object(f.f)(),Object(l.n)().getActiveLayer),E=Object(l.h)().setActiveInfoById,k=_(),S=Object(u.h)(),L=Object(l.x)().hide,I=((_=((_=Object(a.c)()).width,_.height,X(Object(o.useState)(0),2)))[0],_[1],X(Object(o.useState)(n()(k)),1)[0]),T=(_=X(Object(o.useState)(!1),2))[0],M=_[1],P=(_=X(Object(o.useState)(!1),2))[0],A=_[1],C=(_=X(Object(o.useState)({x:0,y:0}),2))[0],R=_[1],N=Object(l.w)().checkLayerInRender,D=(_=X(Object(o.useState)(!1),2))[0],F=_[1],B=(_=(Object(s.e)((function(t){var e;return k&&N(k.id)&&k&&(null==k?void 0:k.layerType)===K.c.IMAGE_LAYER?((e=t.target).getAttribute("data-type"),void(Object(p.ib)(e)&&(t.isStart?F(!0):t.isEnd&&F(!1)))):null})),Object(o.useEffect)((function(){var t,e,r;k&&(t=(r=k.data.imageTransform).widthRatio,e=r.heightRatio,r=r.scale,A(1!==t||1!==e||1!==r))}),[k]),Object(o.useEffect)((function(){k&&!D&&setTimeout((function(){var t=$(k.id);R(t)}))}),[k]),Object(H.a)()),Object(o.useEffect)((function(){k&&!D&&setTimeout((function(){var t=$(k.id);R(t)}))}),[_]),Object(o.useEffect)((function(){k&&I&&(T||JSON.stringify(k)===JSON.stringify(I)||M(!0))}),[k,T,I]),Object(c.e)());return Object(o.useEffect)((function(){return B.show(),function(){B.hide()}}),[]),k&&(_=(e=k.data.imageTransform).scale,r=function(){setTimeout((function(){L(),null!=I&&I.parentId&&x(I.parentId),null!=I&&I.id&&E(I.id)}),0)},t)?i.a.createElement("div",null,i.a.createElement(z,{scale:y,layer:k,stageWidth:d,stageHeight:h}),D?null:i.a.createElement(W.a,{scale:_,setScale:function(t,r){e.scale=3<t?3:t<1?1:t,r&&w(k),b(n()(k))},cancel:function(){I&&b(n()(I)),j(!1),r(),g&&g()},confirm:function(){j(!1),S.action(I,O((null==I?void 0:I.id)||"")),r(),m&&m()},reset:function(){I&&b(n()(I)),v&&v(),M(!1)},isChange:T,adjustImage:function(){var t,r,n,o,i,a,c,u;k&&(t=k.width,r=k.height,n=k.left,o=k.top,u=e.widthRatio,a=e.heightRatio,c=(i=u*(u=e.scale)*t)*e.offsetX,u=(a=a*u*r)*e.offsetY,k.width=i,k.height=a,k.left=n-(i-t)/2+c,k.top=o-(a-r)/2+u,e.widthRatio=1,e.heightRatio=1,e.rotate=0,e.scale=1,e.offsetX=0,e.offsetY=0,b(V({},k)))},cropScalePosition:C,showAdjustImage:P})):null}},,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return k}));e=r(15);var n=r.n(e),o=r(0),i=r.n(o),a=r(172),c=r(425),u=r(45),s=r(24),l=r(10),f=r(22),d=(r(486),r(34));function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(){p=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(e){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c;e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),n=new x(n||[]);return e._invoke=(o=t,i=r,a=n,c="suspendedStart",function(t,e){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r&&(r=function t(e,r){var n=e.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method))return s;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}return"throw"===(n=u(n,e.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,s):(n=n.arg)?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,s):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,s)}(r,a),r)){if(r===s)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(c="executing","normal"===(r=u(o,i,a)).type){if(c=a.done?"completed":"suspendedYield",r.arg===s)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c="completed",a.method="throw",a.arg=r.arg)}}),e}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s={};function l(){}function f(){}function d(){}var y,g,m=((g=(g=(a(y={},n,(function(){return this})),Object.getPrototypeOf))&&g(g(j([]))))&&g!==e&&r.call(g,n)&&(y=g),d.prototype=l.prototype=Object.create(y));function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==h(i)&&r.call(i,"__await")?e.resolve(i.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}));c(o.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function j(t){if(t){var e,o=t[n];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=o}return{next:_}}function _(){return{value:void 0,done:!0}}return a(m,"constructor",f.prototype=d),a(d,"constructor",f),f.displayName=a(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),a(m,i,"Generator"),a(m,n,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,r=[];for(e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function g(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?b(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t){function e(t){var e=t.pageX;t=t.pageY;D.current.isMove=!0,D.current.startPos={x:e,y:t},document.querySelector(".l-crop-operate-background").style.cursor="move"}function r(t){if(!D.current.isMove)return!1;var e=t.pageX;t=t.pageY;D.current.movePos={x:e,y:t};t=(e=D.current).movePos;var r=e.startPos,n=(e=(e.imgScale,e.scale,j?-1:1),t.x-r.x);r=t.y-r.y;D.current.imgX+=n*(_?-1:1),D.current.imgY+=r*e,N({x:D.current.imgX,y:D.current.imgY}),D.current.startPos=m({},t)}function n(){var t,e,r,n,o,i,a,c,l;D.current.isMove=!1,document.querySelector(".l-crop-operate-background").style.cursor="",t=D.current.layer.data,r=(e=D.current).imgX,n=e.imgMaxX,o=e.imgY,i=e.imgMaxY,a=e.imgScale,n*=e=e.scale,i*=e,c=r<0?-1:1,l=o<0?-1:1,n=Math.abs(r)>n?n*c:r,c=Math.abs(o)>i?i*l:o,t.imageTransform.offsetX=n/u/E/e/a,t.imageTransform.offsetY=c/s/k/e/a,f(m({},D.current.layer))}t.layer;var c=t.scale,u=t.stageWidth,s=t.stageHeight,f=Object(l.w)().addOrUpdate,h=Object(a.e)().getConfigRealTime(),g=Object(o.useRef)({}),b=(t=h.left,h.top),w=h.data,O=w.url,x=(w=w.imageTransform).scale,j=w.flipV,_=w.flipH,E=w.widthRatio,k=w.heightRatio,S=w.offsetX,L=w.offsetY,I=(w=v(Object(o.useState)({rotateX:0,rotateY:0,rotateZ:0}),2))[0],T=w[1],M=(w=v(Object(o.useState)({widthRatio:1,heightRatio:1}),2))[0],P=w[1],A=(w=v(Object(o.useState)(""),2))[0],C=w[1],R=(w=v(Object(o.useState)({x:0,y:0}),2))[0],N=w[1],D=Object(o.useRef)({imgX:0,imgY:0,isMove:!1,startPos:{x:0,y:0},movePos:{x:0,y:0},layer:{},imgMaxX:0,imgMaxY:0,imgScale:0,scale:0});return Object(o.useEffect)((function(){!function(){t=p().mark((function t(){var e;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=g.current[O],t.t0){t.next=5;break}return t.next=4,d.a.getLocalUrlAsync(O);case 4:t.t0=t.sent;case 5:e=t.t0,g.current[O]=e,D.current.imgX=S*x*u*E*c,D.current.imgY=L*x*s*k*c,D.current.imgMaxX=(u*E*x-u)/2,D.current.imgMaxY=(s*k*x-s)/2,D.current.imgScale=x,D.current.layer=h,D.current.scale=c,N({x:D.current.imgX,y:D.current.imgY}),C(e),I.rotateX=j?180:0,I.rotateY=_?180:0,T(I),P({widthRatio:E,heightRatio:k});case 20:case"end":return t.stop()}}),t)}));var t,e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){y(i,n,o,a,c,"next",t)}function c(t){y(i,n,o,a,c,"throw",t)}a(void 0)}))};return function(){return e.apply(this,arguments)}}()()}),[h,c]),Object(o.useEffect)((function(){var t,o;if(A)return t=document.querySelector("#crop-bg-".concat(h.id)),o=document.querySelector(".l-crop-operate-background"),null!=t&&t.addEventListener("mousedown",e,!0),null!=o&&o.addEventListener("mousemove",r,!0),null!=o&&o.addEventListener("mouseup",n,!0),document.querySelector(".l-contentmenu-wrap").style.display="none",function(){null!=t&&t.removeEventListener("mousedown",e),null!=o&&o.removeEventListener("mousemove",r),null!=o&&o.removeEventListener("mouseup",n),document.querySelector(".l-contentmenu-wrap").style.display="block"}}),[A]),A?i.a.createElement("div",{className:"l-base",style:{overflow:"visible"}},i.a.createElement("div",{className:"l-base__position",style:{transform:"translate(".concat((t+u/2)*c,"px, ").concat((b+s/2)*c,"px)"),opacity:1}},i.a.createElement("div",{className:"l-base__rotate"},i.a.createElement("div",{className:"l-base__layer",style:{width:"".concat(u*c,"px"),height:"".concat(s*c,"px")}},i.a.createElement("div",{id:"crop-bg-".concat(h.id),style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)  rotateX(".concat(I.rotateX,"deg) rotateY(").concat(I.rotateY,"deg)"),width:"".concat(u*c,"px"),height:"".concat(s*c,"px"),display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",zIndex:1,backgroundImage:"url(https://xiuxiu-pro.meitudata.com/images/a99d6e203320de0ce416297b4072296c.jpg)",backgroundRepeat:"repeat",cursor:"move"}},i.a.createElement("img",{src:A,alt:"",style:{width:M.widthRatio*u*c+"px",height:M.heightRatio*s*c+"px",transform:"translateX(".concat(R.x,"px) translateY(").concat(R.y,"px) rotateZ(").concat(I.rotateZ,"deg) scale(").concat(x,")"),pointerEvents:"none",flexShrink:0}})),i.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)  rotateX(".concat(I.rotateX,"deg) rotateY(").concat(I.rotateY,"deg)"),width:"".concat(u*c,"px"),height:"".concat(s*c,"px"),display:"flex",alignItems:"center",justifyContent:"center",zIndex:-1}},i.a.createElement("img",{src:A,alt:"",style:{width:M.widthRatio*u*c+"px",height:M.heightRatio*s*c+"px",transform:"translateX(".concat(R.x,"px) translateY(").concat(R.y,"px) rotateZ(").concat(I.rotateZ,"deg) scale(").concat(x,")"),opacity:.3,pointerEvents:"none",flexShrink:0}})))))):null}function O(t){var e=t.scale,r=t.layer,n=void 0===(c=t.stageWidth)?100:c,a=void 0===(c=t.stageHeight)?100:c,c=(t=v(Object(o.useState)({}),2))[0],u=t[1];return Object(o.useEffect)((function(){u({width:n*e,height:a*e,position:"relative"})}),[e,a,n]),i.a.createElement("div",{className:"l-crop-operate-background"},i.a.createElement("div",{style:c},i.a.createElement(w,{layer:r,scale:e,stageWidth:n,stageHeight:a})))}function x(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?E(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1156);var k=i.a.memo((function(t){var e=t.scale,r=t.stageWidth,d=(t=t.stageHeight,(y=Object(l.w)()).addOrUpdate),h=y.adjustCropLayer,p=y.cloneLayer,y=Object(a.e)(),g=Object(s.h)(),m=Object(f.s)(),v=Object(f.f)(),b=y.getConfigRealTime(),w=_(Object(o.useState)(n()(b)),1)[0],x=(y=_(Object(o.useState)(!1),2))[0],E=y[1],k=(Object(o.useEffect)((function(){!x&&b&&w&&JSON.stringify(b)!==JSON.stringify(w)&&E(!0)}),[b,x,w]),Object(u.e)()),S=(Object(o.useEffect)((function(){return k.show(),function(){k.hide()}}),[]),b.data.imageTransform);y=S.scale;return v?i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{layer:b,scale:e,stageWidth:r,stageHeight:t}),i.a.createElement(c.a,{scale:y,setScale:function(t,e){S.scale=3<t?3:t<1?1:t,e&&h(b),d(j({},b))},cancel:function(){w&&d(w),m(!1)},confirm:function(){m(!1),g.action(w,p((null==w?void 0:w.id)||""))},reset:function(){w&&d(n()(w))},isChange:x,isBackground:!0})):null}))},,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r(0),o=r.n(n),i=r(340);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?c(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r(1177);var u=o.a.memo((function(t){t=void 0!==(t=t.show)&&t;var e=a(Object(n.useState)({left:"80px",bottom:"15px"}),2),r=e[0],c=e[1];return Object(n.useEffect)((function(){var t=Object(i.a)();c(Object(i.b)(t))}),[]),o.a.createElement("div",null,t?o.a.createElement("div",{className:"download-tip ".concat(r.top?"download-tip--top":"download-tip--bottom"),style:r},"\u4f5c\u54c1\u5df2\u4e0b\u8f7d\u5230\u8fd9\u91cc\u54e6"):null)}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));e=r(9);var n=r.n(e),o=(e=r(0),r.n(e));function i(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){var n,o;n=t,o=r[e],e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(943);var c=function(t){var e=t.tabData,r=t.tabStyles;t=t.width;return o.a.createElement("div",{className:"mt-static-tab",style:a({width:void 0===t?144:t},void 0===r?{}:r)},e.map((function(t,e){var r,i=void 0!==(i=t.active)&&i,a=void 0===(r=t.func)?function(){}:r;t=void 0===(r=t.text)?"":r;return o.a.createElement("div",{key:e,className:n()("mt-static-tab__item",{active:i}),onClick:function(){return a()}},t)})))}},,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));e=r(0);var n=r.n(e),o=r(13),i=r(7),a=(r(1112),function(t){var e=(t=t.list).filter((function(t){return!t.url}));t=t.filter((function(t){return t.url}));return n.a.createElement("div",{className:"threshold-list-scroll-wrap"},n.a.createElement("div",{className:"threshold-list-content"},n.a.createElement("div",{className:"threshold-textlist"},e.map((function(t,e){return n.a.createElement("div",{className:"threshold-textlist__item",key:e+((null==t?void 0:t.typeName)||"")+(null==t?void 0:t.name)},n.a.createElement("div",{className:"threshold-textlist__item-icon"},n.a.createElement(o.d,{fontSize:16,name:t.iconName||"textObject"})),n.a.createElement("div",{className:"threshold-textlist__item-name"},"".concat((null==t?void 0:t.typeName)||""," : ").concat((null==t?void 0:t.name)||"")))}))),n.a.createElement("div",{className:"threshold-imagelist"},t.map((function(t,e){return n.a.createElement("div",{className:"threshold-imagelist__item",key:e+((null==t?void 0:t.typeName)||"")+(null==t?void 0:t.name)},n.a.createElement("img",{className:"",src:"vipTextFont"===t.type?t.url:t.url?Object(i.nb)(t.url,180):"",alt:"\u7d20\u6750"}))})))))})},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(13),o=(e=r(9),r.n(e)),i=(e=r(0),r.n(e)),a=(r(1113),function(t){var e=t.width,r=void 0===(r=t.show)||r,a=t.onClick,c=t.children,u=t.count;t=t.isImageEditor;return i.a.createElement("div",{className:"threshold-list",style:{width:e}},i.a.createElement("div",{className:"threshold-list__count"},void 0!==t&&t?i.a.createElement("p",null,"\u4f5c\u54c1\u4f7f\u7528\u4e86",i.a.createElement("span",null,u," "),"\u4e2a\u4f1a\u5458\u5185\u5bb9"):i.a.createElement("p",null,"\u5f53\u524d\u6709",i.a.createElement("span",null,u," "),"\u4e2a\u4ed8\u8d39\u7d20\u6750\uff0c\u9700\u8981\u5f00\u901a\u4f1a\u5458\u652f\u4ed8"),i.a.createElement(n.d,{name:r?"chevronUpBold":"chevronDownBold",fontSize:16,onClick:function(){a&&a()}})),i.a.createElement("div",{className:o()("threshold-list__info",{show:r})},c))})},function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));e=r(0);var n=r.n(e),o=(r(1135),function(t){var e=t.onHandler;t=t.show;return n.a.createElement(n.a.Fragment,null,t?n.a.createElement("div",{className:"buy-vip-btn",onClick:function(){return e&&e()}},"\u5f00\u901a\u4f1a\u5458\u53bb\u6c34\u5370"):null)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},,function(t,e,r){},,,,,,,,,,,,function(t,e,r){},,,function(t,e,r){},,function(t,e,r){},,,,function(t,e,r){},function(t,e,r){},,function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/collapse-btn-dark.8875a643.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/collapse-btn-light.8723fe70.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/logo-white.ce493aa9.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/logo.d5006f07.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/new.0214f3c0.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/not-vip.aab0c5a0.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/vip.46ae7033.svg"},,function(t,e,r){},,function(t,e,r){},,,,,,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},function(t,e,r){},,,,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,function(t,e,r){},,,function(t,e,r){},function(t,e,r){},,function(t,e,r){},function(t,e,r){},function(t,e,r){},,,,,,,function(t,e,r){},function(t,e,r){},,,function(t,e,r){},,,,,function(t,e,r){},,,,,,,,function(t,e,r){},function(t,e,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},,,,,,,,,,function(t,e,r){},,,,,,function(t,e,r){},function(t,e,r){},,,,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/e3fb99414dc164e05c8258f8e056727e.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/3f00d7ea558cdb1fa83024ce33f97a27.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/e518adef90dfbad0513673f01c8cbcf3.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/84ad401571702c62724fb3571f2e5790.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/fc121b2456a88e9826b97934dafa4cd5.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/6b2966b5577e6ed372a863408d61bd92.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/81db30ee34a7af1ff116a57a64b2b7df.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/b9558d1742c8ccfe74a1bf1e74a3d03f.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/78e0a4dabfe661cacbf4e688fe2f1181.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/3dd446c05c9a69a8560450bb7c182f1f.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/fc638f5d536ad125de0a850fa1118b74.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/bd3d9cb6fdf4a590e0f67cb90812e2fb.jpg"},function(t,e,r){},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/2fd9180378cb5334bc9b6eaba9e18ed8.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/0ac99d13a1abe2be1a766d0ad8b06973.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/480b810a2152f267a282cb3123be7d57.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/9f7e5584ea47a5eeb3df320170e99b5f.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/ac146fac5bf604b8b967282804997584.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/14d13a68286cce40523b7ec376e69bb7.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/fc9ac516d2914fa55c02ca998700dec1.png"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/150fca864e27777991cdf86c0feb8c6d.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/a41a88466c3393ea18b178f3574e2ea2.png"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/3d7573ef8c1336c9b62cb17ae611f6fc.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/6126252302037a9299f7fec946ac34e5.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/b9cf7f442c9b5d24383b19d4d289ce75.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/caced91de8a50389e8fd4a633bd214ab.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/f2fe59a0c072f92d4ea706da704fb895.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/bf556743071120377724b362abfd83e9.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/b247fc1e16f400ee0edb32ed8cb028a5.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/fc9ac516d2914fa55c02ca998700dec1.png"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/d9dbb7dc3361c194b50cb512b8a14afe.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/a41a88466c3393ea18b178f3574e2ea2.png"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/6a2c25ee03c0cdeb1ceb4f13581071e3.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/3919dfb10bc0a921f078e93421678d31.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/3d7573ef8c1336c9b62cb17ae611f6fc.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/d184454beabce7d74e45d2aad8e950c4.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/3d7573ef8c1336c9b62cb17ae611f6fc.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/0ac99d13a1abe2be1a766d0ad8b06973.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/2fd9180378cb5334bc9b6eaba9e18ed8.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/480b810a2152f267a282cb3123be7d57.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/9f7e5584ea47a5eeb3df320170e99b5f.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/c3fc89d405be6fb61b47ea347886ee3b.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/4b4c764890a2b110e414c58fbac63d5c.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/f01c5e886f31f9bc174f4f8c17938262.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/ff8f8c7b993fb491107b211c054280cf.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/0cf1d89374e856265c5eece653873394.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/da023fc0c42928de0f28c8e5d557abe2.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/6126252302037a9299f7fec946ac34e5.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/b9cf7f442c9b5d24383b19d4d289ce75.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/caced91de8a50389e8fd4a633bd214ab.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/f2fe59a0c072f92d4ea706da704fb895.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/e84377a0a10f72b37109a40c1c448ab2.jpg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/images/b6da589dcf8fb53d837715181edb8d14.jpg"},function(t,e,r){},function(t,e,r){},function(t,e,r){},,function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/daub-pen.03891523.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/path-pen.4aec0d17.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/rect-pen.d2600ed5.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/union.ccf4f36d.svg"},function(t,e,r){},function(t,e,r){},function(t,e,r){},,function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/line-0.de2270bf.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/line-1.68cdc6d4.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/line-2.e16d1498.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/line-3.b08dc601.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/line-4.bc8888b2.svg"},,function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/arrow.ba3ade53.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/circle.941ebc20.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/curve.557759d9.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/heart.9f938209.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/line.9b341dfd.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/polygon.b064b350.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/square.89e60aa8.svg"},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/star.094d41d9.svg"},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},,function(t,e,r){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=(Object.defineProperty(e,"__esModule",{value:!0}),r(1096)),i=r(1097);function a(t){var e=this;this.eventHandlers={},this.ele=null,this.messageHandler=function(t){var r;(t="string"==typeof(t=t.data||t.originalEvent&&t.originalEvent.data)&&/^[\[\{]/.test(t)?JSON.parse(t):t)&&"closeLoginPopup"===t.action&&t&&"success"===t.status&&((r=e.eventHandlers[o.EventName.SUCCESS])&&r(t.data),e.close())},this.createDialog=function(){var t,r=document.createElement("div"),n=(r.className="design-room-login-popup",document.createElement("div")),o=(n.className="design-room-login-popup_loading",document.createElement("div")),i=((t=(o.className="design-room-login-popup__inner",document.createElement("div"))).innerHTML=e.getContent(),document.createElement("img"));(t=(i.className="design-room-login-popup__close",i.src="https://titan-img.meitudata.com/xiuxiu/official/web-xiuxiu-official/pc/image/close-icon.png",i.onclick=function(){e.close()},o.appendChild(t),o.appendChild(i),r.appendChild(n),r.appendChild(o),document.createElement("style"))).innerHTML=".design-room-login-popup {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  z-index: 9999;\n  background-color: rgba(0,0,0,0.6);\n}\n\n.design-room-login-popup_loading {\n  width: 36px;\n  height: 36px;\n  position: absolute;\n  background: url('https://titan-img.meitudata.com/xiuxiu/official/web-xiuxiu-official/pc/image/loading.png') no-repeat;\n  background-size: contain;\n  animation: loadingRotate 0.5s infinite linear;\n}\n\n@keyframes loadingRotate {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);      \n  }\n}\n\n.design-room-login-popup__inner {\n  width: 808px;\n  height: 483px;\n  background-color: #fff;\n  border-radius: 14px;\n  position: relative;\n  opacity: 0;\n  transform: translateZ(0);\n}\n\n.design-room-login-popup__close {\n  width: 28px;\n  height: 28px;\n  cursor: pointer;\n  position: absolute;\n  right: 16px;\n  top: 16px;\n}\n\n",document.head.appendChild(t),e.ele=r},this.env=t.env||"release",this.clientId=t.clientId||"1189857435",this.customParams=t.customParams||{},this.init()}a.prototype.on=function(t,e){return this.eventHandlers[t]=e,this},a.prototype.create=function(){var t,e;return this.ele&&(document.body.appendChild(this.ele),t=document.getElementById("accountPage"),e=document.querySelector(".design-room-login-popup__inner"),t)&&(t.onload=function(){e.style.opacity="1"}),void 0!==window.addEventListener?window.addEventListener("message",this.messageHandler,!1):void 0!==window.attachEvent&&window.attachEvent("onmessage",this.messageHandler),this},a.prototype.close=function(){var t=this.eventHandlers[o.EventName.CLOSE];return t&&t(),this.ele&&document.body.removeChild(this.ele),void 0!==window.removeEventListener?window.removeEventListener("message",this.messageHandler,!1):void 0!==window.detachEvent&&window.detachEvent("onmessage",this.messageHandler),this},a.prototype.init=function(){this.createDialog()},a.prototype.getContent=function(){var t={theme:"mtxx",client_language:"zh-Hans",client_params:encodeURIComponent(JSON.stringify({loginFrom:"designroomLoginPopup"})),custom_css_link:encodeURIComponent("https://titan-img.meitudata.com/xiuxiu/official/web-xiuxiu-official/pc/css/login1.css"),settings:encodeURIComponent(JSON.stringify({clientId:this.clientId,callback:this.customParams.callback,redirectCallback:"",relogin:!0,page:{name:"",title:"",description:""},displayOtherLoginLink:!0,enableMeituAppScan:!0,enableMineLogin:!0,showThirdPartyAccounts:!0}))};t=(0,i.getLoginPageUrl)({env:this.env,clientId:this.clientId,query:n(n({},t),this.customParams)});return'<div class="desinRoomLoginModal" style="width: 100%;height: 100%;">\n    <div class="portalContent" style="display: flex;justify-content: space-between;">\n      <div class="leftSection" style="width: 280px; ">\n      <img src="https://titan-img.meitudata.com/xiuxiu/official/web-xiuxiu-official/pc/image/loginBanner.svg" style="width: 280px;\n      height: 483px;" alt="\u7f8e\u56fe\u79c0\u79c0banner">\n      </div>\n      <div class="rightSection" style="width: 528px;">\n        <div class="loginPopup" style="height: 483px;">\n          <iframe\n            id=\'accountPage\'\n            src='.concat(t,'\n            style="width: 350px;height: 483px; min-height:483px;border: none;borderRadius: 12px;margin-left:89px;"\n          />\n        </div>\n      </div>\n    </div>\n  </div>')},e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventName=void 0,e.EventName={SUCCESS:"success",FAIL:"fail",CLOSE:"close"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLoginPageUrl=void 0,e.getLoginPageUrl=function(t){var e=t.query,r=t.env,n=(t=t.clientId,r="release"===r?"":r,"");return e&&"{}"!==JSON.stringify(e)&&(n=Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t]||"")})).join("&")),"https://".concat(r,"account.meitu.com/#!/web/quick_login?client_id=").concat(t,"&").concat(n)}},,,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},,function(t,e,r){},function(t,e,r){},function(t,e,r){},,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},,,,,,,,,,,,,,,,,,function(t,e,r){},,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return A}));var n,o,i,a=r(4),c=r(11),u=r(8),s=(e=r(126),r.n(e)),l=(e=r(3),(i=n=n||{}).Release="release",i.Beta="beta",i.Test="test",(i=o=o||{})[i.Success=1]="Success",i[i.SuccessButChange=2]="SuccessButChange",i[i.ErrorInServer=100]="ErrorInServer",i[i.ErrorInProtocol=200]="ErrorInProtocol",i[i.ErrorInBody=201]="ErrorInBody",i[i.ErrorInUnMatch=202]="ErrorInUnMatch","1"),f="_GID_PROFILE_",d="_GID_SDK_",h=1,p="_GID_SDK_PROFILE_",y=(i={},Object(e.a)(i,n.Release,"//gondar-web.meitustat.com/refresh_gid"),Object(e.a)(i,n.Beta,"//test.gid-web.meitustat.com/refresh_gid"),Object(e.a)(i,n.Test,"//test.gid-web.meitustat.com/refresh_gid"),i),g=(i={},Object(e.a)(i,o.Success,"\u8bf7\u6c42\u6210\u529f"),Object(e.a)(i,o.SuccessButChange,"\u8bf7\u6c42\u6210\u529f\uff0c\u8bbe\u5907\u4fe1\u606f\u4e0egid\u6709\u53d8\u5316"),Object(e.a)(i,o.ErrorInServer,"\u670d\u52a1\u7aef\u5185\u90e8\u9519\u8bef"),Object(e.a)(i,o.ErrorInProtocol,"\u534f\u8bae\u89e3\u6790\u9519\u8bef(\u53ef\u80fd\u7531\u4e8e\u534f\u8bae\u88ab\u7834\u89e3\u3001\u5ba2\u6237\u7aef\u7ec4\u88c5\u4e0a\u62a5\u6570\u636e\u5b9e\u73b0\u6709\u95ee\u9898\u3001\u6570\u636e\u89e3\u5bc6\u51fa\u9519\u7b49\u95ee\u9898\u5f15\u8d77)"),Object(e.a)(i,o.ErrorInBody,"\u4e0a\u62a5\u6570\u636ebody json\u683c\u5f0f\u9519\u8bef"),Object(e.a)(i,o.ErrorInUnMatch,"\u4e0a\u62a5gid\u4e0d\u5b58\u5728\u6216\u8005gid\u4e0e\u65e7\u8bbe\u5907\u4fe1\u606f\u5339\u914d\u4e0d\u4e0a(\u53ef\u80fd\u7531\u4e8e\u672c\u5730\u6570\u636e\u88ab\u7be1\u6539\u3001\u6570\u636e\u534f\u8bae\u88ab\u7834\u89e3\u4fee\u6539\u3001\u6216\u8005\u672c\u5730\u6570\u636e\u5b58\u50a8\u903b\u8f91\u5b9e\u73b0\u6709\u95ee\u9898)"),r(437));function m(){return Object(g.a)(d,h,{upgrade:function(t){t.createObjectStore(p)}})}function v(){return(v=Object(c.a)(Object(a.a)().mark((function t(){var e,r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:return e=(e=t.sent).transaction(p,"readonly"),t.next=6,Promise.all([e.store.get(f),e.done]);case 6:return e=t.sent,r=(r=Object(u.a)(e,1))[0],t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(c.a)(Object(a.a)().mark((function t(e){var r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:return r=(r=t.sent).transaction(p,"readwrite"),t.next=6,Promise.all([r.store.put(e,f),r.done]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var w=r(1194),O=r(1195);function x(){return(x=Object(c.a)(Object(a.a)().mark((function t(){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(w.a)(f));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=Object(c.a)(Object(a.a)().mark((function t(e){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(O.a)(f,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}r(1196);e=r(149);var _=r.n(e);function E(){return(E=Object(c.a)(Object(a.a)().mark((function t(){var e,r,n,o,i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=_.a.get(f),i=[],e&&(i=e.split(",")),i=Object(u.a)(i,4),r=i[0],n=i[1],o=i[2],i=i[3],t.abrupt("return",e&&n&&!isNaN(+o)&&i?{gid:r,mfp:n,mfp_time:+o,g_uuid:i}:{});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(c.a)(Object(a.a)().mark((function t(e){var r,n,o,i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.gid,r=e.mfp,n=e.mfp_time,o=e.g_uuid,i=[i,r,n,o].join(","),t.abrupt("return",_.a.set(f,i));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=r(1198),L="1.0.0-rc.1",I=r(504),T=r(139);function M(){return(M=Object(c.a)(Object(a.a)().mark((function t(e,r){var i,c,s;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=Object(u.a)(e,3))[0],i[1],i[2],t.next=3,Object(S.a)();case 3:i=t.sent,s=Object(u.a)(i,2),c=s[0],s=void 0===(s=s[1])?[,Date.now()]:s,s=(s=Object(u.a)(s,2))[1],c={mfp:c,mfp_time:s},t.next=12;var a=e,f=c,d=r;return new Promise((function(t){var e=f.mfp,r=f.mfp_time,i=(s=Object(u.a)(a,3))[0],c=s[1],s=s[2],h=null!=(h=(null==i?void 0:i.gid)||(null==c?void 0:c.gid)||(null==s?void 0:s.gid))?h:"",p=(null==i?void 0:i.mfp)||(null==c?void 0:c.mfp)||(null==s?void 0:s.mfp),g=(null==i?void 0:i.mfp_time)||(null==c?void 0:c.mfp_time)||(null==s?void 0:s.mfp_time),m=(c=null!=(i=(null==i?void 0:i.g_uuid)||(null==c?void 0:c.g_uuid)||(null==s?void 0:s.g_uuid))?i:"")||Object(T.a)();s={gid:h,current_info:{g_uuid:m,mfp:e,mfp_time:r},old_info:c&&p&&g?{g_uuid:c,mfp:p,mfp_time:g}:{},sdk_version:L},i=Object(I.b)(JSON.stringify(s)),h=(null==d?void 0:d.env)&&y[null==d?void 0:d.env]||y[n.Release],c={version:l,data:i};null!=d&&d.debug,fetch(h,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(c)}).then((function(t){return null==t?void 0:t.text()})).then((function(n){try{var i="",a=Object(I.a)(n),c=JSON.parse(a);[o.Success,o.SuccessButChange].includes(null==c?void 0:c.state)&&(i=null==c?void 0:c.gid,null!=d)&&d.debug,t({gid:i,mfp:e,mfp_time:r,g_uuid:m})}catch(n){}}))}));case 12:return s=t.sent,t.abrupt("return",s);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=Object(c.a)(Object(a.a)().mark((function t(e,r){var n,o,i,c;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(u.a)(r,3),n=i[0],o=i[1],i=i[2],c=[],s()(e,n)||c.push(function(){return b.apply(this,arguments)}(e)),s()(e,o)||c.push(function(){return j.apply(this,arguments)}(e)),s()(e,i)||c.push(function(){return k.apply(this,arguments)}(e)),t.next=7,Promise.all([c]);case 7:return t.abrupt("return",null==e?void 0:e.gid);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(Object(a.a)().mark((function t(e){var r,n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([function(){return v.apply(this,arguments)}(),function(){return x.apply(this,arguments)}(),function(){return E.apply(this,arguments)}()]);case 2:return r=t.sent,t.next=5,function(){return M.apply(this,arguments)}(r,e);case 5:return n=t.sent,t.abrupt("return",function(){return P.apply(this,arguments)}(n,r));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return l}));e=r(339);var n=r.n(e),o=(e=r(289),r.n(e)),i=r(3),a=(e=r(381),r.n(e));function c(t,e){return a()(e)?Object.keys(e).reduce((function(r,n){return Object.assign(r,Object(i.a)({},t(n),c(t,e[n])))}),{}):Array.isArray(e)?e.map(c.bind(null,t)):e}function u(t){return c(o.a,t)}function s(t){return c(n.a,t)}function l(t,e){return function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];return Object.keys(t).reduce((function(r,o){return Object.assign(r,Object(i.a)({},n.includes(o)?o:e(o),t[o]))}),{})}(t,n.a,e)}r(493)},,,,,,function(t,e,r){"use strict";function n(t,e){try{var r=JSON.parse(localStorage.getItem(t));return null==r?e:r}catch(t){return e}}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";function n(t,e){localStorage.setItem(t,JSON.stringify(e))}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";function n(t){localStorage.removeItem(t)}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(e){return setTimeout(e,t)}))}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return Ft})),r.d(e,"c",(function(){return Gt})),r.d(e,"b",(function(){return zt}));var n=r(8),o=r(4),i=r(11),a=(e=r(126),r.n(e)),c=(e=r(149),r.n(e)),u="_mfp",s="_mfpf",l="_mfp_components",f="meitu",d=1,h="fingerprint";function p(){return(p=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[c.a.get(u),(i=o=e=i=o=e=void 0,e=null!=(e=null==(e=c.a.get(s))?void 0:e.split(","))?e:[],r=(e=Object(n.a)(e,5))[0],o=e[1],i=e[2],a=e[3],e=e[4],o=Number(o),i=Number(i),r&&!isNaN(o)&&!isNaN(i)&&a&&e?[r,o,i,[a,e]]:void 0)]);case 1:case"end":return t.stop()}var e,r,o,i,a}),t)})))).apply(this,arguments)}function y(){return(y=Object(i.a)(Object(o.a)().mark((function t(e,r){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.a.set(u,e),c.a.set(s,r.join(","));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.a.remove(u),c.a.remove(s);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var m=r(503),v=(e=window.navigator.userAgent,/(iPhone|iPad|iPod|iOS)/gi.test(e)),b=/android|adr/gi.test(e),w=(/isDeviceSupport64Bit:true/gi.test(e),/(iPhone|iPad|iPod|iOS|Android|adr|Windows Phone|SymbianOS)/gi.test(e)),O=/MTWebView\/(([0-9]+)\.([0-9]+)\.([0-9]+)(?:-([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?(?:\+[0-9A-Za-z-]+)?)/i,x=/iPhone|iPad|iPod|iOS/i,j=/android|adr/i;function _(){var t=navigator.userAgent.match(O);if(t)return t[1]}var E,k=r(193),S=r(3),L="mt-hogger",I=5e3,T=500,M=((e=W=W||{}).NoneOutline="\uaa5b",e.NoneSingle="\uaa5c",e.Close="\uaaaa",e.CloseOutline="\uaaab",e.Check="\uaaba",e.CheckOutline="\uaabb",e.Info="\uabaa",e.Invalid="\uabba",e.Approved="\uabca",e.Error1="\uabda",e.Error="\uabdb",e.Warning="\uabea",e.Question="\uabfa",e.Lock="\uaeca",e.Unlock="\uaeda",e.Heart="\ufa3a",e.Fav="\ufada",e.Publish="\ufbaa",W.NoneOutline,W.NoneSingle,W.Close,W.CloseOutline,W.Check,W.CheckOutline,W.Info,W.Invalid,W.Approved,W.Error1,W.Error,W.Warning,W.Question,W.Lock,W.Unlock,W.Heart,W.Fav,W.Publish,(e=E=E||{}).up="up",e.upMirrored="up-mirrored",e.down="down",e.downMirrored="down-mirrored",e.right="right",e.rightMirrored="right-mirrored",e.left="left",e.leftMirrored="left-mirrored",E.up,E.upMirrored,E.down,E.downMirrored,E.right,E.rightMirrored,E.left,E.leftMirrored,(W=ft=ft||{}).XiuXiu="XiuXiu",W.MeiYan="MeiYan",W.MeiPai="MeiPai",W.Wink="Wink",W.Chic="Chic",W.DanBo="DanBo",W.Other="Other",e={},Object(S.a)(e,ft.XiuXiu,{scheme:"meituxiuxiu://",package:"com.mt.mtxx.mtxx"}),Object(S.a)(e,ft.MeiYan,{scheme:"myxjpush://",package:"com.meitu.meiyancamera"}),Object(S.a)(e,ft.MeiPai,{scheme:"mtmv://",package:"com.meitu.meipaimv"}),Object(S.a)(e,ft.Wink,{scheme:"mtwink://",package:"com.meitu.wink"}),Object(S.a)(e,ft.Chic,{scheme:"chicpush://",package:"com.meitu.chic"}),Object(S.a)(e,ft.DanBo,{scheme:"mtbaby://",package:"com.meitu.mtbaby"}),(E=pt=pt||{}).GET="GET",E.POST="POST",E.PATCH="PATCH",E.PUT="PUT",E.DELETE="DELETE",r(5)),P=(r(422),r(125)),A=r(106),C=r(166);function R(t,e){if(!O.test(navigator.userAgent))throw new Error("MTWebView not found");var r=_();if(!r)throw new Error("MTWebView version not found");if(!Object(k.b)(r))throw new Error("invalid MTWebView version");if(!Object(k.a)(r,e,">="))throw new Error("MTWebView version should be >= ".concat(e," on ").concat(t))}function N(t){var e=t.iosVersion,r=t.androidVersion;if(!Object(k.b)(e))throw new Error("invalid iOS version specified");if(!Object(k.b)(r))throw new Error("invalid Android version specified");var n=function(){if(x.test(navigator.userAgent))return"ios";if(j.test(navigator.userAgent))return"android";throw new Error("platform not support")}();switch(n){case"ios":R(n,e);break;case"android":R(n,r)}}function D(t,e){return function(){var r=(n=((n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n])||{}).skipValidator,n=void 0===(n=n.protocol)?L:n;if(!0===r||function(t){try{return["getAppInfo","getPreviewImage"].some((function(e){return t.includes(e)}))&&N({iosVersion:"2.3.7",androidVersion:"4.8.3"}),["getAppInstalled"].some((function(e){return t.includes(e)}))&&N({iosVersion:"2.3.10",androidVersion:"4.8.4"}),["bindPhoneNumber"].some((function(e){return t.includes(e)}))&&N({iosVersion:"2.3.15",androidVersion:"4.8.5"}),["track","getCurrentABTesting","reportABTesting"].some((function(e){return t.includes(e)}))&&N({iosVersion:"2.3.17",androidVersion:"4.8.6"}),["getShareInfo","setShareInfo","directToShare","showShareBottomSheet"].some((function(e){return t.includes(e)}))&&N({iosVersion:"2.5.0",androidVersion:"4.8.8"}),["saveVideoToPhotosAlbum","saveImageToPhotosAlbum"].some((function(e){return t.includes(e)}))&&N({iosVersion:"2.6.0",androidVersion:"4.8.9"}),["canIUse"].some((function(e){return t.includes(e)}))&&N({iosVersion:"2.7.0",androidVersion:"4.9.0"}),["chooseVideo","compressVideo","getVideoInfo","createUploadTask","abortUploadTask","observeUploadProgress"].some((function(e){return t.includes(e)}))&&N({iosVersion:"3.0.0",androidVersion:"4.9.1"}),["chooseMedia","getPreviewVideo"].some((function(e){return t.includes(e)}))&&N({iosVersion:"3.1.0",androidVersion:"4.9.2"}),["clipVideo"].some((function(e){return t.includes(e)}))&&N({iosVersion:"3.1.3",androidVersion:"4.9.3"}),["request"].some((function(e){return t.includes(e)}))&&N({iosVersion:"3.2.1",androidVersion:"4.9.4"}),["getStorage","getStorageInfo","removeStorage","setStorage","downloadFile","abortDownload"].some((function(e){return t.includes(e)}))&&N({iosVersion:"3.3.0",androidVersion:"4.9.5"}),!0}catch(n){return!1}}([t]))return e.apply(void 0,arguments);throw r=null!=(r=_())?r:"0.0.0",new H("WebView (".concat(r,"): Not supported ").concat(t),{webViewVersion:r,pathname:t,protocol:n})}}r(345);var F=r(33),B=r(32),G=r(37),U=r(38),z=r(39),W=r(435),K=(e=function(t){Object(U.a)(r,t);var e=Object(z.a)(r);function r(t,n){var o;return Object(B.a)(this,r),(t=e.call(this,t)).cause=void 0,t.stack=void 0,null!=(o=Error.captureStackTrace)&&o.call(Error,Object(G.a)(t),t.constructor),t.cause=n,t.name=t.constructor.name,t}return Object(F.a)(r)}(Object(W.a)(Error)),function(t){Object(U.a)(r,t);var e=Object(z.a)(r);function r(){return Object(B.a)(this,r),e.apply(this,arguments)}return Object(F.a)(r)}(e)),H=function(t){Object(U.a)(r,t);var e=Object(z.a)(r);function r(){return Object(B.a)(this,r),e.apply(this,arguments)}return Object(F.a)(r)}(e),Y=function(t){Object(U.a)(r,t);var e=Object(z.a)(r);function r(){return Object(B.a)(this,r),e.apply(this,arguments)}return Object(F.a)(r)}(e),V=function(t){Object(U.a)(r,t);var e=Object(z.a)(r);function r(){return Object(B.a)(this,r),e.apply(this,arguments)}return Object(F.a)(r)}(e);r(628);var X=r(1197),q=r(21),$=["exec"],Z=0;function J(t){return Q.apply(this,arguments)}function Q(){return(Q=Object(i.a)(Object(o.a)().mark((function t(e){var r,n,i=arguments;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=1<i.length&&void 0!==i[1]?i[1]:{},n=2<i.length?i[2]:void 0,t.abrupt("return",new Promise((function(t,o){var i,a,c,u,s=void 0===(f=n.timeout)?I:f,l=void 0===(f=n.protocol)?L:f,f=void 0===(f=n.once)||f,d=void 0!==(d=n.decode)&&d,h=void 0===(h=n.concurrency)||h,p=n.onProgress;"function"!=typeof(null==(i=MTJs)?void 0:i.nativeCall)?(i=null!=(i=_())?i:"0.0.0",o(new H("[".concat(e,"] MTJs not provided"),{webViewVersion:i,pathname:e,protocol:l}))):(a=!1,h&&(++Z,Object.assign(r,{_accumulator:Z})),u=MTJs.nativeCall(Object(S.a)({},l,e),r,(function(e){a||(clearTimeout(c),null!=p&&p([e,u]),t([e,u]))}),{decode:d,once:f}),Number.isFinite(s)&&(c=window.setTimeout((function(){o(new Y("[".concat(e,"] MTJs timeout"),{timeout:s,pathname:e,protocol:l})),a=!0}),s)))})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(){return et.apply(this,arguments)}function et(){return(et=Object(i.a)(Object(o.a)().mark((function t(e,r){var i,a,c=arguments;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=void 0===(i=(a=2<c.length&&void 0!==c[2]?c[2]:{}).exec)?J:i,a=Object(q.a)(a,$),t.abrupt("return",i(e,r,a).then((function(t){var e,r=(t=Object(n.a)(t,2))[0],o=(t=t[1],r.meta.code),i=[r.response,r.meta,t];if(o)throw new K(null!=(e=r.meta.message)?e:"error code: ".concat(o),{code:o,response:r.response,bridgeOptions:t});return i})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}D("canIUse",(function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("canIUse",(e=(t=Object(M.a)({},t)).protocol,t=t.pathname,Object.assign({},{protocol:void 0===e?"mt-hogger":e,pathname:t})),Object.assign({},r))}));var rt=D("getAppInfo",(function(){return tt("getAppInfo",void 0,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}));D("getStorage",(function(t){return tt("getStorage",{key:t.key,scope:t.scope},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})})),D("getStorageInfo",(function(){return tt("getStorageInfo",{scope:0<arguments.length&&void 0!==arguments[0]?arguments[0]:""},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})})),D("removeStorage",(function(t){return tt("removeStorage",{key:t.key,scope:t.scope},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})})),D("setStorage",(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("setStorage",function(t){var e=t.key,r=t.scope,n=t.value,o=void 0===(o=t.age)?2592e3:o;if("string"!=typeof n)throw new V("value must be string",t);return{key:e,scope:r,value:n,age:o}}(t),e)})),D("bindPhoneNumber",(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("bindPhoneNumber",function(t){var e=null!=(e=(t=0<arguments.length&&void 0!==t?t:{}).type)?e:"fullscreen",r=null!=(r=t.skip)&&r,n=null!=(n=t.associated)&&n;return Object.assign({},t,{type:e,skip:r,associated:n})}(t),Object.assign({timeout:1/0},e))})),r(1188),r(16),r(157);var nt=["exec"],ot=function(t){return"".concat(L,":execMockIterator[").concat(t,"]")};function it(t){return at.apply(this,arguments)}function at(){return(at=Object(C.a)((function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object(o.a)().mark((function a(){var c,u,s,l,f,d,h;return Object(o.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=r.timeout,c=void 0===s?1/0:s,s=r.once,u=void 0!==s&&s,s=void 0===(s=r.timeInterval)?T:s,l=Object.assign({},r,{timeout:c,once:u}),f=null,d=function(){return new Promise((function(r,a){var s,d,h,p;if(!u&&null!=(s=f)&&null!=(s=s.detail)&&s.length)s=(null==(s=f)||null==(s=s.detail)?void 0:s[1]).handler,d=0,h=function(){var t=Object(i.a)(Object(o.a)().mark((function t(e){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.clearTimeout(d),r(e.detail);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=ot(s),window.addEventListener(p,h,{once:!0}),Number.isFinite(c)&&(d=window.setTimeout((function(){var e;window.removeEventListener(p,h),a(new Y("[".concat(t,"] protocol timeout in execIterator"),{timeout:c,pathname:t,protocol:null!=(e=l.protocol)?e:L}))}),c));else try{J(t,e,Object(M.a)(Object(M.a)({},l),{},{onProgress:function(t){var e,o,i;return(i=(void 0===(i=Object(n.a)(t,2)[1])?{handler:1/0}:i).handler)===1/0?a(new Error("execIterator: MTJs.nativeCall should return data")):u?r(t):(e=new CustomEvent(ot(i),{detail:t}),o=null==(o=f)||null==(o=o.detail)||null==(o=o[1])?void 0:o.handler,f=e,void(o!==i?r(t):window.dispatchEvent(e)))}}))}catch(s){a(s)}}))};case 4:return a.next=7,Object(A.a)(d());case 7:if(null!=(h=a.sent)&&h[0]){a.next=10;break}return a.abrupt("break",17);case 10:return a.next=12,h;case 12:if(u)return a.next=15,Object(A.a)(Object(X.a)(s));a.next=15;break;case 15:a.next=4;break;case 17:case"end":return a.stop()}}),a)}))()}))).apply(this,arguments)}function ct(){return ut.apply(this,arguments)}function ut(){return(ut=Object(C.a)((function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object(o.a)().mark((function i(){var a,c,u,s,l,f,d,h;return Object(o.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:s=void 0===(s=r.exec)?it:s,a=Object(q.a)(r,nt),s=s(t,e,a),c=a=!1,o.prev=4,s=Object(P.a)(s);case 6:return o.next=8,Object(A.a)(s.next());case 8:if(a=!(d=o.sent).done){if(d=Object(n.a)(d.value,2),l=d[0],f=d[1],d=l.meta.code)throw new K(null!=(h=l.meta.message)?h:"error code: ".concat(d),{code:d,response:l.response,bridgeOptions:f});o.next=13}else o.next=18;break;case 13:return o.next=15,[l.response,l.meta,f];case 15:a=!1,o.next=6;break;case 18:o.next=24;break;case 20:o.prev=20,o.t0=o.catch(4),c=!0,u=o.t0;case 24:if(o.prev=24,o.prev=25,a&&null!=s.return)return o.next=29,Object(A.a)(s.return());o.next=29;break;case 29:if(o.prev=29,c)throw u;o.next=32;break;case 32:return o.finish(29);case 33:return o.finish(24);case 34:case"end":return o.stop()}}),i,null,[[4,20,24,34],[25,,29,33]])}))()}))).apply(this,arguments)}D("createUploadTask",(function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("createUploadTask",(e=t.method,t.type,Object.assign({},t,{method:void 0===e?"POST":e})),Object.assign({timeout:1/0},r))})),D("observeUploadProgress",function(){var t=Object(C.a)((function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)().mark((function r(){var i,a,c,u,s,l;return Object(o.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u=ct("observeUploadProgress",Object.assign({},{taskId:t}),e),a=i=!1,r.prev=3,u=Object(P.a)(u);case 5:return r.next=7,Object(A.a)(u.next());case 7:if(i=!(s=r.sent).done)return s=s.value,l=(void 0===(l=(l=Object(n.a)(s,1))[0])?{progress:0}:l).progress,r.next=12,s;r.next=17;break;case 12:if(100<=l)return r.abrupt("break",17);r.next=14;break;case 14:i=!1,r.next=5;break;case 17:r.next=23;break;case 19:r.prev=19,r.t0=r.catch(3),a=!0,c=r.t0;case 23:if(r.prev=23,r.prev=24,i&&null!=u.return)return r.next=28,Object(A.a)(u.return());r.next=28;break;case 28:if(r.prev=28,a)throw c;r.next=31;break;case 31:return r.finish(28);case 32:return r.finish(23);case 33:case"end":return r.stop()}}),r,null,[[3,19,23,33],[24,,28,32]])}))()}));return function(e){return t.apply(this,arguments)}}()),D("abortUploadTask",(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("abortUploadTask",Object.assign({},{taskId:t}),e)}));var st=["timeout","persisted","useCached"];D("downloadFile",function(){var t=Object(C.a)((function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object(o.a)().mark((function i(){var a,c,u,s,l,f;return Object(o.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:s=ct("downloadFile",(d=(p=h=d=void 0)===(d=(i=Object(M.a)(Object(M.a)({},e),{},{src:t})).timeout)?6e4:d,h=void 0!==(h=i.persisted)&&h,p=void 0===(p=i.useCached)||p,i=Object(q.a)(i,st),Object(M.a)({timeout:d,persisted:h,useCached:p},i)),r),c=a=!1,o.prev=3,s=Object(P.a)(s);case 5:return o.next=7,Object(A.a)(s.next());case 7:if(a=!(l=o.sent).done)return l=l.value,f=void 0===(f=(f=Object(n.a)(l,1))[0].progress)?0:f,o.next=12,l;o.next=17;break;case 12:if(100<=f)return o.abrupt("break",17);o.next=14;break;case 14:a=!1,o.next=5;break;case 17:o.next=23;break;case 19:o.prev=19,o.t0=o.catch(3),c=!0,u=o.t0;case 23:if(o.prev=23,o.prev=24,a&&null!=s.return)return o.next=28,Object(A.a)(s.return());o.next=28;break;case 28:if(o.prev=28,c)throw u;o.next=31;break;case 31:return o.finish(28);case 32:return o.finish(23);case 33:case"end":return o.stop()}var i,d,h,p}),i,null,[[3,19,23,33],[24,,28,32]])}))()}));return function(e){return t.apply(this,arguments)}}()),D("abortDownload",(function(t){return tt("abortDownload",{id:t},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})})),D("chooseMedia",function(){var t=Object(i.a)(Object(o.a)().mark((function t(e){var r,i=arguments;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=1<i.length&&void 0!==i[1]?i[1]:{},t.abrupt("return",tt("chooseMedia",function(t){var e=null!=(e=(t=0<arguments.length&&void 0!==t?t:{}).sourceType)?e:["album","camera"],r=null!=(r=t.camera)?r:"back",o=null!=(o=t.minDuration)?o:0,i=null!=(i=t.maxDuration)?i:60,a=void 0!==(a=t.sameSelected)&&a,c=void 0!==(c=t.showUploadTips)&&c,u=t.extraBizData,s=null!=(s=t.countRange)?s:[1,1],l=(s=Object(n.a)(s,2))[0];if((s=s[1])<l)throw new V("min not more than max in countRange",t);if(i<o)throw new V("minDuration not more than maxDuration",t);return Object.assign({},t,{countRange:[l,s],sourceType:e,minDuration:o,maxDuration:i,camera:r,sameSelected:a,showUploadTips:c,extraBizData:u})}(e),Object.assign({timeout:1/0},r)));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),D("getPreviewImage",(function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=(o=e||{}).width,o=o.height;return tt("getPreviewImage",Object.assign({},e,{src:t,width:void 0===n?0:n,height:void 0===o?0:o}),r)})),D("saveImageToPhotosAlbum",(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("saveImageToPhotosAlbum",Object.assign({},{src:t}),e)})),D("getPreviewVideo",(function(t){return tt("getPreviewVideo",{src:t},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}));var lt,ft,dt=["type"];D("saveVideoToPhotosAlbum",(function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return tt("saveVideoToPhotosAlbum",(t=void 0===(t=(e=Object(M.a)(Object(M.a)({},e),{},{src:t})).type)?"video/mp4":t,e=Object(q.a)(e,dt),Object.assign({},{type:t},e)),r)})),D("clipVideo",function(){var t=Object(i.a)(Object(o.a)().mark((function t(e,r){var i,a=arguments;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=2<a.length&&void 0!==a[2]?a[2]:{},t.abrupt("return",tt("clipVideo",function(t,e){e=[].concat(e);var r=(e=Object(n.a)(e,2))[0];if(-1===(e=void 0===(e=e[1])?-1:e)?0<r:0<=r&&r<e)return{src:t,startTime:r,endTime:e};throw new V("endTime must be greater than startTime",{startTime:r,endTime:e})}(e,r),Object.assign({timeout:1/0,once:!1},i)));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),(ft=lt=lt||{})[ft.Action=1]="Action",ft[ft.Debug=2]="Debug",ft[ft.Auto=3]="Auto",ft[ft.PV=4]="PV",ft[ft.Crash=5]="Crash",D("track",(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:lt.Action,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return tt("track",Object.assign({},{eventId:t,data:e,type:r}),n)})),D("getCurrentABTesting",(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("getCurrentABTesting",function(t){var e=null!=(e=(t=0<arguments.length&&void 0!==t?t:{}).excludePublishedCodes)&&e;return Object.assign({},t,{excludePublishedCodes:e})}(t),e)})),D("reportABTesting",(function(t){return tt("reportABTesting",t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})})),D("getShareInfo",(function(){return tt("getShareInfo",void 0,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}));var ht,pt,yt=["type","images","previewEntry"];function gt(t){return new Promise((function(e){var r,o=_();!o||v&&Object(k.a)(o,"2.3.7","<")||b&&Object(k.a)(o,"4.8.3","<")?e(void 0):(r=Date.now(),o=setTimeout((function(){e({duration:Date.now()-r,error:new Error("web view component time out")})}),3072),rt().then((function(i){i=Object(n.a)(i,1)[0].gid;try{e({duration:Date.now()-r,value:function(t,e){var r=document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("web view component canvas context not found");if(r.width=256,r.height=64,n.textBaseline="alphabetic",n.fillStyle="#0070dd",n.fillRect(100,1,62,20),n.fillStyle="#333",n.font='11pt "Times New Roman"',n.fillText(t,2,15),n.fillStyle="rgba(0, 112, 221, 0.66)",n.font="18pt Arial",n.fillText(e,4,45),t=r.toDataURL())return t;throw new Error("web view component canvas data url not found")}(t,null!=i?i:Date.now().toString())})}catch(o){e({duration:Date.now()-r,error:new Error(null!=(i=null==o?void 0:o.message)?i:"web view component canvas error")})}})).catch((function(t){e({duration:Date.now()-r,error:new Error(null!=(t=null==t?void 0:t.message)?t:"web view component error")})})).finally(clearTimeout.bind(null,o)))}))}D("setShareInfo",(function(t){var e,r,n,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("setShareInfo",(e=void 0===(e=t.type)?"Link":e,r=void 0===(r=t.images)?[]:r,n=void 0!==(n=t.previewEntry)&&n,t=Object(q.a)(t,yt),r=[].concat(r),Object.assign({},{type:e,images:r,previewEntry:n},t)),o)})),D("directToShare",(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return tt("directToShare",Object.assign({},{channel:t}),Object.assign({timeout:1/0},e))})),D("showShareBottomSheet",(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return tt("showShareBottomSheet",Object.assign({},Object(M.a)({channels:t,forwardEntry:!1},e)),Object.assign({timeout:1/0},r))})),(pt=ht=ht||{}).href="href",pt.iframe="iframe";var mt=void 0;function vt(){return(vt=Object(i.a)(Object(o.a)().mark((function t(e){var r,i,a,c,u,s,l,f,d;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),mt=mt||m.a.load(Object.assign({},e,{monitoring:!1})),t.next=4,mt;case 4:return i=t.sent,t.next=7,Promise.all([i.get(),Promise.resolve(w?{value:window.navigator.userAgent,duration:0}:void 0),new Promise((function(t,e){if(w){var r=Date.now();try{var n,o,i=document.createElement("canvas").getContext("webgl"),a=null==i?void 0:i.getExtension("WEBGL_debug_renderer_info");i&&a?(n=i.getParameter(a.UNMASKED_VENDOR_WEBGL),o=i.getParameter(a.UNMASKED_RENDERER_WEBGL),t({duration:Date.now()-r,value:{vendor:n,renderer:o}})):t({duration:Date.now()-r,error:new Error("canvas or webgl not found")})}catch(e){t({duration:Date.now()-r,error:e})}}else t(void 0)}))]);case 7:return i=t.sent,u=Object(n.a)(i,3),a=u[0],s=a.visitorId,a=a.components,c=u[1],u=u[2],t.next=16,gt(s);case 16:return s=t.sent,l=Object.assign({},a,!!c&&{_userAgent:c},!!u&&{_webgl:u},!!s&&{_webview:s}),f=m.a.hashComponents(l),d=Date.now(),null!=e&&e.debug,t.abrupt("return",[f,l,d,d-r]);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var bt="1.0.0-rc.5",wt=["1.0.0-rc.5","3.3.6"],Ot=r(437);function xt(){return Object(Ot.a)(f,d,{upgrade:function(t){t.createObjectStore(h)}})}function jt(){return(jt=Object(i.a)(Object(o.a)().mark((function t(){var e,r,i;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt();case 2:return e=(e=t.sent).transaction(h,"readonly"),t.next=6,Promise.all([e.store.get(u),e.store.get(s),e.done]);case 6:return e=t.sent,i=Object(n.a)(e,2),r=i[0],i=i[1],t.abrupt("return",[r,i]);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(){return(_t=Object(i.a)(Object(o.a)().mark((function t(){var e,r;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt();case 2:return e=(e=t.sent).transaction(h,"readonly"),t.next=6,Promise.all([e.store.get(l),e.done]);case 6:return e=t.sent,r=(r=Object(n.a)(e,1))[0],t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Et(){return(Et=Object(i.a)(Object(o.a)().mark((function t(e,r){var n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt();case 2:return n=(n=t.sent).transaction(h,"readwrite"),t.next=6,Promise.all([n.store.put(e,u),n.store.put(r,s),n.done]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kt(){return(kt=Object(i.a)(Object(o.a)().mark((function t(e,r){var n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt();case 2:return n=(n=t.sent).transaction(h,"readwrite"),t.next=6,Promise.all([n.store.put([e,r],l),n.done]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function St(){return(St=Object(i.a)(Object(o.a)().mark((function t(){var e;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt();case 2:return e=(e=t.sent).transaction(h,"readwrite"),t.next=6,Promise.all([e.store.delete(u),e.store.delete(s),e.store.delete(l),e.done]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Lt=r(1194),It=r(1195),Tt=r(1196);function Mt(){return(Mt=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[Object(Lt.a)(u),Object(Lt.a)(s)]);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pt(){return(Pt=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(Lt.a)(l));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function At(){return(At=Object(i.a)(Object(o.a)().mark((function t(e,r){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(It.a)(u,e),Object(It.a)(s,r);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ct(){return(Ct=Object(i.a)(Object(o.a)().mark((function t(e,r){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(It.a)(l,[e,r]);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rt(){return(Rt=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Tt.a)(u),Object(Tt.a)(s),Object(Tt.a)(l);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nt(){return(Nt=Object(i.a)(Object(o.a)().mark((function t(e,r){var i,a,c,u,s,l,f,d,h,p;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=Object(n.a)(e,3),l=Object(n.a)(u[0],2),s=l[0],l=l[1],a=Object(n.a)(u[1],2),i=a[0],a=a[1],u=Object(n.a)(u[2],2),c=u[0],u=u[1],s&&s===(null==l?void 0:l[0]))return t.abrupt("return",[s,l]);t.next=3;break;case 3:if(i&&i===(null==a?void 0:a[0]))return t.abrupt("return",[i,a]);t.next=5;break;case 5:if(c&&c===(null==u?void 0:u[0]))return t.abrupt("return",[c,u]);t.next=7;break;case 7:return t.next=9,function(){return vt.apply(this,arguments)}(r);case 9:return s=t.sent,l=Object(n.a)(s,4),f=l[0],d=l[1],h=l[2],p=l[3],t.next=17,Promise.all([function(){return kt.apply(this,arguments)}(f,d),function(){return Ct.apply(this,arguments)}(f,d)]);case 17:return t.abrupt("return",[f,[f,h,p,wt.slice()]]);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Dt(){return(Dt=Object(i.a)(Object(o.a)().mark((function t(e,r){var i,c,u,s,l,f,d,h,p;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=Object(n.a)(r,3),c=Object(n.a)(f[0],2),i=c[0],c=c[1],s=Object(n.a)(f[1],2),u=s[0],s=s[1],f=Object(n.a)(f[2],2),l=f[0],f=f[1],h=Object(n.a)(e,2),d=h[0],h=h[1],p=[],d===i&&a()(h,c)||p.push(function(){return Et.apply(this,arguments)}(d,h)),d===u&&a()(h,s)||p.push(function(){return At.apply(this,arguments)}(d,h)),d===l&&a()(h,f)||p.push(function(){return y.apply(this,arguments)}(d,h)),t.next=8,Promise.all(p);case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ft(t){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(i.a)(Object(o.a)().mark((function t(e){var r,n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([function(){return jt.apply(this,arguments)}(),function(){return Mt.apply(this,arguments)}(),function(){return p.apply(this,arguments)}()]);case 2:return r=t.sent,t.next=5,function(){return Nt.apply(this,arguments)}(r,e);case 5:return n=t.sent,t.abrupt("return",function(){return Dt.apply(this,arguments)}(n,r));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Gt(t){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(i.a)(Object(o.a)().mark((function t(e){var r,i;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e);case 2:if(r=t.sent,i=r,i=Object(n.a)(i,2),i=Object(n.a)(i[1],4),i=(i=Object(n.a)(i[3],1))[0],Object(k.a)(bt,i,">"))return t.next=7,Promise.all([function(){return St.apply(this,arguments)}(),function(){return Rt.apply(this,arguments)}(),function(){return g.apply(this,arguments)}()]);t.next=10;break;case 7:return t.next=9,Ft(e);case 9:r=t.sent;case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zt(){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(i.a)(Object(o.a)().mark((function t(){var e;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return _t.apply(this,arguments)}();case 2:if(e=t.sent)return t.abrupt("return",e);t.next=4;break;case 4:return t.next=6,function(){return Pt.apply(this,arguments)}();case 6:if(e=t.sent)return t.abrupt("return",e);t.next=8;break;case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},,function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return u}));var n=r(8),o=(e=r(191),r.n(e)),i=["YYYY-MM-DD HH:mm:ss","YYYY/MM/DD","YYYYMMDD","YYYY-MM-DD","YYYYMMDDHH"];function a(t,e){if(t=function(t,e){var r;e=1<arguments.length&&void 0!==e?e:i;if(t)return o.a.isMoment(t)?t.isValid()?t.clone():void 0:t instanceof Date&&(r=o()(t)).isValid()||"number"==typeof t&&(r=o()(10===t.toString().length?+"".concat(t,"000"):t)).isValid()||"string"==typeof t&&/^\d{13}$/.test(t)&&(r=o()(+t)).isValid()||(r=o()(t,e.slice())).isValid()||(r=o()(t)).isValid()?r:void 0}(t,e),t)return t;throw new Error("invalid input")}function c(t){var e=(t=Object(n.a)(t,2))[0],r=(t=Object(n.a)(t[1],4))[1],o=t[2],i=(t=Object(n.a)(t[3],2))[0];t=t[1];return{mfp:e,mfp_gen_ts:r,mfp_gen_date:+a(r).format("YYYYMMDD"),mfp_gen_dur:o,mfp_sdk_ver:i,mfp_core_ver:t}}function u(t){if(t)return["_mfp_components",{mfp_components:JSON.stringify(t[1])}]}},function(t,e,r){"use strict";function n(t){var e=t.list,r=t.handleClick;t=t.topDis;return c.a.createElement("div",{className:"xdesign-nav-vip-entrance__inner",style:{marginTop:"".concat(t,"px")},onClick:function(t){t.stopPropagation(),r&&r()}},c.a.createElement("div",{className:"xdesign-nav-vip-entrance__title"}),c.a.createElement("div",{className:"xdesign-nav-vip-entrance__content"},e.map((function(t){return c.a.createElement("div",{className:"xdesign-nav-vip-entrance__item",key:t.title},c.a.createElement("div",{className:"xdesign-nav-vip-entrance__item__title"},t.title),c.a.createElement("div",{className:"xdesign-nav-vip-entrance__item__text"},t.content))}))),c.a.createElement("div",{className:"xdesign-nav-vip-entrance__button"},"\u7acb\u5373\u5f00\u901a"))}function o(t){var e=t.content;t=t.children;return c.a.createElement("div",null,t,c.a.createElement("div",{className:"xdesign-nav-vip-entrance__popover"},e))}var i=r(9),a=r.n(i),c=(i=r(0),r.n(i)),u=r(299);r(1117),r(1116),r(1115),e.a=function(t){var e=t.list,r=t.handleClick,i=(t=void 0===(t=t.topDis)?16:t,Object(u.b)().theme);return c.a.createElement("div",{onClick:function(){r&&r()},className:"xdesign-nav-vip-entrance"},c.a.createElement(o,{content:c.a.createElement(n,{list:e,topDis:t,handleClick:r})},c.a.createElement("div",{className:a()("xdesign-nav-vip-entrance__btn",{"xdesign-nav-vip-entrance__btn--dark":"dark"===i})})))}}]]);